# =============================================================================
# Template de configuration .env pour les clients P3000
# =============================================================================
# Copiez ce fichier vers .env et remplacez les valeurs par celles du client
# Fichier généré pour l'architecture multi-clients
# =============================================================================

# -----------------------------------------------------------------------------
# IDENTIFICATION DU CLIENT (pour les logs et debugging)
# -----------------------------------------------------------------------------
CLIENT_NAME=${CLIENT_NAME}
CLIENT_DOMAIN=${CLIENT_DOMAIN}

# -----------------------------------------------------------------------------
# DJANGO - Configuration de base
# -----------------------------------------------------------------------------
DEBUG=False
SECRET_KEY=${SECRET_KEY}
ALLOWED_HOSTS=${CLIENT_DOMAIN},www.${CLIENT_DOMAIN}

# -----------------------------------------------------------------------------
# BASE DE DONNÉES PostgreSQL
# -----------------------------------------------------------------------------
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
DATABASE_URL=postgresql://p3000user:${DB_PASSWORD}@localhost:5432/${DB_NAME}

# Ou variables séparées (alternative)
# DB_NAME=${DB_NAME}
# DB_USER=p3000user
# DB_PASSWORD=${DB_PASSWORD}
# DB_HOST=localhost
# DB_PORT=5432

# -----------------------------------------------------------------------------
# AWS S3 - Stockage des fichiers (Drive)
# -----------------------------------------------------------------------------
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_STORAGE_BUCKET_NAME=${S3_BUCKET_NAME}
AWS_S3_REGION_NAME=eu-north-1
AWS_S3_CUSTOM_DOMAIN=${S3_BUCKET_NAME}.s3.eu-north-1.amazonaws.com

# -----------------------------------------------------------------------------
# SÉCURITÉ - CORS et CSRF
# -----------------------------------------------------------------------------
CSRF_TRUSTED_ORIGINS=https://${CLIENT_DOMAIN},https://www.${CLIENT_DOMAIN}
CORS_ALLOWED_ORIGINS=https://${CLIENT_DOMAIN},https://www.${CLIENT_DOMAIN}

# Sécurité HTTPS
SECURE_SSL_REDIRECT=True
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True
SECURE_BROWSER_XSS_FILTER=True
SECURE_CONTENT_TYPE_NOSNIFF=True

# Cookies sécurisés
CSRF_COOKIE_SECURE=True
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_HTTPONLY=False
SESSION_COOKIE_HTTPONLY=True
SESSION_COOKIE_SAMESITE=Lax
CSRF_COOKIE_SAMESITE=Lax

# -----------------------------------------------------------------------------
# EMAIL (optionnel - pour les notifications)
# -----------------------------------------------------------------------------
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=${EMAIL_USER}
EMAIL_HOST_PASSWORD=${EMAIL_PASSWORD}

# -----------------------------------------------------------------------------
# CACHE REDIS (optionnel)
# -----------------------------------------------------------------------------
# Utiliser une DB Redis différente par client (0, 1, 2, etc.)
REDIS_URL=redis://localhost:6379/${REDIS_DB}

# -----------------------------------------------------------------------------
# LOGS
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FILE=/var/log/${CLIENT_NAME}/django.log

# -----------------------------------------------------------------------------
# ONLYOFFICE (partagé entre tous les clients)
# -----------------------------------------------------------------------------
ONLYOFFICE_SERVER_URL=http://127.0.0.1:8080
ONLYOFFICE_JWT_SECRET=${ONLYOFFICE_JWT_SECRET}
