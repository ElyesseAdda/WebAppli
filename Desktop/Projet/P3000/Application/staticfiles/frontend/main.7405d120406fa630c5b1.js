/*! For license information please see main.7405d120406fa630c5b1.js.LICENSE.txt */
(()=>{var __webpack_modules__={"./src/components/AgencyExpenses.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableContainer/TableContainer.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableCell/TableCell.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fa__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react-icons/fa */ "./node_modules/react-icons/fa/index.mjs");\n/* harmony import */ var _styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/tableStyles */ "./src/styles/tableStyles.js");\n\n\n\n\n\nconst ExpenseTypes = {\n  FIXED: "fixed",\n  PUNCTUAL: "punctual"\n};\nconst AgencyExpenses = () => {\n  const [expenses, setExpenses] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [openDialog, setOpenDialog] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedYear, setSelectedYear] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Date().getFullYear());\n  const [selectedMonth, setSelectedMonth] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Date().getMonth());\n  const [newExpense, setNewExpense] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    description: "",\n    amount: "",\n    type: ExpenseTypes.FIXED,\n    date: new Date(),\n    end_date: null,\n    category: "Salaire" // Par défaut\n  });\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [isEditing, setIsEditing] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [editingExpense, setEditingExpense] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [filters, setFilters] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    description: "",\n    category: "Tous",\n    type: "Tous",\n    date: "",\n    end_date: "",\n    amount: ""\n  });\n  const [originalExpenses, setOriginalExpenses] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [allExpenses, setAllExpenses] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [confirmDeleteOpen, setConfirmDeleteOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [expenseToDelete, setExpenseToDelete] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [yearlyTotal, setYearlyTotal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n\n  // Utilitaires de calcul: inclusion d\'une dépense dans un mois/année\n  const toYearMonth = dateObj => dateObj.getFullYear() * 12 + dateObj.getMonth();\n  const isExpenseActiveInMonth = (expense, month, year) => {\n    const targetYM = year * 12 + month;\n    const expenseStart = new Date(expense.date);\n    const startYM = toYearMonth(expenseStart);\n    if (expense.type === ExpenseTypes.FIXED) {\n      const endYM = expense.end_date ? toYearMonth(new Date(expense.end_date)) : Infinity;\n      return startYM <= targetYM && targetYM <= endYM;\n    }\n\n    // Ponctuel: strictement le même mois/année\n    return startYM === targetYM;\n  };\n\n  // Catégories de dépenses\n  const categories = ["Salaire", "Loyer", "Fournitures", "Équipement", "Assurance", "Services", "Autres"];\n\n  // Charger les données à chaque changement de mois/année\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    // 1) Vue mensuelle (inclut les overrides) pour le tableau\n    fetchMonthlySummary();\n    // 2) Vue globale (sans overrides) pour le calcul annuel\n    fetchExpenses();\n    // 3) Calculer le total annuel avec les overrides\n    updateYearlyTotal();\n  }, [selectedMonth, selectedYear]);\n  const updateYearlyTotal = async () => {\n    const total = await calculateYearlyTotal();\n    setYearlyTotal(total);\n  };\n  const fetchExpenses = async () => {\n    try {\n      setLoading(true);\n      // Récupère la liste complète puis filtre côté client selon mois/année\n      const response = await axios__WEBPACK_IMPORTED_MODULE_2__["default"].get(`/api/agency-expenses/`);\n      const fetchedExpenses = response.data || [];\n      setAllExpenses(fetchedExpenses);\n    } catch (error) {\n      console.error("Erreur lors du chargement des dépenses:", error);\n      alert("Erreur lors du chargement des dépenses");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchMonthlySummary = async () => {\n    try {\n      var _response$data;\n      setLoading(true);\n      const response = await axios__WEBPACK_IMPORTED_MODULE_2__["default"].get(`/api/agency-expenses/monthly_summary/?month=${selectedMonth + 1}&year=${selectedYear}`);\n      const fetched = ((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.expenses) || [];\n      setOriginalExpenses(fetched);\n      setExpenses(fetched);\n    } catch (error) {\n      console.error("Erreur lors du chargement du résumé mensuel:", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleAddExpense = async () => {\n    if (!newExpense.description || !newExpense.amount) {\n      alert("Veuillez remplir tous les champs obligatoires");\n      return;\n    }\n    try {\n      setLoading(true);\n      const expenseData = {\n        ...newExpense,\n        amount: parseFloat(newExpense.amount),\n        date: newExpense.date.toISOString().split("T")[0],\n        end_date: newExpense.end_date ? newExpense.end_date.toISOString().split("T")[0] : null\n      };\n      await axios__WEBPACK_IMPORTED_MODULE_2__["default"].post("/api/agency-expenses/", expenseData);\n      setOpenDialog(false);\n      // Recharger la vue mensuelle (overrides) et la base annuelle\n      await fetchMonthlySummary();\n      await fetchExpenses();\n      // Recalculer le total annuel\n      await updateYearlyTotal();\n      setNewExpense({\n        description: "",\n        amount: "",\n        type: ExpenseTypes.FIXED,\n        date: new Date(),\n        end_date: null,\n        category: "Salaire"\n      });\n    } catch (error) {\n      console.error("Erreur lors de l\'ajout de la dépense:", error);\n      alert("Erreur lors de l\'ajout de la dépense");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleDeleteExpense = async id => {\n    try {\n      setLoading(true);\n      await axios__WEBPACK_IMPORTED_MODULE_2__["default"].delete(`/api/agency-expenses/${id}/`);\n      // Recharger la vue mensuelle et la base annuelle\n      await fetchMonthlySummary();\n      await fetchExpenses();\n      // Recalculer le total annuel\n      await updateYearlyTotal();\n    } catch (error) {\n      console.error("Erreur lors de la suppression:", error);\n      alert("Erreur lors de la suppression de la dépense");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const openDeleteConfirm = expense => {\n    setExpenseToDelete(expense);\n    setConfirmDeleteOpen(true);\n  };\n  const handleConfirmDelete = async () => {\n    if (!expenseToDelete) return;\n    await handleDeleteExpense(expenseToDelete.id);\n    setConfirmDeleteOpen(false);\n    setExpenseToDelete(null);\n  };\n  const handleEditExpense = expense => {\n    // Préparer les données d\'édition avec les valeurs actuelles ou modifiées\n    const currentDescription = expense.current_override ? expense.current_override.description : expense.description;\n    const currentAmount = expense.current_override ? expense.current_override.amount : expense.amount;\n    setEditingExpense({\n      ...expense,\n      monthlyOverride: {\n        description: currentDescription,\n        amount: currentAmount,\n        month: selectedMonth + 1,\n        year: selectedYear\n      }\n    });\n    setIsEditing(true);\n    setOpenDialog(true);\n  };\n  const handleSaveExpense = async () => {\n    if (isEditing) {\n      try {\n        setLoading(true);\n        const overrideData = {\n          description: editingExpense.monthlyOverride.description,\n          amount: parseFloat(editingExpense.monthlyOverride.amount),\n          month: selectedMonth + 1,\n          year: selectedYear\n        };\n        await axios__WEBPACK_IMPORTED_MODULE_2__["default"].post(`/api/agency-expenses/${editingExpense.id}/monthly_override/`, overrideData);\n        setOpenDialog(false);\n        // Recharger depuis le résumé mensuel pour refléter l\'override appliqué\n        await fetchMonthlySummary();\n        // Recalculer le total annuel\n        await updateYearlyTotal();\n        setIsEditing(false);\n        setEditingExpense(null);\n      } catch (error) {\n        console.error("Erreur lors de la modification:", error);\n        alert("Erreur lors de la modification de la dépense");\n      } finally {\n        setLoading(false);\n      }\n    } else {\n      handleAddExpense();\n    }\n  };\n\n  // Clôturer une dépense fixe à partir du mois sélectionné (sans supprimer l\'historique)\n  const handleCloseFromSelectedMonth = async () => {\n    if (!isEditing || !editingExpense) return;\n    try {\n      setLoading(true);\n      // Calculer le dernier jour du mois précédent\n      const prevMonth = selectedMonth === 0 ? 11 : selectedMonth - 1;\n      const prevYear = selectedMonth === 0 ? selectedYear - 1 : selectedYear;\n      const lastDayPrevMonth = new Date(prevYear, prevMonth + 1, 0); // jour 0 du mois suivant = dernier jour du mois courant\n      const iso = lastDayPrevMonth.toISOString().split("T")[0];\n      await axios__WEBPACK_IMPORTED_MODULE_2__["default"].patch(`/api/agency-expenses/${editingExpense.id}/`, {\n        end_date: iso\n      });\n      setOpenDialog(false);\n      await fetchExpenses();\n      await fetchMonthlySummary();\n      // Recalculer le total annuel\n      await updateYearlyTotal();\n      setIsEditing(false);\n      setEditingExpense(null);\n    } catch (error) {\n      console.error("Erreur lors de la clôture de la dépense:", error);\n      alert("Impossible de clôturer la dépense à partir de ce mois");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const calculateMonthlyTotal = () => {\n    return expenses.filter(expense => isExpenseActiveInMonth(expense, selectedMonth, selectedYear)).reduce((total, expense) => {\n      const amount = expense.current_override ? expense.current_override.amount : expense.amount;\n      return total + parseFloat(amount);\n    }, 0);\n  };\n  const countActiveMonthsInYear = (expense, year) => {\n    const firstYM = year * 12 + 0;\n    const lastYM = year * 12 + 11;\n    const startYM = toYearMonth(new Date(expense.date));\n    const endYM = expense.end_date ? toYearMonth(new Date(expense.end_date)) : Infinity;\n    const activeStart = Math.max(startYM, firstYM);\n    const activeEnd = Math.min(endYM, lastYM);\n    if (activeEnd < activeStart) return 0;\n    return activeEnd - activeStart + 1;\n  };\n  const calculateYearlyTotal = async () => {\n    if (!selectedYear) return 0;\n    let yearlyTotal = 0;\n    try {\n      // Récupérer le résumé mensuel pour chaque mois de l\'année\n      const monthlyTotals = await Promise.all(Array.from({\n        length: 12\n      }, async (_, monthIndex) => {\n        try {\n          var _response$data2;\n          const response = await axios__WEBPACK_IMPORTED_MODULE_2__["default"].get(`/api/agency-expenses/monthly_summary/?month=${monthIndex + 1}&year=${selectedYear}`);\n          return ((_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : _response$data2.total) || 0;\n        } catch (error) {\n          console.error(`Erreur pour le mois ${monthIndex + 1}:`, error);\n          return 0;\n        }\n      }));\n      yearlyTotal = monthlyTotals.reduce((sum, monthTotal) => sum + monthTotal, 0);\n    } catch (error) {\n      console.error("Erreur lors du calcul du total annuel:", error);\n      // Fallback sur l\'ancienne méthode si l\'API échoue\n      if (!Array.isArray(allExpenses) || allExpenses.length === 0) return 0;\n      yearlyTotal = allExpenses.reduce((sum, expense) => {\n        const baseAmount = parseFloat(expense.current_override ? expense.current_override.amount : expense.amount);\n        if (Number.isNaN(baseAmount)) return sum;\n        if (expense.type === ExpenseTypes.FIXED) {\n          const months = countActiveMonthsInYear(expense, selectedYear);\n          return sum + baseAmount * months;\n        }\n        const d = new Date(expense.date);\n        return d.getFullYear() === selectedYear ? sum + baseAmount : sum;\n      }, 0);\n    }\n    return yearlyTotal;\n  };\n  const handleFilterChange = field => event => {\n    const newFilters = {\n      ...filters,\n      [field]: event.target.value\n    };\n    setFilters(newFilters);\n    const filtered = originalExpenses.filter(expense => {\n      if (newFilters.description && !expense.description.toLowerCase().includes(newFilters.description.toLowerCase())) {\n        return false;\n      }\n      if (newFilters.category && newFilters.category !== "Tous" && expense.category !== newFilters.category) {\n        return false;\n      }\n      if (newFilters.type && newFilters.type !== "Tous" && expense.type !== newFilters.type) {\n        return false;\n      }\n      if (newFilters.date) {\n        const filterDate = new Date(newFilters.date).toISOString().split("T")[0];\n        const expenseDate = new Date(expense.date).toISOString().split("T")[0];\n        if (filterDate !== expenseDate) {\n          return false;\n        }\n      }\n      if (newFilters.end_date && expense.end_date) {\n        const filterEndDate = new Date(newFilters.end_date).toISOString().split("T")[0];\n        const expenseEndDate = new Date(expense.end_date).toISOString().split("T")[0];\n        if (filterEndDate !== expenseEndDate) {\n          return false;\n        }\n      }\n      if (newFilters.amount) {\n        const expenseAmount = expense.current_override ? expense.current_override.amount : expense.amount;\n        const filterAmount = newFilters.amount;\n        return expenseAmount.toString().includes(filterAmount.toString());\n      }\n      return true;\n    });\n    setExpenses(filtered);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      p: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      fontWeight: "bold",\n      color: "white"\n    },\n    variant: "h5"\n  }, "D\\xE9penses de l\'Agence"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "contained",\n    onClick: () => setOpenDialog(true)\n  }, "Ajouter une d\\xE9pense")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      mb: 3,\n      display: "flex",\n      gap: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    value: selectedMonth,\n    onChange: e => setSelectedMonth(Number(e.target.value)),\n    sx: {\n      minWidth: 150,\n      backgroundColor: "rgba(27, 120, 188, 1)",\n      color: "white",\n      "& .MuiSvgIcon-root": {\n        color: "white"\n      }\n    }\n  }, Array.from({\n    length: 12\n  }, (_, i) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    key: i,\n    value: i\n  }, new Date(2000, i).toLocaleString("default", {\n    month: "long"\n  }).charAt(0).toUpperCase() + new Date(2000, i).toLocaleString("default", {\n    month: "long"\n  }).slice(1)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    value: selectedYear,\n    onChange: e => setSelectedYear(Number(e.target.value)),\n    sx: {\n      minWidth: 100,\n      backgroundColor: "rgba(27, 120, 188, 1)",\n      color: "white",\n      "& .MuiSvgIcon-root": {\n        color: "white"\n      }\n    }\n  }, Array.from({\n    length: 5\n  }, (_, i) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    key: i,\n    value: new Date().getFullYear() - 2 + i\n  }, new Date().getFullYear() - 2 + i)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_9__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    size: "small",\n    fullWidth: true,\n    value: filters.description,\n    onChange: handleFilterChange("description"),\n    placeholder: "Description..."\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    select: true,\n    size: "small",\n    fullWidth: true,\n    value: filters.category,\n    onChange: handleFilterChange("category"),\n    sx: {\n      "& .MuiInputBase-input": {\n        textAlign: "center"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      textAlign: "center"\n    },\n    value: "Tous"\n  }, "Tous"), categories.map(cat => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      textAlign: "center"\n    },\n    key: cat,\n    value: cat\n  }, cat.charAt(0).toUpperCase() + cat.slice(1))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    select: true,\n    size: "small",\n    fullWidth: true,\n    value: filters.type,\n    sx: {\n      "& .MuiInputBase-input": {\n        textAlign: "center"\n      }\n    },\n    onChange: handleFilterChange("type")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      textAlign: "center"\n    },\n    value: "Tous"\n  }, "Tous"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      textAlign: "center"\n    },\n    value: ExpenseTypes.FIXED\n  }, "Mensuel fixe"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      textAlign: "center"\n    },\n    value: ExpenseTypes.PUNCTUAL\n  }, "Ponctuel"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    type: "date",\n    size: "small",\n    sx: {\n      "& .MuiInputBase-input": {\n        textAlign: "center"\n      }\n    },\n    fullWidth: true,\n    value: filters.date,\n    onChange: handleFilterChange("date"),\n    InputLabelProps: {\n      shrink: true\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    type: "date",\n    size: "small",\n    sx: {\n      "& .MuiInputBase-input": {\n        textAlign: "center"\n      }\n    },\n    fullWidth: true,\n    value: filters.end_date,\n    onChange: handleFilterChange("end_date"),\n    InputLabelProps: {\n      shrink: true\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    type: "number",\n    size: "small",\n    sx: {\n      "& .MuiInputBase-input": {\n        textAlign: "center"\n      }\n    },\n    fullWidth: true,\n    value: filters.amount,\n    onChange: handleFilterChange("amount"),\n    placeholder: "Montant..."\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, expenses.filter(expense => isExpenseActiveInMonth(expense, selectedMonth, selectedYear)).map((expense, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    key: expense.id,\n    sx: {\n      backgroundColor: index % 2 === 0 ? "#ffffff" : "#f5f5f5",\n      "&:hover": {\n        backgroundColor: "rgba(27, 120, 188, 0.1)"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      textAlign: "left",\n      fontWeight: "bold",\n      color: "rgba(27, 120, 188, 1)"\n    }\n  }, expense.current_override ? expense.current_override.description : expense.description), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    align: "center"\n  }, expense.category), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    align: "center"\n  }, expense.type === ExpenseTypes.FIXED ? "Mensuel" : "Ponctuel"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    align: "center"\n  }, new Date(expense.date).toLocaleDateString()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    align: "center"\n  }, expense.end_date ? new Date(expense.end_date).toLocaleDateString() : expense.type === ExpenseTypes.FIXED ? "Indéfini" : "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    align: "center"\n  }, parseFloat(expense.current_override ? expense.current_override.amount : expense.amount).toFixed(2), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      display: "flex",\n      gap: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    size: "small",\n    color: "primary",\n    onClick: () => handleEditExpense(expense),\n    disabled: loading\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_16__.FaEdit, null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    size: "small",\n    color: "error",\n    onClick: () => openDeleteConfirm(expense),\n    disabled: loading\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_16__.FaTrash, null)))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    sx: {\n      backgroundColor: "#f5f5f5"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    colSpan: 5,\n    sx: {\n      fontWeight: "bold"\n    }\n  }, "Total Mensuel"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    align: "right",\n    sx: {\n      fontWeight: "bold",\n      color: "rgba(27, 120, 188, 1)"\n    }\n  }, calculateMonthlyTotal().toFixed(2), " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    sx: {\n      mt: 3,\n      p: 2\n    },\n    elevation: 0\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "h6",\n    sx: {\n      fontWeight: 700,\n      mb: 1\n    }\n  }, "Total annuel (", selectedYear, ")"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body1",\n    sx: {\n      fontWeight: 600,\n      color: "primary.main"\n    }\n  }, yearlyTotal.toFixed(2), " \\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    open: openDialog,\n    onClose: () => setOpenDialog(false)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, isEditing ? `Modifier la dépense pour ${new Date(selectedYear, selectedMonth).toLocaleString("default", {\n    month: "long"\n  })} ${selectedYear}` : "Ajouter une nouvelle dépense"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      display: "flex",\n      flexDirection: "column",\n      gap: 2,\n      pt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    label: "Description",\n    value: isEditing ? editingExpense.monthlyOverride.description : newExpense.description,\n    onChange: e => isEditing ? setEditingExpense({\n      ...editingExpense,\n      monthlyOverride: {\n        ...editingExpense.monthlyOverride,\n        description: e.target.value\n      }\n    }) : setNewExpense({\n      ...newExpense,\n      description: e.target.value\n    }),\n    fullWidth: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    value: isEditing ? editingExpense.category : newExpense.category,\n    onChange: e => isEditing ? setEditingExpense({\n      ...editingExpense,\n      category: e.target.value\n    }) : setNewExpense({\n      ...newExpense,\n      category: e.target.value\n    }),\n    fullWidth: true,\n    label: "Cat\\xE9gorie",\n    disabled: isEditing // Désactiver le changement de catégorie en mode édition\n  }, categories.map(cat => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    key: cat,\n    value: cat\n  }, cat.charAt(0).toUpperCase() + cat.slice(1)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    label: "Montant",\n    type: "number",\n    value: isEditing ? editingExpense.monthlyOverride.amount : newExpense.amount,\n    onChange: e => isEditing ? setEditingExpense({\n      ...editingExpense,\n      monthlyOverride: {\n        ...editingExpense.monthlyOverride,\n        amount: e.target.value\n      }\n    }) : setNewExpense({\n      ...newExpense,\n      amount: e.target.value\n    }),\n    fullWidth: true,\n    inputProps: {\n      step: "0.01",\n      min: "0"\n    }\n  }), !isEditing && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    value: newExpense.type,\n    onChange: e => setNewExpense({\n      ...newExpense,\n      type: e.target.value\n    }),\n    fullWidth: true,\n    label: "Type de d\\xE9pense"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    value: ExpenseTypes.FIXED\n  }, "Mensuel fixe"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    value: ExpenseTypes.PUNCTUAL\n  }, "Ponctuel")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    label: "Date de d\\xE9but",\n    type: "date",\n    value: newExpense.date ? new Date(newExpense.date).toISOString().split("T")[0] : "",\n    onChange: e => setNewExpense({\n      ...newExpense,\n      date: new Date(e.target.value)\n    }),\n    fullWidth: true,\n    InputLabelProps: {\n      shrink: true\n    }\n  }), newExpense.type === ExpenseTypes.FIXED && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    label: "Date de fin (optionnel)",\n    type: "date",\n    value: newExpense.end_date ? new Date(newExpense.end_date).toISOString().split("T")[0] : "",\n    onChange: e => setNewExpense({\n      ...newExpense,\n      end_date: e.target.value ? new Date(e.target.value) : null\n    }),\n    fullWidth: true,\n    InputLabelProps: {\n      shrink: true\n    }\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    onClick: () => {\n      setOpenDialog(false);\n      setIsEditing(false);\n      setEditingExpense(null);\n    }\n  }, "Annuler"), isEditing && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    color: "warning",\n    onClick: handleCloseFromSelectedMonth,\n    disabled: loading\n  }, "Cl\\xF4turer \\xE0 partir de ce mois"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    onClick: handleSaveExpense,\n    variant: "contained"\n  }, isEditing ? "Modifier" : "Ajouter"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    open: confirmDeleteOpen,\n    onClose: () => setConfirmDeleteOpen(false)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, "Confirmer la suppression"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, "Cette action supprimera d\\xE9finitivement la d\\xE9pense et tout son historique. Pour une modification ou suppression ponctuelle d\'un mois, utilisez plut\\xF4t \\xAB Modifier \\xBB pour ajuster le montant du mois ou \\xAB Cl\\xF4turer \\xE0 partir de ce mois \\xBB pour arr\\xEAter la d\\xE9pense sans supprimer l\'historique ant\\xE9rieur.")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    onClick: () => setConfirmDeleteOpen(false)\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    onClick: handleConfirmDelete,\n    color: "error",\n    variant: "contained",\n    disabled: loading\n  }, "Supprimer d\\xE9finitivement"))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AgencyExpenses);\n\n//# sourceURL=webpack://frontend/./src/components/AgencyExpenses.js?')},"./src/components/AgentCard.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/system */ "./node_modules/@mui/system/esm/styled.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dayjs */ "./node_modules/dayjs/dayjs.min.js");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fa__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-icons/fa */ "./node_modules/react-icons/fa/index.mjs");\n/* harmony import */ var _static_css_agentCard_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../static/css/agentCard.css */ "./static/css/agentCard.css");\n// AgentCard.js\n\n\n\n\n\n\n\n\n// Function to capitalize the first letter\nconst capitalizeFirstLetter = string => {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n};\n\n// Fonction pour regrouper les événements\nconst groupEvents = events => {\n  if (!events || events.length === 0) return [];\n\n  // Trier les événements par date\n  const sortedEvents = [...events].sort((a, b) => new Date(a.start_date) - new Date(b.start_date));\n  const grouped = [];\n  let currentGroup = {\n    status: sortedEvents[0].status,\n    hours_modified: sortedEvents[0].hours_modified || 0,\n    startDate: sortedEvents[0].start_date,\n    endDate: sortedEvents[0].end_date\n  };\n  for (let i = 1; i < sortedEvents.length; i++) {\n    const event = sortedEvents[i];\n    const prevEvent = sortedEvents[i - 1];\n    const isConsecutive = dayjs__WEBPACK_IMPORTED_MODULE_0___default()(event.start_date).diff(dayjs__WEBPACK_IMPORTED_MODULE_0___default()(prevEvent.end_date), "day") === 1;\n\n    // Déterminez si l\'événement peut être ajouté au groupe courant\n    let canGroup = false;\n    if (currentGroup.status === event.status) {\n      if (event.status === "M") {\n        // Pour les événements "M", vérifier également `hours_modified`\n        canGroup = currentGroup.hours_modified === (event.hours_modified || 0);\n      } else {\n        canGroup = true;\n      }\n    }\n    if (isConsecutive && canGroup) {\n      // Étendre le groupe courant\n      currentGroup.endDate = event.end_date;\n    } else {\n      // Ajouter le groupe courant à la liste et démarrer un nouveau groupe\n      grouped.push({\n        ...currentGroup\n      });\n      currentGroup = {\n        status: event.status,\n        hours_modified: event.hours_modified || 0,\n        startDate: event.start_date,\n        endDate: event.end_date\n      };\n    }\n  }\n\n  // Ajouter le dernier groupe\n  grouped.push({\n    ...currentGroup\n  });\n  return grouped;\n};\n\n// Fonction pour formater les événements pour l\'affichage\nconst formatEvents = events => {\n  const groupedEvents = groupEvents(events);\n  return groupedEvents.map(group => {\n    const startDateFormatted = dayjs__WEBPACK_IMPORTED_MODULE_0___default()(group.startDate).format("DD/MM/YYYY");\n    const endDateFormatted = dayjs__WEBPACK_IMPORTED_MODULE_0___default()(group.endDate).format("DD/MM/YYYY");\n    if (group.status === "M") {\n      // Déplacer `hours_modified` à la fin de la chaîne\n      return `${group.status} ${startDateFormatted}${startDateFormatted !== endDateFormatted ? ` - ${endDateFormatted}` : ""} / ${group.hours_modified}H`;\n    } else if (group.startDate === group.endDate) {\n      // Si la date de début et la date de fin sont identiques, afficher uniquement la date de début\n      return `${group.status} ${startDateFormatted}`;\n    } else {\n      // Sinon, afficher le format avec date de début et date de fin\n      return `${group.status} ${startDateFormatted} ${endDateFormatted}`;\n    }\n  });\n};\n\n// Function to get color by status\nconst getColorByStatus = status => {\n  const colorMap = {\n    P: "green",\n    A: "red",\n    C: "purple",\n    M: "orange"\n  };\n  return colorMap[status] || "grey";\n};\n\n// Styled Card component\n\n// Ajout d\'un style pour le conteneur des événements\nconst EventsContainer = (0,_mui_system__WEBPACK_IMPORTED_MODULE_3__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"])(() => ({\n  maxHeight: 200,\n  // Hauteur maximale pour le conteneur des événements\n  overflowY: "auto",\n  // Permet le défilement vertical\n  width: "100%" // S\'assurer que le conteneur prend toute la largeur\n}));\nconst MonthSelector = (0,_mui_system__WEBPACK_IMPORTED_MODULE_3__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"])(() => ({\n  marginBottom: "16px",\n  width: "100%"\n}));\nconst AgentCard = ({\n  agent,\n  events\n}) => {\n  const [selectedMonth, setSelectedMonth] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Date().getMonth());\n  const [selectedYear, setSelectedYear] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Date().getFullYear());\n  const [openPrimeModal, setOpenPrimeModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [newPrime, setNewPrime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n    description: "",\n    montant: ""\n  });\n  const [primes, setPrimes] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n\n  // Fonction pour formater le mois-année pour l\'API\n  const getMonthYearString = () => {\n    const month = (selectedMonth + 1).toString().padStart(2, "0");\n    return `${selectedYear}-${month}`;\n  };\n\n  // Charger les primes pour le mois sélectionné\n  const loadPrimes = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async () => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_6__["default"].get(`/api/agents/${agent.id}/primes/?month_year=${getMonthYearString()}`);\n      setPrimes(response.data);\n    } catch (error) {\n      console.error("Erreur lors du chargement des primes:", error);\n    }\n  }, [agent.id, selectedMonth, selectedYear]);\n\n  // Charger les primes quand le mois change ou l\'agent change\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    loadPrimes();\n  }, [loadPrimes, agent.id, selectedMonth, selectedYear]);\n  const handleAddPrime = async () => {\n    if (!newPrime.description || !newPrime.montant) return;\n    try {\n      await axios__WEBPACK_IMPORTED_MODULE_6__["default"].post(`/api/agents/${agent.id}/primes/`, {\n        description: newPrime.description,\n        montant: parseFloat(newPrime.montant),\n        month_year: getMonthYearString()\n      });\n      loadPrimes(); // Recharger les primes\n      setNewPrime({\n        description: "",\n        montant: ""\n      });\n      setOpenPrimeModal(false);\n    } catch (error) {\n      console.error("Erreur lors de l\'ajout de la prime:", error);\n      alert("Erreur lors de l\'ajout de la prime");\n    }\n  };\n  const handleDeletePrime = async index => {\n    try {\n      await axios__WEBPACK_IMPORTED_MODULE_6__["default"].delete(`/api/agents/${agent.id}/primes/${index}/?month_year=${getMonthYearString()}`);\n      loadPrimes(); // Recharger les primes\n    } catch (error) {\n      console.error("Erreur lors de la suppression de la prime:", error);\n      alert("Erreur lors de la suppression de la prime");\n    }\n  };\n\n  // Calcul du total des primes pour le mois sélectionné\n  const totalPrimes = primes.reduce((acc, prime) => acc + prime.montant, 0);\n\n  // Fonction pour gérer le changement de mois\n  const handleMonthChange = event => {\n    setSelectedMonth(event.target.value);\n  };\n\n  // Filtrer les événements en fonction du mois sélectionné\n  const filteredEvents = events.filter(event => {\n    const eventDate = new Date(event.start_date);\n    return eventDate.getMonth() === selectedMonth; // Comparer le mois de l\'événement avec le mois sélectionné\n  });\n\n  // Formater les événements pour l\'affichage\n  const eventSummary = filteredEvents.length > 0 ? formatEvents(filteredEvents) : [];\n\n  // Filtrer les heures mensuelles pour le mois sélectionné\n  const filteredMonthlyHours = agent.monthly_hours.filter(monthlyHour => {\n    const monthDate = new Date(monthlyHour.month);\n    return monthDate.getMonth() === selectedMonth && monthDate.getFullYear() === new Date().getFullYear(); // Comparer le mois et l\'année\n  });\n\n  // Calculer le coût mensuel\n  const monthlyCost = filteredMonthlyHours.reduce((total, monthlyHour) => {\n    return total + monthlyHour.hours * agent.taux_Horaire; // Coût = heures * taux horaire\n  }, 0);\n  console.log(agent); // Vérifiez que les données de l\'agent sont correctes\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    className: "agent-card"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    className: "agent-header"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("h2", {\n    className: "agent-name"\n  }, `${agent.name} ${agent.surname}`)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    className: "month-selector",\n    value: selectedMonth,\n    onChange: handleMonthChange,\n    fullWidth: true\n  }, Array.from({\n    length: 12\n  }, (_, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    key: index,\n    value: index\n  }, new Date(0, index).toLocaleString("fr-FR", {\n    month: "long"\n  }).toUpperCase()))), filteredMonthlyHours.length > 0 ? filteredMonthlyHours.map(monthlyHour => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    key: monthlyHour.month,\n    className: "monthly-hours"\n  }, `${capitalizeFirstLetter(new Date(monthlyHour.month).toLocaleDateString("fr-FR", {\n    month: "long",\n    year: "numeric"\n  }))}, ${monthlyHour.hours}H`)) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    className: "no-events"\n  }, "Pas d\'heures mensuelles disponibles pour ce mois"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    className: "monthly-cost"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("strong", null, "Co\\xFBt mensuel:"), " ", monthlyCost.toFixed(2), " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    className: "primes-section"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    className: "primes-header"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("h3", null, "Primes", " ", new Date(selectedYear, selectedMonth).toLocaleDateString("fr-FR", {\n    month: "long",\n    year: "numeric"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("button", {\n    onClick: () => setOpenPrimeModal(true),\n    className: "icon-button add-prime-button"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_8__.FaPlus, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    className: "primes-list"\n  }, primes.map((prime, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    key: index,\n    className: "prime-item"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("span", null, prime.description, ": ", prime.montant.toFixed(2), " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("button", {\n    onClick: () => handleDeletePrime(index),\n    className: "icon-button delete-prime-button"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_8__.FaTrash, null)))), primes.length === 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    className: "no-primes"\n  }, "Aucune prime pour ce mois")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    className: "primes-total"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("strong", null, "Total des primes:"), " ", totalPrimes.toFixed(2), " \\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    open: openPrimeModal,\n    onClose: () => setOpenPrimeModal(false)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], null, "Ajouter une prime"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    autoFocus: true,\n    margin: "dense",\n    label: "Description",\n    fullWidth: true,\n    value: newPrime.description,\n    onChange: e => setNewPrime({\n      ...newPrime,\n      description: e.target.value\n    })\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    margin: "dense",\n    label: "Montant (\\u20AC)",\n    type: "number",\n    fullWidth: true,\n    value: newPrime.montant,\n    onChange: e => setNewPrime({\n      ...newPrime,\n      montant: e.target.value\n    })\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    onClick: () => setOpenPrimeModal(false)\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    onClick: handleAddPrime,\n    variant: "contained"\n  }, "Ajouter"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    className: "events-container"\n  }, eventSummary.length > 0 ? eventSummary.map((event, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    key: index,\n    className: `event-item ${getEventClass(event.split(" ")[0])}`\n  }, event)) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    className: "no-events"\n  }, "Aucun \\xE9v\\xE9nement disponible")));\n};\n\n// Fonction utilitaire pour déterminer la classe CSS de l\'événement\nconst getEventClass = status => {\n  const classMap = {\n    P: "present",\n    A: "absent",\n    C: "conge",\n    M: "modified"\n  };\n  return classMap[status] || "";\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AgentCard);\n\n//# sourceURL=webpack://frontend/./src/components/AgentCard.js?')},"./src/components/AgentCardContainer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _AgentCard__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AgentCard */ "./src/components/AgentCard.js");\n\n\n\n\nconst AgentCardContainer = () => {\n  const [agents, setAgents] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [currentAgentIndex, setCurrentAgentIndex] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [events, setEvents] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    axios__WEBPACK_IMPORTED_MODULE_2__["default"].get("/api/agent/").then(response => {\n      setAgents(response.data);\n      if (response.data.length > 0) {\n        fetchEvents(response.data[0].id);\n      }\n    }).catch(error => {\n      console.error("Erreur lors de la récupération des agents:", error);\n    });\n  }, []);\n  const fetchEvents = agentId => {\n    axios__WEBPACK_IMPORTED_MODULE_2__["default"].get(`/api/events/?agent_id=${agentId}`).then(response => {\n      const filteredEvents = response.data.filter(event => event.status !== "P");\n      setEvents(filteredEvents);\n    }).catch(error => {\n      console.error("Erreur lors de la récupération des événements:", error);\n    });\n  };\n  const handleSelectChange = event => {\n    const selectedIndex = event.target.value;\n    setCurrentAgentIndex(selectedIndex);\n    fetchEvents(agents[selectedIndex].id);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, agents.length > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_AgentCard__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    agent: agents[currentAgentIndex],\n    events: events,\n    onSelectChange: handleSelectChange,\n    agentsList: agents\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    display: "flex",\n    justifyContent: "center",\n    alignItems: "center",\n    mt: 2,\n    gap: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    value: currentAgentIndex,\n    onChange: handleSelectChange\n  }, agents.map((agent, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    key: agent.id,\n    value: index\n  }, `${agent.name} ${agent.surname}`))))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AgentCardContainer);\n\n//# sourceURL=webpack://frontend/./src/components/AgentCardContainer.js?')},"./src/components/App.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/CircularProgress/CircularProgress.js");\n/* harmony import */ var _mui_material_CssBaseline__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @mui/material/CssBaseline */ "./node_modules/@mui/material/CssBaseline/CssBaseline.js");\n/* harmony import */ var _mui_material_styles__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @mui/material/styles */ "./node_modules/@mui/material/styles/createTheme.js");\n/* harmony import */ var _mui_material_styles__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @mui/material/styles */ "./node_modules/@mui/material/styles/ThemeProvider.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_dom_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom/client */ "./node_modules/react-dom/client.js");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/dist/index.js");\n/* harmony import */ var _hooks_useAuth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../hooks/useAuth */ "./src/hooks/useAuth.js");\n/* harmony import */ var _static_css_app_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../static/css/app.css */ "./static/css/app.css");\n/* harmony import */ var _AgencyExpenses__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AgencyExpenses */ "./src/components/AgencyExpenses.js");\n/* harmony import */ var _AgentCardContainer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./AgentCardContainer */ "./src/components/AgentCardContainer.js");\n/* harmony import */ var _BonCommandeModif__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./BonCommandeModif */ "./src/components/BonCommandeModif.js");\n/* harmony import */ var _CalendrierAgentContainer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./CalendrierAgentContainer */ "./src/components/CalendrierAgentContainer.js");\n/* harmony import */ var _chantier_TableauFacturation__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./chantier/TableauFacturation */ "./src/components/chantier/TableauFacturation.js");\n/* harmony import */ var _ChantierDetail__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ChantierDetail */ "./src/components/ChantierDetail.js");\n/* harmony import */ var _ChantierInfo__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./ChantierInfo */ "./src/components/ChantierInfo.js");\n/* harmony import */ var _ChantierInfo__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_ChantierInfo__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _ChantiersDashboard__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./ChantiersDashboard */ "./src/components/ChantiersDashboard.js");\n/* harmony import */ var _ChantierTabs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./ChantierTabs */ "./src/components/ChantierTabs.js");\n/* harmony import */ var _CreationDevis__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./CreationDevis */ "./src/components/CreationDevis.js");\n/* harmony import */ var _CreationPartie__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./CreationPartie */ "./src/components/CreationPartie.js");\n/* harmony import */ var _Dashboard__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./Dashboard */ "./src/components/Dashboard.js");\n/* harmony import */ var _Drive__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./Drive */ "./src/components/Drive.js");\n/* harmony import */ var _GestionAppelsOffres__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./GestionAppelsOffres */ "./src/components/GestionAppelsOffres.js");\n/* harmony import */ var _GlobalConflictModal__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./GlobalConflictModal */ "./src/components/GlobalConflictModal.js");\n/* harmony import */ var _Layout__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./Layout */ "./src/components/Layout.js");\n/* harmony import */ var _ListeBonCommande__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./ListeBonCommande */ "./src/components/ListeBonCommande.js");\n/* harmony import */ var _ListeChantier__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./ListeChantier */ "./src/components/ListeChantier.js");\n/* harmony import */ var _ListeDevis__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./ListeDevis */ "./src/components/ListeDevis.js");\n/* harmony import */ var _ListeFactures__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./ListeFactures */ "./src/components/ListeFactures.js");\n/* harmony import */ var _ListeSituation__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./ListeSituation */ "./src/components/ListeSituation.js");\n/* harmony import */ var _Login__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./Login */ "./src/components/Login.js");\n/* harmony import */ var _ModificationDevis__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./ModificationDevis */ "./src/components/ModificationDevis.js");\n/* harmony import */ var _PaiementsSousTraitantPage__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./PaiementsSousTraitantPage */ "./src/components/PaiementsSousTraitantPage.js");\n/* harmony import */ var _PlanningContainer__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./PlanningContainer */ "./src/components/PlanningContainer.js");\n/* harmony import */ var _StockForm__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./StockForm */ "./src/components/StockForm.js");\n/* harmony import */ var _TableauSuivi__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./TableauSuivi */ "./src/components/TableauSuivi.js");\n/* harmony import */ var _Test__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./Test */ "./src/components/Test.js");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Créer un thème par défaut\nconst theme = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_32__["default"])({\n  palette: {\n    primary: {\n      main: "#1976d2"\n    },\n    secondary: {\n      main: "#dc004e"\n    }\n  },\n  typography: {\n    fontFamily: ["Roboto", "Arial", "sans-serif"].join(",")\n  }\n});\n\n// Composant pour protéger les routes - redirige vers /login si non connecté\nconst ProtectedRoute = ({\n  children,\n  isAuthenticated\n}) => {\n  if (!isAuthenticated) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Navigate, {\n      to: "/login",\n      replace: true\n    });\n  }\n  return children;\n};\nfunction App() {\n  // Utiliser le hook d\'authentification personnalisé\n  const {\n    isAuthenticated,\n    user,\n    loading,\n    checkAuth,\n    logout\n  } = (0,_hooks_useAuth__WEBPACK_IMPORTED_MODULE_2__.useAuth)();\n\n  // Fonction appelée après une connexion réussie\n  const handleLoginSuccess = userData => {\n    checkAuth(); // Vérifier l\'état d\'authentification\n  };\n\n  // Fonction pour se déconnecter\n  const handleLogout = async () => {\n    try {\n      // Utiliser la fonction logout du hook useAuth\n      await logout();\n      // Rediriger vers la page de login\n      window.location.href = "/login";\n    } catch (error) {\n      console.error("Erreur lors de la déconnexion:", error);\n      // En cas d\'erreur, forcer la redirection\n      window.location.href = "/login";\n    }\n  };\n\n  // Afficher un écran de chargement pendant la vérification\n  if (loading) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_styles__WEBPACK_IMPORTED_MODULE_34__["default"], {\n      theme: theme\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_CssBaseline__WEBPACK_IMPORTED_MODULE_35__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_36__["default"], {\n      display: "flex",\n      justifyContent: "center",\n      alignItems: "center",\n      minHeight: "100vh"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_37__["default"], null)));\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_styles__WEBPACK_IMPORTED_MODULE_34__["default"], {\n    theme: theme\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_CssBaseline__WEBPACK_IMPORTED_MODULE_35__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_38__.BrowserRouter, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_GlobalConflictModal__WEBPACK_IMPORTED_MODULE_18__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Routes, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/login",\n    element: isAuthenticated ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Navigate, {\n      to: "/",\n      replace: true\n    }) // Si déjà connecté, rediriger vers l\'accueil\n    : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Login__WEBPACK_IMPORTED_MODULE_25__["default"], {\n      onLoginSuccess: handleLoginSuccess\n    })\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Dashboard__WEBPACK_IMPORTED_MODULE_15__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/chantier/:id",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement((_ChantierInfo__WEBPACK_IMPORTED_MODULE_10___default()), null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/ChantierDetail/:id",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ChantierDetail__WEBPACK_IMPORTED_MODULE_9__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/ListeChantier",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ListeChantier__WEBPACK_IMPORTED_MODULE_21__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/ChantiersDashboard",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ChantiersDashboard__WEBPACK_IMPORTED_MODULE_11__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/CreationDevis",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_CreationDevis__WEBPACK_IMPORTED_MODULE_13__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/GestionAppelsOffres",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_GestionAppelsOffres__WEBPACK_IMPORTED_MODULE_17__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/CreationPartie",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_CreationPartie__WEBPACK_IMPORTED_MODULE_14__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/ListeDevis",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ListeDevis__WEBPACK_IMPORTED_MODULE_22__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/ListeFactures",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ListeFactures__WEBPACK_IMPORTED_MODULE_23__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/ModificationDevis/:devisId",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ModificationDevis__WEBPACK_IMPORTED_MODULE_26__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/AgentCardContainer",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_AgentCardContainer__WEBPACK_IMPORTED_MODULE_5__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/CalendrierAgentContainer",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_CalendrierAgentContainer__WEBPACK_IMPORTED_MODULE_7__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/PlanningContainer",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_PlanningContainer__WEBPACK_IMPORTED_MODULE_28__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/StockForm",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StockForm__WEBPACK_IMPORTED_MODULE_29__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/AgencyExpenses",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_AgencyExpenses__WEBPACK_IMPORTED_MODULE_4__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/BonCommandeModif",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_BonCommandeModif__WEBPACK_IMPORTED_MODULE_6__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/ModificationBC/:id",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_BonCommandeModif__WEBPACK_IMPORTED_MODULE_6__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/ListeBonCommande",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ListeBonCommande__WEBPACK_IMPORTED_MODULE_20__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/ListeSituation",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ListeSituation__WEBPACK_IMPORTED_MODULE_24__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/TableauSuivi",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_TableauSuivi__WEBPACK_IMPORTED_MODULE_30__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/TableauFacturation",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_chantier_TableauFacturation__WEBPACK_IMPORTED_MODULE_8__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/ChantierTabs",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ChantierTabs__WEBPACK_IMPORTED_MODULE_12__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/paiements-sous-traitant/:chantierId/:sousTraitantId",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_PaiementsSousTraitantPage__WEBPACK_IMPORTED_MODULE_27__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/drive",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Drive__WEBPACK_IMPORTED_MODULE_16__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "/Test",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ProtectedRoute, {\n      isAuthenticated: isAuthenticated\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Layout__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      user: user,\n      onLogout: handleLogout\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Test__WEBPACK_IMPORTED_MODULE_31__["default"], null)))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Route, {\n    path: "*",\n    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_33__.Navigate, {\n      to: "/",\n      replace: true\n    })\n  }))));\n}\n\n// Créer un root et rendre l\'application\nconst rootElement = document.getElementById("app");\nif (rootElement) {\n  const root = react_dom_client__WEBPACK_IMPORTED_MODULE_1__.createRoot(rootElement);\n  root.render(/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(App, null));\n} else {\n  console.error("Cannot find root element");\n}\n\n//# sourceURL=webpack://frontend/./src/components/App.js?')},"./src/components/BonCommandeForm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fi__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-icons/fi */ "./node_modules/react-icons/fi/index.mjs");\n/* harmony import */ var _services_bonCommandeService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/bonCommandeService */ "./src/services/bonCommandeService.js");\n/* harmony import */ var _ProduitSelectionTable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ProduitSelectionTable */ "./src/components/ProduitSelectionTable.js");\n/* harmony import */ var _SelectionFournisseurModal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./SelectionFournisseurModal */ "./src/components/SelectionFournisseurModal.js");\n\n\n\n\n\n\nfunction BonCommandeForm({\n  onBonCommandeCreated,\n  modal\n}) {\n  const [step, setStep] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(1);\n  const [openModal, setOpenModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedData, setSelectedData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [selectedProducts, setSelectedProducts] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [numeroBC, setNumeroBC] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [isModalOpen, setIsModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    _services_bonCommandeService__WEBPACK_IMPORTED_MODULE_1__.bonCommandeService.generateBonCommandeNumber().then(data => setNumeroBC(data.numero)).catch(error => console.error("Erreur:", error));\n  }, []);\n  const handleOpenModal = () => setOpenModal(true);\n  const handleCloseModal = () => {\n    setOpenModal(false);\n    if (step !== 1) setStep(1);\n  };\n  const handleInitialSelection = data => {\n    setSelectedData({\n      fournisseur: data.fournisseur,\n      // ID pour la création du BC\n      fournisseurName: data.fournisseurName,\n      // Nom pour l\'API produits\n      chantier: data.chantier,\n      emetteur: data.emetteur,\n      statut: data.statut,\n      // Ajout du statut\n      numero_bon_commande: data.numero_bon_commande,\n      date_commande: data.date_commande,\n      date_creation_personnalisee: data.date_creation_personnalisee,\n      contact_type: data.contact_type,\n      contact_agent: data.contact_agent,\n      contact_sous_traitant: data.contact_sous_traitant\n    });\n    setStep(2);\n    setIsModalOpen(true);\n    handleCloseModal();\n    if (onBonCommandeCreated) {\n      onBonCommandeCreated();\n    }\n  };\n  const handleProductSelection = products => {\n    setSelectedProducts(products);\n    handlePreviewBonCommande(products);\n  };\n  const handlePreviewBonCommande = products => {\n    if (!Array.isArray(products)) {\n      console.error("Products is not an array:", products);\n      return;\n    }\n    const bonCommandeData = {\n      numero: selectedData.numero_bon_commande,\n      fournisseur: selectedData.fournisseur,\n      fournisseurName: selectedData.fournisseurName,\n      chantier: selectedData.chantier,\n      emetteur: selectedData.emetteur,\n      statut: selectedData.statut,\n      // Ajout du statut pour la prévisualisation\n      date_creation_personnalisee: selectedData.date_creation_personnalisee,\n      contact_type: selectedData.contact_type,\n      contact_agent: selectedData.contact_agent,\n      contact_sous_traitant: selectedData.contact_sous_traitant,\n      lignes: products.map(product => ({\n        produit: product.produit,\n        designation: product.designation,\n        quantite: product.quantite,\n        prix_unitaire: product.prix_unitaire,\n        total: product.quantite * product.prix_unitaire\n      })),\n      montant_total: products.reduce((acc, curr) => acc + curr.quantite * curr.prix_unitaire, 0)\n    };\n    const queryString = encodeURIComponent(JSON.stringify(bonCommandeData));\n    const previewUrl = `/api/preview-bon-commande/?bon_commande=${queryString}`;\n    window.open(previewUrl, "_blank");\n  };\n  const handleSaveBonCommande = async () => {\n    const numeroFinal = selectedData.numero_bon_commande || numeroBC;\n    const bonCommandeData = {\n      numero: numeroFinal,\n      fournisseur: selectedData.fournisseur,\n      fournisseurName: selectedData.fournisseurName,\n      chantier: selectedData.chantier,\n      emetteur: selectedData.emetteur,\n      date_creation_personnalisee: selectedData.date_creation_personnalisee,\n      contact_type: selectedData.contact_type,\n      contact_agent: selectedData.contact_agent,\n      contact_sous_traitant: selectedData.contact_sous_traitant,\n      lignes: selectedProducts.map(product => ({\n        produit: product.produit,\n        designation: product.designation,\n        quantite: product.quantite,\n        prix_unitaire: product.prix_unitaire,\n        total: product.quantite * product.prix_unitaire\n      })),\n      montant_total: selectedProducts.reduce((acc, curr) => acc + curr.quantite * curr.prix_unitaire, 0)\n    };\n    try {\n      await _services_bonCommandeService__WEBPACK_IMPORTED_MODULE_1__.bonCommandeService.createBonCommande(bonCommandeData);\n      if (onBonCommandeCreated) {\n        onBonCommandeCreated();\n      }\n    } catch (error) {\n      console.error("Erreur lors de la création du bon de commande:", error);\n    }\n  };\n  const handleAgentSelect = agent => {\n    setSelectedData(prev => ({\n      ...prev,\n      agent: {\n        id: agent.id,\n        name: agent.name\n      }\n    }));\n  };\n  const handleValidate = products => {\n    setSelectedProducts(products);\n    handlePreviewBonCommande(products);\n  };\n\n  // --- Affichage spécifique pour la modale ---\n  if (modal) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SelectionFournisseurModal__WEBPACK_IMPORTED_MODULE_3__["default"], {\n      open: true,\n      onClose: onBonCommandeCreated,\n      onSubmit: handleInitialSelection,\n      numeroBC: numeroBC\n    });\n  }\n\n  // --- Affichage standard (autonome) ---\n  const renderStep = () => {\n    switch (step) {\n      case 1:\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n          variant: "contained",\n          onClick: handleOpenModal,\n          startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fi__WEBPACK_IMPORTED_MODULE_5__.FiPlusCircle, null),\n          sx: {\n            backgroundColor: "rgba(27, 120, 188, 1)",\n            alignSelf: "flex-end",\n            "&:hover": {\n              backgroundColor: "rgba(27, 120, 188, 0.8)"\n            }\n          }\n        }, "Nouveau Bon de Commande");\n      case 2:\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ProduitSelectionTable__WEBPACK_IMPORTED_MODULE_2__["default"], {\n          open: true,\n          onClose: () => {\n            setStep(1);\n            setIsModalOpen(false);\n          },\n          fournisseur: selectedData === null || selectedData === void 0 ? void 0 : selectedData.fournisseurName,\n          onValidate: handleValidate,\n          numeroBC: numeroBC,\n          selectedData: selectedData\n        });\n      default:\n        return null;\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      maxWidth: "1430px",\n      margin: "0 auto",\n      padding: "20px",\n      display: "flex",\n      flexDirection: "column",\n      gap: "20px"\n    }\n  }, renderStep(), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SelectionFournisseurModal__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    open: openModal,\n    onClose: handleCloseModal,\n    onSubmit: handleInitialSelection,\n    numeroBC: numeroBC\n  }));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BonCommandeForm);\n\n//# sourceURL=webpack://frontend/./src/components/BonCommandeForm.js?')},"./src/components/BonCommandeModif.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputAdornment/InputAdornment.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableContainer/TableContainer.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableCell/TableCell.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Checkbox/Checkbox.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fi__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-icons/fi */ "./node_modules/react-icons/fi/index.mjs");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");\n/* harmony import */ var _utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/universalDriveGenerator */ "./src/utils/universalDriveGenerator.js");\n\n\n\n\n\n\nconst BonCommandeModif = () => {\n  const {\n    id\n  } = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_2__.useParams)();\n  const [bonCommande, setBonCommande] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [allProducts, setAllProducts] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [selectedProducts, setSelectedProducts] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [quantities, setQuantities] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [isPreviewed, setIsPreviewed] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [searchTerm, setSearchTerm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [numeroBonCommande, setNumeroBonCommande] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [codeRangeFilter, setCodeRangeFilter] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""); // Nouveau filtre par plage de codes\n  const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (id) {\n      fetchBonCommande();\n    }\n  }, [id]);\n\n  // Fonction pour recharger les produits avec le filtre de plage\n  const reloadProductsWithFilter = async () => {\n    if (!bonCommande) return;\n    try {\n      const productsResponse = await axios__WEBPACK_IMPORTED_MODULE_3__["default"].get(`/api/products-by-fournisseur/?fournisseur=${encodeURIComponent(bonCommande.fournisseur)}${codeRangeFilter ? `&code_range=${codeRangeFilter}` : ""}`);\n      setAllProducts(productsResponse.data);\n    } catch (error) {\n      console.error("Erreur lors du rechargement des produits:", error);\n    }\n  };\n\n  // Recharger les produits quand le filtre de plage change\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    reloadProductsWithFilter();\n  }, [codeRangeFilter, bonCommande]);\n  const fetchBonCommande = async () => {\n    // Vérifier que l\'ID existe avant de faire l\'appel API\n    if (!id) {\n      setError("ID du bon de commande manquant");\n      return;\n    }\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_3__["default"].get(`/api/detail-bon-commande/${id}/`);\n      setBonCommande(response.data);\n      setNumeroBonCommande(response.data.numero);\n\n      // Récupérer tous les produits du fournisseur\n      const productsResponse = await axios__WEBPACK_IMPORTED_MODULE_3__["default"].get(`/api/products-by-fournisseur/?fournisseur=${encodeURIComponent(response.data.fournisseur)}${codeRangeFilter ? `&code_range=${codeRangeFilter}` : ""}`);\n      setAllProducts(productsResponse.data);\n\n      // Initialiser les quantités et sélections\n      const initialQuantities = {};\n      const initialSelected = {};\n      response.data.lignes.forEach(ligne => {\n        initialQuantities[ligne.produit] = ligne.quantite;\n        initialSelected[ligne.produit] = true;\n      });\n      setQuantities(initialQuantities);\n      setSelectedProducts(initialSelected);\n    } catch (error) {\n      console.error("Erreur lors du chargement:", error);\n      setError("Erreur lors du chargement du bon de commande. Vérifiez que l\'ID est correct.");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleCheckboxChange = productId => {\n    setIsPreviewed(false);\n    setSelectedProducts(prev => ({\n      ...prev,\n      [productId]: !prev[productId]\n    }));\n\n    // Focus sur l\'input de quantité quand la checkbox est cochée\n    setTimeout(() => {\n      const quantityInput = document.getElementById(`quantity-modif-${productId}`);\n      if (quantityInput && !selectedProducts[productId]) {\n        quantityInput.focus();\n      }\n    }, 0);\n  };\n  const handleQuantityChange = (productId, value) => {\n    setIsPreviewed(false);\n    const quantity = parseInt(value) || 0;\n    setQuantities(prev => ({\n      ...prev,\n      [productId]: quantity\n    }));\n  };\n  const handlePreview = () => {\n    const selectedItems = allProducts.filter(product => selectedProducts[product.id]).map(product => ({\n      produit: product.id,\n      designation: product.designation || product.nom_materiel,\n      quantite: quantities[product.id] || 0,\n      prix_unitaire: product.prix_unitaire,\n      total: (quantities[product.id] || 0) * product.prix_unitaire\n    }));\n\n    // Calculer le nouveau montant total\n    const montantTotal = selectedItems.reduce((acc, curr) => acc + curr.total, 0);\n    const bonCommandeData = {\n      ...bonCommande,\n      numero: numeroBonCommande,\n      lignes: selectedItems,\n      montant_total: montantTotal\n    };\n\n    // Ouvrir l\'aperçu dans un nouvel onglet\n    const queryString = encodeURIComponent(JSON.stringify(bonCommandeData));\n    window.open(`/api/preview-bon-commande/?bon_commande=${queryString}`, "_blank");\n    setIsPreviewed(true);\n  };\n  const handleSave = async () => {\n    try {\n      const selectedItems = allProducts.filter(product => selectedProducts[product.id]).map(product => ({\n        produit: product.id,\n        designation: product.designation || product.nom_materiel,\n        quantite: quantities[product.id] || 0,\n        prix_unitaire: product.prix_unitaire\n      }));\n      const updatedBC = {\n        ...bonCommande,\n        numero: numeroBonCommande,\n        lignes: selectedItems,\n        montant_total: selectedItems.reduce((acc, curr) => acc + curr.quantite * curr.prix_unitaire, 0)\n      };\n      console.log("Données envoyées au serveur:", updatedBC);\n      await axios__WEBPACK_IMPORTED_MODULE_3__["default"].patch(`/api/update-bon-commande/${id}/`, updatedBC);\n\n      // Générer automatiquement le PDF et le stocker dans le Drive\n      try {\n        await (0,_utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_1__.generatePDFDrive)("bon_commande", {\n          bonCommandeId: id,\n          chantierId: bonCommande.chantier,\n          chantierName: bonCommande.chantier_name || "Chantier",\n          societeName: bonCommande.societe_name || "Société par défaut",\n          numeroBonCommande: numeroBonCommande,\n          fournisseurName: bonCommande.fournisseur\n        }, {\n          onSuccess: response => {\n            console.log("✅ PDF généré et stocké dans le Drive:", response);\n            alert("Bon de commande mis à jour et PDF généré avec succès !");\n          },\n          onError: error => {\n            console.error("❌ Erreur lors de la génération du PDF:", error);\n            alert("Bon de commande mis à jour, mais erreur lors de la génération du PDF.");\n          }\n        });\n      } catch (pdfError) {\n        console.error("Erreur lors de la génération du PDF:", pdfError);\n        alert("Bon de commande mis à jour, mais erreur lors de la génération du PDF.");\n      }\n      window.location.href = "/BonCommande";\n    } catch (error) {\n      console.error("Erreur lors de la sauvegarde:", error);\n      alert("Erreur lors de la modification du bon de commande");\n    }\n  };\n\n  // Fonction pour calculer le total général\n  const calculateGrandTotal = () => {\n    return allProducts.filter(product => selectedProducts[product.id]).reduce((total, product) => {\n      const quantity = quantities[product.id] || 0;\n      return total + quantity * product.prix_unitaire;\n    }, 0);\n  };\n\n  // Filtrer les produits en fonction du terme de recherche\n  const filteredProducts = allProducts.filter(product => {\n    var _product$code_produit, _product$designation, _product$unite, _product$prix_unitair;\n    const searchTermLower = searchTerm.toLowerCase();\n    return ((_product$code_produit = product.code_produit) === null || _product$code_produit === void 0 ? void 0 : _product$code_produit.toLowerCase().includes(searchTermLower)) || ((_product$designation = product.designation) === null || _product$designation === void 0 ? void 0 : _product$designation.toLowerCase().includes(searchTermLower)) || ((_product$unite = product.unite) === null || _product$unite === void 0 ? void 0 : _product$unite.toLowerCase().includes(searchTermLower)) || ((_product$prix_unitair = product.prix_unitaire) === null || _product$prix_unitair === void 0 ? void 0 : _product$prix_unitair.toString().includes(searchTermLower));\n  });\n\n  // Affichage des états de chargement et d\'erreur\n  if (isLoading) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n      sx: {\n        p: 3,\n        display: \'flex\',\n        justifyContent: \'center\',\n        alignItems: \'center\',\n        minHeight: \'200px\'\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], null, "Chargement du bon de commande..."));\n  }\n  if (error) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n      sx: {\n        p: 3,\n        display: \'flex\',\n        flexDirection: \'column\',\n        alignItems: \'center\',\n        minHeight: \'200px\'\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n      color: "error",\n      sx: {\n        mb: 2\n      }\n    }, error), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n      variant: "body2",\n      color: "text.secondary"\n    }, "ID re\\xE7u: ", id || \'Aucun\'));\n  }\n  if (!bonCommande) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n      sx: {\n        p: 3,\n        display: \'flex\',\n        justifyContent: \'center\',\n        alignItems: \'center\',\n        minHeight: \'200px\'\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], null, "Aucun bon de commande trouv\\xE9"));\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      p: 3,\n      maxWidth: 1200,\n      margin: "0 auto"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      p: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "center",\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h5"\n  }, "Modification du Bon de Commande ", bonCommande.numero), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      display: "flex",\n      gap: 2,\n      alignItems: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    size: "small",\n    variant: "outlined",\n    placeholder: "Rechercher...",\n    value: searchTerm,\n    onChange: e => setSearchTerm(e.target.value),\n    InputProps: {\n      startAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n        position: "start"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fi__WEBPACK_IMPORTED_MODULE_9__.FiSearch, {\n        style: {\n          fontSize: "1.2rem"\n        }\n      }))\n    },\n    sx: {\n      width: 250\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    select: true,\n    size: "small",\n    label: "Plage de codes",\n    variant: "outlined",\n    value: codeRangeFilter,\n    onChange: e => setCodeRangeFilter(e.target.value),\n    sx: {\n      width: 150\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: ""\n  }, "Tous les codes"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "0-99"\n  }, "0-99"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "100-199"\n  }, "100-199"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "200-299"\n  }, "200-299"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "300-399"\n  }, "300-399"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "400-499"\n  }, "400-499"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "500+"\n  }, "500+"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "non-numeric"\n  }, "Non-num\\xE9rique")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    label: "Num\\xE9ro de Bon de Commande",\n    value: numeroBonCommande,\n    onChange: e => setNumeroBonCommande(e.target.value),\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_6__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    padding: "checkbox"\n  }, "S\\xE9lection"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, "D\\xE9signation"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, "Prix Unitaire"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, "Quantit\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, "Total"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], null, filteredProducts.map(product => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    key: product.id,\n    hover: true,\n    selected: selectedProducts[product.id]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    padding: "checkbox"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    checked: selectedProducts[product.id] || false,\n    onChange: () => handleCheckboxChange(product.id)\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, product.designation || product.nom_materiel), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, product.prix_unitaire.toFixed(2), " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    id: `quantity-modif-${product.id}`,\n    type: "number",\n    size: "small",\n    value: quantities[product.id] || "",\n    onChange: e => handleQuantityChange(product.id, e.target.value),\n    disabled: !selectedProducts[product.id],\n    InputProps: {\n      inputProps: {\n        min: 0\n      }\n    },\n    sx: {\n      width: "100px"\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, ((quantities[product.id] || 0) * product.prix_unitaire).toFixed(2), " ", "\\u20AC")))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      mt: 2,\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "center",\n      px: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      typography: "h6",\n      color: "primary.main"\n    }\n  }, "Total: ", calculateGrandTotal().toFixed(2), " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      display: "flex",\n      gap: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    onClick: () => window.location.href = "/BonCommande",\n    variant: "outlined"\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    onClick: async () => {\n      try {\n        await (0,_utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_1__.generatePDFDrive)("bon_commande", {\n          bonCommandeId: id,\n          chantierId: bonCommande.chantier,\n          chantierName: bonCommande.chantier_name || "Chantier",\n          societeName: bonCommande.societe_name || "Société par défaut",\n          numeroBonCommande: numeroBonCommande,\n          fournisseurName: bonCommande.fournisseur\n        }, {\n          onSuccess: response => {\n            console.log("✅ PDF généré et stocké dans le Drive:", response);\n          },\n          onError: error => {\n            console.error("❌ Erreur lors de la génération du PDF:", error);\n          }\n        });\n      } catch (error) {\n        console.error("Erreur lors de la génération du PDF:", error);\n      }\n    },\n    variant: "outlined",\n    color: "secondary",\n    disabled: !bonCommande\n  }, "G\\xE9n\\xE9rer PDF Drive"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    onClick: handleSave,\n    variant: "contained",\n    disabled: Object.keys(selectedProducts).length === 0\n  }, "Enregistrer les modifications")))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BonCommandeModif);\n\n//# sourceURL=webpack://frontend/./src/components/BonCommandeModif.js?')},"./src/components/BreadcrumbHeader.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_md__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-icons/md */ "./node_modules/react-icons/md/index.mjs");\n/* harmony import */ var react_icons_si__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-icons/si */ "./node_modules/react-icons/si/index.mjs");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");\n/* harmony import */ var _static_css_breadcrumb_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../static/css/breadcrumb.css */ "./static/css/breadcrumb.css");\n\n\n\n\n\n\nfunction matchPrefix(pathname, prefixes) {\n  return prefixes.find(p => p === "/" ? pathname === "/" : pathname.startsWith(p));\n}\nconst sectionConfigs = [{\n  key: "chantier",\n  label: "Chantier",\n  icon: react_icons_md__WEBPACK_IMPORTED_MODULE_2__.MdConstruction,\n  prefixes: ["/", "/ChantierDetail", "/TableauFacturation", "/GestionAppelsOffres", "/AgencyExpenses", "/ChantiersDashboard", "/TableauSuivi"]\n}, {\n  key: "agent_planning",\n  label: "Agent et planning",\n  icon: react_icons_md__WEBPACK_IMPORTED_MODULE_2__.MdEventAvailable,\n  prefixes: ["/Agent", "/PlanningContainer"]\n}, {\n  key: "document",\n  label: "Document",\n  icon: react_icons_md__WEBPACK_IMPORTED_MODULE_2__.MdFolderOpen,\n  prefixes: ["/CreationDevis", "/BonCommande", "/ListeDevis", "/ListeSituation", "/ListeFactures"]\n}, {\n  key: "drive",\n  label: "Drive",\n  icon: react_icons_si__WEBPACK_IMPORTED_MODULE_3__.SiGoogledrive,\n  prefixes: ["/drive"] // placeholder if needed later\n}];\nconst pageLabelByPrefix = [{\n  prefix: "/",\n  label: "Dashboard"\n}, {\n  prefix: "/ChantierDetail",\n  label: "Récap Chantier"\n}, {\n  prefix: "/TableauFacturation",\n  label: "Tableau Facturation"\n}, {\n  prefix: "/GestionAppelsOffres",\n  label: "Liste Appel offres"\n}, {\n  prefix: "/AgencyExpenses",\n  label: "Agence"\n}, {\n  prefix: "/Agent",\n  label: "Gestion agent"\n}, {\n  prefix: "/PlanningContainer",\n  label: "Planning hebdo"\n}, {\n  prefix: "/CreationDevis",\n  label: "Devis (création)"\n}, {\n  prefix: "/BonCommande",\n  label: "Liste BC"\n}, {\n  prefix: "/ListeDevis",\n  label: "Liste Devis"\n}, {\n  prefix: "/ListeSituation",\n  label: "Liste Situation"\n}, {\n  prefix: "/ListeFactures",\n  label: "Liste facture"\n}, {\n  prefix: "/paiements-sous-traitant",\n  label: "Paiements sous-traitant"\n}];\nconst BreadcrumbHeader = ({\n  user,\n  onLogout\n}) => {\n  const location = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useLocation)();\n  const params = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useParams)();\n  const {\n    pathname\n  } = location;\n  const section = sectionConfigs.find(cfg => matchPrefix(pathname, cfg.prefixes));\n  const SectionIcon = (section === null || section === void 0 ? void 0 : section.icon) || react_icons_md__WEBPACK_IMPORTED_MODULE_2__.MdConstruction;\n  const pageLabelEntry = pageLabelByPrefix.find(e => e.prefix === "/" ? pathname === "/" : pathname.startsWith(e.prefix));\n  const pageLabel = (pageLabelEntry === null || pageLabelEntry === void 0 ? void 0 : pageLabelEntry.label) || "";\n\n  // Suffix contextuel: pour /ChantierDetail/:id, afficher le nom du chantier si possible\n  const [chantierName, setChantierName] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const id = pathname.startsWith("/ChantierDetail/") ? params.id || pathname.split("/")[2] : null;\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    let cancelled = false;\n    const reset = () => {\n      if (!cancelled) setChantierName("");\n    };\n    if (!id) {\n      reset();\n      return () => {\n        cancelled = true;\n      };\n    }\n\n    // 1) Essayer depuis l\'historique local\n    try {\n      const hist = JSON.parse(localStorage.getItem("chantier_history") || "[]");\n      const found = hist.find(c => String(c.id) === String(id));\n      if (found !== null && found !== void 0 && found.chantier_name) {\n        setChantierName(found.chantier_name);\n        return () => {\n          cancelled = true;\n        };\n      }\n    } catch (_) {}\n\n    // 2) Fallback: requête API légère\n    (async () => {\n      try {\n        var _res$data;\n        const res = await axios__WEBPACK_IMPORTED_MODULE_5__["default"].get(`/api/chantier/${id}/details/`);\n        if (!cancelled) setChantierName(((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.nom) || "");\n      } catch (_) {\n        if (!cancelled) setChantierName("");\n      }\n    })();\n    return () => {\n      cancelled = true;\n    };\n  }, [id]);\n  const handleLogout = () => {\n    if (onLogout) {\n      onLogout();\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "breadcrumb-header"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "breadcrumb-left"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "breadcrumb-icon"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(SectionIcon, null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "breadcrumb-text"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "breadcrumb-line"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    className: "breadcrumb-section"\n  }, (section === null || section === void 0 ? void 0 : section.label) || ""), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    className: "breadcrumb-sep"\n  }, "\\u203A"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    className: "breadcrumb-page"\n  }, pageLabel), id && chantierName && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    className: "breadcrumb-sep"\n  }, "\\u203A"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    className: "breadcrumb-context"\n  }, chantierName))))), user && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "breadcrumb-right"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "user-section"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    className: "user-name"\n  }, user.first_name || user.username || "Utilisateur"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    className: "logout-button",\n    onClick: handleLogout,\n    title: "Se d\\xE9connecter"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg", {\n    width: "16",\n    height: "16",\n    viewBox: "0 0 24 24",\n    fill: "none",\n    stroke: "currentColor",\n    strokeWidth: "2",\n    strokeLinecap: "round",\n    strokeLinejoin: "round"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {\n    d: "M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("polyline", {\n    points: "16,17 21,12 16,7"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("line", {\n    x1: "21",\n    y1: "12",\n    x2: "9",\n    y2: "12"\n  })), "D\\xE9connexion"))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BreadcrumbHeader);\n\n//# sourceURL=webpack://frontend/./src/components/BreadcrumbHeader.js?')},"./src/components/CalendrierAgent.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _fullcalendar_core_locales_fr__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @fullcalendar/core/locales/fr */ "../node_modules/@fullcalendar/core/locales/fr.js");\n/* harmony import */ var _fullcalendar_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @fullcalendar/react */ "../node_modules/@fullcalendar/react/dist/index.js");\n/* harmony import */ var _fullcalendar_resource_timeline__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @fullcalendar/resource-timeline */ "../node_modules/@fullcalendar/resource-timeline/index.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material_Box__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material/Box */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material_Button__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material/Button */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material_Modal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material/Modal */ "./node_modules/@mui/material/Modal/Modal.js");\n/* harmony import */ var _mui_material_TextField__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material/TextField */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/system */ "./node_modules/@mui/system/esm/styled.js");\n/* harmony import */ var _mui_x_date_pickers_AdapterDayjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/x-date-pickers/AdapterDayjs */ "./node_modules/@mui/x-date-pickers/AdapterDayjs/index.js");\n/* harmony import */ var _mui_x_date_pickers_DatePicker__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/x-date-pickers/DatePicker */ "./node_modules/@mui/x-date-pickers/DatePicker/DatePicker.js");\n/* harmony import */ var _mui_x_date_pickers_LocalizationProvider__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/x-date-pickers/LocalizationProvider */ "./node_modules/@mui/x-date-pickers/LocalizationProvider/LocalizationProvider.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dayjs */ "./node_modules/dayjs/dayjs.min.js");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var dayjs_locale_fr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dayjs/locale/fr */ "./node_modules/dayjs/locale/fr.js");\n/* harmony import */ var dayjs_locale_fr__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dayjs_locale_fr__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _static_css_calendrierAgent_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../static/css/calendrierAgent.css */ "./static/css/calendrierAgent.css");\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // Importer la locale française\n\n\n\n// Configurer dayjs pour utiliser la locale française\ndayjs__WEBPACK_IMPORTED_MODULE_0___default().locale("fr");\n\n// Styles de la modale avec Emotion - Version moderne\nconst ModalStyle = (0,_mui_system__WEBPACK_IMPORTED_MODULE_4__["default"])(_mui_material_Box__WEBPACK_IMPORTED_MODULE_5__["default"])({\n  position: "absolute",\n  top: "50%",\n  left: "50%",\n  transform: "translate(-50%, -50%)",\n  width: 450,\n  maxHeight: "90vh",\n  overflowY: "auto",\n  background: "linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)",\n  border: "none",\n  borderRadius: "20px",\n  boxShadow: "0 20px 60px rgba(0, 0, 0, 0.3), 0 8px 24px rgba(0, 0, 0, 0.15)",\n  padding: "30px",\n  color: "#2c3e50",\n  fontSize: "16px",\n  fontFamily: "\'Inter\', -apple-system, BlinkMacSystemFont, sans-serif",\n  "& h2": {\n    color: "#2c3e50",\n    fontSize: "24px",\n    fontWeight: "700",\n    marginBottom: "8px",\n    textAlign: "center",\n    background: "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",\n    WebkitBackgroundClip: "text",\n    WebkitTextFillColor: "transparent",\n    backgroundClip: "text"\n  },\n  "& p": {\n    color: "#6c757d",\n    fontSize: "14px",\n    textAlign: "center",\n    marginBottom: "24px",\n    fontWeight: "500"\n  },\n  "& .MuiTextField-root": {\n    marginBottom: "16px",\n    "& .MuiOutlinedInput-root": {\n      borderRadius: "12px",\n      transition: "all 0.3s ease",\n      "&:hover": {\n        boxShadow: "0 4px 12px rgba(102, 126, 234, 0.15)"\n      },\n      "&.Mui-focused": {\n        boxShadow: "0 4px 12px rgba(102, 126, 234, 0.25)"\n      }\n    }\n  },\n  "& .MuiSelect-root": {\n    borderRadius: "12px"\n  },\n  "& .MuiFormControl-root": {\n    marginBottom: "16px",\n    "& .MuiOutlinedInput-root": {\n      borderRadius: "12px",\n      transition: "all 0.3s ease",\n      "&:hover": {\n        boxShadow: "0 4px 12px rgba(102, 126, 234, 0.15)"\n      },\n      "&.Mui-focused": {\n        boxShadow: "0 4px 12px rgba(102, 126, 234, 0.25)"\n      }\n    }\n  }\n});\nconst fetchEvents = async () => {\n  try {\n    const response = await axios__WEBPACK_IMPORTED_MODULE_6__["default"].get("/api/events/");\n    return response.data;\n  } catch (error) {\n    console.error("Erreur lors de la récupération des événements", error);\n  }\n};\n\n// Fonction pour créer un nouvel événement\nconst createEvent = async event => {\n  try {\n    const eventData = {\n      ...event\n    };\n    if (event.status === "M") {\n      eventData.chantier = event.chantier; // Inclure le chantier\n    }\n    await axios__WEBPACK_IMPORTED_MODULE_6__["default"].post("/api/events/", eventData);\n    // Recharger les agents pour mettre à jour les heures mensuelles\n    refreshAgents();\n  } catch (error) {\n    console.error("Erreur lors de la création de l\'événement", error);\n  }\n};\n\n// Fonction pour supprimer les événements existants pour un agent donné sur une période donnée\nconst deleteEventsByAgentAndPeriod = async (agentId, startDate, endDate) => {\n  try {\n    await axios__WEBPACK_IMPORTED_MODULE_6__["default"].delete("/api/delete_events_by_agent_and_period/", {\n      params: {\n        agent: agentId,\n        start_date: startDate,\n        end_date: endDate\n      }\n    });\n  } catch (error) {\n    console.error("Erreur lors de la suppression des événements par période", error);\n  }\n};\n\n// Ajout des sous-types d\'événements\nconst absenceSubtypes = [{\n  value: "justifiee",\n  label: "Justifiée"\n}, {\n  value: "injustifiee",\n  label: "Injustifiée"\n}, {\n  value: "maladie",\n  label: "Maladie"\n}, {\n  value: "rtt",\n  label: "RTT"\n}];\nconst congeSubtypes = [{\n  value: "paye",\n  label: "Payé"\n}, {\n  value: "sans_solde",\n  label: "Sans solde"\n}, {\n  value: "parental",\n  label: "Parental"\n}, {\n  value: "maternite",\n  label: "Maternité"\n}, {\n  value: "paternite",\n  label: "Paternité"\n}];\nconst CalendrierAgent = ({\n  agents\n}) => {\n  const [events, setEvents] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n  const [modalIsOpen, setModalIsOpen] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n  const [selectedDate, setSelectedDate] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n  const [selectedEndDate, setSelectedEndDate] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n  const [selectedAgent, setSelectedAgent] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n  const [selectedAgentName, setSelectedAgentName] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n  const [eventType, setEventType] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)("");\n  const [subtype, setSubtype] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)("");\n  const fetchAgentsWithWorkDays = async () => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_6__["default"].get("/api/agents-with-work-days/"); // Ajustez l\'URL selon votre configuration\n      return response.data;\n    } catch (error) {\n      console.error("Erreur lors de la récupération des agents avec leurs jours de travail:", error);\n      return [];\n    }\n  };\n  const loadEvents = async () => {\n    const loadedEvents = await fetchEvents();\n    const agentsWithWorkDays = await fetchAgentsWithWorkDays();\n    let adaptedEvents = [];\n    if (loadedEvents && loadedEvents.length > 0) {\n      adaptedEvents = loadedEvents.map(event => ({\n        id: event.id,\n        resourceId: event.agent.toString(),\n        start: event.start_date,\n        end: event.end_date,\n        title: event.event_type === "modification_horaire" ? `${event.hours_modified}H` : `${event.event_type}${event.subtype ? ` (${event.subtype})` : ""}`,\n        color: getColorByStatus(event.event_type, event.subtype)\n      }));\n    }\n    if (agentsWithWorkDays.length > 0) {\n      const dayMapping = {\n        lundi: 1,\n        mardi: 2,\n        mercredi: 3,\n        jeudi: 4,\n        vendredi: 5,\n        samedi: 6,\n        dimanche: 0\n      };\n      agentsWithWorkDays.forEach(agent => {\n        const workDays = agent.jours_travail ? agent.jours_travail.split(",").map(day => dayMapping[day.trim().toLowerCase()]) : [1, 2, 3, 4, 5];\n        const currentYear = dayjs__WEBPACK_IMPORTED_MODULE_0___default()().year();\n        const nextYear = currentYear + 1;\n        [currentYear, nextYear].forEach(year => {\n          for (let month = 0; month < 12; month++) {\n            const daysInMonth = dayjs__WEBPACK_IMPORTED_MODULE_0___default()().year(year).month(month).daysInMonth();\n            const monthDays = Array.from({\n              length: daysInMonth\n            }, (_, i) => dayjs__WEBPACK_IMPORTED_MODULE_0___default()().year(year).month(month).date(i + 1));\n            monthDays.forEach(date => {\n              const dayOfWeek = date.day();\n              const formattedDate = date.format("YYYY-MM-DD");\n              const eventExists = adaptedEvents.some(event => event.resourceId === agent.id.toString() && event.start === formattedDate);\n              if (!eventExists) {\n                const isWorkDay = workDays.includes(dayOfWeek);\n                adaptedEvents.push({\n                  id: `${agent.id}-${formattedDate}`,\n                  resourceId: agent.id.toString(),\n                  start: formattedDate,\n                  end: formattedDate,\n                  title: isWorkDay ? "P" : " ",\n                  color: isWorkDay ? "green" : "grey"\n                });\n              }\n            });\n          }\n        });\n      });\n    }\n    setEvents(adaptedEvents);\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    loadEvents();\n  }, []);\n  const handleResourceClick = (agentId, agentName) => {\n    setSelectedAgent(agentId);\n    setSelectedAgentName(agentName);\n    setModalIsOpen(true);\n  };\n  const closeModal = () => {\n    setModalIsOpen(false);\n  };\n  const addEvent = async (hours = 0) => {\n    try {\n      if (!selectedDate || !selectedAgent || !eventType) {\n        console.error("La date, l\'agent ou le type d\'événement est manquant");\n        return;\n      }\n      if (eventType === "absence" && !subtype || eventType === "conge" && !subtype) {\n        alert("Veuillez sélectionner un sous-type pour l\'absence ou le congé.");\n        return;\n      }\n      const startDate = dayjs__WEBPACK_IMPORTED_MODULE_0___default()(selectedDate).format("YYYY-MM-DD");\n      const endDate = dayjs__WEBPACK_IMPORTED_MODULE_0___default()(selectedEndDate || selectedDate).format("YYYY-MM-DD");\n\n      // Si c\'est un événement A ou C, supprimer d\'abord les schedules\n      if (eventType === "absence" || eventType === "conge") {\n        let currentDate = dayjs__WEBPACK_IMPORTED_MODULE_0___default()(startDate);\n        const finalDate = dayjs__WEBPACK_IMPORTED_MODULE_0___default()(endDate);\n        while (currentDate.isBefore(finalDate, "day") || currentDate.isSame(finalDate, "day")) {\n          const weekNumber = currentDate.isoWeek();\n          const year = currentDate.year();\n          const dayName = currentDate.locale("fr").format("dddd");\n          const dayNameCapitalized = dayName.charAt(0).toUpperCase() + dayName.slice(1);\n\n          // Créer un tableau de toutes les heures à supprimer\n          const deletions = Array.from({\n            length: 17\n          }, (_, i) => {\n            const hour = `${i + 6}:00`;\n            return {\n              agentId: selectedAgent,\n              week: weekNumber,\n              year: year,\n              day: dayNameCapitalized,\n              hour: hour\n            };\n          });\n          try {\n            // Appeler l\'API pour supprimer les schedules\n            await axios__WEBPACK_IMPORTED_MODULE_6__["default"].post("/api/delete_schedule/", deletions);\n          } catch (error) {\n            console.error("❌ Erreur lors de la suppression des schedules:", error);\n          }\n          currentDate = currentDate.add(1, "day");\n        }\n      }\n\n      // Supprimer les événements existants de la base de données\n      if (eventType === "presence") {\n        // Pour les événements de présence, supprimer les événements existants\n        // mais ne pas créer de nouvel événement en base\n        await deleteEventsByAgentAndPeriod(selectedAgent, startDate, endDate);\n      } else {\n        // Pour les autres types d\'événements, supprimer et créer\n        await deleteEventsByAgentAndPeriod(selectedAgent, startDate, endDate);\n      }\n\n      // Supprimer les événements existants de l\'affichage local\n      setEvents(prevEvents => prevEvents.filter(event => !(event.resourceId === selectedAgent.toString() && dayjs__WEBPACK_IMPORTED_MODULE_0___default()(event.start).isBetween(startDate, endDate, null, "[]"))));\n      let currentDate = dayjs__WEBPACK_IMPORTED_MODULE_0___default()(startDate);\n      const finalDate = dayjs__WEBPACK_IMPORTED_MODULE_0___default()(endDate);\n      const newEvents = [];\n      while (currentDate.isBefore(finalDate, "day") || currentDate.isSame(finalDate, "day")) {\n        const formattedDate = currentDate.format("YYYY-MM-DD");\n        const newEvent = {\n          agent: selectedAgent,\n          start_date: formattedDate,\n          end_date: formattedDate,\n          event_type: eventType,\n          subtype: subtype || null,\n          hours_modified: eventType === "modification_horaire" ? hours : 0,\n          chantier: null\n        };\n        try {\n          if (eventType === "presence") {\n            // Pour les événements de présence, ne pas créer d\'événement\n            // Juste mettre à jour les jours de présence\n            await axios__WEBPACK_IMPORTED_MODULE_6__["default"].post("/api/update_days_present/", {\n              agent_id: selectedAgent,\n              month: formattedDate,\n              increment: true\n            });\n\n            // Ajouter un événement "P" (Présence) par défaut\n            newEvents.push({\n              id: `${newEvent.agent}-${newEvent.start_date}`,\n              resourceId: newEvent.agent.toString(),\n              start: newEvent.start_date,\n              end: newEvent.end_date,\n              title: "P",\n              color: getColorByStatus("presence", null)\n            });\n          } else {\n            // Pour les autres types d\'événements, créer l\'événement normalement\n            const response = await axios__WEBPACK_IMPORTED_MODULE_6__["default"].post("/api/events/", newEvent);\n            newEvents.push({\n              id: `${newEvent.agent}-${newEvent.start_date}`,\n              resourceId: newEvent.agent.toString(),\n              start: newEvent.start_date,\n              end: newEvent.end_date,\n              title: eventType === "modification_horaire" ? `${hours}H` : `${eventType}${subtype ? ` (${subtype})` : ""}`,\n              color: getColorByStatus(eventType, subtype)\n            });\n          }\n        } catch (error) {\n          console.error("Erreur lors de la création de l\'événement:", error);\n        }\n        currentDate = currentDate.add(1, "day");\n      }\n      setEvents(prevEvents => [...prevEvents, ...newEvents]);\n\n      // Fermer le modal après l\'ajout d\'événements\n      closeModal();\n    } catch (error) {\n      console.error("Erreur dans addEvent:", error);\n    }\n  };\n  const handleDateChange = (newValue, isEndDate = false) => {\n    if (isEndDate) {\n      setSelectedEndDate(dayjs__WEBPACK_IMPORTED_MODULE_0___default()(newValue));\n    } else {\n      setSelectedDate(dayjs__WEBPACK_IMPORTED_MODULE_0___default()(newValue));\n    }\n  };\n  const getColorByStatus = (eventType, subtype) => {\n    if (eventType === "presence") return "green";\n    if (eventType === "absence") {\n      if (subtype === "justifiee") return "#fbc02d"; // jaune\n      if (subtype === "injustifiee") return "#d32f2f"; // rouge foncé\n      if (subtype === "maladie") return "#1976d2"; // bleu\n      if (subtype === "rtt") return "#7b1fa2"; // violet\n      return "red";\n    }\n    if (eventType === "conge") {\n      if (subtype === "paye") return "#388e3c"; // vert foncé\n      if (subtype === "sans_solde") return "#ffa000"; // orange\n      if (subtype === "parental") return "#0288d1"; // bleu clair\n      if (subtype === "maternite" || subtype === "paternite") return "#f06292"; // rose\n      return "purple";\n    }\n    if (eventType === "modification_horaire") return "orange";\n    return "grey";\n  };\n  const style = {\n    bgcolor: "white",\n    padding: "20px"\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_fullcalendar_react__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    plugins: [_fullcalendar_resource_timeline__WEBPACK_IMPORTED_MODULE_8__["default"]],\n    schedulerLicenseKey: "GPL-My-Project-Is-Open-Source",\n    initialView: "resourceTimelineMonth",\n    locale: _fullcalendar_core_locales_fr__WEBPACK_IMPORTED_MODULE_9__["default"],\n    resources: agents.length > 0 ? agents.map(agent => ({\n      id: agent.id.toString(),\n      title: `${agent.name} ${agent.surname}`\n    })) : [],\n    events: events,\n    editable: true,\n    selectable: true,\n    select: handleResourceClick,\n    resourceAreaWidth: "300px",\n    height: "auto",\n    resourceLabelContent: arg => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement("div", {\n      style: {\n        position: "relative",\n        width: "100%",\n        height: "100%"\n      },\n      onClick: () => handleResourceClick(arg.resource.id, arg.resource.title)\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement("span", null, arg.resource.title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement("div", {\n      style: {\n        position: "absolute",\n        top: 0,\n        left: 0,\n        width: "100%",\n        height: "100%",\n        cursor: "pointer",\n        backgroundColor: "transparent"\n      }\n    }))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material_Modal__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    open: modalIsOpen,\n    onClose: closeModal\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(ModalStyle, {\n    sx: style\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement("h2", null, "Modifier la p\\xE9riode"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement("p", null, "Agent : ", selectedAgentName), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_x_date_pickers_LocalizationProvider__WEBPACK_IMPORTED_MODULE_11__.LocalizationProvider, {\n    dateAdapter: _mui_x_date_pickers_AdapterDayjs__WEBPACK_IMPORTED_MODULE_12__.AdapterDayjs\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_x_date_pickers_DatePicker__WEBPACK_IMPORTED_MODULE_13__.DatePicker, {\n    label: "Date de d\\xE9but",\n    value: selectedDate,\n    onChange: newValue => handleDateChange(newValue),\n    inputFormat: "DD-MM-YYYY",\n    renderInput: params => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material_TextField__WEBPACK_IMPORTED_MODULE_14__["default"], _extends({}, params, {\n      fullWidth: true\n    }))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_x_date_pickers_DatePicker__WEBPACK_IMPORTED_MODULE_13__.DatePicker, {\n    label: "Date de fin",\n    value: selectedEndDate,\n    onChange: newValue => handleDateChange(newValue, true),\n    inputFormat: "DD-MM-YYYY",\n    renderInput: params => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material_TextField__WEBPACK_IMPORTED_MODULE_14__["default"], _extends({}, params, {\n      fullWidth: true\n    }))\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    label: "Type d\'\\xE9v\\xE9nement",\n    value: eventType,\n    onChange: e => {\n      setEventType(e.target.value);\n      setSubtype(""); // reset subtype on type change\n    },\n    fullWidth: true,\n    style: {\n      marginBottom: "16px"\n    },\n    displayEmpty: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    value: ""\n  }, "-- S\\xE9lectionner un type --"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    value: "presence"\n  }, "Pr\\xE9sence"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    value: "absence"\n  }, "Absence"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    value: "conge"\n  }, "Cong\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    value: "modification_horaire"\n  }, "Horaire Modifi\\xE9")), eventType === "absence" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    label: "Type d\'absence",\n    value: subtype,\n    onChange: e => setSubtype(e.target.value),\n    fullWidth: true,\n    style: {\n      marginBottom: "16px"\n    },\n    displayEmpty: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    value: ""\n  }, "-- S\\xE9lectionner un type d\'absence --"), absenceSubtypes.map(opt => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    key: opt.value,\n    value: opt.value\n  }, opt.label))), eventType === "conge" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    label: "Type de cong\\xE9",\n    value: subtype,\n    onChange: e => setSubtype(e.target.value),\n    fullWidth: true,\n    style: {\n      marginBottom: "16px"\n    },\n    displayEmpty: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    value: ""\n  }, "-- S\\xE9lectionner un type de cong\\xE9 --"), congeSubtypes.map(opt => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    key: opt.value,\n    value: opt.value\n  }, opt.label))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material_Box__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      display: "flex",\n      gap: 2,\n      justifyContent: "center",\n      mt: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material_Button__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "contained",\n    sx: {\n      background: "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",\n      borderRadius: "12px",\n      padding: "12px 24px",\n      fontWeight: "600",\n      fontSize: "14px",\n      textTransform: "none",\n      boxShadow: "0 4px 15px rgba(102, 126, 234, 0.3)",\n      transition: "all 0.3s ease",\n      "&:hover": {\n        background: "linear-gradient(135deg, #764ba2 0%, #667eea 100%)",\n        transform: "translateY(-2px)",\n        boxShadow: "0 6px 20px rgba(102, 126, 234, 0.4)"\n      },\n      "&:disabled": {\n        background: "#e9ecef",\n        color: "#6c757d",\n        boxShadow: "none"\n      }\n    },\n    onClick: () => addEvent(eventType === "modification_horaire" ? prompt("Combien d\'heures à modifier ?") : 0),\n    disabled: !eventType || (eventType === "absence" || eventType === "conge") && !subtype\n  }, "\\u2705 Ajouter l\'\\xE9v\\xE9nement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material_Button__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "outlined",\n    onClick: closeModal,\n    sx: {\n      borderRadius: "12px",\n      padding: "12px 24px",\n      fontWeight: "600",\n      fontSize: "14px",\n      textTransform: "none",\n      borderColor: "#dee2e6",\n      color: "#6c757d",\n      transition: "all 0.3s ease",\n      "&:hover": {\n        borderColor: "#adb5bd",\n        backgroundColor: "#f8f9fa",\n        transform: "translateY(-1px)"\n      }\n    }\n  }, "\\u274C Fermer")))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CalendrierAgent);\n\n//# sourceURL=webpack://frontend/./src/components/CalendrierAgent.js?')},"./src/components/CalendrierAgentContainer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Divider/Divider.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _CalendrierAgent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CalendrierAgent */ "./src/components/CalendrierAgent.js");\n/* harmony import */ var _CreateAgentModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CreateAgentModal */ "./src/components/CreateAgentModal.js");\n/* harmony import */ var _EditAgentModal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./EditAgentModal */ "./src/components/EditAgentModal.js");\n\n\n\n\n // Assurez-vous que le chemin est correct\n // Assurez-vous que le chemin est correct\n\nconst CalendrierAgentContainer = () => {\n  const [agents, setAgents] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [isEditModalOpen, setIsEditModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const refreshAgents = () => {\n    axios__WEBPACK_IMPORTED_MODULE_4__["default"].get("/api/agent/").then(response => {\n      setAgents(response.data);\n    }).catch(error => {\n      console.error("Erreur lors de la récupération des agents:", error);\n    });\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    axios__WEBPACK_IMPORTED_MODULE_4__["default"].get("/api/agent/").then(response => {\n      setAgents(response.data);\n    }).catch(error => {\n      console.error("Erreur lors de la récupération des agents:", error);\n    });\n  }, []);\n  const handleOpenEditModal = () => {\n    setIsEditModalOpen(true);\n  };\n  const handleCloseEditModal = () => {\n    setIsEditModalOpen(false);\n  };\n\n  // Séparer les agents par type de paiement\n  const agentsJournaliers = agents.filter(agent => agent.type_paiement === "journalier");\n  const agentsHoraires = agents.filter(agent => agent.type_paiement === "horaire");\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, agentsHoraires.length > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    mb: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    variant: "h5",\n    component: "h2",\n    sx: {\n      fontWeight: "bold",\n      color: "#ed6c02",\n      borderBottom: "2px solid #ed6c02",\n      paddingBottom: 1,\n      marginBottom: 2\n    }\n  }, "\\u23F0 Agents Horaires (", agentsHoraires.length, ")"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_CalendrierAgent__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    agents: agentsHoraires\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      margin: "24px 0"\n    }\n  })), agentsJournaliers.length > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    mb: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    variant: "h5",\n    component: "h2",\n    sx: {\n      fontWeight: "bold",\n      color: "#1976d2",\n      borderBottom: "2px solid #1976d2",\n      paddingBottom: 1,\n      marginBottom: 2\n    }\n  }, "\\uD83D\\uDC77\\u200D\\u2642\\uFE0F Agents Journaliers (", agentsJournaliers.length, ")"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_CalendrierAgent__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    agents: agentsJournaliers\n  }))), agents.length === 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    textAlign: "center",\n    py: 4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    variant: "h6",\n    color: "textSecondary"\n  }, "Aucun agent trouv\\xE9")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    display: "flex",\n    justifyContent: "space-evenly",\n    style: {\n      marginBottom: "10px"\n    },\n    alignItems: "center",\n    mb: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_CreateAgentModal__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    refreshAgents: refreshAgents\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    variant: "contained",\n    color: "secondary",\n    onClick: handleOpenEditModal\n  }, "Modifier Agent"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_EditAgentModal__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    isOpen: isEditModalOpen,\n    handleClose: handleCloseEditModal,\n    refreshAgents: refreshAgents,\n    agents: agents\n  })));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CalendrierAgentContainer);\n\n//# sourceURL=webpack://frontend/./src/components/CalendrierAgentContainer.js?')},"./src/components/ChantierDetail.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Container/Container.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/CircularProgress/CircularProgress.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/AppBar/AppBar.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Tabs/Tabs.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Tab/Tab.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");\n/* harmony import */ var _chantier_RecapFinancierContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chantier/RecapFinancierContext */ "./src/components/chantier/RecapFinancierContext.js");\n/* harmony import */ var _mui_icons_material_Refresh__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/icons-material/Refresh */ "./node_modules/@mui/icons-material/Refresh.js");\n/* harmony import */ var _mui_icons_material_Search__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/icons-material/Search */ "./node_modules/@mui/icons-material/Search.js");\n/* harmony import */ var fuse_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! fuse.js */ "./node_modules/fuse.js/dist/fuse.mjs");\n/* harmony import */ var _chantier_ChantierCommandesTab__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chantier/ChantierCommandesTab */ "./src/components/chantier/ChantierCommandesTab.js");\n/* harmony import */ var _chantier_ChantierDocumentsTab__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chantier/ChantierDocumentsTab */ "./src/components/chantier/ChantierDocumentsTab.js");\n/* harmony import */ var _chantier_ChantierInfoTab__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chantier/ChantierInfoTab */ "./src/components/chantier/ChantierInfoTab.js");\n/* harmony import */ var _chantier_ChantierRecapFinancierTab__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./chantier/ChantierRecapFinancierTab */ "./src/components/chantier/ChantierRecapFinancierTab.js");\n\n\n\n\n\n\n// Composants des onglets\n\n\n\n\n\n\n\n\n// Déplace TabPanel en dehors du composant ChantierDetail\nconst TabPanel = ({\n  children,\n  value,\n  index\n}) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n  role: "tabpanel",\n  hidden: value !== index,\n  id: `chantier-tabpanel-${index}`,\n  "aria-labelledby": `chantier-tab-${index}`,\n  style: {\n    display: value === index ? "block" : "none"\n  }\n}, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n  sx: {\n    p: 3\n  }\n}, children));\nconst ChantierDetail = () => {\n  const {\n    id\n  } = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_7__.useParams)();\n  const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_7__.useNavigate)();\n  const [selectedTab, setSelectedTab] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [chantierData, setChantierData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n\n  // États persistants pour chaque sous-onglet\n  const [documentsState, setDocumentsState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [uiState, setUiState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    commandes: {\n      filters: {\n        numero: "",\n        fournisseur: "",\n        date_creation: "",\n        montant_total: "",\n        statut: "",\n        statut_paiement: "",\n        montant_paye: "",\n        reste_a_payer: ""\n      },\n      openAccordions: {}\n    }\n    // ... autres onglets plus tard\n  });\n  const [infoState, setInfoState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n\n  // --- BARRE DE RECHERCHE CHANTIER ---\n  const [chantiers, setChantiers] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [searchValue, setSearchValue] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [searchResults, setSearchResults] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [showDropdown, setShowDropdown] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [history, setHistory] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n\n  // Ref pour la barre de recherche et le dropdown\n  const searchBarRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n\n  // Charger l\'historique depuis localStorage\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const hist = JSON.parse(localStorage.getItem("chantier_history") || "[]");\n    setHistory(hist);\n  }, []);\n\n  // Charger la liste des chantiers (API)\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const fetchChantiers = async () => {\n      try {\n        const res = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].get("/api/chantier/");\n        setChantiers(res.data);\n\n        // Nettoyer l\'historique avec les données fraîches\n        cleanHistory(res.data);\n      } catch (e) {\n        console.error("Erreur lors du chargement des chantiers:", e);\n      }\n    };\n    fetchChantiers();\n  }, []);\n\n  // Fonction pour nettoyer et mettre à jour l\'historique\n  const cleanHistory = freshChantiers => {\n    const hist = JSON.parse(localStorage.getItem("chantier_history") || "[]");\n    const validChantierIds = freshChantiers.map(c => c.id);\n\n    // Filtrer les chantiers supprimés et mettre à jour les noms\n    const updatedHistory = hist.filter(chantier => validChantierIds.includes(chantier.id)).map(chantier => {\n      // Trouver les données fraîches pour ce chantier\n      const freshChantier = freshChantiers.find(c => c.id === chantier.id);\n      if (freshChantier) {\n        return {\n          id: chantier.id,\n          chantier_name: freshChantier.nom || freshChantier.chantier_name || chantier.chantier_name\n        };\n      }\n      return chantier;\n    });\n\n    // Mettre à jour l\'historique si des changements ont été détectés\n    const hasChanges = updatedHistory.length !== hist.length || updatedHistory.some((updated, index) => hist[index] && updated.chantier_name !== hist[index].chantier_name);\n    if (hasChanges) {\n      setHistory(updatedHistory);\n      localStorage.setItem("chantier_history", JSON.stringify(updatedHistory));\n    }\n  };\n\n  // Recherche fuzzy avec Fuse.js\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!searchValue) {\n      setSearchResults([]);\n      return;\n    }\n    const fuse = new fuse_js__WEBPACK_IMPORTED_MODULE_9__["default"](chantiers, {\n      keys: ["chantier_name"],\n      threshold: 0.4 // tolère les fautes\n    });\n    setSearchResults(fuse.search(searchValue).map(r => r.item));\n  }, [searchValue, chantiers]);\n\n  // Fermer le dropdown si clic en dehors\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const handleClickOutside = event => {\n      if (searchBarRef.current && !searchBarRef.current.contains(event.target)) {\n        setShowDropdown(false);\n      }\n    };\n    document.addEventListener("mousedown", handleClickOutside);\n    return () => {\n      document.removeEventListener("mousedown", handleClickOutside);\n    };\n  }, []);\n\n  // Gérer la sélection d\'un chantier\n  const handleSelectChantier = async chantier => {\n    try {\n      // Récupérer les données fraîches du chantier depuis l\'API\n      const response = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].get(`/api/chantier/${chantier.id}/details/`);\n      const freshChantierData = response.data;\n\n      // Créer un objet chantier avec les données fraîches pour l\'historique\n      const updatedChantier = {\n        id: freshChantierData.id,\n        chantier_name: freshChantierData.nom || freshChantierData.chantier_name\n      };\n\n      // Mettre à jour l\'historique avec les données fraîches\n      let newHistory = [updatedChantier, ...history.filter(c => c.id !== updatedChantier.id)];\n      if (newHistory.length > 5) newHistory = newHistory.slice(0, 5);\n      setHistory(newHistory);\n      localStorage.setItem("chantier_history", JSON.stringify(newHistory));\n      setShowDropdown(false);\n      setSearchValue("");\n\n      // Rediriger vers le chantier sélectionné\n      navigate(`/ChantierDetail/${updatedChantier.id}`);\n    } catch (error) {\n      var _error$response;\n      console.error("Erreur lors de la sélection du chantier:", error);\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 404) {\n        // Si le chantier n\'existe plus, le retirer de l\'historique\n        const filteredHistory = history.filter(c => c.id !== chantier.id);\n        setHistory(filteredHistory);\n        localStorage.setItem("chantier_history", JSON.stringify(filteredHistory));\n        alert("Ce chantier n\'existe plus ou a été supprimé.");\n      } else {\n        // Autre erreur (500, réseau, etc.) - essayer de rafraîchir l\'historique\n        console.log("Tentative de rafraîchissement de l\'historique...");\n        await refreshHistory();\n        alert("Erreur de connexion. L\'historique a été mis à jour.");\n      }\n    }\n  };\n\n  // Fonction pour forcer la mise à jour de l\'historique (utile après modification d\'un chantier)\n  const refreshHistory = async () => {\n    try {\n      const res = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].get("/api/chantier/");\n      cleanHistory(res.data);\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour de l\'historique:", error);\n    }\n  };\n\n  // Afficher la liste à afficher (historique ou résultats)\n  const displayList = searchValue ? searchResults : history;\n  // --- FIN BARRE DE RECHERCHE ---\n\n  const fetchChantierData = async () => {\n    if (!id) {\n      setError("ID du chantier manquant");\n      setLoading(false);\n      return;\n    }\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].get(`/api/chantier/${id}/details/`);\n      setChantierData(response.data);\n    } catch (error) {\n      var _error$response2, _error$response3, _error$response4;\n      console.error("Erreur lors du chargement des données du chantier:", error);\n      console.log("Status de l\'erreur:", (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status);\n      console.log("Tentative de redirection...");\n\n      // Si le chantier n\'existe pas (404 ou 500), rediriger vers le premier chantier disponible\n      if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 404 || ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status) === 500) {\n        try {\n          const chantiersResponse = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].get("/api/chantier/");\n          if (chantiersResponse.data && chantiersResponse.data.length > 0) {\n            const premierChantier = chantiersResponse.data[0];\n            console.log(`Redirection vers le chantier ${premierChantier.id}`);\n            navigate(`/ChantierDetail/${premierChantier.id}`);\n            return;\n          }\n        } catch (redirectError) {\n          console.error("Erreur lors de la redirection:", redirectError);\n        }\n      }\n      setError("Impossible de charger les données du chantier. Veuillez réessayer.");\n    } finally {\n      setLoading(false);\n    }\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    fetchChantierData();\n  }, [id]);\n  const handleTabChange = (event, newValue) => {\n    setSelectedTab(newValue);\n  };\n  if (loading) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n      maxWidth: "xl"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n      sx: {\n        display: "flex",\n        justifyContent: "center",\n        p: 4\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null)));\n  }\n  if (error) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n      maxWidth: "xl"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n      sx: {\n        display: "flex",\n        justifyContent: "center",\n        p: 4\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n      color: "error"\n    }, error)));\n  }\n  if (!chantierData) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n      maxWidth: "xl"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n      sx: {\n        display: "flex",\n        justifyContent: "center",\n        p: 4\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n      color: "error"\n    }, "Chantier non trouv\\xE9")));\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_chantier_RecapFinancierContext__WEBPACK_IMPORTED_MODULE_1__.RecapFinancierProvider, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    maxWidth: "xl",\n    sx: {\n      mt: 4,\n      mb: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      flexGrow: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    ref: searchBarRef,\n    sx: {\n      mb: 3,\n      position: "relative",\n      maxWidth: 500\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      borderRadius: "24px",\n      background: "#fff",\n      boxShadow: 1,\n      px: 2,\n      py: 1,\n      border: "1px solid #e0e0e0"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material_Search__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    sx: {\n      color: "#757575",\n      mr: 1\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "text",\n    placeholder: "Rechercher un chantier...",\n    value: searchValue,\n    onChange: e => {\n      setSearchValue(e.target.value);\n      setShowDropdown(true);\n    },\n    onFocus: () => setShowDropdown(true),\n    style: {\n      border: "none",\n      outline: "none",\n      background: "transparent",\n      fontSize: 18,\n      flex: 1\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material_Refresh__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      color: "#757575",\n      ml: 1,\n      cursor: "pointer",\n      "&:hover": {\n        color: "primary.main"\n      }\n    },\n    onClick: refreshHistory,\n    title: "Rafra\\xEEchir l\'historique"\n  })), showDropdown && displayList.length > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      position: "absolute",\n      top: 44,\n      left: 0,\n      right: 0,\n      zIndex: 10,\n      maxHeight: 300,\n      overflowY: "auto",\n      borderRadius: 2\n    },\n    elevation: 4\n  }, displayList.map(chantier => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    key: chantier.id,\n    sx: {\n      px: 2,\n      py: 1.2,\n      cursor: "pointer",\n      "&:hover": {\n        background: "#f5f5f5"\n      },\n      fontWeight: id == chantier.id ? 700 : 400,\n      color: id == chantier.id ? "primary.main" : "text.primary"\n    },\n    onClick: () => handleSelectChantier(chantier)\n  }, chantier.chantier_name)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    position: "static",\n    color: "default",\n    elevation: 0,\n    sx: {\n      backgroundColor: "white",\n      borderRadius: "10px",\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      borderBottom: 1,\n      borderColor: "divider",\n      backgroundColor: "white",\n      borderRadius: "10px",\n      p: 2,\n      gap: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "h5",\n    sx: {\n      fontWeight: "bold",\n      color: "black",\n      backgroundColor: "white",\n      width: "auto",\n      flexShrink: 0,\n      minWidth: "200px",\n      fontFamily: "Roboto Slab, serif"\n    }\n  }, chantierData.nom || "Chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    value: selectedTab,\n    onChange: handleTabChange,\n    "aria-label": "chantier tabs",\n    variant: "fullWidth",\n    sx: {\n      flex: 1,\n      "& .MuiTab-root": {\n        textTransform: "none",\n        fontSize: "1.1rem",\n        fontWeight: 500,\n        minWidth: 120,\n        color: "text.primary",\n        fontFamily: "Roboto, Arial, sans-serif",\n        "&.Mui-selected": {\n          color: "primary.main",\n          fontWeight: 700\n        }\n      },\n      "& .MuiTabs-flexContainer": {\n        justifyContent: "space-between",\n        px: 2\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    label: "Informations"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    label: "Documents"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    label: "Commandes"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    label: "R\\xE9cap Financier"\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(TabPanel, {\n    value: selectedTab,\n    index: 0\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_chantier_ChantierInfoTab__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    chantierData: chantierData,\n    onUpdate: fetchChantierData,\n    state: infoState,\n    setState: setInfoState\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(TabPanel, {\n    value: selectedTab,\n    index: 1\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_chantier_ChantierDocumentsTab__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    chantierData: chantierData,\n    state: documentsState,\n    setState: setDocumentsState\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    elevation: 0,\n    sx: {\n      mt: 2,\n      borderRadius: "10px",\n      "& .MuiTypography-h6": {\n        fontWeight: "bold",\n        color: "text.primary",\n        fontSize: "1.1rem",\n        mb: 1,\n        backgroundColor: "transparent"\n      },\n      "& .MuiChip-root": {\n        height: "24px",\n        fontSize: "0.875rem"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(TabPanel, {\n    value: selectedTab,\n    index: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_chantier_ChantierCommandesTab__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    chantierData: chantierData,\n    state: uiState.commandes,\n    setState: newState => setUiState(prev => ({\n      ...prev,\n      commandes: {\n        ...prev.commandes,\n        ...newState\n      }\n    }))\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(TabPanel, {\n    value: selectedTab,\n    index: 3\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_chantier_ChantierRecapFinancierTab__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    chantierId: id\n  }))))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChantierDetail);\n\n//# sourceURL=webpack://frontend/./src/components/ChantierDetail.js?')},"./src/components/ChantierDetailsModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputLabel/InputLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\nconst ChantierDetailsModal = ({\n  open,\n  onClose,\n  onSubmit,\n  initialData\n}) => {\n  const [chantierDetails, setChantierDetails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    date_debut: "",\n    date_fin: "",\n    montant_ttc: "",\n    montant_ht: "",\n    state_chantier: "En Cours",\n    cout_materiel: "",\n    cout_main_oeuvre: "",\n    cout_sous_traitance: "",\n    description: "",\n    ...initialData\n  });\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setChantierDetails(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSubmit = () => {\n    if (!chantierDetails.montant_ht || !chantierDetails.montant_ttc) {\n      alert("Les montants HT et TTC sont obligatoires");\n      return;\n    }\n    onSubmit(chantierDetails);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: open,\n    onClose: onClose,\n    maxWidth: "md",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "D\\xE9tails du Chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    fullWidth: true,\n    margin: "normal",\n    name: "date_debut",\n    label: "Date de d\\xE9but",\n    type: "date",\n    value: chantierDetails.date_debut,\n    onChange: handleChange,\n    InputLabelProps: {\n      shrink: true\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    fullWidth: true,\n    margin: "normal",\n    name: "date_fin",\n    label: "Date de fin (optionnel)",\n    type: "date",\n    value: chantierDetails.date_fin || "",\n    onChange: handleChange,\n    InputLabelProps: {\n      shrink: true\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    fullWidth: true,\n    margin: "normal"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, "\\xC9tat du chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    name: "state_chantier",\n    value: chantierDetails.state_chantier,\n    onChange: handleChange\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: "En Cours"\n  }, "En Cours"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: "Termin\\xE9"\n  }, "Termin\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: "En Attente"\n  }, "En Attente"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    fullWidth: true,\n    margin: "normal",\n    name: "cout_materiel",\n    label: "Co\\xFBt mat\\xE9riel",\n    type: "number",\n    value: chantierDetails.cout_materiel || "",\n    onChange: handleChange\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    fullWidth: true,\n    margin: "normal",\n    name: "cout_main_oeuvre",\n    label: "Co\\xFBt main d\'\\u0153uvre",\n    type: "number",\n    value: chantierDetails.cout_main_oeuvre || "",\n    onChange: handleChange\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    fullWidth: true,\n    margin: "normal",\n    name: "cout_sous_traitance",\n    label: "Co\\xFBt sous-traitance",\n    type: "number",\n    value: chantierDetails.cout_sous_traitance || "",\n    onChange: handleChange\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    fullWidth: true,\n    margin: "normal",\n    name: "description",\n    label: "Description",\n    multiline: true,\n    rows: 4,\n    value: chantierDetails.description || "",\n    onChange: handleChange\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    fullWidth: true,\n    required: true,\n    margin: "normal",\n    name: "montant_ht",\n    label: "Montant HT",\n    type: "number",\n    value: chantierDetails.montant_ht,\n    onChange: handleChange\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    fullWidth: true,\n    required: true,\n    margin: "normal",\n    name: "montant_ttc",\n    label: "Montant TTC",\n    type: "number",\n    value: chantierDetails.montant_ttc,\n    onChange: handleChange\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: handleSubmit,\n    variant: "contained",\n    color: "primary"\n  }, "Finaliser la cr\\xE9ation")));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChantierDetailsModal);\n\n//# sourceURL=webpack://frontend/./src/components/ChantierDetailsModal.js?')},"./src/components/ChantierForm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Stack/Stack.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\n\nconst ChantierForm = ({\n  open,\n  onClose,\n  onSubmit,\n  societeId\n}) => {\n  const [chantierData, setChantierData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    chantier_name: "",\n    ville: "",\n    rue: "",\n    code_postal: "",\n    societe: societeId\n  });\n\n  // Nouvel état pour gérer l\'erreur\n  const [nameError, setNameError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  // État pour gérer le délai de vérification\n  const [checkTimeout, setCheckTimeout] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    setChantierData(prev => ({\n      ...prev,\n      societe: societeId\n    }));\n  }, [societeId]);\n  const checkChantierName = async name => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_1__["default"].get("/api/check-chantier-name/", {\n        params: {\n          chantier_name: name\n        }\n      });\n      if (response.data.exists) {\n        setNameError(`Un chantier avec le nom "${name}" existe déjà`);\n        return false;\n      } else {\n        setNameError("");\n        return true;\n      }\n    } catch (error) {\n      console.error("Erreur lors de la vérification du nom:", error);\n      setNameError("Erreur lors de la vérification du nom");\n      return false;\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setChantierData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n\n    // Si le champ modifié est le nom du chantier\n    if (name === "chantier_name") {\n      // Annuler le timeout précédent\n      if (checkTimeout) clearTimeout(checkTimeout);\n\n      // Créer un nouveau timeout pour la vérification\n      if (value.trim()) {\n        const newTimeout = setTimeout(() => {\n          checkChantierName(value);\n        }, 500); // Attendre 500ms après la dernière frappe\n        setCheckTimeout(newTimeout);\n      } else {\n        setNameError("");\n      }\n    }\n  };\n  const handleSubmit = async () => {\n    // Vérifier une dernière fois le nom avant la soumission\n    if (chantierData.chantier_name.trim()) {\n      const isValid = await checkChantierName(chantierData.chantier_name);\n      if (!isValid) {\n        return; // Ne pas soumettre si le nom existe déjà\n      }\n    }\n    onSubmit(chantierData);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: open,\n    onClose: onClose,\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, societeId ? "Nouveau Chantier" : "Nouveau Chantier pour Client Existant"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    spacing: 2,\n    sx: {\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    name: "chantier_name",\n    label: "Nom du chantier",\n    value: chantierData.chantier_name,\n    onChange: handleChange,\n    fullWidth: true,\n    required: true,\n    error: !!nameError,\n    helperText: nameError\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    name: "ville",\n    label: "Ville",\n    value: chantierData.ville,\n    onChange: handleChange,\n    fullWidth: true,\n    required: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    name: "rue",\n    label: "Rue",\n    value: chantierData.rue,\n    onChange: handleChange,\n    fullWidth: true,\n    required: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    name: "code_postal",\n    label: "Code postal",\n    value: chantierData.code_postal,\n    onChange: handleChange,\n    fullWidth: true,\n    required: true\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    onClick: handleSubmit,\n    variant: "contained",\n    disabled: !!nameError // Désactiver le bouton si il y a une erreur\n  }, "Cr\\xE9er le chantier")));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChantierForm);\n\n//# sourceURL=webpack://frontend/./src/components/ChantierForm.js?')},"./src/components/ChantierInfo.js":()=>{eval("\n\n//# sourceURL=webpack://frontend/./src/components/ChantierInfo.js?")},"./src/components/ChantierTabs.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Grid/Grid.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Card/Card.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/CardContent/CardContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputLabel/InputLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Tabs/Tabs.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Tab/Tab.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/CircularProgress/CircularProgress.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var recharts__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! recharts */ "../node_modules/recharts/es6/component/ResponsiveContainer.js");\n/* harmony import */ var recharts__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! recharts */ "../node_modules/recharts/es6/chart/BarChart.js");\n/* harmony import */ var recharts__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! recharts */ "../node_modules/recharts/es6/cartesian/CartesianGrid.js");\n/* harmony import */ var recharts__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! recharts */ "../node_modules/recharts/es6/cartesian/XAxis.js");\n/* harmony import */ var recharts__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! recharts */ "../node_modules/recharts/es6/cartesian/YAxis.js");\n/* harmony import */ var recharts__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! recharts */ "../node_modules/recharts/es6/component/Tooltip.js");\n/* harmony import */ var recharts__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! recharts */ "../node_modules/recharts/es6/cartesian/Bar.js");\n/* harmony import */ var recharts__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! recharts */ "../node_modules/recharts/es6/chart/PieChart.js");\n/* harmony import */ var recharts__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! recharts */ "../node_modules/recharts/es6/polar/Pie.js");\n/* harmony import */ var recharts__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! recharts */ "../node_modules/recharts/es6/component/Cell.js");\n/* harmony import */ var recharts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! recharts */ "../node_modules/recharts/es6/component/Legend.js");\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\n\n\n\n\n\n// Composant pour l\'affichage du contenu de l\'onglet d\'un chantier\nfunction ChantierTabPanel(props) {\n  const {\n    children,\n    value,\n    index,\n    ...other\n  } = props;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", _extends({\n    role: "tabpanel",\n    hidden: value !== index,\n    id: `chantier-tabpanel-${index}`,\n    "aria-labelledby": `chantier-tab-${index}`\n  }, other), value === index && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      p: 3\n    }\n  }, children));\n}\n\n// Fonction pour formater les montants en euros\nconst formatMontant = montant => {\n  return new Intl.NumberFormat("fr-FR", {\n    style: "currency",\n    currency: "EUR"\n  }).format(montant || 0);\n};\n\n// Fonction pour formater les pourcentages\nconst formatPourcentage = value => {\n  return new Intl.NumberFormat("fr-FR", {\n    style: "percent",\n    minimumFractionDigits: 1,\n    maximumFractionDigits: 1\n  }).format(value / 100);\n};\n\n// Fonction pour déterminer la couleur en fonction de la comparaison\nconst getComparisonColor = (reel, estime) => {\n  if (reel === estime) return "text.secondary";\n  if (reel > estime) return "error.main";\n  return "success.main";\n};\n\n// Composant pour afficher les indicateurs de rentabilité\nconst RentabiliteIndicators = ({\n  data\n}) => {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    container: true,\n    spacing: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    item: true,\n    xs: 12,\n    md: 4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "subtitle1",\n    gutterBottom: true\n  }, "Marge Brute"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h5",\n    color: getComparisonColor(data.marge_brute, data.marge_estimee)\n  }, formatMontant(data.marge_brute)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Estim\\xE9: ", formatMontant(data.marge_estimee)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: getComparisonColor(data.taux_marge_brute, data.taux_marge_estimee)\n  }, "Taux de marge: ", formatPourcentage(data.taux_marge_brute)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Estim\\xE9: ", formatPourcentage(data.taux_marge_estimee))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    item: true,\n    xs: 12,\n    md: 4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "subtitle1",\n    gutterBottom: true\n  }, "Co\\xFBt Total"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h5",\n    color: getComparisonColor(data.cout_total_reel, data.cout_total_estime)\n  }, formatMontant(data.cout_total_reel)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Estim\\xE9: ", formatMontant(data.cout_total_estime)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Mat\\xE9riel: ", formatMontant(data.cout_materiel)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: getComparisonColor(data.cout_materiel, data.cout_estime_materiel)\n  }, "Estim\\xE9: ", formatMontant(data.cout_estime_materiel)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Main d\'\\u0153uvre: ", formatMontant(data.cout_main_oeuvre)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: getComparisonColor(data.cout_main_oeuvre, data.cout_estime_main_oeuvre)\n  }, "Estim\\xE9: ", formatMontant(data.cout_estime_main_oeuvre)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Sous-traitance: ", formatMontant(data.cout_sous_traitance))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    item: true,\n    xs: 12,\n    md: 4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "subtitle1",\n    gutterBottom: true\n  }, "\\xC9carts Estim\\xE9/R\\xE9el"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2"\n  }, "Mat\\xE9riel: ", formatMontant(data.ecart_materiel)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2"\n  }, "Main d\'\\u0153uvre: ", formatMontant(data.ecart_main_oeuvre)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2"\n  }, "Total:", " ", formatMontant(data.ecart_materiel + data.ecart_main_oeuvre))))));\n};\n\n// Composant pour afficher le taux d\'occupation des ressources\nconst ResourcesIndicator = ({\n  data\n}) => {\n  const chartData = Object.entries(data.taux_occupation_mensuel).map(([month, taux]) => ({\n    month: new Date(2024, parseInt(month) - 1).toLocaleString("fr-FR", {\n      month: "short"\n    }),\n    taux\n  }));\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, "Taux d\'occupation des \\xE9quipes"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "subtitle1",\n    gutterBottom: true\n  }, "Moyenne: ", formatPourcentage(data.moyenne_occupation)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      height: 300,\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(recharts__WEBPACK_IMPORTED_MODULE_6__.ResponsiveContainer, {\n    width: "100%",\n    height: "100%"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(recharts__WEBPACK_IMPORTED_MODULE_7__.BarChart, {\n    data: chartData\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(recharts__WEBPACK_IMPORTED_MODULE_8__.CartesianGrid, {\n    strokeDasharray: "3 3"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(recharts__WEBPACK_IMPORTED_MODULE_9__.XAxis, {\n    dataKey: "month"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(recharts__WEBPACK_IMPORTED_MODULE_10__.YAxis, {\n    tickFormatter: value => `${value}%`\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(recharts__WEBPACK_IMPORTED_MODULE_11__.Tooltip, {\n    formatter: value => [`${value}%`, "Taux d\'occupation"]\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(recharts__WEBPACK_IMPORTED_MODULE_12__.Bar, {\n    dataKey: "taux",\n    fill: "#8884d8",\n    name: "Taux d\'occupation"\n  }))))));\n};\n\n// Composant pour afficher les paiements clients\nconst PaiementsSection = ({\n  data\n}) => {\n  var _data$creances_age, _data$creances_age2, _data$creances_age3, _data$creances_age4;\n  // Vérifier si les données sont définies\n  if (!data) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n      variant: "body1",\n      color: "text.secondary"\n    }, "Aucune donn\\xE9e de paiement disponible");\n  }\n\n  // Préparer les données pour le graphique des créances par âge\n  const creancesData = [{\n    name: "< 30 jours",\n    value: ((_data$creances_age = data.creances_age) === null || _data$creances_age === void 0 ? void 0 : _data$creances_age.moins_30_jours) || 0\n  }, {\n    name: "30-60 jours",\n    value: ((_data$creances_age2 = data.creances_age) === null || _data$creances_age2 === void 0 ? void 0 : _data$creances_age2["30_60_jours"]) || 0\n  }, {\n    name: "60-90 jours",\n    value: ((_data$creances_age3 = data.creances_age) === null || _data$creances_age3 === void 0 ? void 0 : _data$creances_age3["60_90_jours"]) || 0\n  }, {\n    name: "> 90 jours",\n    value: ((_data$creances_age4 = data.creances_age) === null || _data$creances_age4 === void 0 ? void 0 : _data$creances_age4.plus_90_jours) || 0\n  }];\n\n  // Calculer le total des créances\n  const totalCreances = data.total_en_attente || 0;\n  const COLORS = ["#0088FE", "#00C49F", "#FFBB28", "#FF8042"];\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    container: true,\n    spacing: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    item: true,\n    xs: 12,\n    md: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, "\\xC2ge des cr\\xE9ances"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      height: 300\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(recharts__WEBPACK_IMPORTED_MODULE_6__.ResponsiveContainer, {\n    width: "100%",\n    height: "100%"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(recharts__WEBPACK_IMPORTED_MODULE_13__.PieChart, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(recharts__WEBPACK_IMPORTED_MODULE_14__.Pie, {\n    data: creancesData,\n    cx: "50%",\n    cy: "50%",\n    labelLine: false,\n    label: ({\n      name,\n      percent\n    }) => `${name}: ${(percent * 100).toFixed(0)}%`,\n    outerRadius: 80,\n    fill: "#8884d8",\n    dataKey: "value"\n  }, creancesData.map((entry, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(recharts__WEBPACK_IMPORTED_MODULE_15__.Cell, {\n    key: `cell-${index}`,\n    fill: COLORS[index % COLORS.length]\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(recharts__WEBPACK_IMPORTED_MODULE_11__.Tooltip, {\n    formatter: value => [formatMontant(value), "Montant"]\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(recharts__WEBPACK_IMPORTED_MODULE_16__.Legend, null))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    item: true,\n    xs: 12,\n    md: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, "Tr\\xE9sorerie bloqu\\xE9e"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h4",\n    color: "error"\n  }, formatMontant(totalCreances)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Total des cr\\xE9ances en attente"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary",\n    sx: {\n      mt: 2\n    }\n  }, "Nombre de factures en attente: ", data.nombre_en_attente || 0), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Nombre de factures en retard: ", data.nombre_retardees || 0), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Pourcentage de tr\\xE9sorerie bloqu\\xE9e:", " ", formatPourcentage(data.pourcentage_tresorerie_bloquee || 0))))));\n};\nconst ChantierTabs = ({\n  initialYear\n}) => {\n  var _resume$global_stats$, _resume$global_stats$2, _resume$global_stats$3, _resume$global_stats$4;\n  const [value, setValue] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n  const [currentYear, setCurrentYear] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialYear || new Date().getFullYear());\n  const [resume, setResume] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    global_stats: {},\n    chantiers: []\n  });\n\n  // Récupérer les statistiques résumées pour tous les chantiers\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const fetchResumeData = async () => {\n      setLoading(true);\n      try {\n        const response = await axios__WEBPACK_IMPORTED_MODULE_17__["default"].get("/api/dashboard/resume/", {\n          params: {\n            year: currentYear\n          }\n        });\n        setResume(response.data);\n      } catch (error) {\n        console.error("Erreur lors du chargement des statistiques:", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchResumeData();\n  }, [currentYear]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (initialYear && initialYear !== currentYear) {\n      setCurrentYear(initialYear);\n    }\n  }, [initialYear]);\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n  const handleYearChange = event => {\n    setCurrentYear(event.target.value);\n  };\n\n  // Ajouter un onglet pour le résumé global\n  const tabs = [{\n    id: "resume",\n    label: "Résumé Global"\n  }, ...resume.chantiers.map(chantier => ({\n    id: chantier.id,\n    label: chantier.nom\n  }))];\n\n  // Années pour le sélecteur\n  const years = Array.from(new Array(10), (val, index) => new Date().getFullYear() - index);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      width: "100%"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      mb: 2,\n      display: "flex",\n      justifyContent: "space-between"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    sx: {\n      minWidth: 120\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    id: "year-select-label"\n  }, "Ann\\xE9e"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    labelId: "year-select-label",\n    id: "year-select",\n    value: currentYear,\n    label: "Ann\\xE9e",\n    onChange: handleYearChange\n  }, years.map(year => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    key: year,\n    value: year\n  }, year))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      borderBottom: 1,\n      borderColor: "divider"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    value: value,\n    onChange: handleChange,\n    variant: "scrollable",\n    scrollButtons: "auto",\n    "aria-label": "onglets des chantiers"\n  }, tabs.map((tab, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], {\n    key: tab.id,\n    label: tab.label,\n    id: `chantier-tab-${index}`\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ChantierTabPanel, {\n    value: value,\n    index: 0\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, "R\\xE9sum\\xE9 Global des Chantiers - ", currentYear), loading ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "center",\n      p: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], null)) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    container: true,\n    spacing: 2,\n    sx: {\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    item: true,\n    xs: 12,\n    md: 3\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "subtitle1",\n    gutterBottom: true\n  }, "Chantiers"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h5"\n  }, resume.chantiers.length), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, resume.global_stats.nombre_chantiers_en_cours || 0, " en cours")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    item: true,\n    xs: 12,\n    md: 3\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "subtitle1",\n    gutterBottom: true\n  }, "Montant Total HT"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h5",\n    color: getComparisonColor(resume.global_stats.total_montant_ht, resume.global_stats.total_montant_estime_ht)\n  }, formatMontant(resume.global_stats.total_montant_ht)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Estim\\xE9:", " ", formatMontant(resume.global_stats.total_montant_estime_ht))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    item: true,\n    xs: 12,\n    md: 3\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "subtitle1",\n    gutterBottom: true\n  }, "Co\\xFBt Mat\\xE9riel"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h5",\n    color: getComparisonColor(resume.global_stats.total_cout_materiel, resume.global_stats.total_cout_estime_materiel)\n  }, formatMontant(resume.global_stats.total_cout_materiel)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Estim\\xE9:", " ", formatMontant(resume.global_stats.total_cout_estime_materiel))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    item: true,\n    xs: 12,\n    md: 3\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "subtitle1",\n    gutterBottom: true\n  }, "Co\\xFBt Main d\'\\u0153uvre"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h5",\n    color: getComparisonColor(resume.global_stats.total_cout_main_oeuvre, resume.global_stats.total_cout_estime_main_oeuvre)\n  }, formatMontant(resume.global_stats.total_cout_main_oeuvre)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Estim\\xE9:", " ", formatMontant(resume.global_stats.total_cout_estime_main_oeuvre)))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h6",\n    gutterBottom: true,\n    sx: {\n      mt: 4\n    }\n  }, "Paiements Clients"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    container: true,\n    spacing: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    item: true,\n    xs: 12,\n    md: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "subtitle1",\n    gutterBottom: true\n  }, "Factures en attente"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h5"\n  }, formatMontant(((_resume$global_stats$ = resume.global_stats.paiements) === null || _resume$global_stats$ === void 0 ? void 0 : _resume$global_stats$.total_en_attente) || 0)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, ((_resume$global_stats$2 = resume.global_stats.paiements) === null || _resume$global_stats$2 === void 0 ? void 0 : _resume$global_stats$2.nombre_en_attente) || 0, " ", "factures")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    item: true,\n    xs: 12,\n    md: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "subtitle1",\n    gutterBottom: true\n  }, "Factures en retard"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h5",\n    color: "error"\n  }, formatMontant(((_resume$global_stats$3 = resume.global_stats.paiements) === null || _resume$global_stats$3 === void 0 ? void 0 : _resume$global_stats$3.total_retardees) || 0)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, ((_resume$global_stats$4 = resume.global_stats.paiements) === null || _resume$global_stats$4 === void 0 ? void 0 : _resume$global_stats$4.nombre_retardees) || 0, " ", "factures"))))))), resume.chantiers.map((chantier, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ChantierTabPanel, {\n    key: chantier.id,\n    value: value,\n    index: index + 1\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, chantier.nom), loading ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "center",\n      p: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], null)) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    container: true,\n    spacing: 2,\n    sx: {\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    item: true,\n    xs: 12,\n    md: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "subtitle1",\n    gutterBottom: true\n  }, "Informations g\\xE9n\\xE9rales"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2"\n  }, "Statut: ", chantier.state_chantier), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2"\n  }, "Date de d\\xE9but:", " ", new Date(chantier.dates.debut).toLocaleDateString()), chantier.dates.fin && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2"\n  }, "Date de fin:", " ", new Date(chantier.dates.fin).toLocaleDateString()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2"\n  }, "Adresse: ", chantier.adresse.rue, ",", " ", chantier.adresse.ville, " ", chantier.adresse.code_postal)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    item: true,\n    xs: 12,\n    md: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "subtitle1",\n    gutterBottom: true\n  }, "Montants"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2"\n  }, "Montant HT: ", formatMontant(chantier.montants.ht)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2"\n  }, "Montant TTC: ", formatMontant(chantier.montants.ttc)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: getComparisonColor(chantier.rentabilite.cout_materiel, chantier.rentabilite.cout_estime_materiel)\n  }, "Co\\xFBt Mat\\xE9riel:", " ", formatMontant(chantier.rentabilite.cout_materiel)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Estim\\xE9:", " ", formatMontant(chantier.rentabilite.cout_estime_materiel)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: getComparisonColor(chantier.rentabilite.cout_main_oeuvre, chantier.rentabilite.cout_estime_main_oeuvre)\n  }, "Co\\xFBt Main d\'\\u0153uvre:", " ", formatMontant(chantier.rentabilite.cout_main_oeuvre)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Estim\\xE9:", " ", formatMontant(chantier.rentabilite.cout_estime_main_oeuvre)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Co\\xFBt Sous-traitance:", " ", formatMontant(chantier.rentabilite.cout_sous_traitance)))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h6",\n    gutterBottom: true,\n    sx: {\n      mt: 4\n    }\n  }, "Rentabilit\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(RentabiliteIndicators, {\n    data: chantier.rentabilite\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h6",\n    gutterBottom: true,\n    sx: {\n      mt: 4\n    }\n  }, "Ressources"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(ResourcesIndicator, {\n    data: chantier.ressources\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h6",\n    gutterBottom: true,\n    sx: {\n      mt: 4\n    }\n  }, "Paiements Clients"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(PaiementsSection, {\n    data: chantier.paiements\n  })))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChantierTabs);\n\n//# sourceURL=webpack://frontend/./src/components/ChantierTabs.js?')},"./src/components/ChantiersDashboard.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Container/Container.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _ChantierTabs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ChantierTabs */ "./src/components/ChantierTabs.js");\n\n\n\nconst ChantiersDashboard = () => {\n  const [selectedYear, setSelectedYear] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Date().getFullYear());\n\n  // Liste des années pour le filtre (10 dernières années)\n  const years = Array.from(new Array(10), (val, index) => new Date().getFullYear() - index);\n  const handleYearChange = event => {\n    setSelectedYear(event.target.value);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    maxWidth: "xl"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "h5",\n    gutterBottom: true,\n    sx: {\n      color: "white",\n      mb: 3,\n      backgroundColor: "rgba(27, 120, 188, 1)",\n      fontSize: "32px",\n      padding: "10px"\n    }\n  }, "Tableau de Bord des Chantiers"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    elevation: 3,\n    sx: {\n      p: 0,\n      borderRadius: "8px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ChantierTabs__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    initialYear: selectedYear\n  }))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChantiersDashboard);\n\n//# sourceURL=webpack://frontend/./src/components/ChantiersDashboard.js?')},"./src/components/ClientInfoModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\nconst ClientInfoModal = ({\n  open,\n  onClose,\n  onSubmit\n}) => {\n  const [formData, setFormData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    name: "",\n    surname: "",\n    client_mail: "",\n    phone_Number: ""\n  });\n  const handleChange = e => {\n    setFormData(prev => ({\n      ...prev,\n      [e.target.name]: e.target.value\n    }));\n  };\n  const handleSubmit = () => {\n    // Validation du numéro de téléphone\n    if (isNaN(parseInt(formData.phone_Number))) {\n      alert("Le numéro de téléphone doit être un nombre");\n      return;\n    }\n    onSubmit(formData);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: open,\n    onClose: onClose,\n    fullWidth: true,\n    maxWidth: "sm"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Informations Client"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    fullWidth: true,\n    margin: "normal",\n    name: "name",\n    label: "Nom",\n    value: formData.name,\n    onChange: handleChange,\n    required: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    fullWidth: true,\n    margin: "normal",\n    name: "surname",\n    label: "Pr\\xE9nom",\n    value: formData.surname,\n    onChange: handleChange,\n    required: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    fullWidth: true,\n    margin: "normal",\n    name: "client_mail",\n    label: "Email",\n    type: "email",\n    value: formData.client_mail,\n    onChange: handleChange,\n    required: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    fullWidth: true,\n    margin: "normal",\n    name: "phone_Number",\n    label: "T\\xE9l\\xE9phone",\n    type: "tel",\n    value: formData.phone_Number,\n    onChange: e => {\n      // Ne garde que les chiffres\n      const numericValue = e.target.value.replace(/\\D/g, "");\n      // Crée un événement synthétique avec la nouvelle valeur\n      const syntheticEvent = {\n        target: {\n          name: e.target.name,\n          value: numericValue\n        }\n      };\n      handleChange(syntheticEvent);\n    },\n    onKeyDown: e => {\n      // Empêche la saisie de caractères non numériques\n      if (!/[0-9]/.test(e.key) && e.key !== "Backspace" && e.key !== "Delete" && e.key !== "ArrowLeft" && e.key !== "ArrowRight") {\n        e.preventDefault();\n      }\n    },\n    inputProps: {\n      inputMode: "numeric",\n      pattern: "[0-9]*"\n    },\n    required: true\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    onClick: handleSubmit,\n    variant: "contained",\n    color: "primary"\n  }, "Suivant")));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ClientInfoModal);\n\n//# sourceURL=webpack://frontend/./src/components/ClientInfoModal.js?')},"./src/components/ClientTypeModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Stack/Stack.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\nconst ClientTypeModal = ({\n  open,\n  onClose,\n  onNewClient,\n  onExistingClient\n}) => {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: open,\n    onClose: onClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Type de Client"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    spacing: 2,\n    sx: {\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "contained",\n    color: "primary",\n    onClick: onNewClient,\n    fullWidth: true\n  }, "Nouveau Client"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "outlined",\n    color: "primary",\n    onClick: onExistingClient,\n    fullWidth: true\n  }, "Client Existant"))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ClientTypeModal);\n\n//# sourceURL=webpack://frontend/./src/components/ClientTypeModal.js?')},"./src/components/CreateAgentModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @emotion/react */ "./node_modules/@emotion/react/dist/emotion-react.browser.esm.js");\n/* harmony import */ var _mui_material_Box__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material/Box */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material_Button__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material/Button */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material_MenuItem__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material/MenuItem */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material_Modal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material/Modal */ "./node_modules/@mui/material/Modal/Modal.js");\n/* harmony import */ var _mui_material_TextField__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material/TextField */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\n\n\n\n\n\n\n\n// Styles de la modale avec Emotion\nconst modalStyle = (0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.css)({\n  position: "absolute",\n  height: "80%",\n  top: "50%",\n  left: "50%",\n  transform: "translate(-50%, -50%)",\n  width: "80%",\n  maxWidth: "800px",\n  backgroundColor: "white",\n  border: "2px solid #000",\n  boxShadow: 24,\n  padding: "20px",\n  color: "rgba(27, 120, 188, 1)",\n  fontSize: "18px",\n  display: "grid",\n  gridTemplateColumns: "1fr 1fr",\n  gap: "20px"\n});\nconst CreateAgentModal = ({\n  isOpen,\n  handleClose,\n  refreshAgents\n}) => {\n  const [agentData, setAgentData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    name: "",\n    surname: "",\n    address: "",\n    phone_Number: "",\n    taux_Horaire: "",\n    conge: "",\n    heure_debut: "",\n    heure_fin: "",\n    heure_pause_debut: "",\n    heure_pause_fin: "",\n    jours_travail: [],\n    type_paiement: "horaire",\n    taux_journalier: ""\n  });\n  const joursOptions = ["lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi", "dimanche"];\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setAgentData(prevData => ({\n      ...prevData,\n      [name]: value\n    }));\n  };\n  const handleJoursChange = e => {\n    const {\n      value\n    } = e.target;\n    setAgentData(prevData => ({\n      ...prevData,\n      jours_travail: value\n    }));\n  };\n  const handleSubmit = async () => {\n    try {\n      // Préparer les données selon le type d\'agent\n      const agentDataToSubmit = {\n        ...agentData,\n        jours_travail: agentData.jours_travail.join(", ")\n      };\n\n      // Pour les agents journaliers, ne pas envoyer les champs d\'horaires et taux_Horaire\n      if (agentData.type_paiement === "journalier") {\n        delete agentDataToSubmit.heure_debut;\n        delete agentDataToSubmit.heure_fin;\n        delete agentDataToSubmit.heure_pause_debut;\n        delete agentDataToSubmit.heure_pause_fin;\n        delete agentDataToSubmit.taux_Horaire;\n      } else {\n        // Pour les agents horaires, ne pas envoyer taux_journalier\n        delete agentDataToSubmit.taux_journalier;\n      }\n      await axios__WEBPACK_IMPORTED_MODULE_2__["default"].post("/api/agent/", agentDataToSubmit);\n\n      // Réinitialiser le formulaire\n      setAgentData({\n        name: "",\n        surname: "",\n        address: "",\n        phone_Number: "",\n        taux_Horaire: "",\n        conge: "",\n        heure_debut: "",\n        heure_fin: "",\n        heure_pause_debut: "",\n        heure_pause_fin: "",\n        jours_travail: [],\n        type_paiement: "horaire",\n        taux_journalier: ""\n      });\n      handleClose();\n      refreshAgents(); // Actualiser la liste des agents après la création\n    } catch (error) {\n      console.error("Erreur lors de la création de l\'agent", error);\n    }\n  };\n  const style = {\n    position: "absolute",\n    height: "80%",\n    top: "50%",\n    left: "50%",\n    transform: "translate(-50%, -50%)",\n    width: "80%",\n    maxWidth: "800px",\n    backgroundColor: "white",\n    border: "2px solid #000",\n    boxShadow: 24,\n    padding: "20px",\n    color: "rgba(27, 120, 188, 1)",\n    fontSize: "18px",\n    display: "grid",\n    gridTemplateColumns: "1fr 1fr",\n    gap: "20px"\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_Modal__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    open: isOpen,\n    onClose: handleClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_Box__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    css: modalStyle,\n    sx: style\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("h2", null, "Cr\\xE9er un nouvel agent"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_TextField__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Adresse",\n    name: "address",\n    value: agentData.address,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_TextField__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Nom",\n    name: "name",\n    value: agentData.name,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_TextField__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Pr\\xE9nom",\n    name: "surname",\n    value: agentData.surname,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_TextField__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Num\\xE9ro de t\\xE9l\\xE9phone",\n    name: "phone_Number",\n    value: agentData.phone_Number,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_TextField__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Type de paiement",\n    name: "type_paiement",\n    value: agentData.type_paiement,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal",\n    select: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_MenuItem__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    value: "horaire"\n  }, "Horaire"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_MenuItem__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    value: "journalier"\n  }, "Journalier")), agentData.type_paiement === "horaire" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_TextField__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Taux horaire",\n    name: "taux_Horaire",\n    value: agentData.taux_Horaire,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), agentData.type_paiement === "journalier" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_TextField__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Taux journalier",\n    name: "taux_journalier",\n    value: agentData.taux_journalier,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), agentData.type_paiement === "horaire" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_TextField__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Heure de d\\xE9but",\n    name: "heure_debut",\n    type: "time",\n    value: agentData.heure_debut,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_TextField__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Heure de fin",\n    name: "heure_fin",\n    type: "time",\n    value: agentData.heure_fin,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_TextField__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Heure de d\\xE9but de pause",\n    name: "heure_pause_debut",\n    type: "time",\n    value: agentData.heure_pause_debut,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_TextField__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Heure de fin de pause",\n    name: "heure_pause_fin",\n    type: "time",\n    value: agentData.heure_pause_fin,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_TextField__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Jours de travail",\n    name: "jours_travail",\n    value: agentData.jours_travail,\n    onChange: handleJoursChange,\n    fullWidth: true,\n    margin: "normal",\n    select: true,\n    SelectProps: {\n      multiple: true\n    }\n  }, joursOptions.map(jour => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_MenuItem__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    key: jour,\n    value: jour\n  }, jour))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_TextField__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Cong\\xE9",\n    name: "conge",\n    value: agentData.conge,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_Button__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    variant: "contained",\n    color: "primary",\n    onClick: handleSubmit,\n    sx: {\n      mt: 2\n    }\n  }, "Cr\\xE9er Agent"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_Button__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: handleClose,\n    sx: {\n      mt: 2,\n      ml: 2\n    }\n  }, "Annuler")));\n};\nconst CreateAgentButton = ({\n  refreshAgents\n}) => {\n  const [isModalOpen, setIsModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const handleOpenModal = () => {\n    setIsModalOpen(true);\n  };\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_Button__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    variant: "contained",\n    color: "primary",\n    onClick: handleOpenModal\n  }, "Ajouter Agent"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(CreateAgentModal, {\n    isOpen: isModalOpen,\n    handleClose: handleCloseModal,\n    refreshAgents: refreshAgents\n  }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CreateAgentButton);\n\n//# sourceURL=webpack://frontend/./src/components/CreateAgentModal.js?')},"./src/components/CreatePartieModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormLabel/FormLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/RadioGroup/RadioGroup.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControlLabel/FormControlLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Radio/Radio.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputLabel/InputLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Autocomplete/Autocomplete.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _UpdateTauxFixeModal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UpdateTauxFixeModal */ "./src/components/UpdateTauxFixeModal.js");\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\n\n\n\n\nconst CreatePartieModal = ({\n  open,\n  handleClose,\n  onPartieCreated,\n  onTauxFixeUpdated\n}) => {\n  var _existingParties$find;\n  const [creationType, setCreationType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("partie"); // "partie", "sousPartie", "ligne"\n  const [partieTitle, setPartieTitle] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [selectedPartieId, setSelectedPartieId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [selectedSousPartieId, setSelectedSousPartieId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [selectedPartieType, setSelectedPartieType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("PEINTURE");\n  const [defaultTauxFixe, setDefaultTauxFixe] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("20"); // Valeur par défaut temporaire\n\n  // États pour la gestion dynamique des domaines\n  const [availableDomaines, setAvailableDomaines] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [newDomaine, setNewDomaine] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [showNewDomaineInput, setShowNewDomaineInput] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // Fonction pour charger les domaines disponibles\n  const loadDomaines = () => {\n    axios__WEBPACK_IMPORTED_MODULE_2__["default"].get("/api/parties/domaines/").then(response => {\n      setAvailableDomaines(response.data);\n      // Si aucun domaine n\'est sélectionné, prendre le premier disponible\n      if (!selectedPartieType && response.data.length > 0) {\n        setSelectedPartieType(response.data[0]);\n      }\n    }).catch(error => {\n      console.error("Erreur lors du chargement des domaines", error);\n    });\n  };\n\n  // Fonction pour ajouter un nouveau domaine\n  const handleAddNewDomaine = () => {\n    if (newDomaine.trim() && !availableDomaines.includes(newDomaine.trim())) {\n      setAvailableDomaines(prev => [...prev, newDomaine.trim()].sort());\n      setSelectedPartieType(newDomaine.trim());\n      setNewDomaine("");\n      setShowNewDomaineInput(false);\n    }\n  };\n\n  // Charger le taux fixe et les unités existantes depuis le backend\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const fetchTauxFixe = async () => {\n      try {\n        const response = await axios__WEBPACK_IMPORTED_MODULE_2__["default"].get("/api/parametres/taux-fixe/");\n        const tauxFixe = response.data.valeur.toString();\n        setDefaultTauxFixe(tauxFixe);\n\n        // Mettre à jour toutes les sous-parties existantes avec le nouveau taux\n        setSousParties(prevSousParties => prevSousParties.map(sousPartie => ({\n          ...sousPartie,\n          lignes: sousPartie.lignes.map(ligne => ({\n            ...ligne,\n            taux_fixe: tauxFixe\n          }))\n        })));\n      } catch (error) {\n        console.error("Erreur lors du chargement du taux fixe:", error);\n      }\n    };\n    const fetchExistingUnites = async () => {\n      try {\n        const response = await axios__WEBPACK_IMPORTED_MODULE_2__["default"].get("/api/ligne-details/");\n        const unites = [...new Set(response.data.map(ligne => ligne.unite).filter(unite => unite))];\n        setExistingUnites(unites);\n      } catch (error) {\n        console.error("Erreur lors du chargement des unités:", error);\n      }\n    };\n    if (open) {\n      fetchTauxFixe();\n      fetchExistingUnites();\n      loadDomaines(); // Charger les domaines disponibles\n    }\n  }, [open]);\n  const [sousParties, setSousParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([{\n    description: "",\n    lignes: [{\n      description: "",\n      unite: "",\n      cout_main_oeuvre: "",\n      cout_materiel: "",\n      taux_fixe: defaultTauxFixe,\n      // Utiliser la valeur du backend\n      marge: "20"\n    }]\n  }]);\n  const [existingParties, setExistingParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [existingSousParties, setExistingSousParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [existingLignes, setExistingLignes] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [existingUnites, setExistingUnites] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [openTauxFixeModal, setOpenTauxFixeModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // Fonction pour détecter si une partie a des "Lignes directes"\n  const getPartiesWithLignesDirectes = () => {\n    return existingParties.filter(partie => partie.has_lignes_directes);\n  };\n\n  // Fonction pour réinitialiser tous les états du modal\n  const resetModalState = () => {\n    setCreationType("partie");\n    resetForm();\n  };\n  const handleAddSousPartie = () => {\n    setSousParties([...sousParties, {\n      description: "",\n      lignes: [{\n        description: "",\n        unite: "",\n        cout_main_oeuvre: "",\n        cout_materiel: "",\n        taux_fixe: defaultTauxFixe,\n        // Utiliser la valeur du backend\n        marge: "20"\n      }]\n    }]);\n  };\n  const handleAddLigne = sousPartieIndex => {\n    const newSousParties = [...sousParties];\n    newSousParties[sousPartieIndex].lignes.push({\n      description: "",\n      unite: "",\n      cout_main_oeuvre: "",\n      cout_materiel: "",\n      taux_fixe: defaultTauxFixe,\n      // Utiliser la valeur du backend\n      marge: "20"\n    });\n    setSousParties(newSousParties);\n  };\n\n  // Charger les parties existantes\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (open) {\n      axios__WEBPACK_IMPORTED_MODULE_2__["default"].get("/api/parties/").then(response => {\n        setExistingParties(response.data);\n      });\n    }\n  }, [open]);\n\n  // Charger les sous-parties quand une partie est sélectionnée\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (selectedPartieId) {\n      axios__WEBPACK_IMPORTED_MODULE_2__["default"].get(`/api/sous-parties/?partie=${selectedPartieId}`).then(response => {\n        setExistingSousParties(response.data);\n        setSelectedSousPartieId(""); // Réinitialiser la sous-partie sélectionnée\n      });\n    } else {\n      setExistingSousParties([]);\n      setSelectedSousPartieId("");\n    }\n  }, [selectedPartieId]);\n\n  // Charger les lignes quand une sous-partie est sélectionnée\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (selectedSousPartieId) {\n      axios__WEBPACK_IMPORTED_MODULE_2__["default"].get(`/api/ligne-details/?sous_partie=${selectedSousPartieId}`).then(response => {\n        setExistingLignes(response.data);\n      });\n    }\n  }, [selectedSousPartieId]);\n  const handleSubmit = async () => {\n    try {\n      let createdData = null;\n      if (creationType === "partie") {\n        if (!partieTitle.trim()) {\n          alert("Le titre de la partie est requis");\n          return;\n        }\n\n        // 1. Créer la partie\n        const partieResponse = await axios__WEBPACK_IMPORTED_MODULE_2__["default"].post("/api/parties/", {\n          titre: partieTitle,\n          type: selectedPartieType,\n          cout_estime_main_oeuvre: 0,\n          cout_estime_materiel: 0,\n          marge_estimee: 0\n        });\n        console.log("Partie créée:", partieResponse.data);\n        const sousPartiesData = [];\n\n        // 2. Créer les sous-parties une par une\n        for (const sousPartie of sousParties) {\n          // Si la description est vide, on crée une "Lignes directes"\n          const description = sousPartie.description.trim() || "";\n          try {\n            // Créer la sous-partie (même si description est vide, le backend créera "Lignes directes")\n            const sousPartieResponse = await axios__WEBPACK_IMPORTED_MODULE_2__["default"].post("/api/sous-parties/", {\n              description: description,\n              partie: partieResponse.data.id\n            });\n            console.log("Sous-partie créée:", sousPartieResponse.data);\n\n            // Attendre que la sous-partie soit bien créée\n            await new Promise(resolve => setTimeout(resolve, 100));\n\n            // 3. Créer les lignes une par une pour cette sous-partie\n            const lignesCreees = [];\n            for (const ligne of sousPartie.lignes) {\n              if (ligne.description.trim()) {\n                try {\n                  // Vérifier et convertir les valeurs numériques\n                  const cout_main_oeuvre = parseFloat(ligne.cout_main_oeuvre) || 0;\n                  const cout_materiel = parseFloat(ligne.cout_materiel) || 0;\n                  const taux_fixe = parseFloat(ligne.taux_fixe) || 0;\n                  const marge = parseFloat(ligne.marge) || 0;\n                  const ligneData = {\n                    description: ligne.description.trim(),\n                    unite: ligne.unite.trim() || "unité",\n                    cout_main_oeuvre: cout_main_oeuvre,\n                    cout_materiel: cout_materiel,\n                    taux_fixe: taux_fixe,\n                    marge: marge,\n                    sous_partie: sousPartieResponse.data.id\n                  };\n                  console.log("Tentative de création de ligne:", ligneData);\n                  const ligneResponse = await axios__WEBPACK_IMPORTED_MODULE_2__["default"].post("/api/ligne-details/", ligneData);\n                  console.log("Ligne créée:", ligneResponse.data);\n                  lignesCreees.push(ligneResponse.data);\n                } catch (error) {\n                  var _error$response;\n                  console.error("Erreur création ligne:", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error);\n                  throw new Error(`Erreur lors de la création de la ligne ${ligne.description}`);\n                }\n              }\n            }\n            sousPartiesData.push({\n              ...sousPartieResponse.data,\n              lignes_details: lignesCreees\n            });\n          } catch (error) {\n            console.error("Erreur création sous-partie:", error);\n            throw error;\n          }\n        }\n        createdData = {\n          type: "partie",\n          data: {\n            ...partieResponse.data,\n            sous_parties: sousPartiesData\n          }\n        };\n      } else if (creationType === "sousPartie") {\n        // Logique similaire pour la création d\'une seule sous-partie\n        if (!selectedPartieId || !sousParties[0].description.trim()) {\n          alert("Veuillez sélectionner une partie et saisir une description.");\n          return;\n        }\n        const sousPartieResponse = await axios__WEBPACK_IMPORTED_MODULE_2__["default"].post("/api/sous-parties/", {\n          description: sousParties[0].description,\n          partie: selectedPartieId\n        });\n        console.log("Sous-partie créée:", sousPartieResponse.data);\n\n        // Attendre que la sous-partie soit bien créée\n        await new Promise(resolve => setTimeout(resolve, 100));\n        const lignesCreees = [];\n        for (const ligne of sousParties[0].lignes) {\n          if (ligne.description.trim()) {\n            // On vérifie uniquement la description\n            const ligneData = {\n              description: ligne.description.trim(),\n              unite: ligne.unite.trim() || "unité",\n              cout_main_oeuvre: parseFloat(ligne.cout_main_oeuvre) || 0,\n              cout_materiel: parseFloat(ligne.cout_materiel) || 0,\n              taux_fixe: parseFloat(ligne.taux_fixe) || 0,\n              marge: parseFloat(ligne.marge) || 0,\n              sous_partie: sousPartieResponse.data.id\n            };\n            const ligneResponse = await axios__WEBPACK_IMPORTED_MODULE_2__["default"].post("/api/ligne-details/", ligneData);\n            lignesCreees.push(ligneResponse.data);\n          }\n        }\n        createdData = {\n          type: "sousPartie",\n          data: {\n            ...sousPartieResponse.data,\n            lignes_details: lignesCreees\n          }\n        };\n      } else if (creationType === "ligne") {\n        if (!selectedSousPartieId || !sousParties[0].lignes[0].description.trim()) {\n          alert("Veuillez sélectionner une sous-partie et saisir au moins une description.");\n          return;\n        }\n\n        // Filtrer les lignes valides\n        const lignesValides = sousParties[0].lignes.filter(ligne => ligne.description.trim() // On vérifie uniquement la description\n        );\n        if (lignesValides.length === 0) {\n          alert("Veuillez saisir au moins une ligne valide.");\n          return;\n        }\n\n        // Vérifier les doublons pour chaque ligne\n        for (const ligne of lignesValides) {\n          const ligneExists = existingLignes.some(l => l.description.toLowerCase() === ligne.description.trim().toLowerCase());\n          if (ligneExists) {\n            alert(`La ligne "${ligne.description}" existe déjà.`);\n            return;\n          }\n        }\n\n        // Créer toutes les lignes\n        const lignesPromises = lignesValides.map(ligne => axios__WEBPACK_IMPORTED_MODULE_2__["default"].post("/api/ligne-details/", {\n          description: ligne.description.trim(),\n          unite: ligne.unite.trim() || "unité",\n          cout_main_oeuvre: parseFloat(ligne.cout_main_oeuvre) || 0,\n          cout_materiel: parseFloat(ligne.cout_materiel) || 0,\n          taux_fixe: parseFloat(ligne.taux_fixe) || 0,\n          marge: parseFloat(ligne.marge) || 0,\n          sous_partie: selectedSousPartieId\n        }));\n        const responses = await Promise.all(lignesPromises);\n        const lignesCreees = responses.map(response => response.data);\n        createdData = {\n          type: "ligne",\n          data: lignesCreees\n        };\n      } else if (creationType === "lignesDirectes") {\n        var _partie$sous_parties;\n        if (!selectedPartieId) {\n          alert("Veuillez sélectionner une partie.");\n          return;\n        }\n\n        // Trouver la sous-partie "Lignes directes" de cette partie\n        const partie = existingParties.find(p => p.id === selectedPartieId);\n        const sousPartieLignesDirectes = partie === null || partie === void 0 || (_partie$sous_parties = partie.sous_parties) === null || _partie$sous_parties === void 0 ? void 0 : _partie$sous_parties.find(sp => sp.description === "Lignes directes");\n        if (!sousPartieLignesDirectes) {\n          alert("Cette partie n\'a pas de lignes directes. Veuillez d\'abord créer une partie avec des lignes directes.");\n          return;\n        }\n\n        // Filtrer les lignes valides\n        const lignesValides = sousParties[0].lignes.filter(ligne => ligne.description.trim());\n        if (lignesValides.length === 0) {\n          alert("Veuillez saisir au moins une ligne valide.");\n          return;\n        }\n\n        // Créer toutes les lignes dans la sous-partie "Lignes directes"\n        const lignesPromises = lignesValides.map(ligne => axios__WEBPACK_IMPORTED_MODULE_2__["default"].post("/api/ligne-details/", {\n          description: ligne.description.trim(),\n          unite: ligne.unite.trim() || "unité",\n          cout_main_oeuvre: parseFloat(ligne.cout_main_oeuvre) || 0,\n          cout_materiel: parseFloat(ligne.cout_materiel) || 0,\n          taux_fixe: parseFloat(ligne.taux_fixe) || 0,\n          marge: parseFloat(ligne.marge) || 0,\n          sous_partie: sousPartieLignesDirectes.id\n        }));\n        const responses = await Promise.all(lignesPromises);\n        const lignesCreees = responses.map(response => response.data);\n        createdData = {\n          type: "lignesDirectes",\n          data: lignesCreees\n        };\n      }\n      onPartieCreated(createdData);\n      loadDomaines(); // Recharger les domaines après création\n      handleClose();\n      resetForm();\n    } catch (error) {\n      console.error("Erreur détaillée:", error);\n      alert(`Erreur lors de la création: ${error.message}`);\n    }\n  };\n  const resetForm = () => {\n    setPartieTitle("");\n    setSelectedPartieId("");\n    setSelectedSousPartieId("");\n    setSelectedPartieType("PEINTURE");\n    setNewDomaine("");\n    setShowNewDomaineInput(false);\n    setSousParties([{\n      description: "",\n      lignes: [{\n        description: "",\n        unite: "",\n        cout_main_oeuvre: "",\n        cout_materiel: "",\n        taux_fixe: defaultTauxFixe,\n        marge: "20"\n      }]\n    }]);\n  };\n  const handleTauxFixeUpdated = (nouveauTaux, lignesMisesAJour) => {\n    // Mettre à jour le taux fixe dans toutes les lignes existantes du modal\n    const newSousParties = sousParties.map(sousPartie => ({\n      ...sousPartie,\n      lignes: sousPartie.lignes.map(ligne => ({\n        ...ligne,\n        taux_fixe: nouveauTaux.toString()\n      }))\n    }));\n    setSousParties(newSousParties);\n\n    // Informer le composant parent (CreationDevis) de la mise à jour\n    if (onTauxFixeUpdated) {\n      onTauxFixeUpdated(nouveauTaux, lignesMisesAJour);\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    open: open,\n    onClose: handleClose,\n    maxWidth: "md",\n    fullWidth: true,\n    inert: !open\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, "Cr\\xE9er une nouvelle partie"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      display: "flex",\n      flexDirection: "column",\n      gap: 2,\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, "Type de cr\\xE9ation"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    row: true,\n    value: creationType,\n    onChange: e => setCreationType(e.target.value)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "partie",\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null),\n    label: "Partie compl\\xE8te"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "sousPartie",\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null),\n    label: "Sous-partie"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "ligne",\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null),\n    label: "Ligne de d\\xE9tail"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "lignesDirectes",\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null),\n    label: "Ajouter lignes \\xE0 une partie existante"\n  }))), (creationType === "sousPartie" || creationType === "ligne" || creationType === "lignesDirectes") && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, creationType === "lignesDirectes" ? "Sélectionner une partie avec lignes directes" : "Sélectionner une partie"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    value: selectedPartieId,\n    onChange: e => setSelectedPartieId(e.target.value)\n  }, (creationType === "lignesDirectes" ? getPartiesWithLignesDirectes() : existingParties).map(partie => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    key: partie.id,\n    value: partie.id\n  }, partie.titre)))), creationType === "ligne" && selectedPartieId && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "S\\xE9lectionner une sous-partie"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    value: selectedSousPartieId,\n    onChange: e => setSelectedSousPartieId(e.target.value)\n  }, existingSousParties.map(sousPartie => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    key: sousPartie.id,\n    value: sousPartie.id\n  }, sousPartie.description)))), creationType === "lignesDirectes" && selectedPartieId && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(Typography, {\n    variant: "h6",\n    gutterBottom: true\n  }, "Ajouter des lignes \\xE0 la partie \\"", (_existingParties$find = existingParties.find(p => p.id === selectedPartieId)) === null || _existingParties$find === void 0 ? void 0 : _existingParties$find.titre, "\\""), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(Typography, {\n    variant: "body2",\n    color: "text.secondary",\n    sx: {\n      mb: 2\n    }\n  }, "Ces lignes seront ajout\\xE9es aux lignes directes existantes de cette partie.")), (creationType === "partie" || creationType === "lignesDirectes") && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, creationType === "partie" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    label: "Titre de la partie",\n    value: partieTitle,\n    onChange: e => setPartieTitle(e.target.value)\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "Type de la partie"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    value: selectedPartieType,\n    onChange: e => setSelectedPartieType(e.target.value)\n  }, availableDomaines.map(domaine => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    key: domaine,\n    value: domaine\n  }, domaine)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      display: "flex",\n      gap: 1,\n      alignItems: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "outlined",\n    size: "small",\n    onClick: () => setShowNewDomaineInput(!showNewDomaineInput),\n    sx: {\n      fontSize: "0.75rem"\n    }\n  }, "+ Nouveau domaine")), showNewDomaineInput && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      display: "flex",\n      gap: 1,\n      alignItems: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    size: "small",\n    placeholder: "Nom du nouveau domaine",\n    value: newDomaine,\n    onChange: e => setNewDomaine(e.target.value),\n    onKeyPress: e => e.key === "Enter" && handleAddNewDomaine()\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "contained",\n    size: "small",\n    onClick: handleAddNewDomaine,\n    disabled: !newDomaine.trim()\n  }, "Ajouter"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "outlined",\n    size: "small",\n    onClick: () => {\n      setShowNewDomaineInput(false);\n      setNewDomaine("");\n    }\n  }, "Annuler"))), sousParties.map((sousPartie, spIndex) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    key: spIndex,\n    sx: {\n      border: "1px solid #ddd",\n      p: 2,\n      borderRadius: 1,\n      mt: 2\n    }\n  }, creationType !== "lignesDirectes" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    fullWidth: true,\n    label: "Description de la sous-partie",\n    value: sousPartie.description,\n    onChange: e => {\n      const newSousParties = [...sousParties];\n      newSousParties[spIndex].description = e.target.value;\n      setSousParties(newSousParties);\n    }\n  }), sousPartie.lignes.map((ligne, ligneIndex) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    key: ligneIndex,\n    sx: {\n      display: "flex",\n      gap: 1,\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    fullWidth: true,\n    label: "Description",\n    value: ligne.description,\n    onChange: e => {\n      const newSousParties = [...sousParties];\n      newSousParties[spIndex].lignes[ligneIndex].description = e.target.value;\n      setSousParties(newSousParties);\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    freeSolo: true,\n    options: existingUnites,\n    value: ligne.unite,\n    onChange: (event, newValue) => {\n      const newSousParties = [...sousParties];\n      newSousParties[spIndex].lignes[ligneIndex].unite = newValue || "";\n      setSousParties(newSousParties);\n    },\n    onInputChange: (event, newInputValue) => {\n      const newSousParties = [...sousParties];\n      newSousParties[spIndex].lignes[ligneIndex].unite = newInputValue;\n      setSousParties(newSousParties);\n    },\n    renderInput: params => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], _extends({}, params, {\n      label: "Unit\\xE9",\n      sx: {\n        minWidth: 120\n      }\n    }))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    label: "Main d\'\\u0153uvre",\n    type: "number",\n    value: ligne.cout_main_oeuvre,\n    onChange: e => {\n      const newSousParties = [...sousParties];\n      newSousParties[spIndex].lignes[ligneIndex].cout_main_oeuvre = e.target.value;\n      setSousParties(newSousParties);\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    label: "Mat\\xE9riel",\n    type: "number",\n    value: ligne.cout_materiel,\n    onChange: e => {\n      const newSousParties = [...sousParties];\n      newSousParties[spIndex].lignes[ligneIndex].cout_materiel = e.target.value;\n      setSousParties(newSousParties);\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    label: "Taux fixe (%)",\n    type: "number",\n    value: ligne.taux_fixe,\n    onChange: e => {\n      const newSousParties = [...sousParties];\n      newSousParties[spIndex].lignes[ligneIndex].taux_fixe = e.target.value;\n      setSousParties(newSousParties);\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    label: "Marge (%)",\n    type: "number",\n    value: ligne.marge,\n    onChange: e => {\n      const newSousParties = [...sousParties];\n      newSousParties[spIndex].lignes[ligneIndex].marge = e.target.value;\n      setSousParties(newSousParties);\n    }\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    onClick: () => handleAddLigne(spIndex),\n    sx: {\n      mt: 1\n    }\n  }, "+ Ajouter une ligne"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    onClick: handleAddSousPartie,\n    sx: {\n      mt: 2\n    }\n  }, "+ Ajouter une sous-partie")), creationType === "sousPartie" && selectedPartieId && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    fullWidth: true,\n    label: "Description de la sous-partie",\n    value: sousParties[0].description,\n    onChange: e => {\n      const newSousParties = [...sousParties];\n      newSousParties[0].description = e.target.value;\n      setSousParties(newSousParties);\n    }\n  }), sousParties[0].lignes.map((ligne, ligneIndex) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    key: ligneIndex,\n    sx: {\n      display: "flex",\n      gap: 1,\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    fullWidth: true,\n    label: "Description",\n    value: ligne.description,\n    onChange: e => {\n      const newSousParties = [...sousParties];\n      newSousParties[0].lignes[ligneIndex].description = e.target.value;\n      setSousParties(newSousParties);\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    freeSolo: true,\n    options: existingUnites,\n    value: ligne.unite,\n    onChange: (event, newValue) => {\n      const newSousParties = [...sousParties];\n      newSousParties[0].lignes[ligneIndex].unite = newValue || "";\n      setSousParties(newSousParties);\n    },\n    onInputChange: (event, newInputValue) => {\n      const newSousParties = [...sousParties];\n      newSousParties[0].lignes[ligneIndex].unite = newInputValue;\n      setSousParties(newSousParties);\n    },\n    renderInput: params => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], _extends({}, params, {\n      label: "Unit\\xE9",\n      sx: {\n        minWidth: 120\n      }\n    }))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    label: "Main d\'\\u0153uvre",\n    type: "number",\n    value: ligne.cout_main_oeuvre,\n    onChange: e => {\n      const newSousParties = [...sousParties];\n      newSousParties[0].lignes[ligneIndex].cout_main_oeuvre = e.target.value;\n      setSousParties(newSousParties);\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    label: "Mat\\xE9riel",\n    type: "number",\n    value: ligne.cout_materiel,\n    onChange: e => {\n      const newSousParties = [...sousParties];\n      newSousParties[0].lignes[ligneIndex].cout_materiel = e.target.value;\n      setSousParties(newSousParties);\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    label: "Taux fixe (%)",\n    type: "number",\n    value: ligne.taux_fixe,\n    onChange: e => {\n      const newSousParties = [...sousParties];\n      newSousParties[0].lignes[ligneIndex].taux_fixe = e.target.value;\n      setSousParties(newSousParties);\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    label: "Marge (%)",\n    type: "number",\n    value: ligne.marge,\n    onChange: e => {\n      const newSousParties = [...sousParties];\n      newSousParties[0].lignes[ligneIndex].marge = e.target.value;\n      setSousParties(newSousParties);\n    }\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    onClick: () => handleAddLigne(0),\n    sx: {\n      mt: 1\n    }\n  }, "+ Ajouter une ligne")), creationType === "ligne" && selectedSousPartieId && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      border: "1px solid #ddd",\n      p: 2,\n      borderRadius: 1,\n      mt: 2\n    }\n  }, sousParties[0].lignes.map((ligne, ligneIndex) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    key: ligneIndex,\n    sx: {\n      display: "flex",\n      gap: 1,\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    fullWidth: true,\n    label: "Description",\n    value: ligne.description,\n    onChange: e => {\n      const newSousParties = [...sousParties];\n      newSousParties[0].lignes[ligneIndex].description = e.target.value;\n      setSousParties(newSousParties);\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    freeSolo: true,\n    options: existingUnites,\n    value: ligne.unite,\n    onChange: (event, newValue) => {\n      const newSousParties = [...sousParties];\n      newSousParties[0].lignes[ligneIndex].unite = newValue || "";\n      setSousParties(newSousParties);\n    },\n    onInputChange: (event, newInputValue) => {\n      const newSousParties = [...sousParties];\n      newSousParties[0].lignes[ligneIndex].unite = newInputValue;\n      setSousParties(newSousParties);\n    },\n    renderInput: params => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], _extends({}, params, {\n      label: "Unit\\xE9",\n      sx: {\n        minWidth: 120\n      }\n    }))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    label: "Co\\xFBt main d\'\\u0153uvre",\n    type: "number",\n    value: ligne.cout_main_oeuvre,\n    onChange: e => {\n      const newSousParties = [...sousParties];\n      newSousParties[0].lignes[ligneIndex].cout_main_oeuvre = e.target.value;\n      setSousParties(newSousParties);\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    label: "Co\\xFBt mat\\xE9riel",\n    type: "number",\n    value: ligne.cout_materiel,\n    onChange: e => {\n      const newSousParties = [...sousParties];\n      newSousParties[0].lignes[ligneIndex].cout_materiel = e.target.value;\n      setSousParties(newSousParties);\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    label: "Taux fixe (%)",\n    type: "number",\n    value: ligne.taux_fixe,\n    onChange: e => {\n      const newSousParties = [...sousParties];\n      newSousParties[0].lignes[ligneIndex].taux_fixe = e.target.value;\n      setSousParties(newSousParties);\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    label: "Marge (%)",\n    type: "number",\n    value: ligne.marge,\n    onChange: e => {\n      const newSousParties = [...sousParties];\n      newSousParties[0].lignes[ligneIndex].marge = e.target.value;\n      setSousParties(newSousParties);\n    }\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    onClick: () => handleAddLigne(0),\n    sx: {\n      mt: 1\n    }\n  }, "+ Ajouter une ligne")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    onClick: () => {\n      if (window.confirm("Voulez-vous vraiment vider tous les champs ? Cette action ne peut pas être annulée.")) {\n        resetModalState();\n      }\n    },\n    color: "secondary",\n    variant: "outlined",\n    sx: {\n      mr: "auto"\n    }\n  }, "\\uD83D\\uDDD1\\uFE0F Vider les champs"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    onClick: () => setOpenTauxFixeModal(true),\n    color: "primary"\n  }, "Modifier Taux Fixe"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    onClick: handleClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    onClick: handleSubmit,\n    variant: "contained",\n    color: "primary"\n  }, "Cr\\xE9er"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_UpdateTauxFixeModal__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: openTauxFixeModal,\n    handleClose: () => setOpenTauxFixeModal(false),\n    onTauxFixeUpdated: handleTauxFixeUpdated\n  }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CreatePartieModal);\n\n//# sourceURL=webpack://frontend/./src/components/CreatePartieModal.js?')},"./src/components/CreationDevis.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Container/Container.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormLabel/FormLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/RadioGroup/RadioGroup.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControlLabel/FormControlLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Radio/Radio.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputAdornment/InputAdornment.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Accordion/Accordion.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/AccordionSummary/AccordionSummary.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/AccordionDetails/AccordionDetails.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Checkbox/Checkbox.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Card/Card.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/CardContent/CardContent.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fa__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! react-icons/fa */ "./node_modules/react-icons/fa/index.mjs");\n/* harmony import */ var react_icons_fi__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! react-icons/fi */ "./node_modules/react-icons/fi/index.mjs");\n/* harmony import */ var react_icons_ri__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! react-icons/ri */ "./node_modules/react-icons/ri/index.mjs");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");\n/* harmony import */ var _utils_axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/axios */ "./src/utils/axios.js");\n/* harmony import */ var _ChantierForm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ChantierForm */ "./src/components/ChantierForm.js");\n/* harmony import */ var _ClientInfoModal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ClientInfoModal */ "./src/components/ClientInfoModal.js");\n/* harmony import */ var _ClientTypeModal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ClientTypeModal */ "./src/components/ClientTypeModal.js");\n/* harmony import */ var _CreatePartieModal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./CreatePartieModal */ "./src/components/CreatePartieModal.js");\n/* harmony import */ var _DevisModal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./DevisModal */ "./src/components/DevisModal.js");\n/* harmony import */ var _EditModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./EditModal */ "./src/components/EditModal.js");\n/* harmony import */ var _SelectSocieteModal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./SelectSocieteModal */ "./src/components/SelectSocieteModal.js");\n/* harmony import */ var _SocieteInfoModal__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./SocieteInfoModal */ "./src/components/SocieteInfoModal.js");\n/* harmony import */ var _SpecialLineModal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./SpecialLineModal */ "./src/components/SpecialLineModal.js");\n/* harmony import */ var _SpecialLinesOverview__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./SpecialLinesOverview */ "./src/components/SpecialLinesOverview.js");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst CreationDevis = () => {\n  var _specialLines$current;\n  // Fonction utilitaire pour formater les prix avec gestion des valeurs null/undefined\n  const formatPrice = value => {\n    if (value === null || value === undefined || value === "") {\n      return "0.00";\n    }\n    const numValue = parseFloat(value);\n    if (isNaN(numValue)) {\n      return "0.00";\n    }\n    return numValue.toFixed(2);\n  };\n  const [pendingChantierData, setPendingChantierData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    client: {\n      name: "",\n      surname: "",\n      client_mail: "",\n      phone_Number: ""\n    },\n    societe: {\n      nom_societe: "",\n      ville_societe: "",\n      rue_societe: "",\n      codepostal_societe: ""\n    },\n    chantier: {\n      id: -1,\n      chantier_name: "",\n      ville: "",\n      rue: "",\n      code_postal: ""\n    },\n    devis: null\n  });\n  const [hiddenParties, setHiddenParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [hiddenSousParties, setHiddenSousParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [hiddenLignes, setHiddenLignes] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [chantiers, setChantiers] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [selectedChantierId, setSelectedChantierId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [parties, setParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [selectedParties, setSelectedParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [selectedPartieType, setSelectedPartieType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("PEINTURE");\n  const [sousParties, setSousParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [filteredSousParties, setFilteredSousParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [selectedSousParties, setSelectedSousParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [allLignesDetails, setAllLignesDetails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [filteredLignesDetails, setFilteredLignesDetails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [quantities, setQuantities] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [customPrices, setCustomPrices] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [customCouts, setCustomCouts] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [customTauxFixes, setCustomTauxFixes] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [customMarges, setCustomMarges] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [showCreationPartie, setShowCreationPartie] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false); // État pour afficher ou masquer CreationPartie.js\n  const [isPreviewed, setIsPreviewed] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // États pour la gestion dynamique des domaines\n  const [availableDomaines, setAvailableDomaines] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [devisType, setDevisType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("normal"); // \'normal\' ou \'chantier\'\n  const [showClientForm, setShowClientForm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [societeId, setSocieteId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [showClientTypeModal, setShowClientTypeModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showExistingClientForm, setShowExistingClientForm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showSelectSocieteModal, setShowSelectSocieteModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedSocieteId, setSelectedSocieteId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [selectedLignes, setSelectedLignes] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [slidingLines, setSlidingLines] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [openDevisModal, setOpenDevisModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [devisModalData, setDevisModalData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    numero: "",\n    client: "",\n    chantier_name: "",\n    montant_ttc: "",\n    description: ""\n  });\n  const [openCreatePartieModal, setOpenCreatePartieModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [editData, setEditData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [editModalOpen, setEditModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [itemToEdit, setItemToEdit] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [slidingParties, setSlidingParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [slidingSousParties, setSlidingSousParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [slidingLignes, setSlidingLignes] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [showClientInfoModal, setShowClientInfoModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showSocieteInfoModal, setShowSocieteInfoModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showChantierForm, setShowChantierForm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [tvaRate, setTvaRate] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(20);\n  const [natureTravaux, setNatureTravaux] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [specialLines, setSpecialLines] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    parties: {},\n    // {partieId: [{type: \'prorata\', value: 10, isHighlighted: true}, ...]}\n    sousParties: {},\n    // {sousPartieId: [{type: \'remise\', value: 5, isHighlighted: false}, ...]}\n    lignes: {},\n    // {ligneId: [{type: \'supplement\', value: 15, isHighlighted: true}, ...]}\n    global: [] // [{type: \'prorata\', value: 2, isHighlighted: true}, ...]\n  });\n  const [openSpecialLineModal, setOpenSpecialLineModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [currentSpecialLineTarget, setCurrentSpecialLineTarget] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    type: "",\n    id: null\n  });\n\n  // Ajouter cet état pour gérer les termes de recherche par sous-partie\n  const [searchTerms, setSearchTerms] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n\n  // Ajout de l\'état pour le taux fixe\n  const [tauxFixe, setTauxFixe] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n\n  // Ajout de l\'état pour contrôler la visibilité de la box de résumé\n  const [showSummaryBox, setShowSummaryBox] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // États pour la gestion des erreurs\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [errorDetails, setErrorDetails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const location = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_12__.useLocation)();\n\n  // Charger les chantiers et l\'état sauvegardé\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    fetchChantiers();\n    loadStateFromLocalStorage();\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const params = new URLSearchParams(location.search);\n    const chantierId = params.get("chantier_id");\n    if (chantierId) {\n      setSelectedChantierId(Number(chantierId));\n    }\n  }, [location.search]);\n\n  // Sauvegarder l\'état automatiquement quand il change\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    saveStateToLocalStorage();\n  }, [selectedChantierId, selectedParties, selectedSousParties, selectedLignes, quantities, customPrices, customCouts, customTauxFixes, customMarges, tvaRate, natureTravaux, specialLines, devisType, pendingChantierData, selectedSocieteId, showSummaryBox]);\n  const fetchChantiers = async () => {\n    try {\n      setError(null);\n      const response = await _utils_axios__WEBPACK_IMPORTED_MODULE_1__["default"].get("chantier/");\n      setChantiers(response.data);\n    } catch (error) {\n      var _error$response, _error$response2;\n      console.error("Erreur lors du chargement des chantiers:", error);\n      setError("Impossible de charger la liste des chantiers");\n      setErrorDetails({\n        message: "Erreur lors de la récupération des chantiers",\n        details: ((_error$response = error.response) === null || _error$response === void 0 || (_error$response = _error$response.data) === null || _error$response === void 0 ? void 0 : _error$response.detail) || error.message,\n        code: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status,\n        timestamp: new Date().toISOString()\n      });\n    }\n  };\n\n  // Fonction pour charger les domaines disponibles\n  const loadDomaines = () => {\n    axios__WEBPACK_IMPORTED_MODULE_13__["default"].get("/api/parties/domaines/").then(response => {\n      setAvailableDomaines(response.data);\n      // Si aucun domaine n\'est sélectionné, prendre le premier disponible\n      if (!selectedPartieType && response.data.length > 0) {\n        setSelectedPartieType(response.data[0]);\n      }\n    }).catch(error => {\n      console.error("Erreur lors du chargement des domaines", error);\n    });\n  };\n\n  // Charger les domaines disponibles au démarrage\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    loadDomaines();\n  }, []);\n\n  // Recharger les domaines quand la fenêtre reprend le focus (au cas où d\'autres onglets ont créé des domaines)\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const handleFocus = () => {\n      loadDomaines();\n    };\n    window.addEventListener("focus", handleFocus);\n    return () => window.removeEventListener("focus", handleFocus);\n  }, []);\n\n  // Charger les parties filtrées par type\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!selectedPartieType) return;\n    setError(null);\n    const params = {\n      type: selectedPartieType\n    };\n    axios__WEBPACK_IMPORTED_MODULE_13__["default"].get("/api/parties/", {\n      params\n    }).then(response => {\n      setParties(response.data);\n    }).catch(error => {\n      var _error$response3, _error$response4;\n      console.error("Erreur lors du chargement des parties", error);\n      setError("Impossible de charger les parties");\n      setErrorDetails({\n        message: "Erreur lors de la récupération des parties",\n        details: ((_error$response3 = error.response) === null || _error$response3 === void 0 || (_error$response3 = _error$response3.data) === null || _error$response3 === void 0 ? void 0 : _error$response3.detail) || error.message,\n        code: (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status,\n        timestamp: new Date().toISOString()\n      });\n    });\n  }, [selectedPartieType]);\n\n  // Charger toutes les sous-parties\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    setError(null);\n    axios__WEBPACK_IMPORTED_MODULE_13__["default"].get("/api/sous-parties/").then(response => {\n      setSousParties(response.data);\n    }).catch(error => {\n      var _error$response5, _error$response6;\n      console.error("Erreur lors du chargement des sous-parties", error);\n      setError("Impossible de charger les sous-parties");\n      setErrorDetails({\n        message: "Erreur lors de la récupération des sous-parties",\n        details: ((_error$response5 = error.response) === null || _error$response5 === void 0 || (_error$response5 = _error$response5.data) === null || _error$response5 === void 0 ? void 0 : _error$response5.detail) || error.message,\n        code: (_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : _error$response6.status,\n        timestamp: new Date().toISOString()\n      });\n    });\n  }, []);\n\n  // Filtrer les sous-parties en fonction des parties sélectionnées\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (selectedParties.length > 0) {\n      const filtered = sousParties.filter(sousPartie => selectedParties.includes(sousPartie.partie));\n      setFilteredSousParties(filtered);\n    } else {\n      setFilteredSousParties([]);\n    }\n  }, [selectedParties, sousParties]);\n  const handlePartiesChange = partieId => {\n    setIsPreviewed(false);\n    const isSelected = selectedParties.includes(partieId);\n    if (isSelected) {\n      setSelectedParties(prev => prev.filter(id => id !== partieId));\n    } else {\n      setSelectedParties(prev => [...prev, partieId]);\n    }\n  };\n  const handleSousPartiesChange = sousPartieId => {\n    setIsPreviewed(false); // Annuler l\'état de prévisualisation si des modifications sont faites\n    const isSelected = selectedSousParties.includes(sousPartieId);\n    if (isSelected) {\n      setSelectedSousParties(selectedSousParties.filter(id => id !== sousPartieId));\n    } else {\n      setSelectedSousParties([...selectedSousParties, sousPartieId]);\n    }\n  };\n\n  // Charger les lignes de détail basées sur les sous-parties sélectionnées\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (selectedSousParties.length > 0) {\n      setError(null);\n      // Récupérer les sous-parties sélectionnées avec leurs lignes de détail\n      axios__WEBPACK_IMPORTED_MODULE_13__["default"].get("/api/sous-parties/", {\n        params: {\n          id__in: selectedSousParties.join(",")\n        }\n      }).then(response => {\n        // Extraire toutes les lignes de détail des sous-parties\n        const allLignes = response.data.reduce((acc, sousPartie) => {\n          const lignesWithSousPartie = sousPartie.lignes_details.map(ligne => ({\n            ...ligne,\n            sous_partie: sousPartie.id\n          }));\n          return [...acc, ...lignesWithSousPartie];\n        }, []);\n        setAllLignesDetails(allLignes);\n        setFilteredLignesDetails(allLignes);\n      }).catch(error => {\n        var _error$response7, _error$response8;\n        console.error("Erreur lors du chargement des lignes de détail", error);\n        setError("Impossible de charger les lignes de détail");\n        setErrorDetails({\n          message: "Erreur lors de la récupération des lignes de détail",\n          details: ((_error$response7 = error.response) === null || _error$response7 === void 0 || (_error$response7 = _error$response7.data) === null || _error$response7 === void 0 ? void 0 : _error$response7.detail) || error.message,\n          code: (_error$response8 = error.response) === null || _error$response8 === void 0 ? void 0 : _error$response8.status,\n          sousPartiesIds: selectedSousParties,\n          timestamp: new Date().toISOString()\n        });\n      });\n    } else {\n      setAllLignesDetails([]);\n      setFilteredLignesDetails([]);\n    }\n  }, [selectedSousParties]);\n  const handleQuantityChange = (ligneId, quantity) => {\n    setIsPreviewed(false); // Annuler l\'état de prévisualisation si des modifications sont faites\n    setQuantities({\n      ...quantities,\n      [ligneId]: quantity\n    });\n  };\n  const handlePriceChange = (ligneId, price) => {\n    setIsPreviewed(false); // Annuler l\'état de prévisualisation si des modifications sont faites\n    setCustomPrices({\n      ...customPrices,\n      [ligneId]: price\n    });\n  };\n\n  // Nouvelles fonctions pour gérer les coûts détaillés\n  const handleCoutMainOeuvreChange = (ligneId, cout) => {\n    setIsPreviewed(false);\n    const value = cout === "" ? "" : cout;\n    setCustomCouts({\n      ...customCouts,\n      [ligneId]: {\n        ...customCouts[ligneId],\n        main_oeuvre: value\n      }\n    });\n  };\n  const handleCoutMaterielChange = (ligneId, cout) => {\n    setIsPreviewed(false);\n    const value = cout === "" ? "" : cout;\n    setCustomCouts({\n      ...customCouts,\n      [ligneId]: {\n        ...customCouts[ligneId],\n        materiel: value\n      }\n    });\n  };\n  const handleTauxFixeChange = (ligneId, taux) => {\n    setIsPreviewed(false);\n    const value = taux === "" ? "" : taux;\n    setCustomTauxFixes({\n      ...customTauxFixes,\n      [ligneId]: value\n    });\n  };\n  const handleMargeChange = (ligneId, marge) => {\n    setIsPreviewed(false);\n    const value = marge === "" ? "" : marge;\n    setCustomMarges({\n      ...customMarges,\n      [ligneId]: value\n    });\n  };\n\n  // Fonction pour réinitialiser les coûts personnalisés d\'une ligne\n  const resetCustomCosts = ligneId => {\n    setIsPreviewed(false);\n    setCustomCouts(prev => {\n      const newCouts = {\n        ...prev\n      };\n      delete newCouts[ligneId];\n      return newCouts;\n    });\n    setCustomTauxFixes(prev => {\n      const newTaux = {\n        ...prev\n      };\n      delete newTaux[ligneId];\n      return newTaux;\n    });\n    setCustomMarges(prev => {\n      const newMarges = {\n        ...prev\n      };\n      delete newMarges[ligneId];\n      return newMarges;\n    });\n    setCustomPrices(prev => {\n      const newPrices = {\n        ...prev\n      };\n      delete newPrices[ligneId];\n      return newPrices;\n    });\n  };\n\n  // Fonction pour sauvegarder les modifications des coûts dans la base de données\n  const saveCustomCostsToDatabase = async ligneId => {\n    try {\n      var _customCouts$ligneId, _customCouts$ligneId2;\n      setError(null);\n      const ligne = filteredLignesDetails.find(l => l.id === ligneId);\n      if (!ligne) {\n        throw new Error(`Ligne avec l\'ID ${ligneId} non trouvée`);\n      }\n\n      // S\'assurer que tous les nombres sont bien formatés avec 2 décimales\n      const coutMainOeuvre = parseFloat(((_customCouts$ligneId = customCouts[ligneId]) === null || _customCouts$ligneId === void 0 ? void 0 : _customCouts$ligneId.main_oeuvre) || ligne.cout_main_oeuvre || 0).toFixed(2);\n      const coutMateriel = parseFloat(((_customCouts$ligneId2 = customCouts[ligneId]) === null || _customCouts$ligneId2 === void 0 ? void 0 : _customCouts$ligneId2.materiel) || ligne.cout_materiel || 0).toFixed(2);\n      const tauxFixe = parseFloat(customTauxFixes[ligneId] || ligne.taux_fixe || 0).toFixed(2);\n      const marge = parseFloat(customMarges[ligneId] || ligne.marge || 0).toFixed(2);\n      const updateData = {\n        cout_main_oeuvre: coutMainOeuvre,\n        cout_materiel: coutMateriel,\n        taux_fixe: tauxFixe,\n        marge: marge,\n        sous_partie: ligne.sous_partie\n      };\n      console.log("Mise à jour de la ligne:", ligneId, updateData);\n      const response = await axios__WEBPACK_IMPORTED_MODULE_13__["default"].put(`/api/ligne-details/${ligneId}/`, updateData);\n\n      // Mettre à jour les données locales avec les nouvelles valeurs\n      setAllLignesDetails(prev => prev.map(l => l.id === ligneId ? response.data : l));\n      setFilteredLignesDetails(prev => prev.map(l => l.id === ligneId ? response.data : l));\n\n      // Nettoyer les coûts personnalisés après sauvegarde\n      resetCustomCosts(ligneId);\n      console.log("Ligne mise à jour avec succès:", response.data);\n    } catch (error) {\n      var _error$response9, _error$response10, _ligne;\n      console.error("Erreur lors de la sauvegarde des coûts:", error);\n      setError("Impossible de sauvegarder les modifications des coûts");\n      setErrorDetails({\n        message: "Erreur lors de la sauvegarde des coûts dans la base de données",\n        details: ((_error$response9 = error.response) === null || _error$response9 === void 0 || (_error$response9 = _error$response9.data) === null || _error$response9 === void 0 ? void 0 : _error$response9.detail) || error.message,\n        code: (_error$response10 = error.response) === null || _error$response10 === void 0 ? void 0 : _error$response10.status,\n        ligneId: ligneId,\n        ligneDescription: ((_ligne = ligne) === null || _ligne === void 0 ? void 0 : _ligne.description) || "Inconnue",\n        timestamp: new Date().toISOString()\n      });\n    }\n  };\n\n  // Fonction pour calculer le prix automatiquement basé sur les coûts\n  const calculatePriceFromCosts = ligne => {\n    var _customCouts$ligne$id, _customCouts$ligne$id2;\n    const coutMainOeuvre = parseFloat(((_customCouts$ligne$id = customCouts[ligne.id]) === null || _customCouts$ligne$id === void 0 ? void 0 : _customCouts$ligne$id.main_oeuvre) || ligne.cout_main_oeuvre || 0);\n    const coutMateriel = parseFloat(((_customCouts$ligne$id2 = customCouts[ligne.id]) === null || _customCouts$ligne$id2 === void 0 ? void 0 : _customCouts$ligne$id2.materiel) || ligne.cout_materiel || 0);\n    const tauxFixe = parseFloat(customTauxFixes[ligne.id] || ligne.taux_fixe || 0);\n    const marge = parseFloat(customMarges[ligne.id] || ligne.marge || 0);\n    const base = parseFloat((coutMainOeuvre + coutMateriel).toFixed(2));\n    const montantTauxFixe = parseFloat((base * (tauxFixe / 100)).toFixed(2));\n    const sousTotal = parseFloat((base + montantTauxFixe).toFixed(2));\n    const montantMarge = parseFloat((sousTotal * (marge / 100)).toFixed(2));\n    const prixCalcule = parseFloat((sousTotal + montantMarge).toFixed(2));\n    return prixCalcule.toFixed(2);\n  };\n\n  // Fonction pour prévisualiser le devis\n  const handlePreviewDevis = () => {\n    const devisData = {\n      numero: devisModalData.numero,\n      chantier: selectedChantierId,\n      client: [selectedSocieteId],\n      price_ht: calculateGrandTotal.totalHT,\n      description: devisModalData.description,\n      tva_rate: tvaRate,\n      nature_travaux: natureTravaux,\n      parties: selectedParties,\n      sous_parties: selectedSousParties,\n      lignes_details: filteredLignesDetails.filter(ligne => selectedSousParties.includes(ligne.sous_partie)).map(ligne => ({\n        id: ligne.id,\n        quantity: quantities[ligne.id] || 0,\n        custom_price: customPrices[ligne.id] || ligne.prix\n      })),\n      specialLines: specialLines\n    };\n    if (selectedChantierId === -1) {\n      devisData.tempData = {\n        client: pendingChantierData.client || {},\n        societe: pendingChantierData.societe || {},\n        chantier: pendingChantierData.chantier || {}\n      };\n    }\n    const queryString = encodeURIComponent(JSON.stringify(devisData));\n    const previewUrl = `/api/preview-devis/?devis=${queryString}`;\n    window.open(previewUrl, "_blank");\n    setIsPreviewed(true);\n  };\n\n  // Ajouter un effet pour nettoyer les données temporaires\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const cleanupTempData = () => {\n      setPendingChantierData({\n        client: {\n          name: "",\n          surname: "",\n          client_mail: "",\n          phone_Number: ""\n        },\n        societe: {\n          nom_societe: "",\n          ville_societe: "",\n          rue_societe: "",\n          codepostal_societe: ""\n        },\n        chantier: {\n          id: -1,\n          chantier_name: "",\n          ville: "",\n          rue: "",\n          code_postal: ""\n        },\n        devis: null\n      });\n    };\n\n    // Nettoyer lors du démontage du composant\n    return () => cleanupTempData();\n  }, []);\n\n  // Modifier le gestionnaire onSubmit du ClientSocieteForm\n  const handleClientFormSubmit = newSocieteId => {\n    setSocieteId(newSocieteId);\n    setShowClientForm(false);\n  };\n\n  // Fonction pour générer le numéro de devis\n  const generateDevisNumber = async () => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_13__["default"].get("/api/get-next-devis-number/");\n      return `DEV-${response.data.next_number}-${new Date().getFullYear().toString().slice(-2)}`;\n    } catch (error) {\n      console.error("Erreur lors de la génération du numéro de devis:", error);\n      return `DEV-ERR-${new Date().getFullYear().toString().slice(-2)}`;\n    }\n  };\n\n  // Ajouter ces fonctions de vérification\n  const checkClientExists = async clientData => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_13__["default"].get("/api/check-client/", {\n        params: {\n          email: clientData.client_mail,\n          phone: clientData.phone_Number\n        }\n      });\n      return response.data.client || null;\n    } catch (error) {\n      console.error("Erreur lors de la vérification du client:", error);\n      return null;\n    }\n  };\n  const checkSocieteExists = async societeData => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_13__["default"].get("/api/check-societe/", {\n        params: {\n          nom_societe: societeData.nom_societe,\n          codepostal_societe: societeData.codepostal_societe\n        }\n      });\n      return response.data.societe || null;\n    } catch (error) {\n      console.error("Erreur lors de la vérification de la société:", error);\n      return null;\n    }\n  };\n\n  // Fonction de calcul des totaux estimés\n  const calculateEstimatedTotals = () => {\n    let totals = {\n      cout_estime_main_oeuvre: 0,\n      cout_estime_materiel: 0,\n      cout_avec_taux_fixe: 0,\n      marge_estimee: 0\n    };\n\n    // 1. Calculer les coûts directs\n    selectedLignes.forEach(ligneId => {\n      const ligne = filteredLignesDetails.find(l => l.id === ligneId);\n      if (ligne) {\n        var _customCouts$ligneId3, _customCouts$ligneId4;\n        const quantity = quantities[ligneId] || 0;\n        // Utiliser les coûts personnalisés s\'ils existent, sinon les coûts par défaut\n        const cout_main_oeuvre = quantity * parseFloat(((_customCouts$ligneId3 = customCouts[ligneId]) === null || _customCouts$ligneId3 === void 0 ? void 0 : _customCouts$ligneId3.main_oeuvre) || ligne.cout_main_oeuvre || 0);\n        const cout_materiel = quantity * parseFloat(((_customCouts$ligneId4 = customCouts[ligneId]) === null || _customCouts$ligneId4 === void 0 ? void 0 : _customCouts$ligneId4.materiel) || ligne.cout_materiel || 0);\n        totals.cout_estime_main_oeuvre += cout_main_oeuvre;\n        totals.cout_estime_materiel += cout_materiel;\n      }\n    });\n\n    // 2. Calculer le total des coûts directs\n    const coutsDirects = totals.cout_estime_main_oeuvre + totals.cout_estime_materiel;\n\n    // 3. Calculer le montant du taux fixe (utiliser le taux fixe global ou la moyenne des taux personnalisés)\n    let tauxFixeGlobal = tauxFixe || 20;\n\n    // Si des taux personnalisés existent, calculer la moyenne pondérée\n    let totalTauxFixe = 0;\n    let totalQuantite = 0;\n    selectedLignes.forEach(ligneId => {\n      const ligne = filteredLignesDetails.find(l => l.id === ligneId);\n      if (ligne) {\n        const quantity = quantities[ligneId] || 0;\n        const tauxPersonnalise = customTauxFixes[ligneId] || ligne.taux_fixe || tauxFixeGlobal;\n        totalTauxFixe += tauxPersonnalise * quantity;\n        totalQuantite += quantity;\n      }\n    });\n    const tauxFixeMoyen = totalQuantite > 0 ? totalTauxFixe / totalQuantite : tauxFixeGlobal;\n    const montantTauxFixe = coutsDirects * (tauxFixeMoyen / 100);\n    totals.cout_avec_taux_fixe = coutsDirects + montantTauxFixe;\n\n    // 4. Obtenir le total HT\n    const grandTotal = calculateGrandTotal;\n    const totalHT = parseFloat(grandTotal.totalHT);\n\n    // 5. Calculer la marge\n    totals.marge_estimee = totalHT - totals.cout_avec_taux_fixe;\n\n    // 6. Arrondir tous les résultats à 2 décimales\n    totals.cout_estime_main_oeuvre = parseFloat(totals.cout_estime_main_oeuvre.toFixed(2));\n    totals.cout_estime_materiel = parseFloat(totals.cout_estime_materiel.toFixed(2));\n    totals.cout_avec_taux_fixe = parseFloat(totals.cout_avec_taux_fixe.toFixed(2));\n    totals.marge_estimee = parseFloat(totals.marge_estimee.toFixed(2));\n    return totals;\n  };\n\n  // Prépare les données pour le modal\n  const handleSaveDevis = async () => {\n    try {\n      if (!selectedChantierId) {\n        alert("Veuillez sélectionner un chantier");\n        return;\n      }\n\n      // Récupérer les informations du chantier sélectionné\n      let clientName;\n      if (selectedChantierId !== -1) {\n        const chantierResponse = await axios__WEBPACK_IMPORTED_MODULE_13__["default"].get(`/api/chantier/${selectedChantierId}/`);\n        const chantier = chantierResponse.data;\n        if (chantier.societe && chantier.societe.client_name) {\n          clientName = `${chantier.societe.client_name.name} ${chantier.societe.client_name.surname}`;\n        }\n      } else if (pendingChantierData.client) {\n        clientName = `${pendingChantierData.client.name} ${pendingChantierData.client.surname}`;\n      }\n\n      // Si aucun nom de client n\'est trouvé, utiliser les données de la société\n      if (!clientName && selectedSocieteId) {\n        const societeResponse = await axios__WEBPACK_IMPORTED_MODULE_13__["default"].get(`/api/societe/${selectedSocieteId}/`);\n        const societeData = societeResponse.data;\n        if (societeData.client_name) {\n          clientName = `${societeData.client_name.name} ${societeData.client_name.surname}`;\n        }\n      }\n\n      // Si toujours pas de nom, utiliser une valeur par défaut\n      if (!clientName) {\n        clientName = "Client non spécifié";\n      }\n\n      // Initialiser devisModalData avec les informations de base\n      setDevisModalData({\n        numero: "",\n        // Le numéro sera généré par DevisModal\n        client: clientName,\n        chantier: selectedChantierId,\n        devis_chantier: devisType === "chantier",\n        price_ht: calculateGrandTotal.totalHT,\n        description: ""\n      });\n      setOpenDevisModal(true);\n    } catch (error) {\n      console.error("Erreur lors de la préparation du devis:", error);\n      alert("Une erreur est survenue lors de la préparation du devis");\n    }\n  };\n\n  // Gère la soumission finale du devis\n  const handleDevisModalSubmit = async () => {\n    try {\n      setError(null);\n      setIsLoading(true);\n      const totals = calculateEstimatedTotals(); // Calcul des coûts estimés\n      const grandTotal = calculateGrandTotal;\n      const totalHT = grandTotal.totalHT;\n      const totalTTC = grandTotal.totalTTC;\n      let clientId, societeId, chantierIdToUse;\n\n      // Gestion du client et de la société (pour nouveaux chantiers ET devis de chantier)\n      if (selectedChantierId === -1 || devisType === "chantier") {\n        console.log("Nouveau chantier ou devis de chantier détecté, vérification des données...");\n        if (!pendingChantierData.client || !pendingChantierData.societe || !pendingChantierData.chantier) {\n          const missingData = {\n            client: !pendingChantierData.client ? "Client manquant" : null,\n            societe: !pendingChantierData.societe ? "Société manquante" : null,\n            chantier: !pendingChantierData.chantier ? "Chantier manquant" : null\n          };\n          throw new Error(`Données manquantes: ${Object.values(missingData).filter(Boolean).join(", ")}`);\n        }\n\n        // 1. Vérifier si le client existe\n        const existingClient = await checkClientExists(pendingChantierData.client);\n        if (existingClient) {\n          console.log("Client existant trouvé:", existingClient);\n          clientId = existingClient.id;\n        } else {\n          console.log("Création d\'un nouveau client");\n          const clientResponse = await axios__WEBPACK_IMPORTED_MODULE_13__["default"].post("/api/client/", {\n            ...pendingChantierData.client,\n            phone_Number: pendingChantierData.client.phone_Number.toString()\n          });\n          clientId = clientResponse.data.id;\n        }\n\n        // 2. Vérifier si la société existe\n        const existingSociete = await checkSocieteExists(pendingChantierData.societe);\n        if (existingSociete) {\n          console.log("Société existante trouvée:", existingSociete);\n          societeId = existingSociete.id;\n        } else {\n          console.log("Création d\'une nouvelle société");\n          const societeResponse = await axios__WEBPACK_IMPORTED_MODULE_13__["default"].post("/api/societe/", {\n            ...pendingChantierData.societe,\n            client_name: clientId,\n            codepostal_societe: pendingChantierData.societe.codepostal_societe.toString()\n          });\n          societeId = societeResponse.data.id;\n        }\n\n        // 3. Créer le chantier seulement si ce n\'est PAS un devis de chantier\n        if (devisType !== "chantier") {\n          const updatedChantierData = {\n            chantier_name: pendingChantierData.chantier.chantier_name.trim(),\n            ville: pendingChantierData.chantier.ville,\n            rue: pendingChantierData.chantier.rue,\n            code_postal: pendingChantierData.chantier.code_postal.toString(),\n            montant_ht: totalHT,\n            montant_ttc: totalTTC,\n            societe: societeId,\n            client: clientId,\n            // Ajout des coûts estimés\n            cout_estime_main_oeuvre: totals.cout_estime_main_oeuvre,\n            cout_estime_materiel: totals.cout_estime_materiel,\n            cout_avec_taux_fixe: totals.cout_avec_taux_fixe,\n            marge_estimee: totals.marge_estimee,\n            // Ajout du taux fixe récupéré\n            taux_fixe: tauxFixe !== null ? tauxFixe : 20 // Valeur par défaut si non chargé\n          };\n          const chantierResponse = await axios__WEBPACK_IMPORTED_MODULE_13__["default"].post("/api/chantier/", updatedChantierData);\n          chantierIdToUse = chantierResponse.data.id;\n        }\n      } else {\n        console.log("Utilisation d\'un chantier existant:", selectedChantierId);\n        chantierIdToUse = selectedChantierId;\n        const chantierResponse = await axios__WEBPACK_IMPORTED_MODULE_13__["default"].get(`/api/chantier/${selectedChantierId}/`);\n        societeId = chantierResponse.data.societe;\n      }\n\n      // Préparation des données du devis avec les coûts estimés\n      const devisData = {\n        numero: devisModalData.numero,\n        chantier: devisType !== "chantier" ? chantierIdToUse : null,\n        // Envoyer le client uniquement si disponible (évite [null])\n        ...(clientId ? {\n          client: [clientId]\n        } : {}),\n        price_ht: parseFloat(totalHT.toFixed(2)),\n        price_ttc: parseFloat(totalTTC.toFixed(2)),\n        tva_rate: parseFloat(tvaRate),\n        nature_travaux: natureTravaux || "",\n        description: devisModalData.description || "",\n        devis_chantier: devisType === "chantier",\n        // Ajout des coûts estimés\n        cout_estime_main_oeuvre: totals.cout_estime_main_oeuvre,\n        cout_estime_materiel: totals.cout_estime_materiel,\n        cout_avec_taux_fixe: totals.cout_avec_taux_fixe,\n        marge_estimee: totals.marge_estimee,\n        // Données pour l\'appel d\'offres si c\'est un devis de chantier\n        ...(devisType === "chantier" && {\n          chantier_name: pendingChantierData.chantier.chantier_name.trim(),\n          societe_id: societeId,\n          ville: pendingChantierData.chantier.ville,\n          rue: pendingChantierData.chantier.rue,\n          code_postal: pendingChantierData.chantier.code_postal.toString(),\n          taux_fixe: tauxFixe !== null ? tauxFixe : 20\n        }),\n        lignes: selectedLignes.map(ligneId => {\n          const ligne = filteredLignesDetails.find(l => l.id === ligneId);\n          return {\n            ligne: parseInt(ligneId),\n            quantity: quantities[ligneId] || 0,\n            custom_price: customPrices[ligneId] || (ligne === null || ligne === void 0 ? void 0 : ligne.prix) || 0,\n            cout_main_oeuvre: (ligne === null || ligne === void 0 ? void 0 : ligne.cout_main_oeuvre) || 0,\n            cout_materiel: (ligne === null || ligne === void 0 ? void 0 : ligne.cout_materiel) || 0,\n            taux_fixe: (ligne === null || ligne === void 0 ? void 0 : ligne.taux_fixe) || tauxFixe || 20\n          };\n        }),\n        lignes_speciales: {\n          global: (() => {\n            // Calculer le montant de base (lignes du devis sans lignes spéciales)\n            // Utiliser la même logique que calculateTotalPrice pour être cohérent\n            let montantBase = 0;\n            selectedLignes.forEach(ligneId => {\n              const ligne = filteredLignesDetails.find(l => l.id === ligneId);\n              if (ligne) {\n                const quantity = quantities[ligneId] || 0;\n                // Utiliser le prix calculé automatiquement si les coûts ont été modifiés\n                const price = customCouts[ligneId] || customTauxFixes[ligneId] || customMarges[ligneId] ? calculatePriceFromCosts(ligne) : customPrices[ligneId] || ligne.prix;\n                montantBase += quantity * price;\n              }\n            });\n\n            // Calcul séquentiel : chaque ligne spéciale s\'applique après les précédentes\n            let montantCourant = montantBase;\n            return (specialLines.global || []).map(line => {\n              let montant_calcule;\n              if (line.valueType === "percentage") {\n                // Le pourcentage s\'applique sur le montant courant (après les lignes précédentes)\n                montant_calcule = montantCourant * parseFloat(line.value) / 100;\n              } else {\n                montant_calcule = parseFloat(line.value);\n              }\n\n              // Mettre à jour le montant courant pour la ligne suivante\n              if (line.type === "reduction") {\n                montantCourant -= montant_calcule;\n              } else {\n                montantCourant += montant_calcule;\n              }\n              return {\n                description: line.description,\n                value: parseFloat(line.value),\n                valueType: line.valueType,\n                type: line.type,\n                isHighlighted: line.isHighlighted || false,\n                montant_calcule: montant_calcule\n              };\n            });\n          })(),\n          parties: Object.fromEntries(Object.entries(specialLines.parties || {}).map(([partieId, lines]) => [partieId, lines.map(line => ({\n            description: line.description,\n            value: parseFloat(line.value),\n            valueType: line.valueType,\n            type: line.type,\n            isHighlighted: line.isHighlighted || false,\n            montant_calcule: line.valueType === "percentage" ? calculateGrandTotal.totalHT * parseFloat(line.value) / 100 : parseFloat(line.value)\n          }))])),\n          sousParties: Object.fromEntries(Object.entries(specialLines.sousParties || {}).map(([sousPartieId, lines]) => [sousPartieId, lines.map(line => ({\n            description: line.description,\n            value: parseFloat(line.value),\n            valueType: line.valueType,\n            type: line.type,\n            isHighlighted: line.isHighlighted || false,\n            montant_calcule: line.valueType === "percentage" ? calculateGrandTotal.totalHT * parseFloat(line.value) / 100 : parseFloat(line.value)\n          }))]))\n        }\n      };\n      const response = await axios__WEBPACK_IMPORTED_MODULE_13__["default"].post("/api/create-devis/", devisData);\n      if (response.data) {\n        clearSavedState(); // Nettoyer l\'état sauvegardé\n\n        // Si c\'est un devis de chantier (appel d\'offre), préparer le téléchargement automatique\n        if (devisType === "chantier") {\n          try {\n            console.log("🚀 Préparation du téléchargement automatique pour l\'appel d\'offre...");\n\n            // Récupérer les données nécessaires depuis la réponse\n            const appelOffresId = response.data.appel_offres_id;\n            const appelOffresName = response.data.appel_offres_name;\n            const devisId = response.data.id;\n            if (appelOffresId && appelOffresName) {\n              // Récupérer le nom de la société depuis pendingChantierData\n              const societeName = pendingChantierData.societe.nom_societe;\n\n              // Construire l\'URL avec les paramètres simplifiés pour le téléchargement automatique\n              const urlParams = new URLSearchParams({\n                autoDownload: "true",\n                devisId: devisId,\n                appelOffresId: appelOffresId,\n                appelOffresName: appelOffresName,\n                societeName: societeName,\n                numero: devisModalData.numero\n              });\n\n              // Message de succès et redirection avec paramètres\n              alert("Devis créé avec succès ! Téléchargement automatique vers le Drive...");\n              window.location.href = `/ListeDevis?${urlParams.toString()}`;\n              return; // IMPORTANT: Arrêter l\'exécution pour éviter la redirection suivante\n            } else {\n              console.warn("⚠️ Données manquantes pour le téléchargement automatique");\n              alert("Devis créé avec succès !");\n              window.location.href = "/ListeDevis";\n              return; // IMPORTANT: Arrêter l\'exécution pour éviter la redirection suivante\n            }\n          } catch (error) {\n            console.error("❌ Erreur lors de la préparation du téléchargement automatique:", error);\n            alert("Devis créé avec succès !");\n            window.location.href = "/ListeDevis";\n            return; // IMPORTANT: Arrêter l\'exécution pour éviter la redirection suivante\n          }\n        }\n\n        // Si c\'est un devis normal, préparer le téléchargement automatique\n        if (devisType === "normal") {\n          try {\n            console.log("🚀 Préparation du téléchargement automatique pour le devis normal...");\n            const devisId = response.data.id;\n            if (devisId && chantierIdToUse) {\n              // Récupérer les informations du chantier\n              const chantierResponse = await axios__WEBPACK_IMPORTED_MODULE_13__["default"].get(`/api/chantier/${chantierIdToUse}/`);\n              const chantier = chantierResponse.data;\n\n              // Récupérer le nom de la société\n              // chantier.societe est un objet complet de la société (SocieteSerializer)\n              const societe = chantier.societe;\n\n              // Construire l\'URL avec les paramètres pour le téléchargement automatique\n              const urlParams = new URLSearchParams({\n                autoDownload: "true",\n                devisId: devisId,\n                chantierId: chantierIdToUse,\n                chantierName: chantier.chantier_name,\n                societeName: societe.nom_societe,\n                numero: devisModalData.numero\n              });\n\n              // Message de succès et redirection avec paramètres\n              alert("Devis créé avec succès ! Téléchargement automatique vers le Drive...");\n              window.location.href = `/ListeDevis?${urlParams.toString()}`;\n              return; // IMPORTANT: Arrêter l\'exécution pour éviter la redirection suivante\n            } else {\n              console.warn("⚠️ Données manquantes pour le téléchargement automatique du devis normal");\n              alert("Devis créé avec succès !");\n              window.location.href = "/ListeDevis";\n              return; // IMPORTANT: Arrêter l\'exécution pour éviter la redirection suivante\n            }\n          } catch (error) {\n            console.error("❌ Erreur lors de la préparation du téléchargement automatique du devis normal:", error);\n            alert("Devis créé avec succès !");\n            window.location.href = "/ListeDevis";\n            return; // IMPORTANT: Arrêter l\'exécution pour éviter la redirection suivante\n          }\n        }\n\n        // Redirection par défaut pour les devis normaux (non-chantier)\n        alert("Devis créé avec succès!");\n        window.location.href = "/ListeDevis";\n      }\n    } catch (error) {\n      var _error$response11, _error$response12, _grandTotal, _grandTotal2;\n      console.error("Erreur lors de la création du devis:", error);\n      setError("Impossible de créer le devis");\n      setErrorDetails({\n        message: "Erreur lors de la création du devis",\n        details: ((_error$response11 = error.response) === null || _error$response11 === void 0 || (_error$response11 = _error$response11.data) === null || _error$response11 === void 0 ? void 0 : _error$response11.detail) || error.message,\n        code: (_error$response12 = error.response) === null || _error$response12 === void 0 ? void 0 : _error$response12.status,\n        devisData: {\n          numero: devisModalData.numero,\n          chantier: selectedChantierId,\n          devisType: devisType,\n          totalHT: (_grandTotal = grandTotal) === null || _grandTotal === void 0 ? void 0 : _grandTotal.totalHT,\n          totalTTC: (_grandTotal2 = grandTotal) === null || _grandTotal2 === void 0 ? void 0 : _grandTotal2.totalTTC\n        },\n        timestamp: new Date().toISOString()\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Ajouter cette fonction de réinitialisation\n  const resetForm = () => {\n    setPendingChantierData({\n      client: {\n        name: "",\n        surname: "",\n        client_mail: "",\n        phone_Number: ""\n      },\n      societe: {\n        nom_societe: "",\n        ville_societe: "",\n        rue_societe: "",\n        codepostal_societe: ""\n      },\n      chantier: {\n        id: -1,\n        chantier_name: "",\n        ville: "",\n        rue: "",\n        code_postal: ""\n      },\n      devis: null\n    });\n    setSelectedSocieteId(null);\n    setSelectedChantierId(null);\n    setShowClientForm(false);\n    setShowChantierForm(false);\n    setShowClientTypeModal(false);\n    setShowSelectSocieteModal(false);\n  };\n  const handleNewClient = () => {\n    setShowClientTypeModal(false);\n    setShowClientInfoModal(true);\n  };\n  const handleExistingClient = () => {\n    setShowClientTypeModal(false);\n    setShowSelectSocieteModal(true);\n  };\n  const handleSocieteSelect = async societeId => {\n    try {\n      // Récupérer les données de la société\n      const societeResponse = await axios__WEBPACK_IMPORTED_MODULE_13__["default"].get(`/api/societe/${societeId}/`);\n      const societeData = societeResponse.data;\n\n      // Récupérer les données du client\n      const clientResponse = await axios__WEBPACK_IMPORTED_MODULE_13__["default"].get(`/api/client/${societeData.client_name}/`);\n      const clientData = clientResponse.data;\n\n      // Mettre à jour pendingChantierData avec les données récupérées\n      setPendingChantierData(prev => ({\n        ...prev,\n        client: {\n          name: clientData.name,\n          surname: clientData.surname,\n          phone_Number: parseInt(clientData.phone_Number) || 0,\n          client_mail: clientData.client_mail || ""\n        },\n        societe: {\n          nom_societe: societeData.nom_societe,\n          ville_societe: societeData.ville_societe,\n          rue_societe: societeData.rue_societe,\n          codepostal_societe: societeData.codepostal_societe\n        }\n      }));\n      setSelectedSocieteId(societeId);\n      setShowSelectSocieteModal(false);\n      setShowChantierForm(true);\n    } catch (error) {\n      console.error("Erreur lors de la récupération des données:", error);\n      alert("Erreur lors de la récupération des données du client et de la société");\n    }\n  };\n  const handleLigneSelection = ligneId => {\n    setSelectedLignes(prev => {\n      const newSelection = prev.includes(ligneId) ? prev.filter(id => id !== ligneId) : [...prev, ligneId];\n\n      // Si la ligne vient d\'être sélectionnée, on met le focus sur le champ quantité\n      if (!prev.includes(ligneId)) {\n        // On utilise setTimeout pour s\'assurer que le champ existe dans le DOM\n        setTimeout(() => {\n          const quantityInput = document.querySelector(`#quantity-${ligneId}`);\n          if (quantityInput) {\n            quantityInput.focus();\n          }\n        }, 0);\n      }\n      return newSelection;\n    });\n  };\n  const handleRemoveLigne = ligneId => {\n    setSlidingLines([...slidingLines, ligneId]);\n\n    // Attendre que l\'animation soit terminée avant de cacher la ligne\n    setTimeout(() => {\n      setHiddenLignes([...hiddenLignes, ligneId]);\n      setSlidingLines(slidingLines.filter(id => id !== ligneId));\n\n      // Si la ligne était sélectionnée, on la désélectionne\n      if (selectedLignes.includes(ligneId)) {\n        setSelectedLignes(selectedLignes.filter(id => id !== ligneId));\n      }\n    }, 300); // Durée de l\'animation\n  };\n\n  // Ajoutez cette fonction de calcul du prix total\n  const calculateTotalPrice = ligne => {\n    const quantity = quantities[ligne.id] || 0;\n    // Utiliser le prix calculé automatiquement si les coûts ont été modifiés\n    const price = customCouts[ligne.id] || customTauxFixes[ligne.id] || customMarges[ligne.id] ? calculatePriceFromCosts(ligne) : customPrices[ligne.id] || ligne.prix;\n    let total = quantity * price;\n\n    // Ajouter les lignes spéciales pour cette ligne\n    if (specialLines.lignes[ligne.id]) {\n      specialLines.lignes[ligne.id].forEach(specialLine => {\n        if (specialLine.type === "supplement") {\n          total += specialLine.value;\n        } else if (specialLine.type === "remise") {\n          total -= total * specialLine.value / 100;\n        }\n      });\n    }\n    return parseFloat(formatPrice(total));\n  };\n  const calculateTotalWithSpecialLines = (baseTotal, specialLines) => {\n    let total = baseTotal;\n    specialLines.forEach(line => {\n      const value = parseFloat(line.value);\n      let montant;\n      if (line.valueType === "percentage") {\n        montant = baseTotal * value / 100;\n      } else {\n        montant = value;\n      }\n\n      // Afficher le signe négatif pour les réductions\n      if (line.type === "reduction") {\n        montant = -Math.abs(montant); // Force la valeur à être négative\n      }\n      total += montant; // On ajoute toujours le montant (qui sera négatif pour les réductions)\n    });\n    return total;\n  };\n  const handleAddGlobalSpecialLine = () => {\n    setOpenSpecialLineModal(true);\n    setCurrentSpecialLineTarget({\n      type: "global",\n      id: null\n    });\n  };\n  const calculateGrandTotal = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    // 1. Calcul initial du total HT des lignes de détail et par sous-partie\n    let totalHT = 0;\n    const sousPartieTotals = {};\n    selectedLignes.forEach(ligneId => {\n      const ligne = filteredLignesDetails.find(l => l.id === ligneId);\n      if (ligne) {\n        const quantity = quantities[ligneId] || 0;\n        const price = customPrices[ligneId] || ligne.prix;\n        const ligneTotalHT = quantity * price;\n        totalHT += ligneTotalHT;\n        const sousPartieId = ligne.sous_partie;\n        if (!sousPartieTotals[sousPartieId]) {\n          sousPartieTotals[sousPartieId] = 0;\n        }\n        sousPartieTotals[sousPartieId] += ligneTotalHT;\n      }\n    });\n\n    // 2. Appliquer les lignes spéciales par niveau\n    if (specialLines) {\n      // Appliquer d\'abord les lignes spéciales des sous-parties\n      if (specialLines.sousParties) {\n        Object.entries(specialLines.sousParties).forEach(([sousPartieId, lines]) => {\n          const sousPartieTotal = sousPartieTotals[sousPartieId] || 0;\n          lines.forEach(line => {\n            // Les lignes de type \'display\' ne participent pas au calcul\n            if (line.type === "display") {\n              return; // Skip this line\n            }\n            let montant = 0;\n            if (line.valueType === "percentage") {\n              montant = sousPartieTotal * parseFloat(line.value) / 100;\n            } else {\n              montant = parseFloat(line.value);\n            }\n            if (line.type === "reduction") {\n              totalHT -= montant;\n            } else {\n              totalHT += montant;\n            }\n          });\n        });\n      }\n\n      // Puis les lignes spéciales des parties\n      if (specialLines.parties) {\n        Object.entries(specialLines.parties).forEach(([partieId, lines]) => {\n          lines.forEach(line => {\n            // Les lignes de type \'display\' ne participent pas au calcul\n            if (line.type === "display") {\n              return; // Skip this line\n            }\n            let montant = 0;\n            if (line.valueType === "percentage") {\n              montant = totalHT * parseFloat(line.value) / 100;\n            } else {\n              montant = parseFloat(line.value);\n            }\n            if (line.type === "reduction") {\n              totalHT -= montant;\n            } else {\n              totalHT += montant;\n            }\n          });\n        });\n      }\n\n      // Enfin, appliquer les lignes spéciales globales\n      if (specialLines.global && specialLines.global.length > 0) {\n        specialLines.global.forEach(line => {\n          // Les lignes de type \'display\' ne participent pas au calcul\n          if (line.type === "display") {\n            return; // Skip this line\n          }\n          let montant = 0;\n          if (line.valueType === "percentage") {\n            montant = totalHT * parseFloat(line.value) / 100;\n          } else {\n            montant = parseFloat(line.value);\n          }\n          if (line.type === "reduction") {\n            totalHT -= montant;\n          } else {\n            totalHT += montant;\n          }\n        });\n      }\n    }\n\n    // 3. Calcul final avec TVA\n    const tva = totalHT * parseFloat(tvaRate) / 100;\n    const totalTTC = totalHT + tva;\n    return {\n      totalHT: parseFloat(totalHT.toFixed(2)),\n      totalTTC: parseFloat(totalTTC.toFixed(2))\n    };\n  }, [selectedLignes, filteredLignesDetails, quantities, customPrices, specialLines, tvaRate]);\n  const handlePartieCreated = createdData => {\n    if (!createdData) return;\n    switch (createdData.type) {\n      case "partie":\n        setParties(prevParties => [...prevParties, createdData.data]);\n        setSousParties(prevSousParties => [...prevSousParties, ...createdData.data.sous_parties]);\n\n        // Recharger les domaines disponibles après création d\'une nouvelle partie\n        loadDomaines();\n\n        // Mettre à jour les lignes de détail\n        const allNewLignes = createdData.data.sous_parties.flatMap(sp => sp.lignes_details || []);\n        setAllLignesDetails(prev => [...prev, ...allNewLignes]);\n\n        // Mettre à jour les filtres si nécessaire\n        if (selectedParties.includes(createdData.data.id)) {\n          setFilteredSousParties(prev => [...prev, ...createdData.data.sous_parties]);\n          setFilteredLignesDetails(prev => [...prev, ...allNewLignes]);\n        }\n        break;\n      case "sousPartie":\n        setSousParties(prevSousParties => [...prevSousParties, createdData.data]);\n        if (selectedParties.includes(createdData.data.partie)) {\n          setFilteredSousParties(prev => [...prev, createdData.data]);\n        }\n        // Ajouter les nouvelles lignes de détail\n        if (createdData.data.lignes_details) {\n          setAllLignesDetails(prev => [...prev, ...createdData.data.lignes_details]);\n          if (selectedSousParties.includes(createdData.data.id)) {\n            setFilteredLignesDetails(prev => [...prev, ...createdData.data.lignes_details]);\n          }\n        }\n        break;\n      case "ligne":\n        setAllLignesDetails(prev => [...prev, createdData.data]);\n        if (selectedSousParties.includes(createdData.data.sous_partie)) {\n          setFilteredLignesDetails(prev => [...prev, createdData.data]);\n        }\n        break;\n    }\n  };\n  const handleEditPartie = partie => {\n    setItemToEdit({\n      ...partie,\n      type: "partie"\n    });\n    setEditModalOpen(true);\n  };\n  const handleEditSousPartie = sousPartie => {\n    setItemToEdit({\n      ...sousPartie,\n      type: "sousPartie"\n    });\n    setEditModalOpen(true);\n  };\n  const handleEditLigne = ligne => {\n    setItemToEdit({\n      ...ligne,\n      type: "ligne"\n    });\n    setEditModalOpen(true);\n  };\n  const handleAddSpecialLine = (type, id) => {\n    // Assurons-nous que le type est correctement défini\n    const targetType = type === "parties" ? "parties" : "sousParties";\n    setOpenSpecialLineModal(true);\n    setCurrentSpecialLineTarget({\n      type: targetType,\n      // Utiliser le type correct\n      id: id.toString() // Assurez-vous que l\'ID est une chaîne\n    });\n  };\n  const handleSpecialLineSave = lineData => {\n    setSpecialLines(prev => {\n      var _prev$targetKey;\n      const target = currentSpecialLineTarget;\n      const newLine = {\n        description: lineData.description,\n        value: parseFloat(lineData.value),\n        valueType: lineData.valueType,\n        type: lineData.type,\n        isHighlighted: lineData.isHighlighted || false\n      };\n\n      // Si c\'est une ligne globale\n      if (target.type === "global") {\n        return {\n          ...prev,\n          global: [...(prev.global || []), newLine]\n        };\n      }\n\n      // Pour les parties et sous-parties\n      const targetKey = target.type; // Utiliser directement le type correct\n      return {\n        ...prev,\n        [targetKey]: {\n          ...prev[targetKey],\n          [target.id]: [...(((_prev$targetKey = prev[targetKey]) === null || _prev$targetKey === void 0 ? void 0 : _prev$targetKey[target.id]) || []), newLine]\n        }\n      };\n    });\n    setOpenSpecialLineModal(false);\n  };\n  const handleSaveEdit = async editedData => {\n    let endpoint = "";\n    let dataToSend = {};\n    try {\n      setError(null);\n      if (editedData.type === "partie") {\n        endpoint = `/api/parties/${editedData.id}/`;\n        dataToSend = {\n          titre: editedData.titre\n        };\n      } else if (editedData.type === "sousPartie") {\n        endpoint = `/api/sous-parties/${editedData.id}/`;\n        dataToSend = {\n          description: editedData.description,\n          partie: editedData.partie\n        };\n      } else if (editedData.type === "ligne") {\n        endpoint = `/api/ligne-details/${editedData.id}/`;\n\n        // Trouver la ligne originale pour comparer\n        const originalLigne = allLignesDetails.find(l => l.id === editedData.id);\n\n        // Ne envoyer que les champs qui ont changé\n        dataToSend = {};\n        if (originalLigne) {\n          if (originalLigne.description !== editedData.description) {\n            dataToSend.description = editedData.description;\n          }\n          if (originalLigne.unite !== editedData.unite) {\n            dataToSend.unite = editedData.unite;\n          }\n          if (originalLigne.prix !== editedData.prix) {\n            dataToSend.prix = editedData.prix;\n          }\n          // Ne pas envoyer sous_partie sauf si elle a vraiment changé\n          if (originalLigne.sous_partie !== editedData.sous_partie) {\n            dataToSend.sous_partie = editedData.sous_partie;\n          }\n        } else {\n          // Si on ne trouve pas la ligne originale, envoyer tous les champs\n          dataToSend = {\n            description: editedData.description,\n            unite: editedData.unite,\n            prix: editedData.prix,\n            sous_partie: editedData.sous_partie\n          };\n        }\n      }\n      const response = await axios__WEBPACK_IMPORTED_MODULE_13__["default"].put(endpoint, dataToSend);\n\n      // Mettre à jour les données locales\n      if (editedData.type === "partie") {\n        setParties(parties.map(p => p.id === editedData.id ? response.data : p));\n      } else if (editedData.type === "sousPartie") {\n        setSousParties(sousParties.map(sp => sp.id === editedData.id ? response.data : sp));\n      } else {\n        setAllLignesDetails(allLignesDetails.map(l => l.id === editedData.id ? response.data : l));\n      }\n    } catch (error) {\n      var _error$response13, _error$response14, _error$response15, _error$response16, _error$response17;\n      console.error("Erreur lors de la modification:", error);\n\n      // Extraire le message d\'erreur du backend\n      let errorMessage = "Impossible de modifier l\'élément";\n      let errorDetails = ((_error$response13 = error.response) === null || _error$response13 === void 0 || (_error$response13 = _error$response13.data) === null || _error$response13 === void 0 ? void 0 : _error$response13.detail) || error.message;\n\n      // Si c\'est une erreur de validation du backend\n      if ((_error$response14 = error.response) !== null && _error$response14 !== void 0 && (_error$response14 = _error$response14.data) !== null && _error$response14 !== void 0 && _error$response14.error) {\n        try {\n          const backendError = JSON.parse(error.response.data.error);\n          if (backendError.description) {\n            errorMessage = "Erreur de validation : " + backendError.description[0];\n            errorDetails = backendError.description[0];\n          }\n        } catch (parseError) {\n          // Si le parsing échoue, utiliser le message brut\n          errorMessage = "Erreur de validation du backend";\n          errorDetails = error.response.data.error;\n        }\n      } else if ((_error$response15 = error.response) !== null && _error$response15 !== void 0 && (_error$response15 = _error$response15.data) !== null && _error$response15 !== void 0 && _error$response15.detail) {\n        // Si l\'erreur est dans le champ detail\n        errorMessage = "Erreur de validation : " + error.response.data.detail;\n        errorDetails = error.response.data.detail;\n      } else if (typeof ((_error$response16 = error.response) === null || _error$response16 === void 0 ? void 0 : _error$response16.data) === "object") {\n        // Si l\'erreur est directement dans response.data\n        const errorData = error.response.data;\n        if (errorData.description && Array.isArray(errorData.description)) {\n          errorMessage = "Erreur de validation : " + errorData.description[0];\n          errorDetails = errorData.description[0];\n        } else if (errorData.description) {\n          errorMessage = "Erreur de validation : " + errorData.description;\n          errorDetails = errorData.description;\n        }\n      }\n      setError(errorMessage);\n      setErrorDetails({\n        message: "Erreur lors de la modification",\n        details: errorDetails,\n        code: (_error$response17 = error.response) === null || _error$response17 === void 0 ? void 0 : _error$response17.status,\n        editedData: {\n          type: editedData.type,\n          id: editedData.id,\n          data: dataToSend\n        },\n        timestamp: new Date().toISOString()\n      });\n    }\n  };\n  const visibleParties = parties.filter(partie => !hiddenParties.includes(partie.id));\n  const visibleSousParties = filteredSousParties.filter(sousPartie => !hiddenSousParties.includes(sousPartie.id));\n  const visibleLignesDetails = filteredLignesDetails.filter(ligne => !hiddenLignes.includes(ligne.id));\n\n  // Tri des parties\n  const sortedParties = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    return [...visibleParties].sort((a, b) => {\n      var _a$titre$match, _b$titre$match;\n      const numA = parseInt(((_a$titre$match = a.titre.match(/^(\\d+)-/)) === null || _a$titre$match === void 0 ? void 0 : _a$titre$match[1]) || "0");\n      const numB = parseInt(((_b$titre$match = b.titre.match(/^(\\d+)-/)) === null || _b$titre$match === void 0 ? void 0 : _b$titre$match[1]) || "0");\n      if (numA && numB) {\n        return numA - numB;\n      }\n      return a.titre.localeCompare(b.titre, "fr", {\n        sensitivity: "base"\n      });\n    });\n  }, [visibleParties]);\n\n  // Tri des sous-parties\n  const sortedSousParties = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    return [...visibleSousParties].sort((a, b) => {\n      var _a$description$match, _b$description$match;\n      // Extraire les numéros du début des descriptions s\'ils existent\n      const numA = parseInt(((_a$description$match = a.description.match(/^(\\d+)-/)) === null || _a$description$match === void 0 ? void 0 : _a$description$match[1]) || "0");\n      const numB = parseInt(((_b$description$match = b.description.match(/^(\\d+)-/)) === null || _b$description$match === void 0 ? void 0 : _b$description$match[1]) || "0");\n\n      // Si les deux descriptions commencent par des numéros, trier par numéro\n      if (numA && numB) {\n        return numA - numB;\n      }\n\n      // Sinon, trier alphabétiquement\n      return a.description.localeCompare(b.description, "fr", {\n        sensitivity: "base"\n      });\n    });\n  }, [visibleSousParties]);\n\n  // Tri des lignes de détail\n  const sortedLignesDetails = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    return lignes => {\n      return [...lignes].sort((a, b) => {\n        var _a$description$match2, _b$description$match2;\n        // Extraire les numéros du début des descriptions s\'ils existent\n        const numA = parseInt(((_a$description$match2 = a.description.match(/^(\\d+)-/)) === null || _a$description$match2 === void 0 ? void 0 : _a$description$match2[1]) || "0");\n        const numB = parseInt(((_b$description$match2 = b.description.match(/^(\\d+)-/)) === null || _b$description$match2 === void 0 ? void 0 : _b$description$match2[1]) || "0");\n\n        // Si les deux descriptions commencent par des numéros, trier par numéro\n        if (numA && numB) {\n          return numA - numB;\n        }\n\n        // Sinon, trier alphabétiquement\n        return a.description.localeCompare(b.description, "fr", {\n          sensitivity: "base"\n        });\n      });\n    };\n  }, []);\n  const handleHidePartie = partieId => {\n    setSlidingParties([...slidingParties, partieId]);\n    setTimeout(() => {\n      setHiddenParties([...hiddenParties, partieId]);\n      setSelectedParties(selectedParties.filter(id => id !== partieId));\n      setSlidingParties(slidingParties.filter(id => id !== partieId));\n    }, 300);\n  };\n  const handleHideSousPartie = sousPartieId => {\n    setSlidingSousParties([...slidingSousParties, sousPartieId]);\n    setTimeout(() => {\n      setHiddenSousParties([...hiddenSousParties, sousPartieId]);\n      setSelectedSousParties(selectedSousParties.filter(id => id !== sousPartieId));\n      setSlidingSousParties(slidingSousParties.filter(id => id !== sousPartieId));\n    }, 300);\n  };\n  const handleHideLigne = ligneId => {\n    setSlidingLignes([...slidingLignes, ligneId]);\n    setTimeout(() => {\n      setHiddenLignes([...hiddenLignes, ligneId]);\n      setSelectedLignes(selectedLignes.filter(id => id !== ligneId));\n      setSlidingLignes(slidingLignes.filter(id => id !== ligneId));\n    }, 300);\n  };\n  const handleClientInfoSubmit = async clientData => {\n    if (!clientData.name || !clientData.surname || !clientData.phone_Number) {\n      alert("Tous les champs sont obligatoires");\n      return;\n    }\n    if (!clientData) {\n      console.error("clientData est undefined");\n      return;\n    }\n    try {\n      setPendingChantierData(prev => ({\n        ...prev,\n        client: {\n          name: clientData.name || "",\n          surname: clientData.surname || "",\n          phone_Number: parseInt(clientData.phone_Number) || 0,\n          client_mail: clientData.client_mail || ""\n        }\n      }));\n      setShowClientInfoModal(false);\n      setShowSocieteInfoModal(true);\n    } catch (error) {\n      console.error("Erreur:", error);\n    }\n  };\n  const handleSocieteInfoSubmit = async societeData => {\n    setPendingChantierData(prev => ({\n      ...prev,\n      societe: {\n        nom_societe: societeData.nom_societe,\n        ville_societe: societeData.ville_societe,\n        rue_societe: societeData.rue_societe,\n        codepostal_societe: societeData.codepostal_societe\n      }\n    }));\n    setShowSocieteInfoModal(false);\n    setShowChantierForm(true);\n  };\n  const handleChange = (e, type) => {\n    const {\n      name,\n      value\n    } = e.target;\n    if (type === "client") {\n      setPendingChantierData(prev => ({\n        ...prev,\n        client: {\n          ...prev.client,\n          [name]: value\n        }\n      }));\n    } else if (type === "societe") {\n      setPendingChantierData(prev => ({\n        ...prev,\n        societe: {\n          ...prev.societe,\n          [name]: value\n        }\n      }));\n    }\n  };\n\n  // Modifiez le gestionnaire de changement de type de devis\n  const handleDevisTypeChange = e => {\n    const newValue = e.target.value;\n    setDevisType(newValue);\n    if (newValue === "chantier") {\n      setShowClientTypeModal(true);\n    }\n  };\n  const handleChantierInfoSubmit = chantierInfo => {\n    setPendingChantierData(prev => ({\n      ...prev,\n      chantier: {\n        ...prev.chantier,\n        ...chantierInfo\n      }\n    }));\n    setShowChantierForm(false);\n  };\n  const handleLignesChange = ligneId => {\n    setIsPreviewed(false);\n    const isSelected = selectedLignes.includes(ligneId);\n    if (isSelected) {\n      setSelectedLignes(prev => prev.filter(id => id !== ligneId));\n    } else {\n      setSelectedLignes(prev => [...prev, ligneId]);\n    }\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {}, [allLignesDetails, selectedSousParties, filteredLignesDetails]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const filtered = allLignesDetails.filter(ligne => {\n      return selectedSousParties.includes(ligne.sous_partie);\n    });\n    setFilteredLignesDetails(filtered);\n  }, [allLignesDetails, selectedSousParties]);\n  const handleDeleteSpecialLineFromOverview = (groupId, index) => {\n    setSpecialLines(prev => {\n      const newSpecialLines = {\n        ...prev\n      };\n      if (groupId === "global") {\n        newSpecialLines.global = prev.global.filter((_, i) => i !== index);\n      } else {\n        const [type, id] = groupId.split("-");\n        newSpecialLines[type][id] = prev[type][id].filter((_, i) => i !== index);\n      }\n      return newSpecialLines;\n    });\n  };\n\n  // Ajouter cette fonction pour filtrer les lignes de détail\n  const getFilteredLignes = (sousPartieId, lignes) => {\n    var _searchTerms$sousPart;\n    const searchTerm = ((_searchTerms$sousPart = searchTerms[sousPartieId]) === null || _searchTerms$sousPart === void 0 ? void 0 : _searchTerms$sousPart.toLowerCase()) || "";\n    if (!searchTerm) return lignes;\n    return lignes.filter(ligne => ligne.description.toLowerCase().includes(searchTerm));\n  };\n\n  // Fonction pour calculer le pourcentage de marge\n  const calculateMargePercentage = totals => {\n    // La marge doit être calculée sur le coût avec taux fixe\n    return totals.cout_avec_taux_fixe > 0 ? totals.marge_estimee / totals.cout_avec_taux_fixe * 100 : 0;\n  };\n  const handleDevisModalChange = e => {\n    setDevisModalData(prev => ({\n      ...prev,\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  // Ajout du useEffect pour récupérer le taux fixe au chargement\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const fetchTauxFixe = async () => {\n      try {\n        const response = await axios__WEBPACK_IMPORTED_MODULE_13__["default"].get("/api/parametres/taux-fixe/");\n        setTauxFixe(response.data.valeur);\n      } catch (error) {\n        console.error("Erreur lors du chargement du taux fixe :", error);\n      }\n    };\n    fetchTauxFixe();\n  }, []);\n\n  // Fonction pour gérer la mise à jour du taux fixe\n  const handleTauxFixeUpdated = (nouveauTaux, lignesMisesAJour) => {\n    // Mettre à jour le taux fixe local\n    setTauxFixe(nouveauTaux);\n\n    // Mettre à jour les lignes de détail avec les nouvelles données\n    if (lignesMisesAJour && lignesMisesAJour.length > 0) {\n      setAllLignesDetails(prev => prev.map(ligne => {\n        const ligneMiseAJour = lignesMisesAJour.find(l => l.id === ligne.id);\n        if (ligneMiseAJour) {\n          return {\n            ...ligne,\n            taux_fixe: ligneMiseAJour.taux_fixe,\n            prix: ligneMiseAJour.prix,\n            cout_main_oeuvre: ligneMiseAJour.cout_main_oeuvre,\n            cout_materiel: ligneMiseAJour.cout_materiel,\n            marge: ligneMiseAJour.marge\n          };\n        }\n        return ligne;\n      }));\n      setFilteredLignesDetails(prev => prev.map(ligne => {\n        const ligneMiseAJour = lignesMisesAJour.find(l => l.id === ligne.id);\n        if (ligneMiseAJour) {\n          return {\n            ...ligne,\n            taux_fixe: ligneMiseAJour.taux_fixe,\n            prix: ligneMiseAJour.prix,\n            cout_main_oeuvre: ligneMiseAJour.cout_main_oeuvre,\n            cout_materiel: ligneMiseAJour.cout_materiel,\n            marge: ligneMiseAJour.marge\n          };\n        }\n        return ligne;\n      }));\n\n      // Nettoyer les coûts personnalisés car ils sont maintenant obsolètes\n      setCustomCouts({});\n      setCustomTauxFixes({});\n      setCustomMarges({});\n      console.log(`✅ Taux fixe mis à jour : ${nouveauTaux}%`);\n      console.log(`📊 ${lignesMisesAJour.length} lignes mises à jour`);\n    }\n  };\n\n  // Fonctions pour sauvegarder et restaurer l\'état\n  const saveStateToLocalStorage = () => {\n    const stateToSave = {\n      selectedChantierId,\n      selectedParties,\n      selectedSousParties,\n      selectedLignes,\n      quantities,\n      customPrices,\n      customCouts,\n      customTauxFixes,\n      customMarges,\n      tvaRate,\n      natureTravaux,\n      specialLines,\n      devisType,\n      pendingChantierData,\n      selectedSocieteId,\n      showSummaryBox\n    };\n    localStorage.setItem("creationDevisState", JSON.stringify(stateToSave));\n  };\n  const loadStateFromLocalStorage = () => {\n    const savedState = localStorage.getItem("creationDevisState");\n    if (savedState) {\n      try {\n        const parsedState = JSON.parse(savedState);\n        setSelectedChantierId(parsedState.selectedChantierId || null);\n        setSelectedParties(parsedState.selectedParties || []);\n        setSelectedSousParties(parsedState.selectedSousParties || []);\n        setSelectedLignes(parsedState.selectedLignes || []);\n        setQuantities(parsedState.quantities || {});\n        setCustomPrices(parsedState.customPrices || {});\n        setCustomCouts(parsedState.customCouts || {});\n        setCustomTauxFixes(parsedState.customTauxFixes || {});\n        setCustomMarges(parsedState.customMarges || {});\n        setTvaRate(parsedState.tvaRate || 20);\n        setNatureTravaux(parsedState.natureTravaux || "");\n        setSpecialLines(parsedState.specialLines || {\n          parties: {},\n          sousParties: {},\n          lignes: {},\n          global: []\n        });\n        setDevisType(parsedState.devisType || "normal");\n        setPendingChantierData(parsedState.pendingChantierData || {\n          client: {\n            name: "",\n            surname: "",\n            client_mail: "",\n            phone_Number: ""\n          },\n          societe: {\n            nom_societe: "",\n            ville_societe: "",\n            rue_societe: "",\n            codepostal_societe: ""\n          },\n          chantier: {\n            id: -1,\n            chantier_name: "",\n            ville: "",\n            rue: "",\n            code_postal: ""\n          },\n          devis: null\n        });\n        setSelectedSocieteId(parsedState.selectedSocieteId || null);\n        setShowSummaryBox(parsedState.showSummaryBox || false);\n      } catch (error) {\n        console.error("Erreur lors du chargement de l\'état:", error);\n      }\n    }\n  };\n  const clearSavedState = () => {\n    localStorage.removeItem("creationDevisState");\n  };\n\n  // Fonctions utilitaires pour la gestion des erreurs\n  const clearError = () => {\n    setError(null);\n    setErrorDetails(null);\n  };\n  const copyErrorToClipboard = () => {\n    if (errorDetails) {\n      const errorText = `\nERREUR DÉTECTÉE DANS CREATIONDEVIS.JS\n====================================\n\nMessage: ${errorDetails.message}\nDétails: ${errorDetails.details}\nCode: ${errorDetails.code || "N/A"}\nTimestamp: ${errorDetails.timestamp}\n\nDonnées contextuelles:\n${JSON.stringify(errorDetails, null, 2)}\n\nPour rapporter cette erreur, copiez ce texte et envoyez-le au développeur.\n      `.trim();\n      navigator.clipboard.writeText(errorText).then(() => {\n        alert("Détails de l\'erreur copiés dans le presse-papiers !");\n      }).catch(() => {\n        alert("Impossible de copier automatiquement. Veuillez copier manuellement les détails ci-dessus.");\n      });\n    }\n  };\n  const getErrorMessage = error => {\n    var _error$response18, _error$response19, _error$response20, _error$response21;\n    if (((_error$response18 = error.response) === null || _error$response18 === void 0 ? void 0 : _error$response18.status) === 404) {\n      return "Ressource non trouvée. Veuillez vérifier que les données existent.";\n    } else if (((_error$response19 = error.response) === null || _error$response19 === void 0 ? void 0 : _error$response19.status) === 400) {\n      return "Données invalides. Veuillez vérifier les informations saisies.";\n    } else if (((_error$response20 = error.response) === null || _error$response20 === void 0 ? void 0 : _error$response20.status) === 500) {\n      return "Erreur serveur. Veuillez réessayer plus tard.";\n    } else if (((_error$response21 = error.response) === null || _error$response21 === void 0 ? void 0 : _error$response21.status) === 403) {\n      return "Accès refusé. Vous n\'avez pas les permissions nécessaires.";\n    } else if (error.code === "NETWORK_ERROR") {\n      return "Erreur de connexion. Vérifiez votre connexion internet.";\n    } else {\n      return error.message || "Une erreur inattendue s\'est produite.";\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    maxWidth: "lg"\n  }, error && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      position: "fixed",\n      top: 20,\n      left: "50%",\n      transform: "translateX(-50%)",\n      zIndex: 9999,\n      maxWidth: "90vw",\n      width: "600px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    elevation: 8,\n    sx: {\n      p: 3,\n      backgroundColor: "#fff3cd",\n      border: "2px solid #ffc107",\n      borderRadius: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "h6",\n    sx: {\n      color: "#856404",\n      fontWeight: "bold",\n      flexGrow: 1\n    }\n  }, "\\u26A0\\uFE0F ", error), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    size: "small",\n    onClick: clearError,\n    sx: {\n      color: "#856404",\n      minWidth: "auto"\n    }\n  }, "\\u2715")), errorDetails && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "body2",\n    sx: {\n      color: "#856404",\n      mb: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong", null, "D\\xE9tails techniques :")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      backgroundColor: "#fff",\n      p: 2,\n      borderRadius: 1,\n      border: "1px solid #dee2e6",\n      maxHeight: "200px",\n      overflow: "auto",\n      fontFamily: "monospace",\n      fontSize: "0.8rem"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "caption",\n    sx: {\n      color: "#6c757d"\n    }\n  }, "Message: ", errorDetails.message), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "caption",\n    sx: {\n      color: "#6c757d"\n    }\n  }, "D\\xE9tails: ", errorDetails.details), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "caption",\n    sx: {\n      color: "#6c757d"\n    }\n  }, "Code: ", errorDetails.code || "N/A"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "caption",\n    sx: {\n      color: "#6c757d"\n    }\n  }, "Timestamp:", " ", new Date(errorDetails.timestamp).toLocaleString()))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      display: "flex",\n      gap: 1,\n      justifyContent: "flex-end"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    size: "small",\n    variant: "outlined",\n    onClick: copyErrorToClipboard,\n    sx: {\n      color: "#856404",\n      borderColor: "#856404",\n      "&:hover": {\n        borderColor: "#856404",\n        backgroundColor: "rgba(133, 100, 4, 0.1)"\n      }\n    }\n  }, "\\uD83D\\uDCCB Copier les d\\xE9tails"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    size: "small",\n    variant: "contained",\n    onClick: clearError,\n    sx: {\n      backgroundColor: "#856404",\n      "&:hover": {\n        backgroundColor: "#6d5603"\n      }\n    }\n  }, "Fermer")))), isLoading && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      position: "fixed",\n      top: 0,\n      left: 0,\n      right: 0,\n      zIndex: 9998,\n      backgroundColor: "rgba(0, 0, 0, 0.5)",\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "center",\n      height: "100vh"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    elevation: 8,\n    sx: {\n      p: 4,\n      textAlign: "center",\n      backgroundColor: "white",\n      borderRadius: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "h6",\n    sx: {\n      mb: 2\n    }\n  }, "\\u23F3 Traitement en cours..."), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "body2",\n    sx: {\n      color: "text.secondary"\n    }\n  }, "Veuillez patienter pendant la cr\\xE9ation du devis."))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      mt: 4,\n      mb: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    elevation: 3,\n    sx: {\n      p: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    fullWidth: true,\n    sx: {\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, "S\\xE9lectionner le Chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    value: selectedChantierId,\n    onChange: e => setSelectedChantierId(e.target.value),\n    displayEmpty: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    value: ""\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("em", null, "-- S\\xE9lectionner un Chantier --")), pendingChantierData.chantier && pendingChantierData.chantier.id === -1 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    value: -1\n  }, pendingChantierData.chantier.chantier_name, " (En cours de cr\\xE9ation)"), chantiers.map(chantier => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    key: chantier.id,\n    value: chantier.id\n  }, chantier.chantier_name)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "center",\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    component: "fieldset"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    component: "legend"\n  }, "Type de devis"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], {\n    row: true,\n    "aria-label": "devis-type",\n    name: "devis-type",\n    value: devisType,\n    onChange: handleDevisTypeChange\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    value: "normal",\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null),\n    label: "Devis normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    value: "chantier",\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null),\n    label: "Devis chantier"\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    variant: "contained",\n    color: "primary",\n    onClick: () => setOpenCreatePartieModal(true),\n    sx: {\n      fontFamily: "\'Work Sans\', sans-serif",\n      textTransform: "none",\n      fontSize: "1rem"\n    }\n  }, "Cr\\xE9er une nouvelle partie")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      mt: 2,\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    fullWidth: true,\n    label: "Nature des travaux",\n    value: natureTravaux,\n    onChange: e => setNatureTravaux(e.target.value),\n    sx: {\n      mb: 2\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    type: "number",\n    label: "Taux de TVA (%)",\n    value: tvaRate,\n    onChange: e => setTvaRate(parseFloat(e.target.value)),\n    inputProps: {\n      step: "0.01",\n      min: "0",\n      max: "100"\n    },\n    InputProps: {\n      endAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], {\n        position: "end"\n      }, "%")\n    },\n    sx: {\n      mb: 2\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, "Type de domaine"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    fullWidth: true,\n    sx: {\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    value: selectedPartieType || "",\n    onChange: e => setSelectedPartieType(e.target.value),\n    displayEmpty: true\n  }, availableDomaines.map(domaine => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    key: domaine,\n    value: domaine\n  }, domaine)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    variant: "outlined",\n    size: "small",\n    onClick: loadDomaines,\n    sx: {\n      fontSize: "0.75rem"\n    }\n  }, "\\uD83D\\uDD04 Rafra\\xEEchir les domaines")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, "Parties (", selectedPartieType, ")"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_28__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_29__["default"], {\n    expandIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n      style: {\n        fontSize: "1.5rem"\n      }\n    }, "+")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], null, "S\\xE9lectionner les parties (", selectedParties.length, " ", "s\\xE9lectionn\\xE9es)")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_30__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      display: "flex",\n      flexDirection: "column",\n      gap: 1\n    }\n  }, sortedParties.map(partie => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    key: partie.id,\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "space-between",\n      paddingY: "2px",\n      transition: "transform 0.3s ease-out, opacity 0.3s ease-out",\n      transform: slidingParties.includes(partie.id) ? "translateX(100%)" : "translateX(0)",\n      opacity: slidingParties.includes(partie.id) ? 0 : 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      gap: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_31__["default"], {\n    checked: selectedParties.includes(partie.id),\n    onChange: () => handlePartiesChange(partie.id),\n    sx: {\n      "& .MuiSvgIcon-root": {\n        width: "30px",\n        height: "30px"\n      }\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "h6"\n  }, partie.titre)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    size: "small",\n    variant: "outlined",\n    onClick: () => handleAddSpecialLine("parties", partie.id),\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fi__WEBPACK_IMPORTED_MODULE_32__.FiPlusCircle, {\n      size: 16,\n      style: {\n        strokeWidth: 2\n      }\n    }),\n    sx: {\n      borderRadius: "20px",\n      textTransform: "none",\n      fontSize: "0.65rem",\n      padding: "4px 10px",\n      marginLeft: "10px",\n      borderColor: "primary.main",\n      color: "primary.main",\n      backgroundColor: "white",\n      "&:hover": {\n        backgroundColor: "primary.main",\n        color: "white",\n        borderColor: "primary.main",\n        boxShadow: "0 2px 5px rgba(0,0,0,0.2)"\n      },\n      transition: "all 0.3s ease",\n      minWidth: "130px",\n      height: "32px",\n      fontWeight: 500\n    }\n  }, "Ligne sp\\xE9ciale")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      display: "flex",\n      gap: 1,\n      alignItems: "center",\n      height: "100%"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    style: {\n      backgroundColor: "transparent",\n      color: "#4CAF50",\n      border: "2px solid #4CAF50",\n      borderRadius: "4px",\n      padding: "2px",\n      cursor: "pointer",\n      height: "24px",\n      width: "24px",\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "center"\n    },\n    onClick: () => handleEditPartie(partie)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_ri__WEBPACK_IMPORTED_MODULE_33__.RiPencilFill, {\n    size: 16\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    style: {\n      backgroundColor: "transparent",\n      color: "#f44336",\n      border: "2px solid #f44336",\n      borderRadius: "4px",\n      padding: "2px",\n      cursor: "pointer",\n      height: "24px",\n      width: "24px",\n      marginRight: "4px",\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "center"\n    },\n    onClick: e => {\n      e.stopPropagation();\n      handleHidePartie(partie.id);\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_34__.FaEyeSlash, {\n    size: 16\n  }))))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, "Sous-Parties et Lignes de D\\xE9tail"), sortedSousParties.map(sousPartie => {\n    var _parties$find;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_28__["default"], {\n      key: sousPartie.id,\n      sx: {\n        mb: 1,\n        transition: "transform 0.3s ease-out, opacity 0.3s ease-out",\n        transform: slidingSousParties.includes(sousPartie.id) ? "translateX(100%)" : "translateX(0)",\n        opacity: slidingSousParties.includes(sousPartie.id) ? 0 : 1\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_29__["default"], {\n      expandIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n        style: {\n          fontSize: "1.5rem",\n          cursor: "pointer",\n          userSelect: "none"\n        }\n      }, "+"),\n      onClick: e => {\n        // Empêcher la sélection/déséselection si on clique sur les contrôles\n        if (e.target.closest("button") || e.target.closest(".MuiCheckbox-root")) {\n          e.stopPropagation();\n          return;\n        }\n        // Si on clique sur le titre ou la zone générale (pas sur l\'icône d\'expansion)\n        // et que la sous-partie n\'est pas déjà sélectionnée, la cocher automatiquement\n        if (!e.target.closest(".MuiAccordionSummary-expandIconWrapper") && !selectedSousParties.includes(sousPartie.id)) {\n          handleSousPartiesChange(sousPartie.id);\n        }\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n      sx: {\n        display: "flex",\n        alignItems: "center",\n        gap: 1,\n        width: "auto"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n      sx: {\n        "& .MuiFormControlLabel-label": {\n          marginLeft: "-4px",\n          fontFamily: "\'Merriweather\', serif",\n          fontSize: "1rem",\n          fontWeight: 500,\n          color: "black",\n          cursor: "pointer"\n        }\n      },\n      control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n        sx: {\n          display: "flex",\n          alignItems: "center"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n        style: {\n          backgroundColor: "transparent",\n          color: "#4CAF50",\n          border: "2px solid #4CAF50",\n          borderRadius: "4px",\n          display: "flex",\n          alignItems: "center",\n          justifyContent: "center",\n          cursor: "pointer",\n          padding: "2px",\n          marginRight: "4px"\n        },\n        onClick: e => {\n          e.stopPropagation();\n          handleEditSousPartie(sousPartie);\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_ri__WEBPACK_IMPORTED_MODULE_33__.RiPencilFill, {\n        size: 16\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n        style: {\n          backgroundColor: "transparent",\n          color: "#f44336",\n          border: "2px solid #f44336",\n          borderRadius: "4px",\n          padding: "2px",\n          cursor: "pointer",\n          height: "24px",\n          width: "24px",\n          marginRight: "4px"\n        },\n        onClick: e => {\n          e.stopPropagation();\n          handleHideSousPartie(sousPartie.id);\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_34__.FaEyeSlash, {\n        size: 16\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_31__["default"], {\n        checked: selectedSousParties.includes(sousPartie.id),\n        onChange: () => handleSousPartiesChange(sousPartie.id),\n        onClick: e => e.stopPropagation(),\n        sx: {\n          marginLeft: "-12px",\n          "& .MuiSvgIcon-root": {\n            width: "30px",\n            height: "30px"\n          }\n        }\n      }))\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n      sx: {\n        display: "flex",\n        gap: 1,\n        alignItems: "center"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n      variant: "subtitle1"\n    }, sousPartie.description === "Lignes directes" ? ((_parties$find = parties.find(p => p.id === sousPartie.partie)) === null || _parties$find === void 0 ? void 0 : _parties$find.titre) || sousPartie.description : sousPartie.description), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      size: "small",\n      variant: "outlined",\n      onClick: () => handleAddSpecialLine("sousParties", sousPartie.id),\n      startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fi__WEBPACK_IMPORTED_MODULE_32__.FiPlusCircle, {\n        size: 16,\n        style: {\n          strokeWidth: 2\n        }\n      }),\n      sx: {\n        borderRadius: "20px",\n        textTransform: "none",\n        fontSize: "0.85rem",\n        padding: "4px 12px",\n        borderColor: "primary.main",\n        color: "primary.main",\n        backgroundColor: "white",\n        "&:hover": {\n          backgroundColor: "primary.main",\n          color: "white",\n          borderColor: "primary.main",\n          boxShadow: "0 2px 5px rgba(0,0,0,0.2)"\n        },\n        transition: "all 0.3s ease",\n        minWidth: "130px",\n        height: "32px",\n        fontWeight: 500\n      }\n    }, "Ligne sp\\xE9ciale"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_30__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n      fullWidth: true,\n      size: "small",\n      placeholder: "Rechercher une ligne...",\n      sx: {\n        mb: 2\n      },\n      onChange: e => setSearchTerms(prev => ({\n        ...prev,\n        [sousPartie.id]: e.target.value\n      })),\n      value: searchTerms[sousPartie.id] || ""\n    }), sortedLignesDetails(getFilteredLignes(sousPartie.id, visibleLignesDetails.filter(ligne => {\n      return ligne.sous_partie === sousPartie.id;\n    }))).map(ligne => {\n      var _customCouts$ligne$id3, _customCouts$ligne$id4, _customCouts$ligne$id5, _customCouts$ligne$id6, _customCouts$ligne$id7, _customCouts$ligne$id8, _customCouts$ligne$id9, _customCouts$ligne$id10, _customCouts$ligne$id11, _customCouts$ligne$id12, _customCouts$ligne$id13, _customCouts$ligne$id14;\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_35__["default"], {\n        key: ligne.id,\n        sx: {\n          mb: 1,\n          transition: "transform 0.3s ease-out, opacity 0.3s ease-out",\n          transform: slidingLignes.includes(ligne.id) ? "translateX(100%)" : "translateX(0)",\n          opacity: slidingLignes.includes(ligne.id) ? 0 : 1\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_36__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n        sx: {\n          display: "flex",\n          alignItems: "center",\n          mb: 1,\n          gap: 2,\n          width: "100%",\n          justifyContent: "space-between"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n        sx: {\n          display: "flex",\n          alignItems: "center",\n          gap: 2\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n        sx: {\n          display: "flex",\n          alignItems: "center"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n        sx: {\n          display: "flex",\n          alignItems: "center"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n        sx: {\n          display: "flex",\n          gap: 1,\n          alignItems: "center"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n        style: {\n          backgroundColor: "transparent",\n          color: "#4CAF50",\n          border: "2px solid #4CAF50",\n          borderRadius: "4px",\n          padding: "2px",\n          cursor: "pointer",\n          height: "24px",\n          width: "24px",\n          display: "flex",\n          alignItems: "center",\n          justifyContent: "center"\n        },\n        onClick: () => handleEditLigne(ligne)\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_ri__WEBPACK_IMPORTED_MODULE_33__.RiPencilFill, {\n        size: 16\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n        style: {\n          backgroundColor: "transparent",\n          color: "#f44336",\n          border: "2px solid #f44336",\n          borderRadius: "4px",\n          padding: "2px",\n          cursor: "pointer",\n          height: "24px",\n          width: "24px",\n          display: "flex",\n          alignItems: "center",\n          justifyContent: "center"\n        },\n        onClick: () => handleHideLigne(ligne.id)\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_34__.FaEyeSlash, {\n        size: 16\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_31__["default"], {\n        checked: selectedLignes.includes(ligne.id),\n        onChange: () => handleLigneSelection(ligne.id),\n        sx: {\n          marginLeft: "-12px",\n          "& .MuiSvgIcon-root": {\n            width: "30px",\n            height: "30px"\n          }\n        }\n      })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n        sx: {\n          display: "flex",\n          gap: 1,\n          alignItems: "center"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], null, ligne.description))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n        sx: {\n          display: "flex",\n          flexDirection: "column",\n          alignItems: "flex-end"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        variant: "subtitle1",\n        sx: {\n          fontWeight: "bold",\n          color: "primary.main"\n        }\n      }, formatPrice(calculateTotalPrice(ligne)), " \\u20AC"), selectedLignes.includes(ligne.id) && quantities[ligne.id] > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        variant: "caption",\n        sx: {\n          color: "text.secondary",\n          fontSize: "0.7rem"\n        }\n      }, quantities[ligne.id], " \\xD7", " ", formatPrice(customCouts[ligne.id] || customTauxFixes[ligne.id] || customMarges[ligne.id] ? calculatePriceFromCosts(ligne) : customPrices[ligne.id] || ligne.prix), "\\u20AC"))), selectedLignes.includes(ligne.id) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n        sx: {\n          display: "flex",\n          flexDirection: "column",\n          gap: 2,\n          ml: 4\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n        sx: {\n          display: "flex",\n          gap: 2\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n        id: `quantity-${ligne.id}`,\n        label: "Quantit\\xE9",\n        type: "number",\n        value: quantities[ligne.id] || "",\n        onChange: e => handleQuantityChange(ligne.id, e.target.value),\n        size: "small"\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n        label: "Prix Unitaire",\n        type: "number",\n        step: "0.10",\n        value: customCouts[ligne.id] || customTauxFixes[ligne.id] || customMarges[ligne.id] ? formatPrice(calculatePriceFromCosts(ligne)) : customPrices[ligne.id] !== undefined ? customPrices[ligne.id] : ligne.prix || "",\n        onChange: e => handlePriceChange(ligne.id, e.target.value),\n        onBlur: e => {\n          const value = e.target.value;\n          if (value === "" || isNaN(parseFloat(value))) {\n            handlePriceChange(ligne.id, "");\n          }\n        },\n        size: "small",\n        InputProps: {\n          readOnly: customCouts[ligne.id] || customTauxFixes[ligne.id] || customMarges[ligne.id],\n          style: {\n            backgroundColor: customCouts[ligne.id] || customTauxFixes[ligne.id] || customMarges[ligne.id] ? "#f5f5f5" : "white"\n          }\n        },\n        helperText: customCouts[ligne.id] || customTauxFixes[ligne.id] || customMarges[ligne.id] ? "Prix calculé automatiquement" : ""\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n        sx: {\n          display: "flex",\n          gap: 2,\n          alignItems: "center"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n        sx: {\n          display: "flex",\n          gap: 2,\n          flex: 1\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n        label: "Main d\'\\u0153uvre",\n        type: "number",\n        step: "0.01",\n        value: ((_customCouts$ligne$id3 = customCouts[ligne.id]) === null || _customCouts$ligne$id3 === void 0 ? void 0 : _customCouts$ligne$id3.main_oeuvre) || ligne.cout_main_oeuvre || "",\n        onChange: e => handleCoutMainOeuvreChange(ligne.id, e.target.value),\n        onBlur: e => {\n          const value = e.target.value;\n          if (value === "" || isNaN(parseFloat(value))) {\n            handleCoutMainOeuvreChange(ligne.id, "");\n          }\n        },\n        size: "small",\n        InputProps: {\n          endAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], {\n            position: "end"\n          }, "\\u20AC")\n        }\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n        label: "Mat\\xE9riel",\n        type: "number",\n        step: "0.01",\n        value: ((_customCouts$ligne$id4 = customCouts[ligne.id]) === null || _customCouts$ligne$id4 === void 0 ? void 0 : _customCouts$ligne$id4.materiel) || ligne.cout_materiel || "",\n        onChange: e => handleCoutMaterielChange(ligne.id, e.target.value),\n        onBlur: e => {\n          const value = e.target.value;\n          if (value === "" || isNaN(parseFloat(value))) {\n            handleCoutMaterielChange(ligne.id, "");\n          }\n        },\n        size: "small",\n        InputProps: {\n          endAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], {\n            position: "end"\n          }, "\\u20AC")\n        }\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n        label: "Taux fixe",\n        type: "number",\n        step: "0.01",\n        value: customTauxFixes[ligne.id] || ligne.taux_fixe || "",\n        onChange: e => handleTauxFixeChange(ligne.id, e.target.value),\n        onBlur: e => {\n          const value = e.target.value;\n          if (value === "" || isNaN(parseFloat(value))) {\n            handleTauxFixeChange(ligne.id, "");\n          }\n        },\n        size: "small",\n        InputProps: {\n          endAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], {\n            position: "end"\n          }, "%")\n        }\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n        label: "Marge",\n        type: "number",\n        step: "0.01",\n        value: customMarges[ligne.id] || ligne.marge || "",\n        onChange: e => handleMargeChange(ligne.id, e.target.value),\n        onBlur: e => {\n          const value = e.target.value;\n          if (value === "" || isNaN(parseFloat(value))) {\n            handleMargeChange(ligne.id, "");\n          }\n        },\n        size: "small",\n        InputProps: {\n          endAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], {\n            position: "end"\n          }, "%")\n        }\n      })), (customCouts[ligne.id] || customTauxFixes[ligne.id] || customMarges[ligne.id]) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n        sx: {\n          backgroundColor: "warning.main",\n          color: "white",\n          px: 1,\n          py: 0.5,\n          borderRadius: 1,\n          fontSize: "0.7rem",\n          fontWeight: "bold"\n        }\n      }, "Modifi\\xE9")), (customCouts[ligne.id] || customTauxFixes[ligne.id] || customMarges[ligne.id]) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n        sx: {\n          backgroundColor: "#f8f9fa",\n          p: 1,\n          borderRadius: 1,\n          fontSize: "0.8rem",\n          color: "text.secondary"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n        sx: {\n          display: "flex",\n          justifyContent: "space-between",\n          alignItems: "center",\n          mb: 1\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        variant: "caption",\n        sx: {\n          fontWeight: "bold"\n        }\n      }, "D\\xE9tail du calcul automatique"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n        sx: {\n          display: "flex",\n          gap: 1\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n        size: "small",\n        variant: "contained",\n        color: "primary",\n        onClick: () => saveCustomCostsToDatabase(ligne.id),\n        sx: {\n          fontSize: "0.7rem",\n          py: 0.5,\n          px: 1,\n          minWidth: "auto"\n        }\n      }, "Sauvegarder"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n        size: "small",\n        variant: "outlined",\n        onClick: () => resetCustomCosts(ligne.id),\n        sx: {\n          fontSize: "0.7rem",\n          py: 0.5,\n          px: 1,\n          minWidth: "auto"\n        }\n      }, "R\\xE9initialiser"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        variant: "caption",\n        display: "block"\n      }, "D\\xE9tail du calcul:", parseFloat(((_customCouts$ligne$id5 = customCouts[ligne.id]) === null || _customCouts$ligne$id5 === void 0 ? void 0 : _customCouts$ligne$id5.main_oeuvre) || ligne.cout_main_oeuvre || 0).toFixed(2), "\\u20AC (MO) +", parseFloat(((_customCouts$ligne$id6 = customCouts[ligne.id]) === null || _customCouts$ligne$id6 === void 0 ? void 0 : _customCouts$ligne$id6.materiel) || ligne.cout_materiel || 0).toFixed(2), "\\u20AC (Mat) =", parseFloat((parseFloat(((_customCouts$ligne$id7 = customCouts[ligne.id]) === null || _customCouts$ligne$id7 === void 0 ? void 0 : _customCouts$ligne$id7.main_oeuvre) || ligne.cout_main_oeuvre || 0) + parseFloat(((_customCouts$ligne$id8 = customCouts[ligne.id]) === null || _customCouts$ligne$id8 === void 0 ? void 0 : _customCouts$ligne$id8.materiel) || ligne.cout_materiel || 0)).toFixed(2)).toFixed(2), "\\u20AC (Base)"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        variant: "caption",\n        display: "block"\n      }, "+", " ", (parseFloat(customTauxFixes[ligne.id] || ligne.taux_fixe || 0) * (parseFloat(((_customCouts$ligne$id9 = customCouts[ligne.id]) === null || _customCouts$ligne$id9 === void 0 ? void 0 : _customCouts$ligne$id9.main_oeuvre) || ligne.cout_main_oeuvre || 0) + parseFloat(((_customCouts$ligne$id10 = customCouts[ligne.id]) === null || _customCouts$ligne$id10 === void 0 ? void 0 : _customCouts$ligne$id10.materiel) || ligne.cout_materiel || 0)) / 100).toFixed(2), "\\u20AC (Taux fixe", " ", parseFloat(customTauxFixes[ligne.id] || ligne.taux_fixe || 0).toFixed(2), "%)"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        variant: "caption",\n        display: "block"\n      }, "+", " ", (parseFloat(customMarges[ligne.id] || ligne.marge || 0) * (parseFloat(((_customCouts$ligne$id11 = customCouts[ligne.id]) === null || _customCouts$ligne$id11 === void 0 ? void 0 : _customCouts$ligne$id11.main_oeuvre) || ligne.cout_main_oeuvre || 0) + parseFloat(((_customCouts$ligne$id12 = customCouts[ligne.id]) === null || _customCouts$ligne$id12 === void 0 ? void 0 : _customCouts$ligne$id12.materiel) || ligne.cout_materiel || 0) + parseFloat(customTauxFixes[ligne.id] || ligne.taux_fixe || 0) * (parseFloat(((_customCouts$ligne$id13 = customCouts[ligne.id]) === null || _customCouts$ligne$id13 === void 0 ? void 0 : _customCouts$ligne$id13.main_oeuvre) || ligne.cout_main_oeuvre || 0) + parseFloat(((_customCouts$ligne$id14 = customCouts[ligne.id]) === null || _customCouts$ligne$id14 === void 0 ? void 0 : _customCouts$ligne$id14.materiel) || ligne.cout_materiel || 0)) / 100) / 100).toFixed(2), "\\u20AC (Marge", " ", parseFloat(customMarges[ligne.id] || ligne.marge || 0).toFixed(2), "%)")))));\n    })));\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      mb: 3,\n      display: "flex",\n      justifyContent: "flex-end"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    variant: "outlined",\n    color: "primary",\n    onClick: handleAddGlobalSpecialLine,\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fi__WEBPACK_IMPORTED_MODULE_32__.FiPlusCircle, null),\n    sx: {\n      borderRadius: "20px",\n      textTransform: "none",\n      fontSize: "0.85rem",\n      padding: "8px 16px"\n    }\n  }, "Ajouter une ligne sp\\xE9ciale globale")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      display: "flex",\n      gap: 2,\n      alignItems: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    variant: "contained",\n    color: "primary",\n    onClick: isPreviewed ? handleSaveDevis : handlePreviewDevis\n  }, isPreviewed ? "Enregistrer le devis" : "Voir le devis"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    variant: "outlined",\n    color: "secondary",\n    onClick: () => {\n      if (window.confirm("Voulez-vous vraiment effacer toutes les données en cours ? Cette action ne peut pas être annulée.")) {\n        clearSavedState();\n        window.location.reload();\n      }\n    },\n    title: "Effacer toutes les donn\\xE9es sauvegard\\xE9es"\n  }, "\\uD83D\\uDDD1\\uFE0F Effacer")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ClientTypeModal__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    open: showClientTypeModal,\n    onClose: () => {\n      setShowClientTypeModal(false);\n      setDevisType("normal"); // Réinitialiser le type si l\'utilisateur annule\n    },\n    onNewClient: handleNewClient,\n    onExistingClient: handleExistingClient\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SelectSocieteModal__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    open: showSelectSocieteModal,\n    onClose: () => setShowSelectSocieteModal(false),\n    onSocieteSelect: handleSocieteSelect\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      position: "fixed",\n      bottom: 20,\n      right: 20,\n      backgroundColor: "white",\n      padding: "15px",\n      borderRadius: "8px",\n      boxShadow: "0 2px 10px rgba(0,0,0,0.2)",\n      zIndex: 1000,\n      border: "2px solid",\n      borderColor: "primary.main",\n      display: showSummaryBox ? "flex" : "none",\n      flexDirection: "column",\n      gap: 2,\n      transition: "all 0.3s ease"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      borderBottom: "1px solid",\n      borderColor: "primary.main",\n      pb: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "h6",\n    sx: {\n      color: "primary.main"\n    }\n  }, "Total HT: ", calculateGrandTotal.totalHT, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "h6",\n    sx: {\n      color: "primary.main"\n    }\n  }, "Total TTC: ", calculateGrandTotal.totalTTC, " \\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "subtitle1",\n    sx: {\n      color: "primary.main"\n    }\n  }, "Main d\'\\u0153uvre HT:", " ", calculateEstimatedTotals().cout_estime_main_oeuvre.toFixed(2), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "subtitle1",\n    sx: {\n      color: "primary.main"\n    }\n  }, "Mat\\xE9riel HT:", " ", calculateEstimatedTotals().cout_estime_materiel.toFixed(2), " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "subtitle1",\n    sx: {\n      color: "primary.main"\n    }\n  }, "Co\\xFBt avec taux fixe HT:", " ", calculateEstimatedTotals().cout_avec_taux_fixe.toFixed(2), " \\u20AC"), (() => {\n    const totals = calculateEstimatedTotals();\n    const margePercentage = calculateMargePercentage(totals);\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n      variant: "subtitle1",\n      sx: {\n        color: margePercentage < 10 ? "error.main" : "primary.main",\n        display: "flex",\n        alignItems: "center",\n        gap: 1\n      }\n    }, "Marge HT: ", totals.marge_estimee.toFixed(2), " \\u20AC", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n      style: {\n        fontSize: "0.8em"\n      }\n    }, "(", margePercentage.toFixed(1), "%)"));\n  })()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      borderTop: "1px solid",\n      borderColor: "primary.main",\n      pt: 1,\n      mt: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "caption",\n    sx: {\n      color: "text.secondary",\n      display: "block",\n      mb: 0.5\n    }\n  }, "Prix calcul\\xE9s automatiquement:", " ", selectedLignes.filter(ligneId => customCouts[ligneId] || customTauxFixes[ligneId] || customMarges[ligneId]).length, " ", "ligne(s)"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "caption",\n    sx: {\n      color: "text.secondary",\n      display: "block"\n    }\n  }, "Prix manuels:", " ", selectedLignes.filter(ligneId => customPrices[ligneId] && !customCouts[ligneId] && !customTauxFixes[ligneId] && !customMarges[ligneId]).length, " ", "ligne(s)"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    variant: "contained",\n    color: "primary",\n    onClick: () => setShowSummaryBox(!showSummaryBox),\n    sx: {\n      position: "fixed",\n      bottom: 20,\n      right: showSummaryBox ? 320 : 20,\n      zIndex: 1001,\n      minWidth: "auto",\n      width: "40px",\n      height: "40px",\n      borderRadius: "50%",\n      boxShadow: "0 2px 10px rgba(0,0,0,0.2)",\n      transition: "all 0.3s ease",\n      "&:hover": {\n        transform: "scale(1.1)"\n      }\n    }\n  }, showSummaryBox ? "👁️" : "📊"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_DevisModal__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    open: openDevisModal,\n    handleClose: () => setOpenDevisModal(false),\n    devisData: devisModalData,\n    handleSubmit: handleDevisModalSubmit,\n    handleChange: handleDevisModalChange,\n    pendingChantierData: pendingChantierData\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_CreatePartieModal__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    open: openCreatePartieModal,\n    handleClose: () => {\n      setOpenCreatePartieModal(false);\n      setEditData(null);\n    },\n    onPartieCreated: handlePartieCreated,\n    onTauxFixeUpdated: handleTauxFixeUpdated,\n    editData: editData\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_EditModal__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    open: editModalOpen,\n    handleClose: () => setEditModalOpen(false),\n    data: itemToEdit,\n    handleSave: handleSaveEdit,\n    parties: parties,\n    sousParties: sousParties,\n    allLignesDetails: allLignesDetails\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ClientInfoModal__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    open: showClientInfoModal,\n    onClose: () => setShowClientInfoModal(false),\n    onSubmit: handleClientInfoSubmit\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SocieteInfoModal__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    open: showSocieteInfoModal,\n    onClose: () => setShowSocieteInfoModal(false),\n    onSubmit: handleSocieteInfoSubmit\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ChantierForm__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: showChantierForm,\n    onClose: () => setShowChantierForm(false),\n    onSubmit: chantierData => {\n      setPendingChantierData(prev => ({\n        ...prev,\n        chantier: {\n          ...prev.chantier,\n          ...chantierData\n        }\n      }));\n      setSelectedChantierId(-1);\n      setShowChantierForm(false);\n    },\n    societeId: selectedSocieteId,\n    chantierData: pendingChantierData.chantier\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SpecialLineModal__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    open: openSpecialLineModal,\n    onClose: () => setOpenSpecialLineModal(false),\n    onSave: handleSpecialLineSave,\n    currentSpecialLines: currentSpecialLineTarget.type === "global" ? specialLines.global : ((_specialLines$current = specialLines[currentSpecialLineTarget.type]) === null || _specialLines$current === void 0 ? void 0 : _specialLines$current[currentSpecialLineTarget.id]) || [],\n    onDelete: index => handleDeleteSpecialLineFromOverview(currentSpecialLineTarget.type, index)\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      my: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SpecialLinesOverview__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    specialLines: specialLines,\n    onDelete: handleDeleteSpecialLineFromOverview\n  })));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CreationDevis);\n\n//# sourceURL=webpack://frontend/./src/components/CreationDevis.js?')},"./src/components/CreationDocument/SituationCreationModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableCell/TableCell.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Collapse/Collapse.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Grid/Grid.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputLabel/InputLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableContainer/TableContainer.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fa__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-icons/fa */ "./node_modules/react-icons/fa/index.mjs");\n/* harmony import */ var _utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/universalDriveGenerator */ "./src/utils/universalDriveGenerator.js");\n\n\n\n\n\nconst MOIS = [{\n  value: 1,\n  label: "Janvier"\n}, {\n  value: 2,\n  label: "Février"\n}, {\n  value: 3,\n  label: "Mars"\n}, {\n  value: 4,\n  label: "Avril"\n}, {\n  value: 5,\n  label: "Mai"\n}, {\n  value: 6,\n  label: "Juin"\n}, {\n  value: 7,\n  label: "Juillet"\n}, {\n  value: 8,\n  label: "Août"\n}, {\n  value: 9,\n  label: "Septembre"\n}, {\n  value: 10,\n  label: "Octobre"\n}, {\n  value: 11,\n  label: "Novembre"\n}, {\n  value: 12,\n  label: "Décembre"\n}];\nconst style = {\n  position: "absolute",\n  top: "50%",\n  left: "50%",\n  transform: "translate(-50%, -50%)",\n  width: "90%",\n  maxHeight: "90vh",\n  bgcolor: "background.paper",\n  boxShadow: 24,\n  p: 4,\n  borderRadius: 2,\n  overflow: "auto"\n};\n\n// Composant pour une ligne de partie\nconst PartieRow = ({\n  partie,\n  handlePourcentageChange,\n  lignesSpeciales\n}) => {\n  const [open, setOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // Calculer le pourcentage moyen, le montant et le total HT de la partie\n  let moyennePartie = 0;\n  let montantPartie = 0;\n  let totalHTPartie = 0;\n  if (partie.sous_parties && partie.sous_parties.length > 0) {\n    partie.sous_parties.forEach(sousPartie => {\n      if (sousPartie.lignes && sousPartie.lignes.length > 0) {\n        montantPartie += sousPartie.lignes.reduce((acc, ligne) => acc + parseFloat(ligne.total_ht || 0) * (parseFloat(ligne.pourcentage_actuel) || 0) / 100, 0);\n\n        // Calculer le total HT de base (somme des total_ht des lignes)\n        totalHTPartie += sousPartie.lignes.reduce((acc, ligne) => acc + parseFloat(ligne.total_ht || 0), 0);\n      }\n    });\n\n    // Calculer le pourcentage basé sur Montant / Total HT\n    moyennePartie = totalHTPartie > 0 ? montantPartie / totalHTPartie * 100 : 0;\n  }\n\n  // Filtrer les lignes spéciales de cette partie\n  const lignesSpecialesPartie = lignesSpeciales.filter(ligne => ligne.niveau === "partie" && ligne.partie_id === partie.id.toString());\n\n  // Vérifier si la partie a une seule sous-partie "Lignes directes"\n  const hasOnlyLignesDirectes = partie.sous_parties && partie.sous_parties.length === 1 && partie.sous_parties[0].description === "Lignes directes";\n\n  // Fonction pour obtenir la couleur de comparaison\n  const getComparisonColor = (current, previous) => {\n    if (current < previous) return "error.main"; // Rouge\n    if (current > previous) return "rgb(0, 223, 56)"; // Vert personnalisé\n    return "text.primary"; // Noir\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    sx: {\n      backgroundColor: "rgba(27, 120, 188, 1)",\n      "& td": {\n        color: "white",\n        padding: "8px"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "50px",\n      padding: "8px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    size: "small",\n    onClick: () => setOpen(!open),\n    sx: {\n      color: "white"\n    }\n  }, open ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_5__.FaChevronUp, null) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_5__.FaChevronDown, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "300px",\n      padding: "8px"\n    }\n  }, partie.titre), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "100px",\n      padding: "8px"\n    },\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, (totalHTPartie || 0).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, (moyennePartie || 0).toFixed(2), "%"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, (montantPartie || 0).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    style: {\n      padding: 0\n    },\n    colSpan: 7\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    in: open,\n    timeout: "auto",\n    unmountOnExit: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, partie.sous_parties.map(sousPartie => hasOnlyLignesDirectes ?\n  /*#__PURE__*/\n  // Si c\'est une seule sous-partie "Lignes directes", afficher directement les lignes\n  react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    key: sousPartie.id\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, sousPartie.lignes.map((ligne, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    key: ligne.id,\n    sx: {\n      backgroundColor: index % 2 === 0 ? "white" : "rgba(0, 0, 0, 0.05)",\n      "& td": {\n        padding: "8px"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "50px",\n      padding: "8px"\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "300px",\n      padding: "8px"\n    }\n  }, ligne.description), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "100px",\n      padding: "8px"\n    },\n    align: "right"\n  }, ligne.quantite), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, ligne.prix_unitaire, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, parseFloat(ligne.total_ht).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    type: "number",\n    value: ligne.pourcentage_actuel || 0,\n    onChange: e => handlePourcentageChange(ligne.id, e.target.value),\n    onFocus: e => e.target.select(),\n    InputProps: {\n      inputProps: {\n        min: 0,\n        max: 100,\n        step: "any"\n      }\n    },\n    size: "small",\n    sx: {\n      width: "100px",\n      "& input": {\n        textAlign: "right",\n        color: getComparisonColor(ligne.pourcentage_actuel || 0, ligne.pourcentage_precedent || 0)\n      }\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px",\n      color: getComparisonColor(ligne.pourcentage_actuel || 0, ligne.pourcentage_precedent || 0),\n      fontWeight: "bold"\n    },\n    align: "right"\n  }, (ligne.total_ht * (ligne.pourcentage_actuel || 0) / 100).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC"))))) :\n  /*#__PURE__*/\n  // Sinon, utiliser le composant SousPartieTable normal\n  react__WEBPACK_IMPORTED_MODULE_0__.createElement(SousPartieTable, {\n    key: sousPartie.id,\n    sousPartie: sousPartie,\n    handlePourcentageChange: handlePourcentageChange,\n    lignesSpeciales: lignesSpeciales\n  })), lignesSpecialesPartie.map((ligne, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    key: ligne.id,\n    sx: {\n      backgroundColor: index % 2 === 0 ? "white" : "rgba(0, 0, 0, 0.05)",\n      "& td": {\n        padding: "8px"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "50px",\n      padding: "8px"\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "300px",\n      padding: "8px"\n    }\n  }, ligne.description, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    variant: "caption",\n    display: "block",\n    sx: {\n      color: "text.secondary"\n    }\n  }, "Ligne sp\\xE9ciale partie")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "100px",\n      padding: "8px"\n    },\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, ligne.type === "reduction" ? "-" : "", parseFloat(ligne.montant_ht).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    type: "number",\n    value: ligne.pourcentage_actuel || 0,\n    onChange: e => handlePourcentageChange(ligne.id, e.target.value, "special"),\n    onFocus: e => e.target.select(),\n    InputProps: {\n      inputProps: {\n        min: 0,\n        max: 100,\n        step: "any"\n      }\n    },\n    size: "small",\n    sx: {\n      width: "100px",\n      "& input": {\n        textAlign: "right"\n      }\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, ligne.type === "reduction" ? "-" : "", (ligne.montant_ht * (ligne.pourcentage_actuel || 0) / 100).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC"))))))));\n};\n\n// Composant pour une sous-partie\nconst SousPartieTable = ({\n  sousPartie,\n  handlePourcentageChange,\n  lignesSpeciales\n}) => {\n  const [open, setOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // Calculer le pourcentage moyen, le montant et le total HT de la sous-partie\n  let moyenneSousPartie = 0;\n  let montantSousPartie = 0;\n  let totalHTSousPartie = 0;\n  if (sousPartie.lignes && sousPartie.lignes.length > 0) {\n    montantSousPartie = sousPartie.lignes.reduce((acc, ligne) => acc + parseFloat(ligne.total_ht || 0) * (parseFloat(ligne.pourcentage_actuel) || 0) / 100, 0);\n\n    // Calculer le total HT de base (somme des total_ht des lignes)\n    totalHTSousPartie = sousPartie.lignes.reduce((acc, ligne) => acc + parseFloat(ligne.total_ht || 0), 0);\n\n    // Calculer le pourcentage basé sur Montant / Total HT\n    moyenneSousPartie = totalHTSousPartie > 0 ? montantSousPartie / totalHTSousPartie * 100 : 0;\n  }\n\n  // Filtrer les lignes spéciales de cette sous-partie\n  const lignesSpecialesSousPartie = lignesSpeciales.filter(ligne => ligne.niveau === "sous_partie" && ligne.sous_partie_id === sousPartie.id.toString());\n  const getComparisonColor = (current, previous) => {\n    if (current < previous) return "error.main"; // Rouge\n    if (current > previous) return "rgb(0, 223, 56)"; // Vert personnalisé\n    return "text.primary"; // Noir\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    sx: {\n      backgroundColor: "rgb(157, 197, 226)",\n      "& td": {\n        padding: "8px"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "50px",\n      padding: "8px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    size: "small",\n    onClick: () => setOpen(!open)\n  }, open ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_5__.FaChevronUp, null) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_5__.FaChevronDown, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "300px",\n      padding: "8px"\n    }\n  }, sousPartie.description), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "100px",\n      padding: "8px"\n    },\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, (totalHTSousPartie || 0).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, (moyenneSousPartie || 0).toFixed(2), "%"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, (montantSousPartie || 0).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    in: open,\n    timeout: "auto",\n    unmountOnExit: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, sousPartie.lignes.map((ligne, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    key: ligne.id,\n    sx: {\n      backgroundColor: index % 2 === 0 ? "white" : "rgba(0, 0, 0, 0.05)",\n      "& td": {\n        padding: "8px"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "50px",\n      padding: "8px"\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "300px",\n      padding: "8px"\n    }\n  }, ligne.description), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "100px",\n      padding: "8px"\n    },\n    align: "right"\n  }, ligne.quantite), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, ligne.prix_unitaire, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, parseFloat(ligne.total_ht).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    type: "number",\n    value: ligne.pourcentage_actuel || 0,\n    onChange: e => handlePourcentageChange(ligne.id, e.target.value),\n    onFocus: e => e.target.select(),\n    InputProps: {\n      inputProps: {\n        min: 0,\n        max: 100,\n        step: "any"\n      }\n    },\n    size: "small",\n    sx: {\n      width: "100px",\n      "& input": {\n        textAlign: "right",\n        color: getComparisonColor(ligne.pourcentage_actuel || 0, ligne.pourcentage_precedent || 0)\n      }\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px",\n      color: getComparisonColor(ligne.pourcentage_actuel || 0, ligne.pourcentage_precedent || 0),\n      fontWeight: "bold"\n    },\n    align: "right"\n  }, (ligne.total_ht * (ligne.pourcentage_actuel || 0) / 100).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC"))), lignesSpecialesSousPartie.map((ligne, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    key: ligne.id,\n    sx: {\n      backgroundColor: index % 2 === 0 ? "white" : "rgba(0, 0, 0, 0.05)",\n      "& td": {\n        padding: "8px"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "50px",\n      padding: "8px"\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "300px",\n      padding: "8px"\n    }\n  }, ligne.description, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    variant: "caption",\n    display: "block",\n    sx: {\n      color: "text.secondary"\n    }\n  }, "Ligne sp\\xE9ciale sous-partie")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "100px",\n      padding: "8px"\n    },\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, ligne.type === "reduction" ? "-" : "", parseFloat(ligne.montant_ht).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    type: "number",\n    value: ligne.pourcentage_actuel || 0,\n    onChange: e => handlePourcentageChange(ligne.id, e.target.value, "special"),\n    onFocus: e => e.target.select(),\n    InputProps: {\n      inputProps: {\n        min: 0,\n        max: 100,\n        step: "any"\n      }\n    },\n    size: "small",\n    sx: {\n      width: "100px",\n      "& input": {\n        textAlign: "right"\n      }\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, ligne.type === "reduction" ? "-" : "", (ligne.montant_ht * (ligne.pourcentage_actuel || 0) / 100).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC")))))));\n};\n\n// Composant pour une sous-partie Avenant\nconst AvenantSousPartieTable = ({\n  avenant,\n  handlePourcentageChange\n}) => {\n  const [open, setOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // Calculer le pourcentage moyen et le montant de l\'avenant\n  let moyenneSousPartie = 0;\n  let montantSousPartie = 0;\n  if (avenant.factures_ts && avenant.factures_ts.length > 0) {\n    moyenneSousPartie = avenant.factures_ts.reduce((acc, ts) => acc + (ts.pourcentage_actuel || 0), 0) / avenant.factures_ts.length;\n    montantSousPartie = avenant.factures_ts.reduce((acc, ts) => acc + ts.montant_ht * (ts.pourcentage_actuel || 0) / 100, 0);\n  }\n  const getComparisonColor = (current, previous) => {\n    if (current < previous) return "error.main"; // Rouge\n    if (current > previous) return "rgb(0, 223, 56)"; // Vert personnalisé\n    return "text.primary"; // Noir\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    sx: {\n      backgroundColor: "rgb(157, 197, 226)",\n      "& td": {\n        padding: "8px"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "50px",\n      padding: "8px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    size: "small",\n    onClick: () => setOpen(!open)\n  }, open ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_5__.FaChevronUp, null) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_5__.FaChevronDown, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "300px",\n      padding: "8px"\n    }\n  }, "Avenant n\\xB0", avenant.numero), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "100px",\n      padding: "8px"\n    },\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, avenant.montant_total, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, moyenneSousPartie.toFixed(2), "%"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, montantSousPartie.toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    style: {\n      padding: 0\n    },\n    colSpan: 7\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    in: open,\n    timeout: "auto",\n    unmountOnExit: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, avenant.factures_ts.map((ts, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    key: ts.id,\n    sx: {\n      backgroundColor: index % 2 === 0 ? "white" : "rgba(0, 0, 0, 0.05)",\n      "& td": {\n        padding: "8px"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "50px",\n      padding: "8px"\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "300px",\n      padding: "8px"\n    }\n  }, ts.devis_numero || `TS n°${String(ts.numero_ts).padStart(3, "0")}`, ts.designation), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "100px",\n      padding: "8px"\n    },\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, ts.montant_ht, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    type: "number",\n    value: ts.pourcentage_actuel || 0,\n    onChange: e => {\n      const newValue = e.target.value;\n      handlePourcentageChange(ts.id, newValue, "avenant");\n    },\n    onFocus: e => e.target.select(),\n    InputProps: {\n      inputProps: {\n        min: 0,\n        max: 100,\n        step: "any"\n      }\n    },\n    size: "small",\n    sx: {\n      width: "100px",\n      "& input": {\n        textAlign: "right",\n        color: getComparisonColor(ts.pourcentage_actuel || 0, ts.pourcentage_precedent || 0)\n      }\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px",\n      color: getComparisonColor(ts.pourcentage_actuel || 0, ts.pourcentage_precedent || 0),\n      fontWeight: "bold"\n    },\n    align: "right"\n  }, (ts.montant_ht * (ts.pourcentage_actuel || 0) / 100).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC")))))))))));\n};\n\n// Composant pour la partie Avenants\nconst AvenantsPartieRow = ({\n  avenants,\n  handlePourcentageChange\n}) => {\n  const [open, setOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // Calculer le pourcentage moyen et le montant total des avenants\n  let moyennePartie = 0;\n  let montantPartie = 0;\n  if (avenants && avenants.length > 0) {\n    let totalPourcentage = 0;\n    avenants.forEach(avenant => {\n      if (avenant.factures_ts && avenant.factures_ts.length > 0) {\n        const pourcentageAvenant = avenant.factures_ts.reduce((acc, ts) => acc + (ts.pourcentage_actuel || 0), 0) / avenant.factures_ts.length;\n        totalPourcentage += pourcentageAvenant;\n        montantPartie += avenant.factures_ts.reduce((acc, ts) => acc + ts.montant_ht * (ts.pourcentage_actuel || 0) / 100, 0);\n      }\n    });\n    moyennePartie = totalPourcentage / avenants.length;\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    sx: {\n      backgroundColor: "rgba(27, 120, 188, 1)",\n      "& td": {\n        color: "white",\n        padding: "8px"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "50px",\n      padding: "8px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    size: "small",\n    onClick: () => setOpen(!open),\n    sx: {\n      color: "white"\n    }\n  }, open ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_5__.FaChevronUp, null) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_5__.FaChevronDown, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "300px",\n      padding: "8px"\n    }\n  }, "Avenants"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "100px",\n      padding: "8px"\n    },\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, avenants === null || avenants === void 0 ? void 0 : avenants.reduce((acc, av) => acc + parseFloat(av.montant_total), 0).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, moyennePartie.toFixed(2), "%"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, montantPartie.toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " \\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    style: {\n      padding: 0\n    },\n    colSpan: 7\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    in: open,\n    timeout: "auto",\n    unmountOnExit: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, avenants === null || avenants === void 0 ? void 0 : avenants.map(avenant => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(AvenantSousPartieTable, {\n    key: avenant.id,\n    avenant: avenant,\n    handlePourcentageChange: handlePourcentageChange\n  })))))));\n};\nconst SituationCreationModal = ({\n  open,\n  onClose,\n  devis,\n  chantier,\n  onCreated\n}) => {\n  const [structure, setStructure] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [mois, setMois] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Date().getMonth() + 1);\n  const [annee, setAnnee] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Date().getFullYear());\n  const [commentaire, setCommentaire] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [selectedChantier, setSelectedChantier] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [totalHT, setTotalHT] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [totalAvancement, setTotalAvancement] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [avenants, setAvenants] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [montantTotalAvenants, setMontantTotalAvenants] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [tauxProrata, setTauxProrata] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(2.5);\n  const [montantHTMois, setMontantHTMois] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [lastSituation, setLastSituation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [lignesSupplementaires, setLignesSupplementaires] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [lignesSpeciales, setLignesSpeciales] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [retenueCIE, setRetenueCIE] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [facturesCIE, setFacturesCIE] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [calculatedValues, setCalculatedValues] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [existingSituation, setExistingSituation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (devis !== null && devis !== void 0 && devis.id) {\n      axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/devis-structure/${devis.id}/structure/`).then(response => {\n        setStructure(response.data);\n      }).catch(error => {\n        console.error("Erreur lors du chargement de la structure:", error);\n        alert("Erreur lors du chargement des données");\n      });\n\n      // Charger le chantier si nécessaire\n      if (devis.chantier && !chantier) {\n        axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/chantier/${devis.chantier}/`).then(response => {\n          setSelectedChantier(response.data);\n        }).catch(error => {\n          console.error("Erreur lors du chargement du chantier:", error);\n        });\n      }\n\n      // Utiliser price_ht au lieu de montant_ht\n      setTotalHT(devis.price_ht || 0);\n\n      // Charger les lignes spéciales du devis (exclure les lignes display)\n      if (devis.lignes_speciales) {\n        const specialLines = [];\n\n        // Lignes spéciales globales\n        if (devis.lignes_speciales.global) {\n          devis.lignes_speciales.global.forEach((ligne, index) => {\n            if (ligne.type !== "display") {\n              specialLines.push({\n                id: `global_${index}`,\n                description: ligne.description,\n                value: ligne.montant_calcule || ligne.value,\n                // Utiliser le montant calculé si disponible\n                valueType: ligne.montant_calcule ? "fixed" : ligne.valueType,\n                // Forcer en fixe si montant calculé\n                type: ligne.type,\n                niveau: "global",\n                pourcentage_actuel: 0,\n                pourcentage_precedent: 0,\n                montant_ht: ligne.montant_calcule || (ligne.valueType === "percentage" ? devis.price_ht * ligne.value / 100 : ligne.value)\n              });\n            }\n          });\n        }\n\n        // Lignes spéciales des parties\n        if (devis.lignes_speciales.parties) {\n          Object.keys(devis.lignes_speciales.parties).forEach(partieId => {\n            devis.lignes_speciales.parties[partieId].forEach((ligne, index) => {\n              if (ligne.type !== "display") {\n                specialLines.push({\n                  id: `partie_${partieId}_${index}`,\n                  description: ligne.description,\n                  value: ligne.montant_calcule || ligne.value,\n                  // Utiliser le montant calculé si disponible\n                  valueType: ligne.montant_calcule ? "fixed" : ligne.valueType,\n                  // Forcer en fixe si montant calculé\n                  type: ligne.type,\n                  niveau: "partie",\n                  partie_id: partieId,\n                  pourcentage_actuel: 0,\n                  pourcentage_precedent: 0,\n                  montant_ht: ligne.montant_calcule || (ligne.valueType === "percentage" ? devis.price_ht * ligne.value / 100 : ligne.value)\n                });\n              }\n            });\n          });\n        }\n\n        // Lignes spéciales des sous-parties\n        if (devis.lignes_speciales.sousParties) {\n          Object.keys(devis.lignes_speciales.sousParties).forEach(sousPartieId => {\n            devis.lignes_speciales.sousParties[sousPartieId].forEach((ligne, index) => {\n              if (ligne.type !== "display") {\n                specialLines.push({\n                  id: `souspartie_${sousPartieId}_${index}`,\n                  description: ligne.description,\n                  value: ligne.montant_calcule || ligne.value,\n                  // Utiliser le montant calculé si disponible\n                  valueType: ligne.montant_calcule ? "fixed" : ligne.valueType,\n                  // Forcer en fixe si montant calculé\n                  type: ligne.type,\n                  niveau: "sous_partie",\n                  sous_partie_id: sousPartieId,\n                  pourcentage_actuel: 0,\n                  pourcentage_precedent: 0,\n                  montant_ht: ligne.montant_calcule || (ligne.valueType === "percentage" ? devis.price_ht * ligne.value / 100 : ligne.value)\n                });\n              }\n            });\n          });\n        }\n        setLignesSpeciales(specialLines);\n      }\n    }\n  }, [devis]);\n\n  // Charger les avenants\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (chantier !== null && chantier !== void 0 && chantier.id) {\n      axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/avenant_chantier/${chantier.id}/avenants/`).then(response => {\n        if (response.data.success) {\n          setAvenants(response.data.avenants);\n        }\n      }).catch(error => {\n        console.error("Erreur lors du chargement des avenants:", error);\n      });\n    }\n  }, [chantier]);\n\n  // Calculer l\'avancement chaque fois que la structure change\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (structure.length > 0 && totalHT + montantTotalAvenants > 0) {\n      let sommeMontantsLignes = 0;\n\n      // Somme des montants des lignes du devis\n      structure.forEach(partie => {\n        partie.sous_parties.forEach(sousPartie => {\n          sousPartie.lignes.forEach(ligne => {\n            sommeMontantsLignes += ligne.total_ht * (ligne.pourcentage_actuel || 0) / 100;\n          });\n        });\n      });\n\n      // Ajouter les montants des avenants\n      avenants.forEach(avenant => {\n        var _avenant$factures_ts;\n        (_avenant$factures_ts = avenant.factures_ts) === null || _avenant$factures_ts === void 0 || _avenant$factures_ts.forEach(ts => {\n          sommeMontantsLignes += ts.montant_ht * (ts.pourcentage_actuel || 0) / 100;\n        });\n      });\n\n      // Ajouter les montants des lignes spéciales\n      lignesSpeciales.forEach(ligne => {\n        const montantLigne = ligne.montant_ht * (ligne.pourcentage_actuel || 0) / 100;\n        if (ligne.type === "reduction") {\n          sommeMontantsLignes -= montantLigne;\n        } else {\n          sommeMontantsLignes += montantLigne;\n        }\n      });\n      const pourcentageAvancement = sommeMontantsLignes / (totalHT + montantTotalAvenants) * 100;\n      setTotalAvancement(pourcentageAvancement);\n    }\n  }, [structure, totalHT, avenants, montantTotalAvenants, lignesSpeciales]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (avenants && Array.isArray(avenants)) {\n      const totalAvenants = avenants.reduce((acc, av) => acc + parseFloat(av.montant_total || 0), 0);\n      setMontantTotalAvenants(totalAvenants);\n    }\n  }, [avenants]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (open && chantier !== null && chantier !== void 0 && chantier.id && mois && annee) {\n      const fetchSituationData = async () => {\n        try {\n          const response = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/chantier/${chantier.id}/situations/by-month/`, {\n            params: {\n              mois,\n              annee\n            }\n          });\n          const situations = response.data;\n          if (situations.length > 0) {\n            var _currentSituation$lig2, _currentSituation$lig3;\n            const currentSituation = situations[0];\n            setExistingSituation(currentSituation);\n\n            // Pré-remplir les champs avec les données existantes\n            setTauxProrata(currentSituation.taux_prorata);\n            setRetenueCIE(currentSituation.retenue_cie);\n\n            // Mettre à jour la structure avec les pourcentages existants\n            const newStructure = structure.map(partie => ({\n              ...partie,\n              sous_parties: partie.sous_parties.map(sousPartie => ({\n                ...sousPartie,\n                lignes: sousPartie.lignes.map(ligne => {\n                  const situationLigne = currentSituation.lignes.find(l => l.ligne_devis === ligne.id);\n                  return {\n                    ...ligne,\n                    pourcentage_precedent: situationLigne ? parseFloat(situationLigne.pourcentage_actuel) : 0,\n                    pourcentage_actuel: situationLigne ? parseFloat(situationLigne.pourcentage_actuel) : 0\n                  };\n                })\n              }))\n            }));\n            setStructure(newStructure);\n\n            // Mettre à jour les avenants\n            if (avenants.length > 0) {\n              const newAvenants = avenants.map(avenant => ({\n                ...avenant,\n                factures_ts: (avenant.factures_ts || []).map(ts => {\n                  var _currentSituation$lig;\n                  const situationTs = currentSituation === null || currentSituation === void 0 || (_currentSituation$lig = currentSituation.lignes_avenant) === null || _currentSituation$lig === void 0 ? void 0 : _currentSituation$lig.find(l => l.facture_ts === ts.id);\n                  return {\n                    ...ts,\n                    pourcentage_precedent: situationTs ? parseFloat(situationTs.pourcentage_actuel) : 0,\n                    pourcentage_actuel: situationTs ? parseFloat(situationTs.pourcentage_actuel) : 0,\n                    montant_ht: parseFloat(ts.montant_ht || 0)\n                  };\n                })\n              }));\n              setAvenants(newAvenants);\n            }\n\n            // Mettre à jour les lignes supplémentaires\n            if (((_currentSituation$lig2 = currentSituation.lignes_supplementaires) === null || _currentSituation$lig2 === void 0 ? void 0 : _currentSituation$lig2.length) > 0) {\n              setLignesSupplementaires(currentSituation.lignes_supplementaires);\n            }\n\n            // Mettre à jour les lignes spéciales avec les pourcentages de la situation existante\n            if (lignesSpeciales.length > 0 && ((_currentSituation$lig3 = currentSituation.lignes_speciales) === null || _currentSituation$lig3 === void 0 ? void 0 : _currentSituation$lig3.length) > 0) {\n              const newLignesSpeciales = lignesSpeciales.map(ligne => {\n                // Chercher la ligne spéciale correspondante dans la situation existante\n                const ligneExistante = currentSituation.lignes_speciales.find(l => l.description === ligne.description && l.niveau === ligne.niveau);\n                return {\n                  ...ligne,\n                  pourcentage_actuel: ligneExistante ? parseFloat(ligneExistante.pourcentage_actuel || 0) : 0\n                };\n              });\n              setLignesSpeciales(newLignesSpeciales);\n            }\n          } else {\n            let moisPrecedent = parseInt(mois) - 1;\n            let anneePrecedente = parseInt(annee);\n            if (moisPrecedent === 0) {\n              moisPrecedent = 12;\n              anneePrecedente--;\n            }\n            const responsePrecedent = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/chantier/${chantier.id}/situations/by-month/`, {\n              params: {\n                mois: moisPrecedent,\n                annee: anneePrecedente\n              }\n            });\n            if (responsePrecedent.data.length > 0) {\n              var _situationPrecedente$2, _situationPrecedente$3;\n              const situationPrecedente = responsePrecedent.data[0];\n\n              // Définir la situation précédente comme lastSituation\n              setLastSituation(situationPrecedente);\n\n              // Réinitialiser la structure avec les pourcentages précédents\n              const newStructure = structure.map(partie => ({\n                ...partie,\n                sous_parties: partie.sous_parties.map(sousPartie => ({\n                  ...sousPartie,\n                  lignes: sousPartie.lignes.map(ligne => {\n                    const lignePrecedente = situationPrecedente.lignes.find(l => l.ligne_devis === ligne.id);\n                    return {\n                      ...ligne,\n                      pourcentage_precedent: lignePrecedente ? parseFloat(lignePrecedente.pourcentage_actuel) : 0,\n                      pourcentage_actuel: lignePrecedente ? parseFloat(lignePrecedente.pourcentage_actuel) : 0\n                      // Ne pas copier le montant_ht_mois\n                    };\n                  })\n                }))\n              }));\n              setStructure(newStructure);\n\n              // Réinitialiser les avenants avec les pourcentages précédents\n              if (avenants.length > 0) {\n                const newAvenants = avenants.map(avenant => ({\n                  ...avenant,\n                  factures_ts: (avenant.factures_ts || []).map(ts => {\n                    var _situationPrecedente$;\n                    const avenantPrecedent = (_situationPrecedente$ = situationPrecedente.lignes_avenant) === null || _situationPrecedente$ === void 0 ? void 0 : _situationPrecedente$.find(l => l.facture_ts === ts.id);\n                    return {\n                      ...ts,\n                      pourcentage_precedent: avenantPrecedent ? parseFloat(avenantPrecedent.pourcentage_actuel) : 0,\n                      pourcentage_actuel: avenantPrecedent ? parseFloat(avenantPrecedent.pourcentage_actuel) : 0,\n                      montant_ht: parseFloat(ts.montant_ht || 0)\n                      // Ne pas copier le montant du mois\n                    };\n                  })\n                }));\n                setAvenants(newAvenants);\n              }\n\n              // Réinitialiser les lignes supplémentaires avec montants à 0\n              if (((_situationPrecedente$2 = situationPrecedente.lignes_supplementaires) === null || _situationPrecedente$2 === void 0 ? void 0 : _situationPrecedente$2.length) > 0) {\n                setLignesSupplementaires(situationPrecedente.lignes_supplementaires.map(ligne => ({\n                  ...ligne,\n                  montant: "0.00" // Montant à 0 pour la nouvelle situation\n                })));\n              }\n\n              // Mettre à jour les lignes spéciales avec les pourcentages de la situation précédente\n              if (lignesSpeciales.length > 0 && ((_situationPrecedente$3 = situationPrecedente.lignes_speciales) === null || _situationPrecedente$3 === void 0 ? void 0 : _situationPrecedente$3.length) > 0) {\n                const newLignesSpeciales = lignesSpeciales.map(ligne => {\n                  // Chercher la ligne spéciale correspondante dans la situation précédente\n                  const lignePrecedente = situationPrecedente.lignes_speciales.find(l => l.description === ligne.description && l.niveau === ligne.niveau);\n                  return {\n                    ...ligne,\n                    pourcentage_actuel: lignePrecedente ? parseFloat(lignePrecedente.pourcentage_actuel || 0) : 0\n                  };\n                });\n                setLignesSpeciales(newLignesSpeciales);\n              }\n\n              // Réinitialiser le montant HT du mois à 0\n              setMontantHTMois(0);\n              setExistingSituation(null);\n            } else {\n              setLastSituation(null);\n              resetSituationData();\n            }\n          }\n        } catch (error) {\n          console.error("Erreur lors de la vérification de la situation:", error);\n          setExistingSituation(null);\n          resetSituationData();\n        }\n      };\n      fetchSituationData();\n    }\n  }, [open, chantier, mois, annee]);\n\n  // Fonction pour fusionner les lignes supplémentaires\n  const mergeSupplementaryLines = (defaultLines, existingLines) => {\n    const mergedLines = [...defaultLines];\n\n    // Ajouter les lignes existantes qui ne sont pas dans les lignes par défaut\n    existingLines.forEach(existingLine => {\n      const exists = mergedLines.some(defaultLine => defaultLine.description === existingLine.description);\n      if (!exists) {\n        mergedLines.push({\n          ...existingLine,\n          montant: "0.00" // Réinitialiser le montant pour la nouvelle situation\n        });\n      }\n    });\n    return mergedLines;\n  };\n\n  // Modifier la fonction d\'initialisation\n  const initializeSituationData = (situation, isNewSituation = false, mergedLignes = null) => {\n    var _situation$situation_;\n    setTauxProrata(situation.taux_prorata);\n    setLastSituation(situation);\n\n    // Mettre à jour les pourcentages de la structure\n    const newStructure = structure.map(partie => ({\n      ...partie,\n      sous_parties: partie.sous_parties.map(sousPartie => ({\n        ...sousPartie,\n        lignes: sousPartie.lignes.map(ligne => {\n          const situationLigne = situation.situation_lignes.find(l => l.ligne_devis === ligne.id);\n          return {\n            ...ligne,\n            pourcentage_precedent: situationLigne ? parseFloat(situationLigne.pourcentage_actuel) : 0,\n            pourcentage_actuel: isNewSituation ? situationLigne ? parseFloat(situationLigne.pourcentage_actuel) : 0 : situationLigne ? parseFloat(situationLigne.pourcentage_actuel) : 0\n          };\n        })\n      }))\n    }));\n    setStructure(newStructure);\n\n    // Mettre à jour les pourcentages des avenants\n    if (avenants.length > 0) {\n      const newAvenants = avenants.map(avenant => ({\n        ...avenant,\n        factures_ts: (avenant.factures_ts || []).map(ts => {\n          const situationTs = situation.situation_lignes_avenants.find(l => l.facture_ts === ts.id);\n          return {\n            ...ts,\n            pourcentage_precedent: situationTs ? parseFloat(situationTs.pourcentage_actuel) : 0,\n            pourcentage_actuel: isNewSituation ? situationTs ? parseFloat(situationTs.pourcentage_actuel) : 0 : situationTs ? parseFloat(situationTs.pourcentage_actuel) : 0\n          };\n        })\n      }));\n      setAvenants(newAvenants);\n    }\n\n    // Mettre à jour les lignes supplémentaires\n    if (isNewSituation && mergedLignes) {\n      setLignesSupplementaires(mergedLignes);\n    } else if (!isNewSituation && ((_situation$situation_ = situation.situation_lignes_supplementaires) === null || _situation$situation_ === void 0 ? void 0 : _situation$situation_.length) > 0) {\n      setLignesSupplementaires(situation.situation_lignes_supplementaires);\n    } else {\n      setLignesSupplementaires([]);\n    }\n\n    // Mettre à jour la retenue CIE\n    if (situation.retenue_cie) {\n      setRetenueCIE(parseFloat(situation.retenue_cie));\n    }\n  };\n\n  // Fonction pour réinitialiser les données\n  const resetSituationData = () => {\n    setTauxProrata(2.5); // Valeur par défaut\n    setLastSituation(null);\n    setLignesSupplementaires([]);\n    setRetenueCIE(0);\n\n    // Réinitialiser la structure avec des pourcentages à 0\n    const newStructure = structure.map(partie => ({\n      ...partie,\n      sous_parties: partie.sous_parties.map(sousPartie => ({\n        ...sousPartie,\n        lignes: sousPartie.lignes.map(ligne => ({\n          ...ligne,\n          pourcentage_precedent: 0,\n          pourcentage_actuel: 0\n        }))\n      }))\n    }));\n    setStructure(newStructure);\n  };\n\n  // Calculer le montant HT du mois à partir des lignes\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    let montantActuel = 0;\n\n    // Calculer le montant des lignes standard\n    structure.forEach(partie => {\n      partie.sous_parties.forEach(sousPartie => {\n        sousPartie.lignes.forEach(ligne => {\n          const montantLigne = parseFloat(ligne.total_ht || 0) * parseFloat(ligne.pourcentage_actuel || 0) / 100;\n          montantActuel += montantLigne;\n        });\n      });\n    });\n\n    // Ajouter le montant des TS (avenants)\n    avenants === null || avenants === void 0 || avenants.forEach(avenant => {\n      var _avenant$factures_ts2;\n      (_avenant$factures_ts2 = avenant.factures_ts) === null || _avenant$factures_ts2 === void 0 || _avenant$factures_ts2.forEach(ts => {\n        const montantTS = parseFloat(ts.montant_ht || 0) * parseFloat(ts.pourcentage_actuel || 0) / 100;\n        montantActuel += montantTS;\n      });\n    });\n\n    // Récupération du montant cumulé précédent\n    let montantCumulePrecedent = 0;\n    if (lastSituation) {\n      montantCumulePrecedent = parseFloat(lastSituation.montant_ht_mois || 0);\n    } else {}\n\n    // Le montant HT du mois est la différence entre le montant actuel et le cumul précédent\n    const montantHTMois = montantActuel - montantCumulePrecedent;\n    setMontantHTMois(montantHTMois);\n  }, [structure, avenants, lastSituation]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (open && chantier !== null && chantier !== void 0 && chantier.id && mois && annee) {\n      const fetchCIEFactures = async () => {\n        try {\n          const response = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/chantier/${chantier.id}/factures-cie/`, {\n            params: {\n              mois,\n              annee\n            }\n          });\n          setRetenueCIE(response.data.total);\n          setFacturesCIE(response.data.factures);\n        } catch (error) {\n          console.error("Erreur lors du chargement des factures CIE:", error);\n        }\n      };\n      fetchCIEFactures();\n    }\n  }, [open, chantier, mois, annee]);\n  const getComparisonColor = (current, previous) => {\n    if (current < previous) return "error.main"; // Rouge\n    if (current > previous) return "rgb(0, 223, 56)"; // Vert personnalisé\n    return "text.primary"; // Noir\n  };\n  const handlePourcentageChange = (ligneId, value, type = "standard") => {\n    let newValue = value === "" ? 0 : parseFloat(value);\n    newValue = Math.min(Math.max(newValue, 0), 100);\n    if (type === "avenant") {\n      const newAvenants = avenants.map(avenant => ({\n        ...avenant,\n        factures_ts: avenant.factures_ts.map(ts => {\n          if (ts.id === ligneId) {\n            const montantCalcule = parseFloat(ts.montant_ht || 0) * newValue / 100;\n            return {\n              ...ts,\n              pourcentage_actuel: newValue,\n              montant: montantCalcule\n            };\n          }\n          return ts;\n        })\n      }));\n      setAvenants(newAvenants);\n    } else if (type === "special") {\n      // Gestion des lignes spéciales\n      const newLignesSpeciales = lignesSpeciales.map(ligne => {\n        if (ligne.id === ligneId) {\n          return {\n            ...ligne,\n            pourcentage_actuel: newValue\n          };\n        }\n        return ligne;\n      });\n      setLignesSpeciales(newLignesSpeciales);\n    } else {\n      const newStructure = structure.map(partie => ({\n        ...partie,\n        sous_parties: partie.sous_parties.map(sousPartie => ({\n          ...sousPartie,\n          lignes: sousPartie.lignes.map(ligne => {\n            if (ligne.id === ligneId) {\n              return {\n                ...ligne,\n                pourcentage_actuel: newValue\n              };\n            }\n            return ligne;\n          })\n        }))\n      }));\n      setStructure(newStructure);\n    }\n  };\n\n  // Fonction pour récupérer le prochain numéro de situation\n  const getNextSituationNumber = async () => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/next-numero/chantier/${chantier.id}/`);\n      return response.data.numero;\n    } catch (error) {\n      console.error("Erreur lors de la récupération du numéro de situation:", error);\n      throw error;\n    }\n  };\n\n  // Fonction de calcul existante\n  const calculateMontants = () => {\n    if (!structure.length) return;\n\n    // Calcul du montant HT du mois\n    let montantHtMois = 0;\n    structure.forEach(partie => {\n      partie.sous_parties.forEach(sousPartie => {\n        sousPartie.lignes.forEach(ligne => {\n          const montant = parseFloat(ligne.total_ht || 0);\n          const pourcentage = parseFloat(ligne.pourcentage_actuel || 0);\n          montantHtMois += montant * pourcentage / 100;\n        });\n      });\n    });\n    const cumulPrecedent = calculerCumulPrecedent();\n    const retenueGarantie = montantHtMois * 0.05;\n    const montantProrata = montantHtMois * (parseFloat(tauxProrata) / 100);\n    const montantApresRetenues = montantHtMois - retenueGarantie - montantProrata - parseFloat(retenueCIE || 0);\n    const tva = montantApresRetenues * 0.2;\n    const montantTotal = montantHtMois + parseFloat(cumulPrecedent);\n    const pourcentageAvancement = totalHT > 0 ? montantTotal / totalHT * 100 : 0;\n    setCalculatedValues({\n      montant_ht_mois: montantHtMois.toFixed(2),\n      montant_precedent: montantHtMois.toFixed(2),\n      cumul_precedent: cumulPrecedent.toFixed(2),\n      retenue_garantie: retenueGarantie.toFixed(2),\n      montant_prorata: montantProrata.toFixed(2),\n      retenue_cie: retenueCIE || "0.00",\n      montant_apres_retenues: montantApresRetenues.toFixed(2),\n      montant_total: montantTotal.toFixed(2),\n      pourcentage_avancement: pourcentageAvancement.toFixed(2),\n      tva: tva.toFixed(2)\n    });\n  };\n\n  // Utiliser useEffect pour recalculer quand les données changent\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    calculateMontants();\n  }, [structure, avenants, tauxProrata, retenueCIE, lignesSupplementaires]);\n\n  // Fonction pour calculer le cumul des mois précédents\n  const calculerCumulPrecedent = () => {\n    // Si on a une situation précédente, utiliser son montant_total_cumul_ht\n    if (lastSituation && lastSituation.montant_total_cumul_ht) {\n      return parseFloat(lastSituation.montant_total_cumul_ht);\n    }\n\n    // Sinon, calculer à partir des pourcentages précédents (pour la première situation)\n    let montantTotal = 0;\n\n    // Calculer le total des lignes standard\n    structure.forEach(partie => {\n      partie.sous_parties.forEach(sousPartie => {\n        sousPartie.lignes.forEach(ligne => {\n          const montantLigne = ligne.total_ht * (ligne.pourcentage_precedent || 0) / 100;\n          montantTotal += montantLigne;\n        });\n      });\n    });\n\n    // Ajouter le montant des avenants avec les pourcentages précédents\n    avenants === null || avenants === void 0 || avenants.forEach(avenant => {\n      var _avenant$factures_ts3;\n      (_avenant$factures_ts3 = avenant.factures_ts) === null || _avenant$factures_ts3 === void 0 || _avenant$factures_ts3.forEach(ts => {\n        const montantTS = ts.montant_ht * (ts.pourcentage_precedent || 0) / 100;\n        montantTotal += montantTS;\n      });\n    });\n\n    // Ajouter le montant des lignes spéciales avec les pourcentages précédents\n    lignesSpeciales.forEach(ligne => {\n      const montantLigne = ligne.montant_ht * (ligne.pourcentage_precedent || 0) / 100;\n      if (ligne.type === "reduction") {\n        montantTotal -= montantLigne;\n      } else {\n        montantTotal += montantLigne;\n      }\n    });\n    return montantTotal;\n  };\n\n  // Fonction pour calculer le montant total cumulé HT (avec les changements actuels)\n  const calculerMontantTotalCumul = () => {\n    let montantTotal = 0;\n\n    // Calculer le total des lignes standard avec pourcentages actuels\n    structure.forEach(partie => {\n      partie.sous_parties.forEach(sousPartie => {\n        sousPartie.lignes.forEach(ligne => {\n          const montantLigne = ligne.total_ht * (ligne.pourcentage_actuel || 0) / 100;\n          montantTotal += montantLigne;\n        });\n      });\n    });\n\n    // Ajouter le montant des avenants avec les pourcentages actuels\n    avenants === null || avenants === void 0 || avenants.forEach(avenant => {\n      var _avenant$factures_ts4;\n      (_avenant$factures_ts4 = avenant.factures_ts) === null || _avenant$factures_ts4 === void 0 || _avenant$factures_ts4.forEach(ts => {\n        const montantTS = ts.montant_ht * (ts.pourcentage_actuel || 0) / 100;\n        montantTotal += montantTS;\n      });\n    });\n\n    // Ajouter le montant des lignes spéciales avec les pourcentages actuels\n    lignesSpeciales.forEach(ligne => {\n      const montantLigne = ligne.montant_ht * (ligne.pourcentage_actuel || 0) / 100;\n      if (ligne.type === "reduction") {\n        montantTotal -= montantLigne;\n      } else {\n        montantTotal += montantLigne;\n      }\n    });\n    return montantTotal;\n  };\n\n  // Fonction pour calculer le montant HT du mois (différence entre total et cumul précédent)\n  const calculerMontantHTMois = () => {\n    const montantTotalCumul = calculerMontantTotalCumul();\n    const cumulPrecedent = calculerCumulPrecedent();\n    return montantTotalCumul - cumulPrecedent;\n  };\n\n  // Fonction de soumission avec gestion des erreurs améliorée\n  const handleSubmit = async () => {\n    try {\n      if (!calculatedValues) {\n        throw new Error("Les calculs ne sont pas disponibles");\n      }\n\n      // Fonction helper pour formater les nombres\n      const formatNumber = num => {\n        if (num === null || num === undefined) return "0.00";\n        return parseFloat(num).toFixed(2);\n      };\n\n      // Récupérer le prochain numéro de situation\n      const situationNumero = await getNextSituationNumber();\n      const situationData = {\n        chantier: chantier.id,\n        devis: devis.id,\n        mois: parseInt(mois),\n        annee: parseInt(annee),\n        numero_situation: situationNumero,\n        // Extrait le numéro de situation\n        lignes: structure.flatMap(partie => partie.sous_parties.flatMap(sousPartie => sousPartie.lignes.map(ligne => ({\n          ligne_devis: ligne.id,\n          description: ligne.description,\n          quantite: formatNumber(ligne.quantite),\n          prix_unitaire: formatNumber(ligne.prix_unitaire),\n          total_ht: formatNumber(ligne.total_ht),\n          pourcentage_actuel: formatNumber(ligne.pourcentage_actuel),\n          montant: formatNumber(ligne.total_ht * ligne.pourcentage_actuel / 100)\n        })))),\n        montant_ht_mois: formatNumber(calculerMontantHTMois()),\n        cumul_precedent: formatNumber(calculerCumulPrecedent()),\n        montant_total_cumul_ht: formatNumber(calculerMontantTotalCumul()),\n        retenue_garantie: formatNumber(calculerMontantHTMois() * 0.05),\n        montant_prorata: formatNumber(calculerMontantHTMois() * (tauxProrata / 100)),\n        retenue_cie: formatNumber(retenueCIE),\n        montant_apres_retenues: formatNumber(calculerTotalNet()),\n        tva: formatNumber(calculerTotalNet() * 0.2),\n        montant_ttc: formatNumber(calculerTotalNet() * 1.2),\n        pourcentage_avancement: formatNumber(calculerMontantTotalCumul() / (totalHT + montantTotalAvenants) * 100),\n        taux_prorata: formatNumber(tauxProrata),\n        lignes_supplementaires: lignesSupplementaires.map(ligne => ({\n          description: ligne.description,\n          montant: formatNumber(ligne.montant),\n          type: ligne.type\n        })),\n        lignes_speciales: lignesSpeciales.map(ligne => ({\n          id: ligne.id,\n          description: ligne.description,\n          value: formatNumber(ligne.value),\n          valueType: ligne.valueType,\n          type: ligne.type,\n          niveau: ligne.niveau,\n          partie_id: ligne.partie_id,\n          sous_partie_id: ligne.sous_partie_id,\n          pourcentage_actuel: formatNumber(ligne.pourcentage_actuel || 0),\n          montant: formatNumber(ligne.montant_ht * (ligne.pourcentage_actuel || 0) / 100)\n        })),\n        lignes_avenant: avenants.flatMap(avenant => avenant.factures_ts.map(ts => ({\n          facture_ts: ts.id,\n          avenant_id: avenant.id,\n          montant_ht: formatNumber(ts.montant_ht || 0),\n          pourcentage_actuel: formatNumber(ts.pourcentage_actuel || 0),\n          montant: formatNumber(ts.montant_ht * (ts.pourcentage_actuel || 0) / 100)\n        }))),\n        montant_total_devis: formatNumber(totalHT),\n        montant_total_travaux: formatNumber(totalHT + montantTotalAvenants),\n        total_avancement: formatNumber(totalAvancement)\n      };\n      let response;\n      if (existingSituation) {\n        // Mise à jour d\'une situation existante\n        response = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].patch(`/api/situations/${existingSituation.id}/update/`, situationData);\n      } else {\n        // Création d\'une nouvelle situation\n        response = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].post("/api/situations/", situationData);\n\n        // Téléchargement automatique vers le Drive après création\n        try {\n          var _chantier$societe, _chantier$societe2;\n          console.log("🚀 Lancement du téléchargement automatique de la situation vers le Drive...");\n          const driveData = {\n            situationId: response.data.id,\n            chantierId: chantier.id,\n            chantierName: chantier.chantier_name || chantier.nom || "Chantier",\n            societeName: ((_chantier$societe = chantier.societe) === null || _chantier$societe === void 0 ? void 0 : _chantier$societe.nom_societe) || ((_chantier$societe2 = chantier.societe) === null || _chantier$societe2 === void 0 ? void 0 : _chantier$societe2.nom) || "Société",\n            numeroSituation: response.data.numero_situation\n          };\n          console.log("🔍 DEBUG SituationCreationModal - driveData:", driveData);\n          await (0,_utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_1__.generatePDFDrive)("situation", driveData);\n          console.log("✅ Situation téléchargée avec succès vers le Drive");\n        } catch (driveError) {\n          console.error("❌ Erreur lors du téléchargement automatique de la situation:", driveError);\n          // Ne pas bloquer la création de la situation si le téléchargement échoue\n        }\n      }\n      if (onCreated) onCreated();\n      onClose();\n    } catch (error) {\n      var _error$response;\n      console.error("Erreur lors de la sauvegarde:", error);\n      alert(`Erreur lors de la ${existingSituation ? "mise à jour" : "création"}: ${((_error$response = error.response) === null || _error$response === void 0 || (_error$response = _error$response.data) === null || _error$response === void 0 ? void 0 : _error$response.error) || error.message}`);\n    }\n  };\n  const handleAjoutLigne = () => {\n    setLignesSupplementaires([...lignesSupplementaires, {\n      description: "",\n      montant: 0,\n      type: "deduction"\n    }]);\n  };\n  const handleLigneChange = (index, field, value) => {\n    const newLignes = [...lignesSupplementaires];\n    newLignes[index][field] = value;\n    setLignesSupplementaires(newLignes);\n  };\n  const handleSupprimerLigne = index => {\n    setLignesSupplementaires(lignesSupplementaires.filter((_, i) => i !== index));\n  };\n\n  // Calcul du total avec les lignes supplémentaires\n  const calculerTotalNet = () => {\n    const montantHtMois = calculerMontantHTMois();\n\n    // Retenue de garantie (5%)\n    const retenueGarantie = montantHtMois * 0.05;\n\n    // Compte prorata (calculé sur le montant HT du mois)\n    const compteProrata = montantHtMois * (tauxProrata / 100);\n\n    // Retenue CIE\n    const retenueCIEValue = parseFloat(retenueCIE || 0);\n\n    // Montant après retenues\n    let total = montantHtMois - retenueGarantie - compteProrata - retenueCIEValue;\n\n    // Lignes supplémentaires\n    lignesSupplementaires.forEach(ligne => {\n      if (ligne.type === "deduction") {\n        total -= parseFloat(ligne.montant);\n      } else {\n        total += parseFloat(ligne.montant);\n      }\n    });\n    return total;\n  };\n  const updateCalculs = () => {\n    if (!structure.length) return;\n    const cumulPrecedent = calculerCumulPrecedent();\n    const montantTotalCumul = calculerMontantTotalCumul();\n    const montantHtMois = calculerMontantHTMois();\n    const montantTotalTravaux = totalHT + montantTotalAvenants;\n    const retenueGarantie = montantHtMois * 0.05;\n    const montantProrata = montantHtMois * (parseFloat(tauxProrata) / 100);\n    let montantApresRetenues = montantHtMois - retenueGarantie - montantProrata - parseFloat(retenueCIE || 0);\n\n    // Ajouter l\'impact des lignes supplémentaires\n    lignesSupplementaires.forEach(ligne => {\n      if (ligne.type === "deduction") {\n        montantApresRetenues -= parseFloat(ligne.montant);\n      } else {\n        montantApresRetenues += parseFloat(ligne.montant);\n      }\n    });\n    const tva = montantApresRetenues * 0.2;\n    const pourcentageAvancement = montantTotalTravaux > 0 ? montantTotalCumul / montantTotalTravaux * 100 : 0;\n    setCalculatedValues({\n      montant_ht_mois: montantHtMois.toFixed(2),\n      cumul_precedent: cumulPrecedent.toFixed(2),\n      montant_total_cumul: montantTotalCumul.toFixed(2),\n      retenue_garantie: retenueGarantie.toFixed(2),\n      montant_prorata: montantProrata.toFixed(2),\n      retenue_cie: retenueCIE || "0.00",\n      montant_apres_retenues: montantApresRetenues.toFixed(2),\n      pourcentage_avancement: pourcentageAvancement.toFixed(2),\n      tva: tva.toFixed(2)\n    });\n  };\n\n  // Utiliser useEffect pour recalculer quand les données changent\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    updateCalculs();\n  }, [structure, avenants, tauxProrata, retenueCIE, lignesSupplementaires, lignesSpeciales]);\n  const renderCalculs = () => {\n    if (!calculatedValues) return null;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n      container: true,\n      spacing: 2\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n      item: true,\n      xs: 12\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      variant: "h6"\n    }, "R\\xE9capitulatif des montants")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n      item: true,\n      xs: 6\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, "Montant HT du mois: ", calculatedValues.montant_ht_mois, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, "Montant pr\\xE9c\\xE9dent: ", calculatedValues.montant_precedent, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, "Cumul pr\\xE9c\\xE9dent: ", calculatedValues.cumul_precedent, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, "Retenue de garantie: ", calculatedValues.retenue_garantie, " \\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n      item: true,\n      xs: 6\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, "Montant prorata: ", calculatedValues.montant_prorata, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, "Retenue CIE: ", calculatedValues.retenue_cie, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, "Montant apr\\xE8s retenues: ", calculatedValues.montant_apres_retenues, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, "TVA: ", calculatedValues.tva, " \\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n      item: true,\n      xs: 12\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      variant: "h6"\n    }, "Montant total: ", calculatedValues.montant_total, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, "Pourcentage d\'avancement: ", calculatedValues.pourcentage_avancement, " ", "%")));\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (open) {\n      setMois(new Date().getMonth() + 1);\n    }\n  }, [open]);\n  if (!open || !devis || !chantier) return null;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    open: open,\n    onClose: onClose,\n    maxWidth: "lg",\n    fullWidth: true,\n    PaperProps: {\n      sx: {\n        minWidth: "1200px",\n        maxWidth: "95vw",\n        maxHeight: "95vh"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, existingSituation ? "Modification d\'une situation" : "Création d\'une situation"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "center",\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    variant: "h6",\n    component: "h2"\n  }, "Cr\\xE9ation d\'une situation - ", chantier.chantier_name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      border: "1px solid rgba(0, 0, 0, 0.23)",\n      borderRadius: 1,\n      padding: "8px 12px",\n      display: "flex",\n      flexDirection: "column",\n      gap: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    variant: "body2",\n    sx: {\n      fontWeight: "bold"\n    }\n  }, "Montant HT:", " ", totalHT.toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    variant: "body2",\n    sx: {\n      fontWeight: "bold"\n    }\n  }, "Montant total des travaux HT:", " ", (totalHT + montantTotalAvenants).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    variant: "body2",\n    sx: {\n      fontWeight: "bold"\n    }\n  }, "%Avancement: ", totalAvancement.toFixed(2), "%"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      mb: 3,\n      display: "flex",\n      gap: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    sx: {\n      minWidth: 200\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, "Mois"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    value: mois,\n    onChange: e => setMois(e.target.value),\n    label: "Mois"\n  }, Array.from({\n    length: 12\n  }, (_, i) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    key: i + 1,\n    value: i + 1\n  }, new Date(0, i).toLocaleString("default", {\n    month: "long"\n  }))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    label: "Ann\\xE9e",\n    type: "number",\n    value: annee,\n    onChange: e => setAnnee(e.target.value)\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    fullWidth: true,\n    label: "Taux compte prorata (%)",\n    type: "number",\n    value: tauxProrata,\n    onChange: e => setTauxProrata(e.target.value),\n    inputProps: {\n      step: "0.01",\n      min: "0",\n      max: "100"\n    },\n    sx: {\n      mb: 3,\n      width: "200px"\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_22__["default"],\n    sx: {\n      boxShadow: "0px 3px 8px rgba(0, 0, 0, 0.1)",\n      borderRadius: "4px",\n      overflow: "hidden"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    sx: {\n      minWidth: 1000\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "50px",\n      padding: "8px"\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "300px",\n      padding: "8px"\n    }\n  }, "Description"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "100px",\n      padding: "8px"\n    },\n    align: "right"\n  }, "Quantit\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, "Prix unitaire"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, "Total HT"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, "% Avancement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, "Montant"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, structure.map(partie => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(PartieRow, {\n    key: partie.id,\n    partie: partie,\n    handlePourcentageChange: handlePourcentageChange,\n    lignesSpeciales: lignesSpeciales\n  })), lignesSpeciales.filter(ligne => ligne.niveau === "global").map((ligne, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    key: ligne.id,\n    sx: {\n      backgroundColor: index % 2 === 0 ? "white" : "rgba(0, 0, 0, 0.05)",\n      "& td": {\n        padding: "8px"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "50px",\n      padding: "8px"\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "300px",\n      padding: "8px"\n    }\n  }, ligne.description, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    variant: "caption",\n    display: "block",\n    sx: {\n      color: "text.secondary"\n    }\n  }, "Ligne sp\\xE9ciale globale")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "100px",\n      padding: "8px"\n    },\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, ligne.type === "reduction" ? "-" : "", parseFloat(ligne.montant_ht).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    type: "number",\n    value: ligne.pourcentage_actuel || 0,\n    onChange: e => handlePourcentageChange(ligne.id, e.target.value, "special"),\n    onFocus: e => e.target.select(),\n    InputProps: {\n      inputProps: {\n        min: 0,\n        max: 100,\n        step: "any"\n      }\n    },\n    size: "small",\n    sx: {\n      width: "100px",\n      "& input": {\n        textAlign: "right"\n      }\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: "120px",\n      padding: "8px"\n    },\n    align: "right"\n  }, ligne.type === "reduction" ? "-" : "", (ligne.montant_ht * (ligne.pourcentage_actuel || 0) / 100).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(AvenantsPartieRow, {\n    avenants: avenants,\n    handlePourcentageChange: handlePourcentageChange\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_22__["default"],\n    sx: {\n      mt: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "Description"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    align: "right"\n  }, "Montant"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "Cumul mois pr\\xE9c\\xE9dent"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    align: "right"\n  }, calculerCumulPrecedent().toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "Montant total cumul HT"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    align: "right"\n  }, (() => {\n    const cumulPrecedent = calculerCumulPrecedent();\n    const montantTotalCumul = calculerMontantTotalCumul();\n    return montantTotalCumul.toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " ");\n  })(), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "Montant HT du mois"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    align: "right"\n  }, calculerMontantHTMois().toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "Retenue de garantie (5% HT du mois)"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    align: "right",\n    sx: {\n      color: "error.main"\n    }\n  }, "-", (calculerMontantHTMois() * 0.05).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "Compte prorata (", tauxProrata, "% HT du mois)"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    align: "right",\n    sx: {\n      color: "error.main"\n    }\n  }, "-", (calculerMontantHTMois() * (tauxProrata / 100)).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "Retenue CIE HT du mois"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    align: "right"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    type: "number",\n    value: retenueCIE,\n    onChange: e => setRetenueCIE(e.target.value),\n    inputProps: {\n      step: "0.01"\n    },\n    size: "small"\n  }), facturesCIE.length > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    variant: "caption",\n    display: "block",\n    sx: {\n      mt: 1,\n      color: "text.secondary"\n    }\n  }, "Factures incluses :", facturesCIE.map(f => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    key: f.id\n  }, f.numero, ":", " ", parseFloat(f.montant_ht).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), "\\u20AC")))))), lignesSupplementaires.map((ligne, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    key: index\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      display: "flex",\n      gap: 1,\n      alignItems: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    size: "small",\n    value: ligne.description,\n    onChange: e => handleLigneChange(index, "description", e.target.value),\n    placeholder: "Description",\n    fullWidth: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    size: "small",\n    value: ligne.type,\n    onChange: e => handleLigneChange(index, "type", e.target.value)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    value: "deduction"\n  }, "D\\xE9duction"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    value: "addition"\n  }, "Addition")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    align: "right"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      display: "flex",\n      gap: 1,\n      alignItems: "center"\n    }\n  }, ligne.type === "deduction" && "-", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    size: "small",\n    type: "number",\n    value: ligne.montant,\n    onChange: e => handleLigneChange(index, "montant", parseFloat(e.target.value)),\n    inputProps: {\n      step: "0.01"\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    size: "small",\n    onClick: () => handleSupprimerLigne(index),\n    sx: {\n      color: "red"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_5__.FaTrash, null)))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "Montant total du mois HT apr\\xE8s retenues"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    align: "right"\n  }, (() => {\n    let montantTotal = calculerMontantHTMois() - calculerMontantHTMois() * 0.05 - calculerMontantHTMois() * (tauxProrata / 100) - parseFloat(retenueCIE || 0);\n\n    // Appliquer les lignes supplémentaires\n    lignesSupplementaires.forEach(ligne => {\n      if (ligne.type === "deduction") {\n        montantTotal -= parseFloat(ligne.montant || 0);\n      } else {\n        montantTotal += parseFloat(ligne.montant || 0);\n      }\n    });\n    return montantTotal.toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " ");\n  })(), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "TVA (20%)"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    align: "right"\n  }, (() => {\n    let montantBase = calculerMontantHTMois() - calculerMontantHTMois() * 0.05 - calculerMontantHTMois() * (tauxProrata / 100) - parseFloat(retenueCIE || 0);\n\n    // Appliquer les lignes supplémentaires\n    lignesSupplementaires.forEach(ligne => {\n      if (ligne.type === "deduction") {\n        montantBase -= parseFloat(ligne.montant || 0);\n      } else {\n        montantBase += parseFloat(ligne.montant || 0);\n      }\n    });\n    return (montantBase * 0.2).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " ");\n  })(), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    sx: {\n      "& td": {\n        fontWeight: "bold"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "Montant total TTC \\xE0 payer"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    align: "right"\n  }, (() => {\n    let montantBase = calculerMontantHTMois() - calculerMontantHTMois() * 0.05 - calculerMontantHTMois() * (tauxProrata / 100) - parseFloat(retenueCIE || 0);\n\n    // Appliquer les lignes supplémentaires\n    lignesSupplementaires.forEach(ligne => {\n      if (ligne.type === "deduction") {\n        montantBase -= parseFloat(ligne.montant || 0);\n      } else {\n        montantBase += parseFloat(ligne.montant || 0);\n      }\n    });\n    return (montantBase * 1.2).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " ");\n  })(), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    colSpan: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    variant: "outlined",\n    size: "small",\n    onClick: handleAjoutLigne,\n    sx: {\n      mb: 2\n    }\n  }, "Ajouter une ligne"))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    onClick: handleSubmit,\n    color: "primary"\n  }, existingSituation ? "Mettre à jour la situation" : "Créer la situation")));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SituationCreationModal);\n\n//# sourceURL=webpack://frontend/./src/components/CreationDocument/SituationCreationModal.js?')},"./src/components/CreationFacture.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_x_date_pickers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/x-date-pickers */ "./node_modules/@mui/x-date-pickers/LocalizationProvider/LocalizationProvider.js");\n/* harmony import */ var _mui_x_date_pickers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/x-date-pickers */ "./node_modules/@mui/x-date-pickers/DatePicker/DatePicker.js");\n/* harmony import */ var _mui_x_date_pickers_AdapterDateFns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/x-date-pickers/AdapterDateFns */ "./node_modules/@mui/x-date-pickers/AdapterDateFns/index.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var date_fns_locale_fr__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns/locale/fr */ "./node_modules/date-fns/esm/locale/fr/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\n\n\n\n\n\n\nconst formatNumeroFacture = numeroDevis => {\n  if (!numeroDevis) return "";\n  return numeroDevis.replace(/^DEV-/, "FACT-");\n};\nconst CreationFacture = ({\n  devis,\n  onClose,\n  onSubmit\n}) => {\n  console.log("1. Devis reçu:", devis);\n  console.log("1.1 Nom du chantier:", devis === null || devis === void 0 ? void 0 : devis.chantier_name);\n  if (!devis || Array.isArray(devis) || !devis.id) {\n    console.error("Devis invalide:", devis);\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n      sx: {\n        p: 2\n      }\n    }, "Erreur: Devis invalide");\n  }\n  const [formData, setFormData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    numero_facture: formatNumeroFacture(devis === null || devis === void 0 ? void 0 : devis.numero),\n    adresse_facturation: "",\n    date_envoi: new Date(),\n    delai_paiement: 45,\n    mode_paiement: "virement"\n  });\n  const [societeData, setSocieteData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n\n  // Fonction pour calculer la date d\'échéance\n  const calculateDateEcheance = (dateEnvoi, delaiPaiement) => {\n    if (!dateEnvoi || !delaiPaiement) return null;\n    const dateEcheance = new Date(dateEnvoi);\n    dateEcheance.setDate(dateEcheance.getDate() + delaiPaiement);\n    return dateEcheance;\n  };\n\n  // Calculer la date d\'échéance automatiquement\n  const dateEcheanceCalculee = calculateDateEcheance(formData.date_envoi, formData.delai_paiement);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const fetchSocieteData = async () => {\n      try {\n        console.log("2. Tentative de chargement du chantier");\n        if (devis !== null && devis !== void 0 && devis.chantier_name) {\n          console.log("3. Nom du chantier trouvé:", devis.chantier_name);\n          // Récupérer d\'abord tous les chantiers\n          const response = await axios__WEBPACK_IMPORTED_MODULE_2__["default"].get("/api/chantier/");\n          const chantiers = response.data;\n          console.log("4. Liste des chantiers reçue, nombre:", chantiers.length);\n          console.log("4.1 Chantiers disponibles:", chantiers);\n\n          // Trouver le chantier correspondant\n          const chantierData = chantiers.find(c => c.chantier_name === devis.chantier_name);\n          console.log("5. Chantier trouvé:", chantierData);\n          console.log("5.1 Structure complète du chantier:", JSON.stringify(chantierData, null, 2));\n          if (chantierData) {\n            console.log("5.2 Propriétés du chantier:", Object.keys(chantierData));\n            const societeId = chantierData.societe;\n            console.log("5.3 ID de la société extrait:", societeId);\n            if (societeId) {\n              console.log("6. ID de la société trouvé:", societeId);\n\n              // Récupérer les données complètes de la société\n              const societeResponse = await axios__WEBPACK_IMPORTED_MODULE_2__["default"].get(`/api/societe/${societeId}/`);\n              const societeComplete = societeResponse.data;\n              console.log("7. Données complètes de la société:", societeComplete);\n              setSocieteData(societeComplete);\n              const address = `${societeComplete.nom_societe || ""}\n                ${societeComplete.rue_societe || ""}\n                ${societeComplete.codepostal_societe || ""} ${societeComplete.ville_societe || ""}`.trim();\n              setFormData(prev => ({\n                ...prev,\n                adresse_facturation: address\n              }));\n            } else {\n              console.warn("5.4 Pas d\'ID de société dans le chantier");\n            }\n          } else {\n            console.warn("5.5 Chantier non trouvé avec le nom:", devis.chantier_name);\n          }\n        }\n      } catch (error) {\n        var _error$response;\n        console.error("Erreur lors du chargement des données:", {\n          message: error.message,\n          response: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data,\n          stack: error.stack\n        });\n      }\n    };\n    fetchSocieteData();\n  }, [devis]);\n  console.log("4. État initial formData:", formData);\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    console.log("8. Changement d\'input:", {\n      name,\n      value\n    });\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      if (!devis) {\n        throw new Error("Aucun devis fourni");\n      }\n\n      // Calculer la date d\'échéance basée sur la date d\'envoi et le délai\n      const dateEcheanceFormatted = dateEcheanceCalculee ? dateEcheanceCalculee.toISOString().split("T")[0] : null;\n      const factureData = {\n        numero: formData.numero_facture,\n        devis: devis.id,\n        date_echeance: dateEcheanceFormatted,\n        mode_paiement: formData.mode_paiement\n      };\n      console.log("Données de la facture à envoyer:", factureData);\n      await onSubmit(factureData);\n      onClose();\n    } catch (error) {\n      console.error("Erreur lors de la création de la facture:", error);\n      alert(`Erreur lors de la création de la facture: ${error.message}`);\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("form", {\n    onSubmit: handleSubmit\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    fullWidth: true,\n    label: "Num\\xE9ro de facture",\n    name: "numero_facture",\n    value: formData.numero_facture,\n    onChange: handleInputChange,\n    required: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    fullWidth: true,\n    label: "Adresse de facturation",\n    name: "adresse_facturation",\n    value: formData.adresse_facturation,\n    onChange: handleInputChange,\n    multiline: true,\n    rows: 4,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_x_date_pickers__WEBPACK_IMPORTED_MODULE_4__.LocalizationProvider, {\n    dateAdapter: _mui_x_date_pickers_AdapterDateFns__WEBPACK_IMPORTED_MODULE_5__.AdapterDateFns,\n    adapterLocale: date_fns_locale_fr__WEBPACK_IMPORTED_MODULE_6__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_x_date_pickers__WEBPACK_IMPORTED_MODULE_7__.DatePicker, {\n    label: "Date d\'envoi",\n    value: formData.date_envoi,\n    onChange: date => setFormData({\n      ...formData,\n      date_envoi: date\n    }),\n    renderInput: params => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], _extends({}, params, {\n      fullWidth: true,\n      margin: "normal"\n    }))\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    fullWidth: true,\n    select: true,\n    label: "D\\xE9lai de paiement",\n    name: "delai_paiement",\n    value: formData.delai_paiement,\n    onChange: handleInputChange,\n    margin: "normal",\n    required: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: 45\n  }, "45 jours"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: 60\n  }, "60 jours")), dateEcheanceCalculee && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      mt: 2,\n      p: 2,\n      bgcolor: "grey.100",\n      borderRadius: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong", null, "Date de paiement pr\\xE9vue :"), " ", dateEcheanceCalculee.toLocaleDateString("fr-FR"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    fullWidth: true,\n    label: "Mode de paiement",\n    name: "mode_paiement",\n    value: formData.mode_paiement,\n    onChange: handleInputChange,\n    margin: "normal",\n    required: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      mt: 2,\n      display: "flex",\n      justifyContent: "flex-end",\n      gap: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: onClose,\n    variant: "outlined"\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    type: "submit",\n    variant: "contained",\n    color: "primary"\n  }, "Cr\\xE9er la facture"))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CreationFacture);\n\n//# sourceURL=webpack://frontend/./src/components/CreationFacture.js?')},"./src/components/CreationPartie.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fa__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-icons/fa */ "./node_modules/react-icons/fa/index.mjs");\n/* harmony import */ var _static_css_creationPartie_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../static/css/creationPartie.css */ "./static/css/creationPartie.css");\n\n\n\n\nconst CreationPartie = ({\n  refreshData\n}) => {\n  const [showCreationForm, setShowCreationForm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [creationType, setCreationType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""); // \'partie\', \'sousPartie\', \'ligne\'\n  const [newPartie, setNewPartie] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [newSousPartie, setNewSousPartie] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [selectedPartieType, setSelectedPartieType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("PEINTURE");\n  const [lignesDetails, setLignesDetails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [selectedPartieId, setSelectedPartieId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [selectedSousPartieId, setSelectedSousPartieId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [parties, setParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [sousPartiesFiltered, setSousPartiesFiltered] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]); // Sous-parties filtrées\n\n  // États pour la gestion dynamique des domaines\n  const [availableDomaines, setAvailableDomaines] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [newDomaine, setNewDomaine] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [showNewDomaineInput, setShowNewDomaineInput] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    loadDomaines();\n    loadParties();\n  }, []);\n\n  // Charger les domaines disponibles\n  const loadDomaines = () => {\n    axios__WEBPACK_IMPORTED_MODULE_2__["default"].get("/api/parties/domaines/").then(response => {\n      setAvailableDomaines(response.data);\n      // Si aucun domaine n\'est sélectionné, prendre le premier disponible\n      if (!selectedPartieType && response.data.length > 0) {\n        setSelectedPartieType(response.data[0]);\n      }\n    }).catch(error => {\n      console.error("Erreur lors du chargement des domaines", error);\n    });\n  };\n  const loadParties = (type = null) => {\n    const url = type ? `/api/parties/?type=${type}` : "/api/parties/";\n    axios__WEBPACK_IMPORTED_MODULE_2__["default"].get(url).then(response => {\n      setParties(response.data);\n    }).catch(error => {\n      console.error("Erreur lors du chargement des parties", error);\n    });\n  };\n  const loadSousParties = partieId => {\n    if (partieId) {\n      axios__WEBPACK_IMPORTED_MODULE_2__["default"].get(`/api/sous-parties/?partie=${partieId}`).then(response => {\n        setSousPartiesFiltered(response.data); // Charger uniquement les sous-parties liées à la partie sélectionnée\n      }).catch(error => {\n        console.error("Erreur lors du chargement des sous-parties", error);\n      });\n    }\n  };\n  const handleAddLigneDetail = () => {\n    setLignesDetails([...lignesDetails, {\n      description: "",\n      unite: "",\n      prix: ""\n    }]);\n  };\n  const handleLigneDetailChange = (index, field, value) => {\n    const newLignesDetails = [...lignesDetails];\n    newLignesDetails[index][field] = value;\n    setLignesDetails(newLignesDetails);\n  };\n\n  // Fonction pour ajouter un nouveau domaine\n  const handleAddNewDomaine = () => {\n    if (newDomaine.trim() && !availableDomaines.includes(newDomaine.trim())) {\n      setAvailableDomaines(prev => [...prev, newDomaine.trim()].sort());\n      setSelectedPartieType(newDomaine.trim());\n      setNewDomaine("");\n      setShowNewDomaineInput(false);\n    }\n  };\n  const handleCreationSubmit = () => {\n    if (creationType === "partie") {\n      if (!newPartie.trim()) {\n        alert("Le titre de la nouvelle partie est obligatoire.");\n        return;\n      }\n      axios__WEBPACK_IMPORTED_MODULE_2__["default"].post("/api/parties/", {\n        titre: newPartie,\n        type: selectedPartieType\n      }).then(response => {\n        const partieId = response.data.id;\n        if (newSousPartie.trim()) {\n          axios__WEBPACK_IMPORTED_MODULE_2__["default"].post("/api/sous-parties/", {\n            description: newSousPartie,\n            partie: partieId\n          }).then(response => {\n            const sousPartieId = response.data.id;\n            lignesDetails.forEach(ligneDetail => {\n              if (ligneDetail.description.trim() && ligneDetail.unite.trim() && ligneDetail.prix.trim()) {\n                axios__WEBPACK_IMPORTED_MODULE_2__["default"].post("/api/ligne-details/", {\n                  description: ligneDetail.description,\n                  unite: ligneDetail.unite,\n                  prix: ligneDetail.prix,\n                  sous_partie: sousPartieId\n                });\n              }\n            });\n            refreshData(); // Rafraîchir les données dynamiquement après la création\n            loadDomaines(); // Recharger les domaines disponibles\n            resetForm();\n          });\n        } else {\n          refreshData(); // Rafraîchir les données après la création de la partie seule\n          loadDomaines(); // Recharger les domaines disponibles\n          resetForm();\n        }\n      }).catch(error => {\n        console.error("Erreur lors de la création de la nouvelle partie", error);\n      });\n    } else if (creationType === "sousPartie") {\n      if (!newSousPartie.trim() || !selectedPartieId) {\n        alert("La sous-partie et la partie associée sont obligatoires.");\n        return;\n      }\n      axios__WEBPACK_IMPORTED_MODULE_2__["default"].post("/api/sous-parties/", {\n        description: newSousPartie,\n        partie: selectedPartieId\n      }).then(response => {\n        const sousPartieId = response.data.id;\n        lignesDetails.forEach(ligneDetail => {\n          if (ligneDetail.description.trim() && ligneDetail.unite.trim() && ligneDetail.prix.trim()) {\n            axios__WEBPACK_IMPORTED_MODULE_2__["default"].post("/api/ligne-details/", {\n              description: ligneDetail.description,\n              unite: ligneDetail.unite,\n              prix: ligneDetail.prix,\n              sous_partie: sousPartieId\n            });\n          }\n        });\n        refreshData(); // Rafraîchir les données après la création de la sous-partie\n        resetForm();\n      }).catch(error => {\n        console.error("Erreur lors de la création de la sous-partie", error);\n      });\n    } else if (creationType === "ligne") {\n      if (!selectedSousPartieId) {\n        alert("La sous-partie associée est obligatoire.");\n        return;\n      }\n      lignesDetails.forEach(ligneDetail => {\n        if (ligneDetail.description.trim() && ligneDetail.unite.trim() && ligneDetail.prix.trim()) {\n          axios__WEBPACK_IMPORTED_MODULE_2__["default"].post("/api/ligne-details/", {\n            description: ligneDetail.description,\n            unite: ligneDetail.unite,\n            prix: ligneDetail.prix,\n            sous_partie: selectedSousPartieId\n          }).then(() => {\n            refreshData(); // Rafraîchir les données après la création de la ligne de détail\n            resetForm();\n          }).catch(error => {\n            console.error("Erreur lors de la création de la ligne de détail", error);\n          });\n        }\n      });\n    }\n  };\n  const resetForm = () => {\n    setNewPartie("");\n    setNewSousPartie("");\n    setSelectedPartieType("PEINTURE");\n    setSelectedPartieId("");\n    setSelectedSousPartieId("");\n    setLignesDetails([]);\n    setNewDomaine("");\n    setShowNewDomaineInput(false);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "creation-partie-container"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    className: "add-button",\n    onClick: () => setShowCreationForm(!showCreationForm)\n  }, showCreationForm ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_3__.FaMinusCircle, null) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_3__.FaPlusCircle, null), " Nouvelle Partie")), showCreationForm && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "creation-form"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("h2", null, "Cr\\xE9ation d\'une Nouvelle Partie, Sous-Partie ou Ligne de D\\xE9tail"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Type de cr\\xE9ation: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("select", {\n    value: creationType,\n    onChange: e => setCreationType(e.target.value)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    value: ""\n  }, "-- Choisir un type --"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    value: "partie"\n  }, "Nouvelle Partie"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    value: "sousPartie"\n  }, "Nouvelle Sous-Partie"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    value: "ligne"\n  }, "Nouvelle Ligne de D\\xE9tail"))), creationType === "partie" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "new-creation-section"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Type de domaine: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("select", {\n    value: selectedPartieType,\n    onChange: e => setSelectedPartieType(e.target.value)\n  }, availableDomaines.map(domaine => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    key: domaine,\n    value: domaine\n  }, domaine))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    type: "button",\n    onClick: () => setShowNewDomaineInput(!showNewDomaineInput),\n    style: {\n      marginLeft: "10px",\n      padding: "5px 10px"\n    }\n  }, "+ Nouveau domaine")), showNewDomaineInput && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    style: {\n      marginTop: "10px",\n      display: "flex",\n      gap: "10px",\n      alignItems: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "text",\n    placeholder: "Nom du nouveau domaine",\n    value: newDomaine,\n    onChange: e => setNewDomaine(e.target.value),\n    onKeyPress: e => e.key === "Enter" && handleAddNewDomaine()\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    type: "button",\n    onClick: handleAddNewDomaine,\n    disabled: !newDomaine.trim()\n  }, "Ajouter"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    type: "button",\n    onClick: () => {\n      setShowNewDomaineInput(false);\n      setNewDomaine("");\n    }\n  }, "Annuler")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Nouvelle Partie: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "text",\n    value: newPartie,\n    onChange: e => setNewPartie(e.target.value)\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Nouvelle Sous-Partie: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "text",\n    value: newSousPartie,\n    onChange: e => setNewSousPartie(e.target.value)\n  })), lignesDetails.map((ligne, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    key: index,\n    className: "ligne-detail"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Ligne de D\\xE9tail: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "text",\n    value: ligne.description,\n    onChange: e => handleLigneDetailChange(index, "description", e.target.value)\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Unit\\xE9: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "text",\n    value: ligne.unite,\n    onChange: e => handleLigneDetailChange(index, "unite", e.target.value)\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Prix: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "number",\n    step: "0.01",\n    value: ligne.prix,\n    onChange: e => handleLigneDetailChange(index, "prix", e.target.value)\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    onClick: handleAddLigneDetail\n  }, "Ajouter une Ligne de D\\xE9tail")), creationType === "sousPartie" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "new-creation-section"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Type de domaine: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("select", {\n    value: selectedPartieType,\n    onChange: e => {\n      setSelectedPartieType(e.target.value);\n      setSelectedPartieId("");\n      loadParties(e.target.value);\n    }\n  }, availableDomaines.map(domaine => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    key: domaine,\n    value: domaine\n  }, domaine))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    type: "button",\n    onClick: () => setShowNewDomaineInput(!showNewDomaineInput),\n    style: {\n      marginLeft: "10px",\n      padding: "5px 10px"\n    }\n  }, "+ Nouveau domaine")), showNewDomaineInput && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    style: {\n      marginTop: "10px",\n      display: "flex",\n      gap: "10px",\n      alignItems: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "text",\n    placeholder: "Nom du nouveau domaine",\n    value: newDomaine,\n    onChange: e => setNewDomaine(e.target.value),\n    onKeyPress: e => e.key === "Enter" && handleAddNewDomaine()\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    type: "button",\n    onClick: handleAddNewDomaine,\n    disabled: !newDomaine.trim()\n  }, "Ajouter"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    type: "button",\n    onClick: () => {\n      setShowNewDomaineInput(false);\n      setNewDomaine("");\n    }\n  }, "Annuler")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Associer \\xE0 une Partie: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("select", {\n    value: selectedPartieId,\n    onChange: e => {\n      setSelectedPartieId(e.target.value);\n      loadSousParties(e.target.value);\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    value: ""\n  }, "-- S\\xE9lectionner une Partie --"), parties.map(partie => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    key: partie.id,\n    value: partie.id\n  }, partie.titre, " (", partie.type, ")")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Nouvelle Sous-Partie: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "text",\n    value: newSousPartie,\n    onChange: e => setNewSousPartie(e.target.value)\n  })), lignesDetails.map((ligne, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    key: index,\n    className: "ligne-detail"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Ligne de D\\xE9tail: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "text",\n    value: ligne.description,\n    onChange: e => handleLigneDetailChange(index, "description", e.target.value)\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Unit\\xE9: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "text",\n    value: ligne.unite,\n    onChange: e => handleLigneDetailChange(index, "unite", e.target.value)\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Prix: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "number",\n    step: "0.01",\n    value: ligne.prix,\n    onChange: e => handleLigneDetailChange(index, "prix", e.target.value)\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    onClick: handleAddLigneDetail\n  }, "Ajouter une Ligne de D\\xE9tail")), creationType === "ligne" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "new-creation-section"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Type de domaine: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("select", {\n    value: selectedPartieType,\n    onChange: e => {\n      setSelectedPartieType(e.target.value);\n      setSelectedPartieId("");\n      setSelectedSousPartieId("");\n      loadParties(e.target.value);\n    }\n  }, availableDomaines.map(domaine => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    key: domaine,\n    value: domaine\n  }, domaine))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    type: "button",\n    onClick: () => setShowNewDomaineInput(!showNewDomaineInput),\n    style: {\n      marginLeft: "10px",\n      padding: "5px 10px"\n    }\n  }, "+ Nouveau domaine")), showNewDomaineInput && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    style: {\n      marginTop: "10px",\n      display: "flex",\n      gap: "10px",\n      alignItems: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "text",\n    placeholder: "Nom du nouveau domaine",\n    value: newDomaine,\n    onChange: e => setNewDomaine(e.target.value),\n    onKeyPress: e => e.key === "Enter" && handleAddNewDomaine()\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    type: "button",\n    onClick: handleAddNewDomaine,\n    disabled: !newDomaine.trim()\n  }, "Ajouter"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    type: "button",\n    onClick: () => {\n      setShowNewDomaineInput(false);\n      setNewDomaine("");\n    }\n  }, "Annuler")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Associer \\xE0 une Partie: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("select", {\n    value: selectedPartieId // État pour la partie sélectionnée\n    ,\n    onChange: e => {\n      setSelectedPartieId(e.target.value); // Mise à jour de la partie sélectionnée\n      loadSousParties(e.target.value); // Charger les sous-parties de la partie sélectionnée\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    value: ""\n  }, "-- S\\xE9lectionner une Partie --"), parties.map(partie => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    key: partie.id,\n    value: partie.id\n  }, partie.titre, " (", partie.type, ")")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Associer \\xE0 une Sous-Partie: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("select", {\n    value: selectedSousPartieId,\n    onChange: e => setSelectedSousPartieId(e.target.value)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    value: ""\n  }, "-- S\\xE9lectionner une Sous-Partie --"), sousPartiesFiltered.length > 0 ? sousPartiesFiltered.map(sousPartie => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    key: sousPartie.id,\n    value: sousPartie.id\n  }, sousPartie.description)) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    value: ""\n  }, "Aucune sous-partie disponible"))), lignesDetails.map((ligne, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    key: index,\n    className: "ligne-detail"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Ligne de D\\xE9tail: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "text",\n    value: ligne.description,\n    onChange: e => handleLigneDetailChange(index, "description", e.target.value)\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Unit\\xE9: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "text",\n    value: ligne.unite,\n    onChange: e => handleLigneDetailChange(index, "unite", e.target.value)\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", null, "Prix: "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "number",\n    step: "0.01",\n    value: ligne.prix,\n    onChange: e => handleLigneDetailChange(index, "prix", e.target.value)\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    onClick: handleAddLigneDetail\n  }, "Ajouter une Ligne de D\\xE9tail")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    className: "valider",\n    onClick: handleCreationSubmit\n  }, "Valider"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    className: "supprimer",\n    onClick: resetForm\n  }, "Reset")));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CreationPartie);\n\n//# sourceURL=webpack://frontend/./src/components/CreationPartie.js?')},"./src/components/CreationSituation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableCell/TableCell.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Collapse/Collapse.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Grid/Grid.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputLabel/InputLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableContainer/TableContainer.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fa__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-icons/fa */ "./node_modules/react-icons/fa/index.mjs");\n\n\n\n\nconst MOIS = [{\n  value: 1,\n  label: "Janvier"\n}, {\n  value: 2,\n  label: "Février"\n}, {\n  value: 3,\n  label: "Mars"\n}, {\n  value: 4,\n  label: "Avril"\n}, {\n  value: 5,\n  label: "Mai"\n}, {\n  value: 6,\n  label: "Juin"\n}, {\n  value: 7,\n  label: "Juillet"\n}, {\n  value: 8,\n  label: "Août"\n}, {\n  value: 9,\n  label: "Septembre"\n}, {\n  value: 10,\n  label: "Octobre"\n}, {\n  value: 11,\n  label: "Novembre"\n}, {\n  value: 12,\n  label: "Décembre"\n}];\nconst style = {\n  position: "absolute",\n  top: "50%",\n  left: "50%",\n  transform: "translate(-50%, -50%)",\n  width: "90%",\n  maxHeight: "90vh",\n  bgcolor: "background.paper",\n  boxShadow: 24,\n  p: 4,\n  borderRadius: 2,\n  overflow: "auto"\n};\n\n// Composant pour une ligne de partie\nconst PartieRow = ({\n  partie,\n  handlePourcentageChange\n}) => {\n  const [open, setOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // Calculer le pourcentage moyen et le montant de la partie directement\n  let moyennePartie = 0;\n  let montantPartie = 0;\n  if (partie.sous_parties.length > 0) {\n    let totalPourcentage = 0;\n    partie.sous_parties.forEach(sousPartie => {\n      if (sousPartie.lignes.length > 0) {\n        const pourcentageSousPartie = sousPartie.lignes.reduce((acc, ligne) => acc + (ligne.pourcentage_actuel || 0), 0) / sousPartie.lignes.length;\n        totalPourcentage += pourcentageSousPartie;\n        montantPartie += sousPartie.lignes.reduce((acc, ligne) => acc + ligne.total_ht * (ligne.pourcentage_actuel || 0) / 100, 0);\n      }\n    });\n    moyennePartie = totalPourcentage / partie.sous_parties.length;\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      backgroundColor: "rgba(27, 120, 188, 1)",\n      "& td": {\n        color: "white",\n        padding: "8px"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    size: "small",\n    onClick: () => setOpen(!open),\n    sx: {\n      color: "white"\n    }\n  }, open ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_4__.FaChevronUp, null) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_4__.FaChevronDown, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, partie.titre), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "center"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "center"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "center"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, moyennePartie.toFixed(2), "%"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, montantPartie.toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " \\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    style: {\n      padding: 0\n    },\n    colSpan: 7\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    in: open,\n    timeout: "auto",\n    unmountOnExit: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, partie.sous_parties.map(sousPartie => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(SousPartieTable, {\n    key: sousPartie.id,\n    sousPartie: sousPartie,\n    handlePourcentageChange: handlePourcentageChange\n  })))))));\n};\n\n// Composant pour une sous-partie\nconst SousPartieTable = ({\n  sousPartie,\n  handlePourcentageChange\n}) => {\n  const [open, setOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // Calculer le pourcentage moyen et le montant de la sous-partie directement\n  let moyenneSousPartie = 0;\n  let montantSousPartie = 0;\n  if (sousPartie.lignes.length > 0) {\n    moyenneSousPartie = sousPartie.lignes.reduce((acc, ligne) => acc + (ligne.pourcentage_actuel || 0), 0) / sousPartie.lignes.length;\n    montantSousPartie = sousPartie.lignes.reduce((acc, ligne) => acc + ligne.total_ht * (ligne.pourcentage_actuel || 0) / 100, 0);\n  }\n  const getComparisonColor = (current, previous) => {\n    if (current < previous) return "error.main"; // Rouge\n    if (current > previous) return "rgb(0, 223, 56)"; // Vert personnalisé\n    return "text.primary"; // Noir\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      backgroundColor: "rgb(157, 197, 226)",\n      "& td": {\n        padding: "8px"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    size: "small",\n    onClick: () => setOpen(!open)\n  }, open ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_4__.FaChevronUp, null) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_4__.FaChevronDown, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, sousPartie.description), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, moyenneSousPartie.toFixed(2), "%"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, montantSousPartie.toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    in: open,\n    timeout: "auto",\n    unmountOnExit: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, sousPartie.lignes.map((ligne, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    key: ligne.id,\n    sx: {\n      backgroundColor: index % 2 === 0 ? "white" : "rgba(0, 0, 0, 0.05)",\n      "& td": {\n        padding: "8px"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, ligne.description), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, ligne.quantite), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, ligne.prix_unitaire, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, ligne.total_ht, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    type: "number",\n    value: ligne.pourcentage_actuel || 0,\n    onChange: e => handlePourcentageChange(ligne.id, e.target.value),\n    onFocus: e => e.target.select(),\n    InputProps: {\n      inputProps: {\n        min: 0,\n        max: 100,\n        step: "any"\n      }\n    },\n    size: "small",\n    sx: {\n      width: "100px",\n      "& input": {\n        textAlign: "right",\n        color: getComparisonColor(ligne.pourcentage_actuel || 0, ligne.pourcentage_precedent || 0)\n      }\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right",\n    sx: {\n      color: getComparisonColor(ligne.pourcentage_actuel || 0, ligne.pourcentage_precedent || 0),\n      fontWeight: "bold"\n    }\n  }, (ligne.total_ht * (ligne.pourcentage_actuel || 0) / 100).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC")))))));\n};\n\n// Composant pour une sous-partie Avenant\nconst AvenantSousPartieTable = ({\n  avenant,\n  handlePourcentageChange\n}) => {\n  const [open, setOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // Calculer le pourcentage moyen et le montant de l\'avenant\n  let moyenneSousPartie = 0;\n  let montantSousPartie = 0;\n  if (avenant.factures_ts && avenant.factures_ts.length > 0) {\n    moyenneSousPartie = avenant.factures_ts.reduce((acc, ts) => acc + (ts.pourcentage_actuel || 0), 0) / avenant.factures_ts.length;\n    montantSousPartie = avenant.factures_ts.reduce((acc, ts) => acc + ts.montant_ht * (ts.pourcentage_actuel || 0) / 100, 0);\n  }\n  const getComparisonColor = (current, previous) => {\n    if (current < previous) return "error.main"; // Rouge\n    if (current > previous) return "rgb(0, 223, 56)"; // Vert personnalisé\n    return "text.primary"; // Noir\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      backgroundColor: "rgb(157, 197, 226)",\n      "& td": {\n        padding: "8px"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    size: "small",\n    onClick: () => setOpen(!open)\n  }, open ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_4__.FaChevronUp, null) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_4__.FaChevronDown, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Avenant n\\xB0", avenant.numero), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "center"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "center"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, avenant.montant_total, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, moyenneSousPartie.toFixed(2), "%"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, montantSousPartie.toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    style: {\n      padding: 0\n    },\n    colSpan: 7\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    in: open,\n    timeout: "auto",\n    unmountOnExit: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, avenant.factures_ts.map((ts, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    key: ts.id,\n    sx: {\n      backgroundColor: index % 2 === 0 ? "white" : "rgba(0, 0, 0, 0.05)",\n      "& td": {\n        padding: "8px"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, ts.devis_numero || `TS n°${String(ts.numero_ts).padStart(3, "0")}`, ts.designation), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "center"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "center"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, ts.montant_ht, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    type: "number",\n    value: ts.pourcentage_actuel || 0,\n    onChange: e => {\n      const newValue = e.target.value;\n      handlePourcentageChange(ts.id, newValue, "avenant");\n    },\n    onFocus: e => e.target.select(),\n    InputProps: {\n      inputProps: {\n        min: 0,\n        max: 100,\n        step: "any"\n      }\n    },\n    size: "small",\n    sx: {\n      width: "100px",\n      "& input": {\n        textAlign: "right",\n        color: getComparisonColor(ts.pourcentage_actuel || 0, ts.pourcentage_precedent || 0)\n      }\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right",\n    sx: {\n      color: getComparisonColor(ts.pourcentage_actuel || 0, ts.pourcentage_precedent || 0),\n      fontWeight: "bold"\n    }\n  }, (ts.montant_ht * (ts.pourcentage_actuel || 0) / 100).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC")))))))))));\n};\n\n// Composant pour la partie Avenants\nconst AvenantsPartieRow = ({\n  avenants,\n  handlePourcentageChange\n}) => {\n  const [open, setOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // Calculer le pourcentage moyen et le montant total des avenants\n  let moyennePartie = 0;\n  let montantPartie = 0;\n  if (avenants && avenants.length > 0) {\n    let totalPourcentage = 0;\n    avenants.forEach(avenant => {\n      if (avenant.factures_ts && avenant.factures_ts.length > 0) {\n        const pourcentageAvenant = avenant.factures_ts.reduce((acc, ts) => acc + (ts.pourcentage_actuel || 0), 0) / avenant.factures_ts.length;\n        totalPourcentage += pourcentageAvenant;\n        montantPartie += avenant.factures_ts.reduce((acc, ts) => acc + ts.montant_ht * (ts.pourcentage_actuel || 0) / 100, 0);\n      }\n    });\n    moyennePartie = totalPourcentage / avenants.length;\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      backgroundColor: "rgba(27, 120, 188, 1)",\n      "& td": {\n        color: "white",\n        padding: "8px"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    size: "small",\n    onClick: () => setOpen(!open),\n    sx: {\n      color: "white"\n    }\n  }, open ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_4__.FaChevronUp, null) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_4__.FaChevronDown, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Avenants"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "center"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "center"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, avenants === null || avenants === void 0 ? void 0 : avenants.reduce((acc, av) => acc + parseFloat(av.montant_total), 0).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, moyennePartie.toFixed(2), "%"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, montantPartie.toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " \\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    style: {\n      padding: 0\n    },\n    colSpan: 7\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    in: open,\n    timeout: "auto",\n    unmountOnExit: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, avenants === null || avenants === void 0 ? void 0 : avenants.map(avenant => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(AvenantSousPartieTable, {\n    key: avenant.id,\n    avenant: avenant,\n    handlePourcentageChange: handlePourcentageChange\n  })))))));\n};\nconst CreationSituation = ({\n  open,\n  onClose,\n  devis,\n  chantier\n}) => {\n  const [structure, setStructure] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [mois, setMois] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [annee, setAnnee] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Date().getFullYear());\n  const [commentaire, setCommentaire] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [selectedChantier, setSelectedChantier] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [totalHT, setTotalHT] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [totalAvancement, setTotalAvancement] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [avenants, setAvenants] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [montantTotalAvenants, setMontantTotalAvenants] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [tauxProrata, setTauxProrata] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(2.5);\n  const [montantHTMois, setMontantHTMois] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [lastSituation, setLastSituation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [lignesSupplementaires, setLignesSupplementaires] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [retenueCIE, setRetenueCIE] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [facturesCIE, setFacturesCIE] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [calculatedValues, setCalculatedValues] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [existingSituation, setExistingSituation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (devis !== null && devis !== void 0 && devis.id) {\n      axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/devis-structure/${devis.id}/structure/`).then(response => {\n        setStructure(response.data);\n      }).catch(error => {\n        console.error("Erreur lors du chargement de la structure:", error);\n        alert("Erreur lors du chargement des données");\n      });\n\n      // Charger le chantier si nécessaire\n      if (devis.chantier && !chantier) {\n        axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/chantier/${devis.chantier}/`).then(response => {\n          setSelectedChantier(response.data);\n        }).catch(error => {\n          console.error("Erreur lors du chargement du chantier:", error);\n        });\n      }\n\n      // Utiliser price_ht au lieu de montant_ht\n      setTotalHT(devis.price_ht || 0);\n    }\n  }, [devis]);\n\n  // Charger les avenants\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (chantier !== null && chantier !== void 0 && chantier.id) {\n      axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/avenant_chantier/${chantier.id}/avenants/`).then(response => {\n        if (response.data.success) {\n          setAvenants(response.data.avenants);\n        }\n      }).catch(error => {\n        console.error("Erreur lors du chargement des avenants:", error);\n      });\n    }\n  }, [chantier]);\n\n  // Calculer l\'avancement chaque fois que la structure change\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (structure.length > 0 && totalHT + montantTotalAvenants > 0) {\n      let sommeMontantsLignes = 0;\n\n      // Somme des montants des lignes du devis\n      structure.forEach(partie => {\n        partie.sous_parties.forEach(sousPartie => {\n          sousPartie.lignes.forEach(ligne => {\n            sommeMontantsLignes += ligne.total_ht * (ligne.pourcentage_actuel || 0) / 100;\n          });\n        });\n      });\n\n      // Ajouter les montants des avenants\n      avenants.forEach(avenant => {\n        var _avenant$factures_ts;\n        (_avenant$factures_ts = avenant.factures_ts) === null || _avenant$factures_ts === void 0 || _avenant$factures_ts.forEach(ts => {\n          sommeMontantsLignes += ts.montant_ht * (ts.pourcentage_actuel || 0) / 100;\n        });\n      });\n      const pourcentageAvancement = sommeMontantsLignes / (totalHT + montantTotalAvenants) * 100;\n      setTotalAvancement(pourcentageAvancement);\n    }\n  }, [structure, totalHT, avenants, montantTotalAvenants]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (avenants && Array.isArray(avenants)) {\n      const totalAvenants = avenants.reduce((acc, av) => acc + parseFloat(av.montant_total || 0), 0);\n      setMontantTotalAvenants(totalAvenants);\n    }\n  }, [avenants]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (open && chantier !== null && chantier !== void 0 && chantier.id && mois && annee) {\n      const fetchSituationData = async () => {\n        try {\n          const response = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/chantier/${chantier.id}/situations/by-month/`, {\n            params: {\n              mois,\n              annee\n            }\n          });\n          const situations = response.data;\n          if (situations.length > 0) {\n            var _currentSituation$lig2;\n            const currentSituation = situations[0];\n            setExistingSituation(currentSituation);\n\n            // Pré-remplir les champs avec les données existantes\n            setTauxProrata(currentSituation.taux_prorata);\n            setRetenueCIE(currentSituation.retenue_cie);\n\n            // Mettre à jour la structure avec les pourcentages existants\n            const newStructure = structure.map(partie => ({\n              ...partie,\n              sous_parties: partie.sous_parties.map(sousPartie => ({\n                ...sousPartie,\n                lignes: sousPartie.lignes.map(ligne => {\n                  const situationLigne = currentSituation.lignes.find(l => l.ligne_devis === ligne.id);\n                  return {\n                    ...ligne,\n                    pourcentage_precedent: situationLigne ? parseFloat(situationLigne.pourcentage_actuel) : 0,\n                    pourcentage_actuel: situationLigne ? parseFloat(situationLigne.pourcentage_actuel) : 0\n                  };\n                })\n              }))\n            }));\n            setStructure(newStructure);\n\n            // Mettre à jour les avenants\n            if (avenants.length > 0) {\n              const newAvenants = avenants.map(avenant => ({\n                ...avenant,\n                factures_ts: (avenant.factures_ts || []).map(ts => {\n                  var _currentSituation$lig;\n                  const situationTs = currentSituation === null || currentSituation === void 0 || (_currentSituation$lig = currentSituation.lignes_avenant) === null || _currentSituation$lig === void 0 ? void 0 : _currentSituation$lig.find(l => l.facture_ts === ts.id);\n                  return {\n                    ...ts,\n                    pourcentage_precedent: situationTs ? parseFloat(situationTs.pourcentage_actuel) : 0,\n                    pourcentage_actuel: situationTs ? parseFloat(situationTs.pourcentage_actuel) : 0,\n                    montant_ht: parseFloat(ts.montant_ht || 0)\n                  };\n                })\n              }));\n              setAvenants(newAvenants);\n            }\n\n            // Mettre à jour les lignes supplémentaires\n            if (((_currentSituation$lig2 = currentSituation.lignes_supplementaires) === null || _currentSituation$lig2 === void 0 ? void 0 : _currentSituation$lig2.length) > 0) {\n              setLignesSupplementaires(currentSituation.lignes_supplementaires);\n            }\n          } else {\n            let moisPrecedent = parseInt(mois) - 1;\n            let anneePrecedente = parseInt(annee);\n            if (moisPrecedent === 0) {\n              moisPrecedent = 12;\n              anneePrecedente--;\n            }\n            const responsePrecedent = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/chantier/${chantier.id}/situations/by-month/`, {\n              params: {\n                mois: moisPrecedent,\n                annee: anneePrecedente\n              }\n            });\n            if (responsePrecedent.data.length > 0) {\n              var _situationPrecedente$2;\n              const situationPrecedente = responsePrecedent.data[0];\n\n              // Définir la situation précédente comme lastSituation\n              setLastSituation(situationPrecedente);\n\n              // Réinitialiser la structure avec les pourcentages précédents\n              const newStructure = structure.map(partie => ({\n                ...partie,\n                sous_parties: partie.sous_parties.map(sousPartie => ({\n                  ...sousPartie,\n                  lignes: sousPartie.lignes.map(ligne => {\n                    const lignePrecedente = situationPrecedente.lignes.find(l => l.ligne_devis === ligne.id);\n                    return {\n                      ...ligne,\n                      pourcentage_precedent: lignePrecedente ? parseFloat(lignePrecedente.pourcentage_actuel) : 0,\n                      pourcentage_actuel: lignePrecedente ? parseFloat(lignePrecedente.pourcentage_actuel) : 0\n                      // Ne pas copier le montant_ht_mois\n                    };\n                  })\n                }))\n              }));\n              setStructure(newStructure);\n\n              // Réinitialiser les avenants avec les pourcentages précédents\n              if (avenants.length > 0) {\n                const newAvenants = avenants.map(avenant => ({\n                  ...avenant,\n                  factures_ts: (avenant.factures_ts || []).map(ts => {\n                    var _situationPrecedente$;\n                    const avenantPrecedent = (_situationPrecedente$ = situationPrecedente.lignes_avenant) === null || _situationPrecedente$ === void 0 ? void 0 : _situationPrecedente$.find(l => l.facture_ts === ts.id);\n                    return {\n                      ...ts,\n                      pourcentage_precedent: avenantPrecedent ? parseFloat(avenantPrecedent.pourcentage_actuel) : 0,\n                      pourcentage_actuel: avenantPrecedent ? parseFloat(avenantPrecedent.pourcentage_actuel) : 0,\n                      montant_ht: parseFloat(ts.montant_ht || 0)\n                      // Ne pas copier le montant du mois\n                    };\n                  })\n                }));\n                setAvenants(newAvenants);\n              }\n\n              // Réinitialiser les lignes supplémentaires avec montants à 0\n              if (((_situationPrecedente$2 = situationPrecedente.lignes_supplementaires) === null || _situationPrecedente$2 === void 0 ? void 0 : _situationPrecedente$2.length) > 0) {\n                setLignesSupplementaires(situationPrecedente.lignes_supplementaires.map(ligne => ({\n                  ...ligne,\n                  montant: "0.00" // Montant à 0 pour la nouvelle situation\n                })));\n              }\n\n              // Réinitialiser le montant HT du mois à 0\n              setMontantHTMois(0);\n              setExistingSituation(null);\n            } else {\n              setLastSituation(null);\n              resetSituationData();\n            }\n          }\n        } catch (error) {\n          console.error("Erreur lors de la vérification de la situation:", error);\n          setExistingSituation(null);\n          resetSituationData();\n        }\n      };\n      fetchSituationData();\n    }\n  }, [open, chantier, mois, annee]);\n\n  // Fonction pour fusionner les lignes supplémentaires\n  const mergeSupplementaryLines = (defaultLines, existingLines) => {\n    const mergedLines = [...defaultLines];\n\n    // Ajouter les lignes existantes qui ne sont pas dans les lignes par défaut\n    existingLines.forEach(existingLine => {\n      const exists = mergedLines.some(defaultLine => defaultLine.description === existingLine.description);\n      if (!exists) {\n        mergedLines.push({\n          ...existingLine,\n          montant: "0.00" // Réinitialiser le montant pour la nouvelle situation\n        });\n      }\n    });\n    return mergedLines;\n  };\n\n  // Modifier la fonction d\'initialisation\n  const initializeSituationData = (situation, isNewSituation = false, mergedLignes = null) => {\n    var _situation$situation_;\n    setTauxProrata(situation.taux_prorata);\n    setLastSituation(situation);\n\n    // Mettre à jour les pourcentages de la structure\n    const newStructure = structure.map(partie => ({\n      ...partie,\n      sous_parties: partie.sous_parties.map(sousPartie => ({\n        ...sousPartie,\n        lignes: sousPartie.lignes.map(ligne => {\n          const situationLigne = situation.situation_lignes.find(l => l.ligne_devis === ligne.id);\n          return {\n            ...ligne,\n            pourcentage_precedent: situationLigne ? parseFloat(situationLigne.pourcentage_actuel) : 0,\n            pourcentage_actuel: isNewSituation ? situationLigne ? parseFloat(situationLigne.pourcentage_actuel) : 0 : situationLigne ? parseFloat(situationLigne.pourcentage_actuel) : 0\n          };\n        })\n      }))\n    }));\n    setStructure(newStructure);\n\n    // Mettre à jour les pourcentages des avenants\n    if (avenants.length > 0) {\n      const newAvenants = avenants.map(avenant => ({\n        ...avenant,\n        factures_ts: (avenant.factures_ts || []).map(ts => {\n          const situationTs = situation.situation_lignes_avenants.find(l => l.facture_ts === ts.id);\n          return {\n            ...ts,\n            pourcentage_precedent: situationTs ? parseFloat(situationTs.pourcentage_actuel) : 0,\n            pourcentage_actuel: isNewSituation ? situationTs ? parseFloat(situationTs.pourcentage_actuel) : 0 : situationTs ? parseFloat(situationTs.pourcentage_actuel) : 0\n          };\n        })\n      }));\n      setAvenants(newAvenants);\n    }\n\n    // Mettre à jour les lignes supplémentaires\n    if (isNewSituation && mergedLignes) {\n      setLignesSupplementaires(mergedLignes);\n    } else if (!isNewSituation && ((_situation$situation_ = situation.situation_lignes_supplementaires) === null || _situation$situation_ === void 0 ? void 0 : _situation$situation_.length) > 0) {\n      setLignesSupplementaires(situation.situation_lignes_supplementaires);\n    } else {\n      setLignesSupplementaires([]);\n    }\n\n    // Mettre à jour la retenue CIE\n    if (situation.retenue_cie) {\n      setRetenueCIE(parseFloat(situation.retenue_cie));\n    }\n  };\n\n  // Fonction pour réinitialiser les données\n  const resetSituationData = () => {\n    setTauxProrata(2.5); // Valeur par défaut\n    setLastSituation(null);\n    setLignesSupplementaires([]);\n    setRetenueCIE(0);\n\n    // Réinitialiser la structure avec des pourcentages à 0\n    const newStructure = structure.map(partie => ({\n      ...partie,\n      sous_parties: partie.sous_parties.map(sousPartie => ({\n        ...sousPartie,\n        lignes: sousPartie.lignes.map(ligne => ({\n          ...ligne,\n          pourcentage_precedent: 0,\n          pourcentage_actuel: 0\n        }))\n      }))\n    }));\n    setStructure(newStructure);\n  };\n\n  // Calculer le montant HT du mois à partir des lignes\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    let montantActuel = 0;\n\n    // Calculer le montant des lignes standard\n    structure.forEach(partie => {\n      partie.sous_parties.forEach(sousPartie => {\n        sousPartie.lignes.forEach(ligne => {\n          const montantLigne = parseFloat(ligne.total_ht || 0) * parseFloat(ligne.pourcentage_actuel || 0) / 100;\n          montantActuel += montantLigne;\n        });\n      });\n    });\n\n    // Ajouter le montant des TS (avenants)\n    avenants === null || avenants === void 0 || avenants.forEach(avenant => {\n      var _avenant$factures_ts2;\n      (_avenant$factures_ts2 = avenant.factures_ts) === null || _avenant$factures_ts2 === void 0 || _avenant$factures_ts2.forEach(ts => {\n        const montantTS = parseFloat(ts.montant_ht || 0) * parseFloat(ts.pourcentage_actuel || 0) / 100;\n        montantActuel += montantTS;\n      });\n    });\n\n    // Récupération du montant cumulé précédent\n    let montantCumulePrecedent = 0;\n    if (lastSituation) {\n      montantCumulePrecedent = parseFloat(lastSituation.montant_ht_mois || 0);\n    } else {}\n\n    // Le montant HT du mois est la différence entre le montant actuel et le cumul précédent\n    const montantHTMois = montantActuel - montantCumulePrecedent;\n    setMontantHTMois(montantHTMois);\n  }, [structure, avenants, lastSituation]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (open && chantier !== null && chantier !== void 0 && chantier.id && mois && annee) {\n      const fetchCIEFactures = async () => {\n        try {\n          const response = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/chantier/${chantier.id}/factures-cie/`, {\n            params: {\n              mois,\n              annee\n            }\n          });\n          setRetenueCIE(response.data.total);\n          setFacturesCIE(response.data.factures);\n        } catch (error) {\n          console.error("Erreur lors du chargement des factures CIE:", error);\n        }\n      };\n      fetchCIEFactures();\n    }\n  }, [open, chantier, mois, annee]);\n  const getComparisonColor = (current, previous) => {\n    if (current < previous) return "error.main"; // Rouge\n    if (current > previous) return "rgb(0, 223, 56)"; // Vert personnalisé\n    return "text.primary"; // Noir\n  };\n  const handlePourcentageChange = (ligneId, value, type = "standard") => {\n    let newValue = value === "" ? 0 : parseFloat(value);\n    newValue = Math.min(Math.max(newValue, 0), 100);\n    if (type === "avenant") {\n      const newAvenants = avenants.map(avenant => ({\n        ...avenant,\n        factures_ts: avenant.factures_ts.map(ts => {\n          if (ts.id === ligneId) {\n            const montantCalcule = parseFloat(ts.montant_ht || 0) * newValue / 100;\n            return {\n              ...ts,\n              pourcentage_actuel: newValue,\n              montant: montantCalcule\n            };\n          }\n          return ts;\n        })\n      }));\n      setAvenants(newAvenants);\n    } else {\n      const newStructure = structure.map(partie => ({\n        ...partie,\n        sous_parties: partie.sous_parties.map(sousPartie => ({\n          ...sousPartie,\n          lignes: sousPartie.lignes.map(ligne => {\n            if (ligne.id === ligneId) {\n              return {\n                ...ligne,\n                pourcentage_actuel: newValue\n              };\n            }\n            return ligne;\n          })\n        }))\n      }));\n      setStructure(newStructure);\n    }\n  };\n\n  // Fonction pour récupérer le prochain numéro de situation\n  const getNextSituationNumber = async () => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/next-numero/chantier/${chantier.id}/`);\n      return response.data.numero;\n    } catch (error) {\n      console.error("Erreur lors de la récupération du numéro de situation:", error);\n      throw error;\n    }\n  };\n\n  // Fonction de calcul existante\n  const calculateMontants = () => {\n    if (!structure.length) return;\n\n    // Calcul du montant HT du mois\n    let montantHtMois = 0;\n    structure.forEach(partie => {\n      partie.sous_parties.forEach(sousPartie => {\n        sousPartie.lignes.forEach(ligne => {\n          const montant = parseFloat(ligne.total_ht || 0);\n          const pourcentage = parseFloat(ligne.pourcentage_actuel || 0);\n          montantHtMois += montant * pourcentage / 100;\n        });\n      });\n    });\n    const cumulPrecedent = calculerCumulPrecedent();\n    const retenueGarantie = montantHtMois * 0.05;\n    const montantProrata = montantHtMois * (parseFloat(tauxProrata) / 100);\n    const montantApresRetenues = montantHtMois - retenueGarantie - montantProrata - parseFloat(retenueCIE || 0);\n    const tva = montantApresRetenues * 0.2;\n    const montantTotal = montantHtMois + parseFloat(cumulPrecedent);\n    const pourcentageAvancement = totalHT > 0 ? montantTotal / totalHT * 100 : 0;\n    setCalculatedValues({\n      montant_ht_mois: montantHtMois.toFixed(2),\n      montant_precedent: montantHtMois.toFixed(2),\n      cumul_precedent: cumulPrecedent.toFixed(2),\n      retenue_garantie: retenueGarantie.toFixed(2),\n      montant_prorata: montantProrata.toFixed(2),\n      retenue_cie: retenueCIE || "0.00",\n      montant_apres_retenues: montantApresRetenues.toFixed(2),\n      montant_total: montantTotal.toFixed(2),\n      pourcentage_avancement: pourcentageAvancement.toFixed(2),\n      tva: tva.toFixed(2)\n    });\n  };\n\n  // Utiliser useEffect pour recalculer quand les données changent\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    calculateMontants();\n  }, [structure, avenants, tauxProrata, retenueCIE, lignesSupplementaires]);\n\n  // Fonction pour calculer le cumul des mois précédents\n  const calculerCumulPrecedent = () => {\n    // Si on a une situation précédente, utiliser son montant_total_cumul_ht\n    if (lastSituation && lastSituation.montant_total_cumul_ht) {\n      return parseFloat(lastSituation.montant_total_cumul_ht);\n    }\n\n    // Sinon, calculer à partir des pourcentages précédents (pour la première situation)\n    let montantTotal = 0;\n\n    // Calculer le total des lignes standard\n    structure.forEach(partie => {\n      partie.sous_parties.forEach(sousPartie => {\n        sousPartie.lignes.forEach(ligne => {\n          const montantLigne = ligne.total_ht * (ligne.pourcentage_precedent || 0) / 100;\n          montantTotal += montantLigne;\n        });\n      });\n    });\n\n    // Ajouter le montant des avenants avec les pourcentages précédents\n    avenants === null || avenants === void 0 || avenants.forEach(avenant => {\n      var _avenant$factures_ts3;\n      (_avenant$factures_ts3 = avenant.factures_ts) === null || _avenant$factures_ts3 === void 0 || _avenant$factures_ts3.forEach(ts => {\n        const montantTS = ts.montant_ht * (ts.pourcentage_precedent || 0) / 100;\n        montantTotal += montantTS;\n      });\n    });\n    return montantTotal;\n  };\n\n  // Fonction pour calculer le montant total cumulé HT (avec les changements actuels)\n  const calculerMontantTotalCumul = () => {\n    let montantTotal = 0;\n\n    // Calculer le total des lignes standard avec pourcentages actuels\n    structure.forEach(partie => {\n      partie.sous_parties.forEach(sousPartie => {\n        sousPartie.lignes.forEach(ligne => {\n          const montantLigne = ligne.total_ht * (ligne.pourcentage_actuel || 0) / 100;\n          montantTotal += montantLigne;\n        });\n      });\n    });\n\n    // Ajouter le montant des avenants avec les pourcentages actuels\n    avenants === null || avenants === void 0 || avenants.forEach(avenant => {\n      var _avenant$factures_ts4;\n      (_avenant$factures_ts4 = avenant.factures_ts) === null || _avenant$factures_ts4 === void 0 || _avenant$factures_ts4.forEach(ts => {\n        const montantTS = ts.montant_ht * (ts.pourcentage_actuel || 0) / 100;\n        montantTotal += montantTS;\n      });\n    });\n    return montantTotal;\n  };\n\n  // Fonction pour calculer le montant HT du mois (différence entre total et cumul précédent)\n  const calculerMontantHTMois = () => {\n    const montantTotalCumul = calculerMontantTotalCumul();\n    const cumulPrecedent = calculerCumulPrecedent();\n    return montantTotalCumul - cumulPrecedent;\n  };\n\n  // Fonction de soumission avec gestion des erreurs améliorée\n  const handleSubmit = async () => {\n    try {\n      if (!calculatedValues) {\n        throw new Error("Les calculs ne sont pas disponibles");\n      }\n      // Fonction helper pour formater les nombres\n      const formatNumber = num => {\n        if (num === null || num === undefined) return "0.00";\n        return parseFloat(num).toFixed(2);\n      };\n      // Récupérer le prochain numéro de situation\n      const situationNumero = await getNextSituationNumber();\n      const situationData = {\n        chantier: chantier.id,\n        devis: devis.id,\n        mois: parseInt(mois),\n        annee: parseInt(annee),\n        numero_situation: situationNumero,\n        // Extrait le numéro de situation\n        lignes: structure.flatMap(partie => partie.sous_parties.flatMap(sousPartie => sousPartie.lignes.map(ligne => ({\n          ligne_devis: ligne.id,\n          description: ligne.description,\n          quantite: formatNumber(ligne.quantite),\n          prix_unitaire: formatNumber(ligne.prix_unitaire),\n          total_ht: formatNumber(ligne.total_ht),\n          pourcentage_actuel: formatNumber(ligne.pourcentage_actuel),\n          montant: formatNumber(ligne.total_ht * ligne.pourcentage_actuel / 100)\n        })))),\n        montant_ht_mois: formatNumber(calculerMontantHTMois()),\n        cumul_precedent: formatNumber(calculerCumulPrecedent()),\n        montant_total_cumul_ht: formatNumber(calculerMontantTotalCumul()),\n        retenue_garantie: formatNumber(calculerMontantHTMois() * 0.05),\n        montant_prorata: formatNumber(calculerMontantHTMois() * (tauxProrata / 100)),\n        retenue_cie: formatNumber(retenueCIE),\n        montant_apres_retenues: formatNumber(calculerTotalNet()),\n        tva: formatNumber(calculerTotalNet() * 0.2),\n        montant_total_ttc: formatNumber(calculerTotalNet() * 1.2),\n        pourcentage_avancement: formatNumber(calculerMontantTotalCumul() / (totalHT + montantTotalAvenants) * 100),\n        taux_prorata: formatNumber(tauxProrata),\n        lignes_supplementaires: lignesSupplementaires.map(ligne => ({\n          description: ligne.description,\n          montant: formatNumber(ligne.montant),\n          type: ligne.type\n        })),\n        lignes_avenant: avenants.flatMap(avenant => avenant.factures_ts.map(ts => ({\n          facture_ts: ts.id,\n          avenant_id: avenant.id,\n          montant_ht: formatNumber(ts.montant_ht || 0),\n          pourcentage_actuel: formatNumber(ts.pourcentage_actuel || 0),\n          montant: formatNumber(ts.montant_ht * (ts.pourcentage_actuel || 0) / 100)\n        }))),\n        montant_total_devis: formatNumber(totalHT),\n        montant_total_travaux: formatNumber(totalHT + montantTotalAvenants),\n        total_avancement: formatNumber(totalAvancement)\n      };\n      if (existingSituation) {\n        // Mise à jour d\'une situation existante\n        await axios__WEBPACK_IMPORTED_MODULE_10__["default"].put(`/api/situations/${existingSituation.id}/update/`, situationData);\n      } else {\n        // Création d\'une nouvelle situation\n        await axios__WEBPACK_IMPORTED_MODULE_10__["default"].post("/api/situations/", situationData);\n      }\n      onClose();\n    } catch (error) {\n      var _error$response;\n      console.error("Erreur lors de la sauvegarde:", error);\n      alert(`Erreur lors de la ${existingSituation ? "mise à jour" : "création"}: ${((_error$response = error.response) === null || _error$response === void 0 || (_error$response = _error$response.data) === null || _error$response === void 0 ? void 0 : _error$response.error) || error.message}`);\n    }\n  };\n  const handleAjoutLigne = () => {\n    setLignesSupplementaires([...lignesSupplementaires, {\n      description: "",\n      montant: 0,\n      type: "deduction"\n    }]);\n  };\n  const handleLigneChange = (index, field, value) => {\n    const newLignes = [...lignesSupplementaires];\n    newLignes[index][field] = value;\n    setLignesSupplementaires(newLignes);\n  };\n  const handleSupprimerLigne = index => {\n    setLignesSupplementaires(lignesSupplementaires.filter((_, i) => i !== index));\n  };\n\n  // Calcul du total avec les lignes supplémentaires\n  const calculerTotalNet = () => {\n    const montantHtMois = calculerMontantHTMois();\n\n    // Retenue de garantie (5%)\n    const retenueGarantie = montantHtMois * 0.05;\n\n    // Compte prorata (calculé sur le montant HT du mois)\n    const compteProrata = montantHtMois * (tauxProrata / 100);\n\n    // Retenue CIE\n    const retenueCIEValue = parseFloat(retenueCIE || 0);\n\n    // Montant après retenues\n    let total = montantHtMois - retenueGarantie - compteProrata - retenueCIEValue;\n\n    // Lignes supplémentaires\n    lignesSupplementaires.forEach(ligne => {\n      if (ligne.type === "deduction") {\n        total -= parseFloat(ligne.montant);\n      } else {\n        total += parseFloat(ligne.montant);\n      }\n    });\n    return total;\n  };\n  const updateCalculs = () => {\n    if (!structure.length) return;\n    const cumulPrecedent = calculerCumulPrecedent();\n    const montantTotalCumul = calculerMontantTotalCumul();\n    const montantHtMois = calculerMontantHTMois();\n    const montantTotalTravaux = totalHT + montantTotalAvenants;\n    const retenueGarantie = montantHtMois * 0.05;\n    const montantProrata = montantHtMois * (parseFloat(tauxProrata) / 100);\n    let montantApresRetenues = montantHtMois - retenueGarantie - montantProrata - parseFloat(retenueCIE || 0);\n\n    // Ajouter l\'impact des lignes supplémentaires\n    lignesSupplementaires.forEach(ligne => {\n      if (ligne.type === "deduction") {\n        montantApresRetenues -= parseFloat(ligne.montant);\n      } else {\n        montantApresRetenues += parseFloat(ligne.montant);\n      }\n    });\n    const tva = montantApresRetenues * 0.2;\n    const pourcentageAvancement = montantTotalTravaux > 0 ? montantTotalCumul / montantTotalTravaux * 100 : 0;\n    setCalculatedValues({\n      montant_ht_mois: montantHtMois.toFixed(2),\n      cumul_precedent: cumulPrecedent.toFixed(2),\n      montant_total_cumul: montantTotalCumul.toFixed(2),\n      retenue_garantie: retenueGarantie.toFixed(2),\n      montant_prorata: montantProrata.toFixed(2),\n      retenue_cie: retenueCIE || "0.00",\n      montant_apres_retenues: montantApresRetenues.toFixed(2),\n      pourcentage_avancement: pourcentageAvancement.toFixed(2),\n      tva: tva.toFixed(2)\n    });\n  };\n\n  // Utiliser useEffect pour recalculer quand les données changent\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    updateCalculs();\n  }, [structure, avenants, tauxProrata, retenueCIE, lignesSupplementaires]);\n  const renderCalculs = () => {\n    if (!calculatedValues) return null;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      container: true,\n      spacing: 2\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      item: true,\n      xs: 12\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n      variant: "h6"\n    }, "R\\xE9capitulatif des montants")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      item: true,\n      xs: 6\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "Montant HT du mois: ", calculatedValues.montant_ht_mois, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "Montant pr\\xE9c\\xE9dent: ", calculatedValues.montant_precedent, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "Cumul pr\\xE9c\\xE9dent: ", calculatedValues.cumul_precedent, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "Retenue de garantie: ", calculatedValues.retenue_garantie, " \\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      item: true,\n      xs: 6\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "Montant prorata: ", calculatedValues.montant_prorata, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "Retenue CIE: ", calculatedValues.retenue_cie, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "Montant apr\\xE8s retenues: ", calculatedValues.montant_apres_retenues, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "TVA: ", calculatedValues.tva, " \\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      item: true,\n      xs: 12\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n      variant: "h6"\n    }, "Montant total: ", calculatedValues.montant_total, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "Pourcentage d\'avancement: ", calculatedValues.pourcentage_avancement, " ", "%")));\n  };\n  if (!open || !devis || !chantier) return null;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    open: open,\n    onClose: onClose,\n    maxWidth: "md",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, existingSituation ? "Modification d\'une situation" : "Création d\'une situation"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "center",\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "h6",\n    component: "h2"\n  }, "Cr\\xE9ation d\'une situation - ", chantier.chantier_name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      border: "1px solid rgba(0, 0, 0, 0.23)",\n      borderRadius: 1,\n      padding: "8px 12px",\n      display: "flex",\n      flexDirection: "column",\n      gap: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "body2",\n    sx: {\n      fontWeight: "bold"\n    }\n  }, "Montant HT:", " ", totalHT.toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "body2",\n    sx: {\n      fontWeight: "bold"\n    }\n  }, "Montant total des travaux HT:", " ", (totalHT + montantTotalAvenants).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "body2",\n    sx: {\n      fontWeight: "bold"\n    }\n  }, "%Avancement: ", totalAvancement.toFixed(2), "%"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      mb: 3,\n      display: "flex",\n      gap: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    sx: {\n      minWidth: 200\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], null, "Mois"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    value: mois,\n    onChange: e => setMois(e.target.value),\n    label: "Mois"\n  }, Array.from({\n    length: 12\n  }, (_, i) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    key: i + 1,\n    value: i + 1\n  }, new Date(0, i).toLocaleString("default", {\n    month: "long"\n  }))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    label: "Ann\\xE9e",\n    type: "number",\n    value: annee,\n    onChange: e => setAnnee(e.target.value)\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    fullWidth: true,\n    label: "Taux compte prorata (%)",\n    type: "number",\n    value: tauxProrata,\n    onChange: e => setTauxProrata(e.target.value),\n    inputProps: {\n      step: "0.01",\n      min: "0",\n      max: "100"\n    },\n    sx: {\n      mb: 3,\n      width: "200px"\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_21__["default"],\n    sx: {\n      boxShadow: "0px 3px 8px rgba(0, 0, 0, 0.1)",\n      borderRadius: "4px",\n      overflow: "hidden"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Description"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, "Quantit\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "center"\n  }, "Prix unitaire"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, "Total HT"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, "% Avancement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, "Montant"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, structure.map(partie => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(PartieRow, {\n    key: partie.id,\n    partie: partie,\n    handlePourcentageChange: handlePourcentageChange\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(AvenantsPartieRow, {\n    avenants: avenants,\n    handlePourcentageChange: handlePourcentageChange\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_21__["default"],\n    sx: {\n      mt: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Description"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, "Montant"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Cumul mois pr\\xE9c\\xE9dent"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, calculerCumulPrecedent().toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Montant total cumul HT"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, (() => {\n    const cumulPrecedent = calculerCumulPrecedent();\n    const montantTotalCumul = calculerMontantTotalCumul();\n    return montantTotalCumul.toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " ");\n  })(), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Montant HT du mois"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, calculerMontantHTMois().toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Retenue de garantie (5% HT du mois)"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right",\n    sx: {\n      color: "error.main"\n    }\n  }, "-", (calculerMontantHTMois() * 0.05).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Compte prorata (", tauxProrata, "% HT du mois)"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right",\n    sx: {\n      color: "error.main"\n    }\n  }, "-", (calculerMontantHTMois() * (tauxProrata / 100)).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " "), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Retenue CIE HT du mois"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    type: "number",\n    value: retenueCIE,\n    onChange: e => setRetenueCIE(e.target.value),\n    inputProps: {\n      step: "0.01"\n    },\n    size: "small"\n  }), facturesCIE.length > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "caption",\n    display: "block",\n    sx: {\n      mt: 1,\n      color: "text.secondary"\n    }\n  }, "Factures incluses :", facturesCIE.map(f => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    key: f.id\n  }, f.numero, ": ", f.montant_ht.toFixed(2), "\\u20AC")))))), lignesSupplementaires.map((ligne, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    key: index\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      display: "flex",\n      gap: 1,\n      alignItems: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    size: "small",\n    value: ligne.description,\n    onChange: e => handleLigneChange(index, "description", e.target.value),\n    placeholder: "Description",\n    fullWidth: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    size: "small",\n    value: ligne.type,\n    onChange: e => handleLigneChange(index, "type", e.target.value)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    value: "deduction"\n  }, "D\\xE9duction"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    value: "addition"\n  }, "Addition")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      display: "flex",\n      gap: 1,\n      alignItems: "center"\n    }\n  }, ligne.type === "deduction" && "-", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    size: "small",\n    type: "number",\n    value: ligne.montant,\n    onChange: e => handleLigneChange(index, "montant", parseFloat(e.target.value)),\n    inputProps: {\n      step: "0.01"\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    size: "small",\n    onClick: () => handleSupprimerLigne(index),\n    sx: {\n      color: "red"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_4__.FaTrash, null)))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Montant total du mois HT apr\\xE8s retenues"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, (() => {\n    let montantTotal = calculerMontantHTMois() - calculerMontantHTMois() * 0.05 - calculerMontantHTMois() * (tauxProrata / 100) - parseFloat(retenueCIE || 0);\n\n    // Appliquer les lignes supplémentaires\n    lignesSupplementaires.forEach(ligne => {\n      if (ligne.type === "deduction") {\n        montantTotal -= parseFloat(ligne.montant || 0);\n      } else {\n        montantTotal += parseFloat(ligne.montant || 0);\n      }\n    });\n    return montantTotal.toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " ");\n  })(), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "TVA (20%)"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, (() => {\n    let montantBase = calculerMontantHTMois() - calculerMontantHTMois() * 0.05 - calculerMontantHTMois() * (tauxProrata / 100) - parseFloat(retenueCIE || 0);\n\n    // Appliquer les lignes supplémentaires\n    lignesSupplementaires.forEach(ligne => {\n      if (ligne.type === "deduction") {\n        montantBase -= parseFloat(ligne.montant || 0);\n      } else {\n        montantBase += parseFloat(ligne.montant || 0);\n      }\n    });\n    return (montantBase * 0.2).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " ");\n  })(), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      "& td": {\n        fontWeight: "bold"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Montant total TTC \\xE0 payer"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    align: "right"\n  }, (() => {\n    let montantBase = calculerMontantHTMois() - calculerMontantHTMois() * 0.05 - calculerMontantHTMois() * (tauxProrata / 100) - parseFloat(retenueCIE || 0);\n\n    // Appliquer les lignes supplémentaires\n    lignesSupplementaires.forEach(ligne => {\n      if (ligne.type === "deduction") {\n        montantBase -= parseFloat(ligne.montant || 0);\n      } else {\n        montantBase += parseFloat(ligne.montant || 0);\n      }\n    });\n    return (montantBase * 1.2).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, " ");\n  })(), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    colSpan: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], {\n    variant: "outlined",\n    size: "small",\n    onClick: handleAjoutLigne,\n    sx: {\n      mb: 2\n    }\n  }, "Ajouter une ligne"))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], {\n    onClick: handleSubmit,\n    color: "primary"\n  }, existingSituation ? "Mettre à jour la situation" : "Créer la situation")));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CreationSituation);\n\n//# sourceURL=webpack://frontend/./src/components/CreationSituation.js?')},"./src/components/Dashboard.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_icons_material_Construction__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/icons-material/Construction */ "./node_modules/@mui/icons-material/Construction.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Container/Container.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\n\nconst Dashboard = () => {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    maxWidth: "lg",\n    sx: {\n      mt: 4,\n      mb: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    elevation: 3,\n    sx: {\n      p: 6,\n      textAlign: "center",\n      borderRadius: 3,\n      background: "linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material_Construction__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      fontSize: 80,\n      color: "#ff9800",\n      mb: 2\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h4",\n    component: "h1",\n    gutterBottom: true,\n    sx: {\n      fontWeight: "bold",\n      color: "#333",\n      mb: 2\n    }\n  }, "\\uD83D\\uDEA7 Dashboard en cours de d\\xE9veloppement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h6",\n    color: "text.secondary",\n    sx: {\n      mb: 3\n    }\n  }, "Cette fonctionnalit\\xE9 sera bient\\xF4t disponible"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body1",\n    color: "text.secondary",\n    sx: {\n      maxWidth: 600,\n      mx: "auto",\n      lineHeight: 1.6\n    }\n  }, "Nous travaillons activement sur le tableau de bord pour vous offrir une vue d\'ensemble compl\\xE8te de vos chantiers, statistiques et performances. Merci de votre patience !"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      mt: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "body2",\n    color: "text.secondary",\n    sx: {\n      fontStyle: "italic"\n    }\n  }, "En attendant, vous pouvez utiliser les autres fonctionnalit\\xE9s de l\'application."))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Dashboard);\n\n//# sourceURL=webpack://frontend/./src/components/Dashboard.js?')},"./src/components/DevisModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\n\nconst DevisModal = ({\n  open,\n  handleClose,\n  devisData,\n  handleSubmit,\n  handleChange,\n  pendingChantierData\n}) => {\n  const [fullNumero, setFullNumero] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [isEditing, setIsEditing] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [lastRequestTime, setLastRequestTime] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [chantierName, setChantierName] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const getFullNumero = async () => {\n      try {\n        // Récupérer le nom du chantier selon le contexte\n        let currentChantierName = "";\n        if (devisData.devis_chantier) {\n          if (devisData.chantier === -1) {\n            currentChantierName = pendingChantierData.chantier.chantier_name;\n          } else {\n            const chantierResponse = await axios__WEBPACK_IMPORTED_MODULE_1__["default"].get(`/api/chantier/${devisData.chantier}/`);\n            currentChantierName = chantierResponse.data.chantier_name;\n          }\n          setChantierName(currentChantierName);\n        }\n\n        // Utiliser la vue get_next_devis_number\n        const response = await axios__WEBPACK_IMPORTED_MODULE_1__["default"].get("/api/get-next-devis-number/", {\n          params: {\n            chantier_id: devisData.chantier || "",\n            devis_chantier: devisData.devis_chantier || false,\n            is_ts: !devisData.devis_chantier && devisData.chantier !== -1\n          }\n        });\n        let newNumero = response.data.numero;\n\n        // Si c\'est un devis de chantier, toujours utiliser "Devis travaux"\n        if (devisData.devis_chantier) {\n          newNumero = `${newNumero} - Devis travaux`;\n        }\n        // Si c\'est un devis normal lié à un chantier existant (TS)\n        else if (!devisData.devis_chantier && devisData.chantier !== -1) {\n          newNumero = `${newNumero} - TS N°${response.data.next_ts || "001"}`;\n        }\n        setFullNumero(newNumero);\n        setLastRequestTime(new Date().getTime());\n\n        // Mettre à jour devisData avec le nouveau numéro\n        handleChange({\n          target: {\n            name: "numero",\n            value: newNumero\n          }\n        });\n      } catch (error) {\n        console.error("Erreur lors de la récupération du numéro:", error);\n        const defaultNumero = `DEV-001-${new Date().getFullYear().toString().slice(-2)}`;\n        setFullNumero(defaultNumero);\n        handleChange({\n          target: {\n            name: "numero",\n            value: defaultNumero\n          }\n        });\n      }\n    };\n    if (open && (!devisData.numero || !lastRequestTime)) {\n      getFullNumero();\n    } else if (devisData.numero) {\n      setFullNumero(devisData.numero);\n    }\n  }, [open, devisData.chantier, devisData.devis_chantier, pendingChantierData]);\n\n  // Reset lastRequestTime when modal closes\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!open) {\n      setLastRequestTime(null);\n      setFullNumero("");\n      setChantierName("");\n    }\n  }, [open]);\n  const handleNumeroChange = e => {\n    setFullNumero(e.target.value);\n    handleChange({\n      target: {\n        name: "numero",\n        value: e.target.value\n      }\n    });\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: open,\n    onClose: handleClose,\n    maxWidth: "md",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "R\\xE9sum\\xE9 du devis"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      display: "flex",\n      flexDirection: "column",\n      gap: 2,\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Num\\xE9ro du devis",\n    name: "numero",\n    value: fullNumero,\n    onChange: handleNumeroChange,\n    disabled: !isEditing,\n    InputProps: {\n      endAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n        size: "small",\n        onClick: () => setIsEditing(!isEditing)\n      }, isEditing ? "Verrouiller" : "Modifier")\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Montant HT",\n    name: "price_ht",\n    value: devisData.price_ht || "",\n    disabled: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Montant TTC",\n    name: "price_ttc",\n    value: (parseFloat(devisData.price_ht || 0) * 1.2).toFixed(2) || "",\n    disabled: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Description",\n    name: "description",\n    value: devisData.description || "",\n    onChange: handleChange,\n    multiline: true,\n    rows: 4\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: handleClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: handleSubmit,\n    variant: "contained",\n    color: "primary"\n  }, "Enregistrer")));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DevisModal);\n\n//# sourceURL=webpack://frontend/./src/components/DevisModal.js?')},"./src/components/Drive.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/PictureAsPdf.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Image.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/VideoFile.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/AudioFile.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Description.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Archive.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Code.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/InsertDriveFile.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/NavigateNext.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Home.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Folder.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Search.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Add.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/CloudUpload.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Delete.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Download.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Email.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Edit.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Visibility.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Language.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Computer.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Grid/Grid.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Card/Card.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Breadcrumbs/Breadcrumbs.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Link/Link.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputAdornment/InputAdornment.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/CircularProgress/CircularProgress.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/List/List.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/ListItem/ListItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Tooltip/Tooltip.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/ListItemIcon/ListItemIcon.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/ListItemText/ListItemText.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Chip/Chip.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Menu/Menu.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Divider/Divider.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Snackbar/Snackbar.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Alert/Alert.js");\n/* harmony import */ var _mui_material_styles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material/styles */ "./node_modules/@mui/material/styles/styled.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _FileViewer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FileViewer */ "./src/components/FileViewer.js");\n\n\n\n\n\n\n// Styles personnalisés\nconst DriveContainer = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_2__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"])(({\n  theme\n}) => ({\n  height: "100vh",\n  display: "flex",\n  flexDirection: "column",\n  backgroundColor: theme.palette.grey[50],\n  borderRadius: theme.spacing(2),\n  boxShadow: theme.shadows[8],\n  overflow: "hidden"\n}));\nconst DriveHeader = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_2__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"])(({\n  theme\n}) => ({\n  padding: theme.spacing(2),\n  marginBottom: theme.spacing(2),\n  display: "flex",\n  alignItems: "center",\n  justifyContent: "space-between",\n  flexWrap: "wrap",\n  gap: theme.spacing(2),\n  borderRadius: theme.spacing(1.5),\n  boxShadow: theme.shadows[4]\n}));\nconst DriveContent = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_2__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"])(({\n  theme\n}) => ({\n  flex: 1,\n  display: "flex",\n  flexDirection: "column",\n  overflow: "auto",\n  // Permettre le scroll\n  minHeight: "calc(100vh - 120px)",\n  // Hauteur minimale pour la zone de drag & drop\n  borderRadius: theme.spacing(1.5),\n  padding: theme.spacing(1)\n}));\nconst FileGrid = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_2__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"])(({\n  theme\n}) => ({\n  flex: 1,\n  overflow: "auto",\n  padding: theme.spacing(2)\n}));\nconst FileCard = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_2__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"])(({\n  theme\n}) => ({\n  height: "100%",\n  display: "flex",\n  flexDirection: "column",\n  cursor: "pointer",\n  transition: "all 0.2s ease-in-out",\n  "&:hover": {\n    transform: "translateY(-2px)",\n    boxShadow: theme.shadows[8]\n  }\n}));\nconst UploadArea = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_2__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"])(({\n  theme,\n  isDragOver\n}) => ({\n  border: `2px dashed ${isDragOver ? theme.palette.primary.main : theme.palette.grey[300]}`,\n  borderRadius: theme.spacing(1),\n  padding: theme.spacing(4),\n  textAlign: "center",\n  backgroundColor: isDragOver ? theme.palette.primary.light + "20" : "transparent",\n  transition: "all 0.2s ease-in-out",\n  cursor: "pointer",\n  minHeight: "400px",\n  display: "flex",\n  alignItems: "center",\n  justifyContent: "center"\n}));\nconst Drive = () => {\n  // États de base\n  const [currentPath, setCurrentPath] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [folderContent, setFolderContent] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    folders: [],\n    files: []\n  });\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [uploading, setUploading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [searchTerm, setSearchTerm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [searchResults, setSearchResults] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    folders: [],\n    files: []\n  });\n  const [uploadDialogOpen, setUploadDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [createFolderDialogOpen, setCreateFolderDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedFiles, setSelectedFiles] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [newFolderName, setNewFolderName] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [isDragOver, setIsDragOver] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [dragTimeout, setDragTimeout] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [contextMenu, setContextMenu] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [selectedItem, setSelectedItem] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [renameDialogOpen, setRenameDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [newItemName, setNewItemName] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [snackbar, setSnackbar] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    open: false,\n    message: "",\n    severity: "info"\n  });\n  const [officeDialogOpen, setOfficeDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [officeFileData, setOfficeFileData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    fileName: "",\n    fileUrl: "",\n    filePath: ""\n  });\n  const [fileViewerOpen, setFileViewerOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [fileViewerData, setFileViewerData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    filePath: "",\n    fileName: "",\n    contentType: ""\n  });\n\n  // État pour le modal de conflit\n\n  const MAX_FILE_SIZE = 100 * 1024 * 1024; // 100 MB\n\n  // Fonction pour fermer la sidebar\n  const closeSidebar = () => {\n    // Émettre un événement personnalisé pour fermer la sidebar\n    window.dispatchEvent(new CustomEvent("closeSidebar"));\n\n    // Alternative : essayer de trouver et cliquer sur le bouton close\n    const closeButton = document.querySelector(\'.close-button, [data-testid="close-button"], button[aria-label*="close"]\');\n    if (closeButton) {\n      closeButton.click();\n    }\n  };\n\n  // Fonction pour naviguer vers un chemin spécifique\n  const navigateToSpecificPath = async path => {\n    if (!path) return;\n    try {\n      setLoading(true);\n\n      // Déterminer si c\'est un fichier ou un dossier\n      const isFile = path.includes(".") && path.split("/").pop().includes(".");\n      let folderPath, fileName;\n      if (isFile) {\n        // Si c\'est un fichier, extraire le dossier parent\n        const pathParts = path.split("/");\n        fileName = pathParts.pop(); // Nom du fichier\n        folderPath = pathParts.join("/"); // Chemin du dossier parent\n\n        // S\'assurer que le chemin se termine par / pour ouvrir le dossier\n        if (!folderPath.endsWith("/")) {\n          folderPath += "/";\n        }\n      } else {\n        // Si c\'est un dossier, utiliser le chemin tel quel\n        folderPath = path;\n        // S\'assurer que le chemin se termine par / pour l\'ouvrir\n        if (!folderPath.endsWith("/")) {\n          folderPath += "/";\n        }\n      }\n      console.log("Navigation vers le dossier (avec /):", folderPath);\n      console.log("Fichier cible:", fileName);\n\n      // Utiliser votre API existante pour naviguer vers le dossier\n      const response = await fetch(`/api/drive-complete/list-content/?folder_path=${encodeURIComponent(folderPath)}`);\n      if (response.ok) {\n        const data = await response.json();\n        setCurrentPath(folderPath);\n        setFolderContent(data);\n\n        // Mettre en surbrillance le fichier si focus=file est spécifié et qu\'on a un nom de fichier\n        const urlParams = new URLSearchParams(window.location.search);\n        if (fileName && urlParams.get("focus") === "file" && data.files) {\n          const targetFile = data.files.find(file => file.name === fileName);\n          if (targetFile) {\n            setSelectedItem(targetFile);\n            console.log("Fichier sélectionné:", targetFile);\n          }\n        }\n      } else {\n        console.error("Erreur API:", response.status, response.statusText);\n      }\n    } catch (error) {\n      console.error("Erreur lors de la navigation:", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Fonction pour interpréter les paramètres d\'URL\n  const handleUrlParameters = () => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const path = urlParams.get("path");\n    const sidebar = urlParams.get("sidebar");\n    const focus = urlParams.get("focus");\n\n    // Fermer la sidebar si demandé\n    if (sidebar === "closed") {\n      // Délai pour s\'assurer que le composant est monté\n      setTimeout(() => {\n        closeSidebar();\n      }, 100);\n    }\n\n    // Naviguer vers le chemin spécifié\n    if (path) {\n      navigateToSpecificPath(path);\n    }\n  };\n\n  // Fonctions utilitaires\n  const formatFileName = fileName => {\n    // Transformer les underscores en espaces pour un affichage plus lisible\n    // Garder l\'extension intacte\n    if (!fileName) return fileName;\n    const lastDotIndex = fileName.lastIndexOf(".");\n    if (lastDotIndex === -1) {\n      // Pas d\'extension, remplacer tous les underscores\n      return fileName.replace(/_/g, " ");\n    } else {\n      // Garder l\'extension intacte, remplacer les underscores dans le nom\n      const name = fileName.substring(0, lastDotIndex);\n      const extension = fileName.substring(lastDotIndex);\n      return name.replace(/_/g, " ") + extension;\n    }\n  };\n\n  // Fonction pour normaliser le texte (supprimer accents et mettre en minuscules)\n  const normalizeText = text => {\n    return text.normalize("NFD").replace(/[\\u0300-\\u036f]/g, "") // Supprimer les accents\n    .toLowerCase();\n  };\n\n  // Fonction de recherche intelligente dans le contenu du dossier courant\n  const performSearch = searchQuery => {\n    if (!searchQuery.trim()) {\n      // Si la recherche est vide, afficher le contenu normal\n      setSearchResults({\n        folders: [],\n        files: []\n      });\n      return;\n    }\n    console.log(`🔍 Recherche intelligente de "${searchQuery}" dans ${currentPath || "racine"}`);\n\n    // Recherche dans le contenu du dossier courant (plus rapide)\n    const normalizedQuery = normalizeText(searchQuery);\n\n    // Recherche partielle : trouve tous les éléments contenant la chaîne\n    const filteredFolders = folderContent.folders.filter(folder => normalizeText(folder.name).includes(normalizedQuery));\n    const filteredFiles = folderContent.files.filter(file => normalizeText(file.name).includes(normalizedQuery));\n    setSearchResults({\n      folders: filteredFolders,\n      files: filteredFiles\n    });\n    console.log(`✅ Recherche intelligente terminée: ${filteredFolders.length} dossiers, ${filteredFiles.length} fichiers trouvés`);\n  };\n\n  // Fonction pour gérer la saisie et la recherche en temps réel\n  const handleSearchInput = value => {\n    setSearchTerm(value);\n\n    // Si le champ est vide, effacer les résultats\n    if (!value.trim()) {\n      setSearchResults({\n        folders: [],\n        files: []\n      });\n      return;\n    }\n\n    // Recherche en temps réel avec délai pour éviter trop de requêtes\n    const timeoutId = setTimeout(() => {\n      if (value.trim()) {\n        performSearch(value);\n      }\n    }, 200); // Délai de 200ms pour la fluidité\n\n    // Nettoyer le timeout précédent\n    return () => clearTimeout(timeoutId);\n  };\n\n  // Fonction pour gérer la touche Entrée (recherche immédiate)\n  const handleSearchKeyPress = event => {\n    if (event.key === "Enter") {\n      if (searchTerm.trim()) {\n        performSearch(searchTerm);\n      } else {\n        setSearchResults({\n          folders: [],\n          files: []\n        });\n      }\n    }\n  };\n  const getFileIcon = (contentType, extension) => {\n    if (contentType !== null && contentType !== void 0 && contentType.includes("pdf") || extension === "pdf") return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n      color: "error"\n    });\n    if (contentType !== null && contentType !== void 0 && contentType.includes("image") || ["jpg", "jpeg", "png", "gif", "bmp"].includes(extension)) return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n      color: "primary"\n    });\n    if (contentType !== null && contentType !== void 0 && contentType.includes("video") || ["mp4", "avi", "mov", "wmv"].includes(extension)) return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n      color: "secondary"\n    });\n    if (contentType !== null && contentType !== void 0 && contentType.includes("audio") || ["mp3", "wav", "flac"].includes(extension)) return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n      color: "info"\n    });\n    if (["doc", "docx", "xls", "xlsx", "ppt", "pptx"].includes(extension)) return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      color: "success"\n    });\n    if (["zip", "rar", "7z", "tar", "gz"].includes(extension)) return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n      color: "warning"\n    });\n    if (["js", "jsx", "ts", "tsx", "py", "java", "cpp", "c", "html", "css"].includes(extension)) return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n      color: "info"\n    });\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_14__["default"], null);\n  };\n  const formatFileSize = bytes => {\n    if (bytes === 0) return "0 B";\n    const k = 1024;\n    const sizes = ["B", "KB", "MB", "GB"];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + " " + sizes[i];\n  };\n  const formatDate = dateString => {\n    return new Date(dateString).toLocaleDateString("fr-FR", {\n      year: "numeric",\n      month: "short",\n      day: "numeric",\n      hour: "2-digit",\n      minute: "2-digit"\n    });\n  };\n\n  // Vérifier si un fichier peut être ouvert dans le navigateur\n  const canOpenInBrowser = (contentType, fileName) => {\n    var _fileName$split$pop;\n    const extension = (_fileName$split$pop = fileName.split(".").pop()) === null || _fileName$split$pop === void 0 ? void 0 : _fileName$split$pop.toLowerCase();\n\n    // Types de fichiers qui peuvent être ouverts dans le navigateur\n    const browserSupportedTypes = ["pdf", "txt", "html", "htm", "css", "js", "json", "xml", "jpg", "jpeg", "png", "gif", "bmp", "svg", "webp", "mp4", "webm", "ogg", "mp3", "wav", "flac"];\n\n    // Types MIME supportés\n    const browserSupportedMimeTypes = ["text/", "image/", "video/", "audio/", "application/pdf", "application/json", "application/xml"];\n    return browserSupportedTypes.includes(extension) || browserSupportedMimeTypes.some(type => contentType === null || contentType === void 0 ? void 0 : contentType.startsWith(type));\n  };\n\n  // Vérifier si un fichier peut être ouvert avec Office Online\n  const canOpenWithOfficeOnline = fileName => {\n    var _fileName$split$pop2;\n    const extension = (_fileName$split$pop2 = fileName.split(".").pop()) === null || _fileName$split$pop2 === void 0 ? void 0 : _fileName$split$pop2.toLowerCase();\n    const officeExtensions = ["doc", "docx", "xls", "xlsx", "ppt", "pptx", "odt", "ods", "odp" // OpenDocument formats\n    ];\n    return officeExtensions.includes(extension);\n  };\n\n  // Vérifier si un fichier peut être ouvert avec l\'application locale\n  const canOpenWithLocalApp = fileName => {\n    var _fileName$split$pop3;\n    const extension = (_fileName$split$pop3 = fileName.split(".").pop()) === null || _fileName$split$pop3 === void 0 ? void 0 : _fileName$split$pop3.toLowerCase();\n    const localAppExtensions = ["doc", "docx", "xls", "xlsx", "ppt", "pptx", "odt", "ods", "odp", "rtf", "csv"];\n    return localAppExtensions.includes(extension);\n  };\n\n  // Charger le contenu du dossier actuel\n  const fetchFolderContent = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (folderPath = "") => {\n    try {\n      setLoading(true);\n      const params = new URLSearchParams();\n      if (folderPath) params.append("folder_path", folderPath);\n      const response = await fetch(`/api/drive-complete/list-content/?${params}`);\n      if (!response.ok) throw new Error("Erreur lors du chargement du contenu");\n      const data = await response.json();\n      setFolderContent({\n        folders: data.folders || [],\n        files: data.files || []\n      });\n      setCurrentPath(folderPath);\n    } catch (error) {\n      console.error("Erreur lors du chargement du contenu:", error);\n      showSnackbar("Erreur lors du chargement du contenu", "error");\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Créer un nouveau dossier\n  const handleCreateFolder = async () => {\n    if (newFolderName.trim()) {\n      try {\n        const response = await fetch("/api/drive-complete/create-folder/", {\n          method: "POST",\n          headers: {\n            "Content-Type": "application/json",\n            "X-CSRFToken": getCookie("csrftoken")\n          },\n          body: JSON.stringify({\n            parent_path: currentPath,\n            folder_name: newFolderName.trim()\n          })\n        });\n        if (!response.ok) {\n          throw new Error("Erreur lors de la création du dossier");\n        }\n        const data = await response.json();\n\n        // Mettre à jour l\'état local immédiatement\n        const newFolder = {\n          name: newFolderName.trim(),\n          path: data.folder_path,\n          type: "folder"\n        };\n        setFolderContent(prev => ({\n          ...prev,\n          folders: [...prev.folders, newFolder]\n        }));\n        setNewFolderName("");\n        setCreateFolderDialogOpen(false);\n        showSnackbar("Dossier créé avec succès", "success");\n      } catch (error) {\n        console.error("Erreur création dossier:", error);\n        showSnackbar("Erreur lors de la création du dossier", "error");\n      }\n    }\n  };\n\n  // Supprimer un dossier ou fichier\n  const handleDeleteItem = async (itemPath, isFolder = false) => {\n    try {\n      const endpoint = isFolder ? "/api/drive-complete/delete-folder/" : "/api/drive-complete/delete-file/";\n      const response = await fetch(endpoint, {\n        method: "DELETE",\n        headers: {\n          "Content-Type": "application/json",\n          "X-CSRFToken": getCookie("csrftoken")\n        },\n        body: JSON.stringify({\n          folder_path: isFolder ? itemPath : undefined,\n          file_path: !isFolder ? itemPath : undefined\n        })\n      });\n      if (!response.ok) {\n        throw new Error("Erreur lors de la suppression");\n      }\n\n      // Mettre à jour l\'état local immédiatement\n      if (isFolder) {\n        setFolderContent(prev => ({\n          ...prev,\n          folders: prev.folders.filter(folder => folder.path !== itemPath)\n        }));\n      } else {\n        setFolderContent(prev => ({\n          ...prev,\n          files: prev.files.filter(file => file.path !== itemPath)\n        }));\n      }\n      showSnackbar("Élément supprimé avec succès", "success");\n    } catch (error) {\n      console.error("Erreur suppression:", error);\n      showSnackbar("Erreur lors de la suppression", "error");\n    }\n  };\n\n  // Renommer un dossier ou fichier\n  const handleRenameItem = async () => {\n    if (!selectedItem || !newItemName.trim()) return;\n    try {\n      const response = await fetch("/api/drive-complete/rename-item/", {\n        method: "POST",\n        headers: {\n          "Content-Type": "application/json",\n          "X-CSRFToken": getCookie("csrftoken")\n        },\n        body: JSON.stringify({\n          old_path: selectedItem.path,\n          new_name: newItemName.trim()\n        })\n      });\n      if (!response.ok) {\n        throw new Error("Erreur lors du renommage");\n      }\n      const data = await response.json();\n\n      // Mettre à jour l\'état local avec le nouveau chemin\n      if (selectedItem.isFolder) {\n        setFolderContent(prev => ({\n          ...prev,\n          folders: prev.folders.map(folder => folder.path === selectedItem.path ? {\n            ...folder,\n            name: newItemName.trim(),\n            path: data.new_path\n          } : folder)\n        }));\n      } else {\n        setFolderContent(prev => ({\n          ...prev,\n          files: prev.files.map(file => file.path === selectedItem.path ? {\n            ...file,\n            name: newItemName.trim(),\n            path: data.new_path\n          } : file)\n        }));\n      }\n      setRenameDialogOpen(false);\n      setNewItemName("");\n      setSelectedItem(null);\n      showSnackbar("Élément renommé avec succès", "success");\n    } catch (error) {\n      console.error("Erreur renommage:", error);\n      showSnackbar("Erreur lors du renommage", "error");\n    }\n  };\n\n  // Ouvrir le modal de renommage\n  const openRenameDialog = item => {\n    setSelectedItem(item);\n    setNewItemName(item.name);\n    setRenameDialogOpen(true);\n    handleContextMenuClose();\n  };\n\n  // Naviguer dans un dossier\n  const navigateToFolder = folder => {\n    const newPath = folder.path;\n    if (newPath !== currentPath) {\n      fetchFolderContent(newPath);\n    }\n  };\n\n  // Naviguer vers le dossier parent\n  const navigateToParent = () => {\n    const parentPath = currentPath.split("/").slice(0, -1).join("/");\n    if (parentPath !== currentPath) {\n      fetchFolderContent(parentPath);\n    }\n  };\n\n  // Upload de fichiers\n  const uploadFile = async file => {\n    try {\n      // Vérifier que le fichier a un nom\n      if (!file.name) {\n        throw new Error("Le fichier n\'a pas de nom");\n      }\n\n      // 1. Obtenir l\'URL d\'upload\n      const requestBody = {\n        file_path: currentPath || "",\n        file_name: file.name\n      };\n      const uploadUrlResponse = await fetch("/api/drive-complete/upload-url/", {\n        method: "POST",\n        headers: {\n          "Content-Type": "application/json",\n          "X-CSRFToken": getCookie("csrftoken")\n        },\n        body: JSON.stringify(requestBody)\n      });\n      if (!uploadUrlResponse.ok) {\n        const errorData = await uploadUrlResponse.json().catch(() => ({}));\n        throw new Error(errorData.error || "Erreur lors de la génération de l\'URL d\'upload");\n      }\n      const uploadData = await uploadUrlResponse.json();\n\n      // 2. Upload direct vers S3\n      const formData = new FormData();\n      Object.keys(uploadData.fields).forEach(key => {\n        formData.append(key, uploadData.fields[key]);\n      });\n      formData.append("file", file);\n      const uploadResponse = await fetch(uploadData.upload_url, {\n        method: "POST",\n        body: formData\n      });\n      if (!uploadResponse.ok) {\n        const errorText = await uploadResponse.text();\n        throw new Error("Erreur lors de l\'upload vers S3");\n      }\n      return true;\n    } catch (error) {\n      throw error;\n    }\n  };\n\n  // Ouvrir un fichier dans le navigateur\n  const openFile = async (filePath, fileName, contentType) => {\n    try {\n      // Vérifier si le fichier peut être ouvert dans le navigateur\n      if (!canOpenInBrowser(contentType, fileName)) {\n        showSnackbar("Ce type de fichier ne peut pas être ouvert dans le navigateur", "warning");\n        return;\n      }\n\n      // Pour les PDFs, utiliser Puppeteer pour la prévisualisation\n      if (fileName.toLowerCase().endsWith(".pdf")) {\n        const previewUrl = `/api/drive-complete/preview-file/?file_path=${encodeURIComponent(filePath)}`;\n\n        // Ouvrir dans un nouvel onglet avec gestion d\'erreur\n        const newWindow = window.open(previewUrl, "_blank");\n\n        // Vérifier si la fenêtre s\'est ouverte\n        if (newWindow) {\n          showSnackbar("Prévisualisation PDF générée", "success");\n        } else {\n          showSnackbar("Erreur lors de l\'ouverture de la prévisualisation", "error");\n        }\n      } else {\n        // Pour les autres fichiers, utiliser la page dédiée\n        setFileViewerData({\n          filePath: filePath,\n          fileName: fileName,\n          contentType: contentType\n        });\n        setFileViewerOpen(true);\n        showSnackbar("Fichier ouvert en prévisualisation", "success");\n      }\n    } catch (error) {\n      console.error("Erreur ouverture fichier:", error);\n      showSnackbar("Erreur lors de l\'ouverture du fichier", "error");\n    }\n  };\n\n  // Ouvrir un fichier Office avec différentes options\n  const openOfficeFile = async (filePath, fileName) => {\n    try {\n      const response = await fetch(`/api/drive-complete/download-url/?file_path=${encodeURIComponent(filePath)}`);\n      if (!response.ok) {\n        throw new Error("Erreur lors de la génération du lien de téléchargement");\n      }\n      const data = await response.json();\n      const fileUrl = data.download_url;\n\n      // Créer un modal pour choisir l\'option d\'ouverture\n      setOfficeDialogOpen(true);\n      setOfficeFileData({\n        fileName: fileName,\n        fileUrl: fileUrl,\n        filePath: filePath\n      });\n    } catch (error) {\n      console.error("Erreur ouverture fichier Office:", error);\n      showSnackbar("Erreur lors de l\'ouverture du fichier", "error");\n    }\n  };\n\n  // Ouvrir avec Office Online\n  const openWithOfficeOnline = (fileUrl, fileName) => {\n    // Encoder l\'URL du fichier pour Office Online\n    const encodedUrl = encodeURIComponent(fileUrl);\n    const officeOnlineUrl = `https://view.officeapps.live.com/op/embed.aspx?src=${encodedUrl}`;\n    window.open(officeOnlineUrl, "_blank");\n    setOfficeDialogOpen(false);\n    showSnackbar("Fichier ouvert avec Office Online", "success");\n  };\n\n  // Ouvrir avec l\'application locale\n  const openWithLocalApp = (fileUrl, fileName) => {\n    // Créer un lien temporaire pour ouvrir avec l\'application par défaut\n    const link = document.createElement("a");\n    link.href = fileUrl;\n    link.download = fileName; // Force le téléchargement\n    link.target = "_blank";\n\n    // Ajouter un attribut pour ouvrir avec l\'application locale\n    link.setAttribute("data-action", "open-local");\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    setOfficeDialogOpen(false);\n    showSnackbar("Fichier ouvert avec l\'application locale", "success");\n  };\n\n  // Télécharger un fichier\n  const downloadFile = async (filePath, fileName) => {\n    try {\n      const response = await fetch(`/api/drive-complete/download-url/?file_path=${encodeURIComponent(filePath)}`);\n      if (!response.ok) {\n        throw new Error("Erreur lors de la génération du lien de téléchargement");\n      }\n      const data = await response.json();\n\n      // Créer un lien temporaire pour le téléchargement\n      const link = document.createElement("a");\n      link.href = data.download_url;\n      link.download = fileName;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      showSnackbar("Téléchargement démarré", "success");\n    } catch (error) {\n      console.error("Erreur téléchargement:", error);\n      showSnackbar("Erreur lors du téléchargement", "error");\n    }\n  };\n\n  // Envoyer un fichier par email\n  const sendFileByEmail = async (filePath, fileName) => {\n    try {\n      // 1. Télécharger le fichier automatiquement\n      const link = document.createElement("a");\n      link.href = `/api/download-file-from-drive/?file_path=${encodeURIComponent(filePath)}`;\n      link.download = fileName;\n      link.click();\n\n      // 2. Ouvrir l\'application email avec contenu pré-rempli\n      const subject = encodeURIComponent(fileName);\n      const body = encodeURIComponent(`Bonjour,\\n\\nVeuillez trouver en pièce jointe le fichier ${fileName}.\\n\\nCordialement`);\n      const mailtoLink = `mailto:?subject=${subject}&body=${body}`;\n      window.open(mailtoLink, "_blank");\n\n      // 3. Afficher une notification d\'aide\n      showSnackbar(`📧 Email ouvert avec contenu pré-rempli ! Le fichier "${fileName}" a été téléchargé. Joignez-le depuis votre dossier de téléchargements.`, "success");\n    } catch (error) {\n      console.error("Erreur envoi email:", error);\n      showSnackbar("Erreur lors de l\'ouverture de l\'application de mail", "error");\n    }\n  };\n\n  // Utilitaires\n  const getCookie = name => {\n    let cookieValue = null;\n    if (document.cookie && document.cookie !== "") {\n      const cookies = document.cookie.split(";");\n      for (let i = 0; i < cookies.length; i++) {\n        const cookie = cookies[i].trim();\n        if (cookie.substring(0, name.length + 1) === name + "=") {\n          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n          break;\n        }\n      }\n    }\n    return cookieValue;\n  };\n  const showSnackbar = (message, severity = "info") => {\n    setSnackbar({\n      open: true,\n      message,\n      severity\n    });\n  };\n\n  // Gestionnaires d\'événements\n  const handleFileSelect = event => {\n    const files = Array.from(event.target.files);\n    setSelectedFiles(files);\n    setUploadDialogOpen(true);\n  };\n  const handleDragOver = event => {\n    event.preventDefault();\n\n    // Nettoyer le timeout précédent\n    if (dragTimeout) {\n      clearTimeout(dragTimeout);\n    }\n    setIsDragOver(true);\n  };\n  const handleDragLeave = event => {\n    event.preventDefault();\n\n    // Nettoyer le timeout précédent\n    if (dragTimeout) {\n      clearTimeout(dragTimeout);\n    }\n\n    // Vérifier si on quitte vraiment la zone de drop\n    const rect = event.currentTarget.getBoundingClientRect();\n    const x = event.clientX;\n    const y = event.clientY;\n\n    // Si on est encore dans les limites de la zone, ne pas désactiver\n    if (x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom) {\n      return;\n    }\n\n    // Ajouter un délai pour éviter le clignotement\n    const timeout = setTimeout(() => {\n      setIsDragOver(false);\n    }, 100);\n    setDragTimeout(timeout);\n  };\n  const handleDrop = event => {\n    event.preventDefault();\n    setIsDragOver(false);\n    const files = Array.from(event.dataTransfer.files);\n    if (files.length > 0) {\n      setSelectedFiles(files);\n      setUploadDialogOpen(true);\n    }\n  };\n  const handleUpload = async () => {\n    if (selectedFiles.length === 0) return;\n    setUploading(true);\n    try {\n      for (const file of selectedFiles) {\n        if (file.size > MAX_FILE_SIZE) {\n          showSnackbar(`Le fichier ${formatFileName(file.name)} dépasse la taille maximale de 100 MB`, "error");\n          continue;\n        }\n        await uploadFile(file);\n      }\n      showSnackbar("Upload terminé avec succès", "success");\n      setUploadDialogOpen(false);\n      setSelectedFiles([]);\n      fetchFolderContent(currentPath); // Recharger pour voir les nouveaux fichiers\n    } catch (error) {\n      showSnackbar("Erreur lors de l\'upload", "error");\n    } finally {\n      setUploading(false);\n    }\n  };\n  const handleContextMenu = (event, item) => {\n    event.preventDefault();\n    setSelectedItem(item);\n    setContextMenu({\n      mouseX: event.clientX + 2,\n      mouseY: event.clientY - 6\n    });\n  };\n  const handleContextMenuClose = () => {\n    setContextMenu(null);\n  };\n\n  // Navigation via breadcrumbs\n  const navigateToPath = path => {\n    if (path !== currentPath) {\n      fetchFolderContent(path);\n    }\n  };\n\n  // Construire le breadcrumb\n  const buildBreadcrumb = () => {\n    const parts = currentPath.split("/").filter(part => part);\n    const breadcrumb = [{\n      name: "Documents",\n      path: ""\n    }];\n    let currentPathPart = "";\n    parts.forEach(part => {\n      currentPathPart += (currentPathPart ? "/" : "") + part;\n      // Ajouter un / à la fin pour s\'assurer que la navigation fonctionne correctement\n      breadcrumb.push({\n        name: part,\n        path: currentPathPart + "/"\n      });\n    });\n    return breadcrumb;\n  };\n\n  // Effet pour charger le contenu initial\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    fetchFolderContent("");\n  }, [fetchFolderContent]);\n\n  // Effet pour interpréter les paramètres d\'URL au chargement\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    handleUrlParameters();\n  }, []);\n\n  // Nettoyer le timeout au démontage\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    return () => {\n      if (dragTimeout) {\n        clearTimeout(dragTimeout);\n      }\n    };\n  }, [dragTimeout]);\n\n  // Rendu\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(DriveContainer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(DriveHeader, {\n    elevation: 1\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      gap: 2,\n      flexWrap: "wrap"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "h5",\n    component: "h1"\n  }, "Drive"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    separator: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n      fontSize: "small"\n    })\n  }, buildBreadcrumb().map((item, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    key: index,\n    component: "button",\n    variant: "body1",\n    onClick: () => navigateToPath(item.path),\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      gap: 0.5\n    }\n  }, index === 0 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    fontSize: "small"\n  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    fontSize: "small"\n  }), formatFileName(item.name))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      gap: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    size: "small",\n    placeholder: "Rechercher en temps r\\xE9el... (ou appuyez sur Entr\\xE9e)",\n    value: searchTerm,\n    onChange: e => handleSearchInput(e.target.value),\n    onKeyPress: handleSearchKeyPress,\n    InputProps: {\n      startAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n        fontSize: "small",\n        sx: {\n          mr: 1,\n          color: "text.secondary"\n        }\n      }),\n      endAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], {\n        position: "end"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n        size: "small",\n        onClick: () => {\n          if (searchTerm.trim()) {\n            performSearch(searchTerm);\n          }\n        },\n        disabled: !searchTerm.trim()\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n        fontSize: "small"\n      })))\n    },\n    sx: {\n      minWidth: 200\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    variant: "outlined",\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_26__["default"], null),\n    onClick: () => setCreateFolderDialogOpen(true)\n  }, "Nouveau dossier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    variant: "contained",\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_27__["default"], null),\n    onClick: () => setUploadDialogOpen(true)\n  }, "Upload"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(DriveContent, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      position: "relative",\n      width: "100%",\n      height: "100%",\n      minHeight: "calc(100vh - 200px)"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      position: "absolute",\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      zIndex: isDragOver ? 10 : -1,\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "center",\n      backgroundColor: isDragOver ? "rgba(25, 118, 210, 0.1)" : "transparent",\n      transition: "all 0.2s ease-in-out"\n    },\n    onDragOver: handleDragOver,\n    onDragLeave: handleDragLeave,\n    onDrop: handleDrop\n  }, isDragOver && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      border: "3px dashed",\n      borderColor: "primary.main",\n      borderRadius: 3,\n      padding: 6,\n      backgroundColor: "primary.light + 20",\n      display: "flex",\n      flexDirection: "column",\n      alignItems: "center",\n      justifyContent: "center",\n      minWidth: 300,\n      minHeight: 200,\n      boxShadow: "0 8px 32px rgba(0,0,0,0.1)"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_27__["default"], {\n    sx: {\n      fontSize: 64,\n      color: "primary.main",\n      mb: 2\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "h6",\n    color: "primary.main",\n    gutterBottom: true\n  }, "D\\xE9posez vos fichiers ici"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Glissez-d\\xE9posez vos fichiers pour les uploader"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      position: "relative",\n      zIndex: 1,\n      width: "100%",\n      height: "100%"\n    }\n  }, loading ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "center",\n      p: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_28__["default"], null)) : (searchTerm.trim() && (searchResults.folders.length > 0 || searchResults.files.length > 0) ? searchResults.folders.length === 0 && searchResults.files.length === 0 : folderContent.folders.length === 0 && folderContent.files.length === 0) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      textAlign: "center",\n      py: 12,\n      display: "flex",\n      flexDirection: "column",\n      alignItems: "center",\n      justifyContent: "center",\n      minHeight: "400px",\n      border: "none",\n      borderRadius: 2,\n      backgroundColor: "transparent",\n      mx: 2,\n      my: 2,\n      transition: "all 0.2s ease-in-out",\n      cursor: "pointer",\n      "&:hover": {\n        backgroundColor: "grey.50"\n      }\n    },\n    onClick: () => {\n      if (!createFolderDialogOpen && !uploadDialogOpen) {\n        setUploadDialogOpen(true);\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_27__["default"], {\n    sx: {\n      fontSize: 80,\n      color: "text.secondary",\n      mb: 3\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "h5",\n    color: "text.secondary",\n    gutterBottom: true\n  }, searchTerm.trim() && (searchResults.folders.length > 0 || searchResults.files.length > 0) ? "Aucun résultat trouvé" : "Dossier vide"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "body1",\n    color: "text.secondary",\n    sx: {\n      mb: 2\n    }\n  }, searchTerm.trim() && (searchResults.folders.length > 0 || searchResults.files.length > 0) ? `Aucun fichier ou dossier ne correspond à "${searchTerm}"` : "Glissez-déposez des fichiers ici"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, searchTerm.trim() && (searchResults.folders.length > 0 || searchResults.files.length > 0) ? "Essayez de modifier votre recherche" : "ou cliquez pour en sélectionner")) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      p: 2,\n      width: "100%"\n    },\n    onDragOver: handleDragOver,\n    onDragLeave: handleDragLeave,\n    onDrop: handleDrop\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      mb: 2,\n      width: "100%"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      display: "grid",\n      gridTemplateColumns: "1fr 80px 140px 100px 100px",\n      gap: 2,\n      p: 2,\n      borderBottom: "1px solid",\n      borderColor: "divider",\n      backgroundColor: "grey.50",\n      fontWeight: "bold",\n      width: "100%"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "subtitle2"\n  }, "Nom"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "subtitle2"\n  }, "Taille"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "subtitle2"\n  }, "Date de modification"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "subtitle2"\n  }, "Type"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "subtitle2"\n  }, "Actions"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_29__["default"], {\n    sx: {\n      p: 0,\n      width: "100%"\n    }\n  }, (searchTerm.trim() && searchResults.folders.length > 0 ? searchResults.folders : folderContent.folders).map(folder => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_30__["default"], {\n    key: folder.path,\n    sx: {\n      border: "1px solid",\n      borderColor: "divider",\n      mb: 1,\n      borderRadius: 1,\n      cursor: "pointer",\n      width: "100%",\n      "&:hover": {\n        backgroundColor: "action.hover"\n      }\n    },\n    onClick: e => {\n      e.stopPropagation();\n      navigateToFolder(folder);\n    },\n    onContextMenu: e => handleContextMenu(e, {\n      ...folder,\n      isFolder: true\n    })\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      display: "grid",\n      gridTemplateColumns: "1fr 80px 140px 100px 100px",\n      gap: 2,\n      alignItems: "center",\n      width: "100%",\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      gap: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    color: "primary"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "body2",\n    noWrap: true\n  }, formatFileName(folder.name))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "--"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "--"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Dossier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      display: "flex",\n      gap: 0.5\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_31__["default"], {\n    title: "Supprimer"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    size: "small",\n    onClick: e => {\n      e.stopPropagation();\n      handleDeleteItem(folder.path, true);\n    },\n    sx: {\n      color: "error.main"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_32__["default"], {\n    fontSize: "small"\n  }))))))), (searchTerm.trim() && searchResults.files.length > 0 ? searchResults.files : folderContent.files).map(file => {\n    var _file$name$split$pop;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_30__["default"], {\n      key: file.path,\n      "data-file-name": file.name,\n      sx: {\n        border: "2px solid",\n        borderColor: selectedItem && selectedItem.name === file.name ? "primary.main" : "divider",\n        mb: 1,\n        borderRadius: 1,\n        cursor: "pointer",\n        width: "100%",\n        backgroundColor: selectedItem && selectedItem.name === file.name ? "primary.light + 20" : "transparent",\n        transition: "all 0.2s ease",\n        "&:hover": {\n          backgroundColor: "action.hover"\n        }\n      },\n      onClick: e => {\n        e.stopPropagation();\n        // Vérifier si c\'est un fichier Office\n        if (canOpenWithOfficeOnline(file.name)) {\n          openOfficeFile(file.path, file.name);\n        } else if (canOpenInBrowser(file.content_type, file.name)) {\n          openFile(file.path, file.name, file.content_type);\n        } else {\n          showSnackbar("Ce type de fichier ne peut pas être ouvert directement", "warning");\n        }\n      },\n      onContextMenu: e => handleContextMenu(e, {\n        ...file,\n        isFolder: false\n      })\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n      sx: {\n        display: "grid",\n        gridTemplateColumns: "1fr 80px 140px 100px 100px",\n        gap: 2,\n        alignItems: "center",\n        width: "100%",\n        p: 2\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n      sx: {\n        display: "flex",\n        alignItems: "center",\n        gap: 1\n      }\n    }, getFileIcon(file.content_type, file.name.split(".").pop()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n      variant: "body2",\n      noWrap: true\n    }, formatFileName(file.name))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n      variant: "body2",\n      color: "text.secondary"\n    }, formatFileSize(file.size)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n      variant: "body2",\n      color: "text.secondary"\n    }, formatDate(file.last_modified)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n      variant: "body2",\n      color: "text.secondary"\n    }, ((_file$name$split$pop = file.name.split(".").pop()) === null || _file$name$split$pop === void 0 ? void 0 : _file$name$split$pop.toUpperCase()) || "Fichier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n      sx: {\n        display: "flex",\n        gap: 0.5,\n        alignItems: "center"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_31__["default"], {\n      title: "T\\xE9l\\xE9charger le fichier"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n      size: "small",\n      onClick: e => {\n        e.stopPropagation();\n        // Télécharger directement dans le navigateur\n        const link = document.createElement("a");\n        link.href = `/api/download-file-from-drive/?file_path=${encodeURIComponent(file.path)}`;\n        link.download = file.name;\n        link.click();\n      },\n      sx: {\n        color: "success.main"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_33__["default"], {\n      fontSize: "small"\n    }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_31__["default"], {\n      title: "Envoyer par email (ouvre votre client email avec contenu pr\\xE9-rempli)"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n      size: "small",\n      onClick: e => {\n        e.stopPropagation();\n        sendFileByEmail(file.path, file.name);\n      },\n      sx: {\n        color: "primary.main"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_34__["default"], {\n      fontSize: "small"\n    }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_31__["default"], {\n      title: "Supprimer"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n      size: "small",\n      onClick: e => {\n        e.stopPropagation();\n        handleDeleteItem(file.path, false);\n      },\n      sx: {\n        color: "error.main"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_32__["default"], {\n      fontSize: "small"\n    }))))));\n  })))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_35__["default"], {\n    open: uploadDialogOpen,\n    onClose: () => setUploadDialogOpen(false),\n    maxWidth: "sm",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_36__["default"], null, "Upload de fichiers"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_37__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "file",\n    multiple: true,\n    onChange: handleFileSelect,\n    style: {\n      display: "none"\n    },\n    id: "file-input"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", {\n    htmlFor: "file-input"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    variant: "outlined",\n    component: "span",\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_27__["default"], null)\n  }, "S\\xE9lectionner des fichiers"))), selectedFiles.length > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, "Fichiers s\\xE9lectionn\\xE9s (", selectedFiles.length, ")"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_29__["default"], {\n    dense: true\n  }, selectedFiles.map((file, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_30__["default"], {\n    key: index\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_38__["default"], null, getFileIcon(file.type, file.name.split(".").pop())), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_39__["default"], {\n    primary: formatFileName(file.name),\n    secondary: `${formatFileSize(file.size)} - ${file.type || "Type inconnu"}`\n  }), file.size > MAX_FILE_SIZE && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_40__["default"], {\n    label: "Trop volumineux",\n    color: "error",\n    size: "small"\n  })))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_41__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    onClick: () => setUploadDialogOpen(false)\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    onClick: handleUpload,\n    variant: "contained",\n    disabled: uploading || selectedFiles.length === 0,\n    startIcon: uploading ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_28__["default"], {\n      size: 16\n    }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_27__["default"], null)\n  }, uploading ? "Upload en cours..." : "Upload"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_35__["default"], {\n    open: createFolderDialogOpen,\n    onClose: () => setCreateFolderDialogOpen(false),\n    maxWidth: "sm",\n    fullWidth: true,\n    onClick: e => e.stopPropagation()\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_36__["default"], null, "Cr\\xE9er un nouveau dossier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_37__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    autoFocus: true,\n    margin: "dense",\n    label: "Nom du dossier",\n    type: "text",\n    fullWidth: true,\n    variant: "outlined",\n    value: newFolderName,\n    onChange: e => setNewFolderName(e.target.value),\n    onKeyPress: e => {\n      if (e.key === "Enter") {\n        handleCreateFolder();\n      }\n    },\n    placeholder: "Ex: Documents importants"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_41__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    onClick: e => {\n      e.stopPropagation();\n      setCreateFolderDialogOpen(false);\n    }\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    onClick: e => {\n      e.stopPropagation();\n      handleCreateFolder();\n    },\n    variant: "contained",\n    disabled: !newFolderName.trim(),\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_20__["default"], null)\n  }, "Cr\\xE9er"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_35__["default"], {\n    open: renameDialogOpen,\n    onClose: () => setRenameDialogOpen(false),\n    maxWidth: "sm",\n    fullWidth: true,\n    onClick: e => e.stopPropagation()\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_36__["default"], null, "Renommer ", selectedItem !== null && selectedItem !== void 0 && selectedItem.isFolder ? "le dossier" : "le fichier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_37__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    autoFocus: true,\n    margin: "dense",\n    label: "Nouveau nom",\n    type: "text",\n    fullWidth: true,\n    variant: "outlined",\n    value: newItemName,\n    onChange: e => setNewItemName(e.target.value),\n    onKeyPress: e => {\n      if (e.key === "Enter") {\n        handleRenameItem();\n      }\n    },\n    placeholder: `Nouveau nom pour ${selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.name}`\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_41__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    onClick: e => {\n      e.stopPropagation();\n      setRenameDialogOpen(false);\n      setNewItemName("");\n      setSelectedItem(null);\n    }\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    onClick: e => {\n      e.stopPropagation();\n      handleRenameItem();\n    },\n    variant: "contained",\n    disabled: !newItemName.trim(),\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_42__["default"], null)\n  }, "Renommer"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_43__["default"], {\n    open: contextMenu !== null,\n    onClose: handleContextMenuClose,\n    anchorReference: "anchorPosition",\n    anchorPosition: contextMenu !== null ? {\n      top: contextMenu.mouseY,\n      left: contextMenu.mouseX\n    } : undefined\n  }, selectedItem && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, !selectedItem.isFolder && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (canOpenInBrowser(selectedItem.content_type, selectedItem.name) || canOpenWithOfficeOnline(selectedItem.name)) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_44__["default"], {\n    onClick: () => {\n      if (canOpenWithOfficeOnline(selectedItem.name)) {\n        openOfficeFile(selectedItem.path, selectedItem.name);\n      } else {\n        openFile(selectedItem.path, selectedItem.name, selectedItem.content_type);\n      }\n      handleContextMenuClose();\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_38__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_45__["default"], {\n    fontSize: "small"\n  })), "Ouvrir"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_44__["default"], {\n    onClick: () => {\n      downloadFile(selectedItem.path, selectedItem.name);\n      handleContextMenuClose();\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_38__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_33__["default"], {\n    fontSize: "small"\n  })), "T\\xE9l\\xE9charger"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_44__["default"], {\n    onClick: () => {\n      sendFileByEmail(selectedItem.path, selectedItem.name);\n      handleContextMenuClose();\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_38__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_34__["default"], {\n    fontSize: "small"\n  })), "Envoyer par email")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_44__["default"], {\n    onClick: () => {\n      openRenameDialog(selectedItem);\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_38__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_42__["default"], {\n    fontSize: "small"\n  })), "Renommer"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_46__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_44__["default"], {\n    onClick: () => {\n      handleDeleteItem(selectedItem.path, selectedItem.isFolder);\n      handleContextMenuClose();\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_38__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_32__["default"], {\n    fontSize: "small"\n  })), "Supprimer"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_35__["default"], {\n    open: officeDialogOpen,\n    onClose: () => setOfficeDialogOpen(false),\n    maxWidth: "sm",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_36__["default"], null, "Ouvrir le fichier Office"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_37__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "body1",\n    gutterBottom: true\n  }, "Comment souhaitez-vous ouvrir \\"", officeFileData.fileName, "\\" ?"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      mt: 2,\n      display: "flex",\n      flexDirection: "column",\n      gap: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    variant: "outlined",\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_47__["default"], null),\n    onClick: () => openWithOfficeOnline(officeFileData.fileUrl, officeFileData.fileName),\n    sx: {\n      justifyContent: "flex-start",\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      textAlign: "left"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "subtitle1"\n  }, "Office Online"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "Ouvrir dans le navigateur avec Office Online (lecture seule)"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    variant: "outlined",\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_48__["default"], null),\n    onClick: () => openWithLocalApp(officeFileData.fileUrl, officeFileData.fileName),\n    sx: {\n      justifyContent: "flex-start",\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      textAlign: "left"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "subtitle1"\n  }, "Application locale"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    variant: "body2",\n    color: "text.secondary"\n  }, "T\\xE9l\\xE9charger et ouvrir avec l\'application par d\\xE9faut"))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_41__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    onClick: () => setOfficeDialogOpen(false)\n  }, "Annuler"))), fileViewerOpen && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_FileViewer__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    filePath: fileViewerData.filePath,\n    fileName: fileViewerData.fileName,\n    onClose: () => setFileViewerOpen(false)\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_49__["default"], {\n    open: snackbar.open,\n    autoHideDuration: 6000,\n    onClose: () => setSnackbar({\n      ...snackbar,\n      open: false\n    })\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_50__["default"], {\n    onClose: () => setSnackbar({\n      ...snackbar,\n      open: false\n    }),\n    severity: snackbar.severity,\n    sx: {\n      width: "100%"\n    }\n  }, snackbar.message)));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Drive);\n\n//# sourceURL=webpack://frontend/./src/components/Drive.js?')},"./src/components/EditAgentModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Modal/Modal.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\n\nconst EditAgentModal = ({\n  isOpen,\n  handleClose,\n  refreshAgents,\n  agents\n}) => {\n  const [agentData, setAgentData] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    id: "",\n    name: "",\n    surname: "",\n    address: "",\n    phone_Number: "",\n    taux_Horaire: "",\n    conge: "",\n    heure_debut: "",\n    heure_fin: "",\n    heure_pause_debut: "",\n    heure_pause_fin: "",\n    jours_travail: []\n  });\n  const joursOptions = ["lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi", "dimanche"];\n  const handleAgentSelect = e => {\n    const selectedAgent = agents.find(agent => agent.id === e.target.value);\n    if (selectedAgent) {\n      setAgentData({\n        ...selectedAgent,\n        heure_debut: selectedAgent.heure_debut ? selectedAgent.heure_debut.slice(0, 5) : "",\n        heure_fin: selectedAgent.heure_fin ? selectedAgent.heure_fin.slice(0, 5) : "",\n        heure_pause_debut: selectedAgent.heure_pause_debut ? selectedAgent.heure_pause_debut.slice(0, 5) : "",\n        heure_pause_fin: selectedAgent.heure_pause_fin ? selectedAgent.heure_pause_fin.slice(0, 5) : "",\n        jours_travail: selectedAgent.jours_travail ? selectedAgent.jours_travail.split(",").map(j => j.trim()) : []\n      });\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setAgentData(prevData => ({\n      ...prevData,\n      [name]: value\n    }));\n  };\n  const handleJoursChange = e => {\n    const {\n      value\n    } = e.target;\n    setAgentData(prevData => ({\n      ...prevData,\n      jours_travail: value\n    }));\n  };\n  const handleSubmit = async () => {\n    if (!agentData.id) {\n      console.error("Aucun agent sélectionné pour la mise à jour.");\n      return;\n    }\n    try {\n      const jours_travail_uniques = Array.from(new Set(agentData.jours_travail.map(j => j.trim())));\n      const agentDataToSubmit = {\n        name: agentData.name,\n        surname: agentData.surname,\n        address: agentData.address,\n        phone_Number: String(agentData.phone_Number),\n        taux_Horaire: agentData.taux_Horaire ? parseFloat(agentData.taux_Horaire) : null,\n        conge: agentData.conge ? agentData.conge : null,\n        heure_debut: agentData.heure_debut || null,\n        heure_fin: agentData.heure_fin || null,\n        heure_pause_debut: agentData.heure_pause_debut || null,\n        heure_pause_fin: agentData.heure_pause_fin || null,\n        jours_travail: jours_travail_uniques.join(",")\n      };\n      console.log("[DEBUG] Données envoyées à l\'API pour modification agent:", agentDataToSubmit);\n      await axios__WEBPACK_IMPORTED_MODULE_1__["default"].put(`/api/agent/${agentData.id}/`, agentDataToSubmit);\n      handleClose();\n      refreshAgents();\n    } catch (error) {\n      var _error$response;\n      console.error("Erreur détaillée:", (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n      console.error("Erreur lors de la mise à jour de l\'agent", error);\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: isOpen,\n    onClose: handleClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      ...style,\n      overflowY: "auto"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("h2", null, "Modifier l\'agent"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    value: agentData.id || "",\n    onChange: handleAgentSelect,\n    displayEmpty: true,\n    fullWidth: true,\n    margin: "normal"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    value: "",\n    disabled: true\n  }, "S\\xE9lectionner un agent"), agents.map(agent => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    key: agent.id,\n    value: agent.id\n  }, `${agent.name} ${agent.surname}`))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Nom",\n    name: "name",\n    value: agentData.name,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Pr\\xE9nom",\n    name: "surname",\n    value: agentData.surname,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Adresse",\n    name: "address",\n    value: agentData.address,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Num\\xE9ro de t\\xE9l\\xE9phone",\n    name: "phone_Number",\n    value: agentData.phone_Number,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Taux Horaire",\n    name: "taux_Horaire",\n    value: agentData.taux_Horaire,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Cong\\xE9",\n    name: "conge",\n    value: agentData.conge,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Heure de d\\xE9but",\n    name: "heure_debut",\n    type: "time",\n    value: agentData.heure_debut,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Heure de fin",\n    name: "heure_fin",\n    type: "time",\n    value: agentData.heure_fin,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Heure de pause d\\xE9but",\n    name: "heure_pause_debut",\n    type: "time",\n    value: agentData.heure_pause_debut,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Heure de pause fin",\n    name: "heure_pause_fin",\n    type: "time",\n    value: agentData.heure_pause_fin,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Jours de travail",\n    name: "jours_travail",\n    value: agentData.jours_travail,\n    onChange: handleJoursChange,\n    fullWidth: true,\n    margin: "normal",\n    select: true,\n    SelectProps: {\n      multiple: true\n    }\n  }, joursOptions.map(jour => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    key: jour,\n    value: jour\n  }, jour))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    variant: "contained",\n    color: "primary",\n    onClick: handleSubmit\n  }, "Enregistrer")));\n};\nconst style = {\n  position: "absolute",\n  top: "50%",\n  left: "50%",\n  transform: "translate(-50%, -50%)",\n  width: 400,\n  height: "80%",\n  bgcolor: "white",\n  border: "2px solid #000",\n  boxShadow: 24,\n  p: 4,\n  color: "rgba(27, 120, 188, 1)",\n  fontSize: "18px",\n  overflowY: "auto",\n  maxHeight: "80vh"\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EditAgentModal);\n\n//# sourceURL=webpack://frontend/./src/components/EditAgentModal.js?')},"./src/components/EditModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Modal/Modal.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\nconst EditModal = ({\n  open,\n  handleClose,\n  data,\n  handleSave,\n  parties,\n  sousParties,\n  allLignesDetails\n}) => {\n  const [editedData, setEditedData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (data) {\n      setEditedData({\n        ...data,\n        titre: data.titre || "",\n        description: data.description || "",\n        unite: data.unite || "",\n        prix: data.prix || "",\n        partie: data.partie,\n        sous_partie: data.sous_partie\n      });\n    }\n  }, [data]);\n  const validateEdit = () => {\n    if (editedData.type === "partie") {\n      const exists = parties === null || parties === void 0 ? void 0 : parties.some(p => p.titre.toLowerCase() === editedData.titre.toLowerCase() && p.id !== editedData.id);\n      if (exists) {\n        setError("Une partie avec ce titre existe déjà");\n        return false;\n      }\n    } else if (editedData.type === "sousPartie") {\n      const exists = sousParties === null || sousParties === void 0 ? void 0 : sousParties.some(sp => sp.description.toLowerCase() === editedData.description.toLowerCase() && sp.id !== editedData.id);\n      if (exists) {\n        setError("Une sous-partie avec cette description existe déjà");\n        return false;\n      }\n    } else if (editedData.type === "ligne") {\n      // Pour les lignes, vérifier si on modifie seulement l\'unité ou le prix\n      const originalLigne = allLignesDetails === null || allLignesDetails === void 0 ? void 0 : allLignesDetails.find(l => l.id === editedData.id);\n      if (originalLigne) {\n        // Si on modifie seulement l\'unité ou le prix (pas la description), pas de conflit\n        const descriptionChanged = originalLigne.description !== editedData.description;\n        if (descriptionChanged) {\n          // Seulement vérifier les conflits si la description a changé\n          const exists = allLignesDetails === null || allLignesDetails === void 0 ? void 0 : allLignesDetails.some(l => l.description.toLowerCase() === editedData.description.toLowerCase() && l.sous_partie === editedData.sous_partie && l.id !== editedData.id);\n          if (exists) {\n            setError("Une ligne de détail avec cette description existe déjà dans cette sous-partie");\n            return false;\n          }\n        }\n      }\n    }\n    setError("");\n    return true;\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (validateEdit()) {\n      handleSave(editedData);\n      handleClose();\n    }\n  };\n  if (!editedData) {\n    return null;\n  }\n  const getInputFields = () => {\n    // Pour une partie\n    if (editedData.type === "partie") {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n        fullWidth: true,\n        label: "Titre de la partie",\n        value: editedData.titre || "",\n        onChange: e => setEditedData({\n          ...editedData,\n          titre: e.target.value\n        }),\n        sx: {\n          mb: 2\n        }\n      });\n    }\n\n    // Pour une sous-partie\n    if (editedData.type === "sousPartie") {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n        fullWidth: true,\n        label: "Description de la sous-partie",\n        value: editedData.description || "",\n        onChange: e => setEditedData({\n          ...editedData,\n          description: e.target.value\n        }),\n        sx: {\n          mb: 2\n        }\n      });\n    }\n\n    // Pour une ligne de détail\n    if (editedData.type === "ligne") {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n        fullWidth: true,\n        label: "Description",\n        value: editedData.description || "",\n        onChange: e => setEditedData({\n          ...editedData,\n          description: e.target.value\n        }),\n        sx: {\n          mb: 2\n        }\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n        fullWidth: true,\n        label: "Unit\\xE9",\n        value: editedData.unite || "",\n        onChange: e => setEditedData({\n          ...editedData,\n          unite: e.target.value\n        }),\n        sx: {\n          mb: 2\n        }\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n        fullWidth: true,\n        label: "Prix",\n        type: "number",\n        step: "0.01",\n        value: editedData.prix || "",\n        onChange: e => setEditedData({\n          ...editedData,\n          prix: parseFloat(e.target.value)\n        }),\n        sx: {\n          mb: 2\n        }\n      }));\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: open,\n    onClose: handleClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      position: "absolute",\n      top: "50%",\n      left: "50%",\n      transform: "translate(-50%, -50%)",\n      bgcolor: "background.paper",\n      boxShadow: 24,\n      p: 4,\n      minWidth: 300\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("form", {\n    onSubmit: handleSubmit\n  }, error && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      color: "error.main",\n      mb: 2\n    }\n  }, error), getInputFields(), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "flex-end",\n      gap: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    onClick: handleClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    type: "submit",\n    variant: "contained"\n  }, "Enregistrer")))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EditModal);\n\n//# sourceURL=webpack://frontend/./src/components/EditModal.js?')},"./src/components/EditStockModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\n\nconst EditStockModal = ({\n  open,\n  onClose,\n  stock,\n  onUpdate\n}) => {\n  const [formData, setFormData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    code_produit: "",\n    designation: "",\n    fournisseur: "",\n    prix_unitaire: "",\n    unite: ""\n  });\n\n  // Mettre à jour formData quand stock change\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (stock) {\n      setFormData({\n        code_produit: stock.code_produit || "",\n        designation: stock.designation || "",\n        fournisseur: stock.fournisseur || "",\n        prix_unitaire: stock.prix_unitaire || "",\n        unite: stock.unite || ""\n      });\n    }\n  }, [stock]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async () => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_1__["default"].put(`/api/stock/${stock.id}/`, formData);\n      onUpdate(response.data);\n      onClose();\n    } catch (error) {\n      console.error("Erreur lors de la modification du stock:", error);\n      alert("Erreur lors de la modification du stock");\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: open,\n    onClose: onClose,\n    maxWidth: "sm",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      fontFamily: \'"Roboto", sans-serif\',\n      fontWeight: "bold"\n    }\n  }, "Modifier le stock"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      display: "flex",\n      flexDirection: "column",\n      gap: 2,\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Code Produit",\n    name: "code_produit",\n    value: formData.code_produit,\n    onChange: handleChange,\n    fullWidth: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "D\\xE9signation",\n    name: "designation",\n    value: formData.designation,\n    onChange: handleChange,\n    fullWidth: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Fournisseur",\n    name: "fournisseur",\n    value: formData.fournisseur,\n    onChange: handleChange,\n    fullWidth: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Prix Unitaire",\n    name: "prix_unitaire",\n    type: "number",\n    value: formData.prix_unitaire,\n    onChange: handleChange,\n    fullWidth: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    label: "Unit\\xE9",\n    name: "unite",\n    value: formData.unite,\n    onChange: handleChange,\n    fullWidth: true\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    onClick: handleSubmit,\n    variant: "contained",\n    color: "primary"\n  }, "Enregistrer")));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EditStockModal);\n\n//# sourceURL=webpack://frontend/./src/components/EditStockModal.js?')},"./src/components/FactureModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Modal/Modal.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_x_date_pickers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/x-date-pickers */ "./node_modules/@mui/x-date-pickers/LocalizationProvider/LocalizationProvider.js");\n/* harmony import */ var _mui_x_date_pickers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/x-date-pickers */ "./node_modules/@mui/x-date-pickers/DatePicker/DatePicker.js");\n/* harmony import */ var _mui_x_date_pickers_AdapterDateFns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/x-date-pickers/AdapterDateFns */ "./node_modules/@mui/x-date-pickers/AdapterDateFns/index.js");\n/* harmony import */ var date_fns_locale_fr__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns/locale/fr */ "./node_modules/date-fns/esm/locale/fr/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\n\n\n\n\n\nconst FactureModal = ({\n  open,\n  onClose,\n  onSubmit,\n  devis\n}) => {\n  const [formData, setFormData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    numero_facture: "",\n    adresse_facturation: "",\n    date_envoi: new Date(),\n    delai_paiement: 45,\n    mode_paiement: "virement"\n  });\n\n  // Fonction pour calculer la date d\'échéance\n  const calculateDateEcheance = (dateEnvoi, delaiPaiement) => {\n    if (!dateEnvoi || !delaiPaiement) return null;\n    const dateEcheance = new Date(dateEnvoi);\n    dateEcheance.setDate(dateEcheance.getDate() + delaiPaiement);\n    return dateEcheance;\n  };\n\n  // Calculer la date d\'échéance automatiquement\n  const dateEcheanceCalculee = calculateDateEcheance(formData.date_envoi, formData.delai_paiement);\n\n  // Initialiser l\'adresse de facturation et le numéro de facture\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (devis && devis.numero) {\n      const adresseSociete = devis.societe ? `${devis.societe.nom_societe}\n${devis.societe.rue_societe}\n${devis.societe.codepostal_societe} ${devis.societe.ville_societe}` : "";\n\n      // Transformer le numéro de devis en numéro de facture\n      const factureNumber = devis.numero.replace("DEV-", "FACT-");\n      setFormData(prev => ({\n        ...prev,\n        numero_facture: prev.numero_facture || factureNumber,\n        adresse_facturation: prev.adresse_facturation || adresseSociete\n      }));\n    }\n  }, [devis]);\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    // Calculer la date d\'échéance basée sur la date d\'envoi et le délai\n    const dateEcheanceFormatted = dateEcheanceCalculee ? dateEcheanceCalculee.toISOString().split("T")[0] : null;\n\n    // Si l\'adresse de facturation est vide, utiliser l\'adresse de la société\n    const finalFormData = {\n      numero: formData.numero_facture,\n      devis: devis.id,\n      date_echeance: dateEcheanceFormatted,\n      mode_paiement: formData.mode_paiement\n    };\n    onSubmit(finalFormData);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: open,\n    onClose: onClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    sx: {\n      position: "absolute",\n      top: "50%",\n      left: "50%",\n      transform: "translate(-50%, -50%)",\n      width: 400,\n      bgcolor: "background.paper",\n      boxShadow: 24,\n      p: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("form", {\n    onSubmit: handleSubmit\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    fullWidth: true,\n    label: "Num\\xE9ro de facture",\n    value: formData.numero_facture,\n    onChange: e => setFormData({\n      ...formData,\n      numero_facture: e.target.value\n    }),\n    margin: "normal",\n    required: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    fullWidth: true,\n    label: "Adresse de facturation",\n    multiline: true,\n    rows: 4,\n    value: formData.adresse_facturation,\n    onChange: e => setFormData({\n      ...formData,\n      adresse_facturation: e.target.value\n    }),\n    margin: "normal",\n    placeholder: "Laissez vide pour utiliser l\'adresse de la soci\\xE9t\\xE9"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_x_date_pickers__WEBPACK_IMPORTED_MODULE_4__.LocalizationProvider, {\n    dateAdapter: _mui_x_date_pickers_AdapterDateFns__WEBPACK_IMPORTED_MODULE_5__.AdapterDateFns,\n    adapterLocale: date_fns_locale_fr__WEBPACK_IMPORTED_MODULE_6__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_x_date_pickers__WEBPACK_IMPORTED_MODULE_7__.DatePicker, {\n    label: "Date d\'envoi",\n    value: formData.date_envoi,\n    onChange: date => setFormData({\n      ...formData,\n      date_envoi: date\n    }),\n    renderInput: params => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], _extends({}, params, {\n      fullWidth: true,\n      margin: "normal"\n    }))\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    fullWidth: true,\n    select: true,\n    label: "D\\xE9lai de paiement",\n    name: "delai_paiement",\n    value: formData.delai_paiement,\n    onChange: e => setFormData({\n      ...formData,\n      delai_paiement: parseInt(e.target.value)\n    }),\n    margin: "normal",\n    required: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: 45\n  }, "45 jours"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: 60\n  }, "60 jours")), dateEcheanceCalculee && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    variant: "body2",\n    sx: {\n      mt: 1,\n      mb: 2,\n      color: "text.secondary"\n    }\n  }, "Date de paiement pr\\xE9vue :", " ", dateEcheanceCalculee.toLocaleDateString("fr-FR")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    fullWidth: true,\n    label: "Mode de paiement",\n    value: formData.mode_paiement,\n    onChange: e => setFormData({\n      ...formData,\n      mode_paiement: e.target.value\n    }),\n    margin: "normal",\n    required: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    type: "submit",\n    variant: "contained",\n    color: "primary"\n  }, "Cr\\xE9er la facture"))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FactureModal);\n\n//# sourceURL=webpack://frontend/./src/components/FactureModal.js?')},"./src/components/FileViewer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/ArrowBack.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/CircularProgress/CircularProgress.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Alert/Alert.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\n\nconst FileViewer = ({\n  filePath,\n  fileName,\n  onClose\n}) => {\n  const [fileUrl, setFileUrl] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const fetchFileUrl = async () => {\n      try {\n        setLoading(true);\n        const response = await fetch(`/api/drive-complete/display-url/?file_path=${encodeURIComponent(filePath)}`);\n        if (!response.ok) {\n          throw new Error("Erreur lors de la génération du lien d\'affichage");\n        }\n        const data = await response.json();\n        setFileUrl(data.display_url);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchFileUrl();\n  }, [filePath]);\n  const getFileType = fileName => {\n    var _fileName$split$pop;\n    const extension = (_fileName$split$pop = fileName.split(".").pop()) === null || _fileName$split$pop === void 0 ? void 0 : _fileName$split$pop.toLowerCase();\n    if (extension === "pdf") return "pdf";\n    if (["jpg", "jpeg", "png", "gif", "bmp", "svg", "webp"].includes(extension)) return "image";\n    if (["mp4", "webm", "ogg"].includes(extension)) return "video";\n    if (["mp3", "wav", "flac"].includes(extension)) return "audio";\n    if (["txt", "html", "css", "js", "json", "xml"].includes(extension)) return "text";\n    return "unknown";\n  };\n  const renderFileContent = () => {\n    const fileType = getFileType(fileName);\n    switch (fileType) {\n      case "pdf":\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("iframe", {\n          src: fileUrl,\n          width: "100%",\n          height: "100%",\n          style: {\n            border: "none"\n          },\n          title: fileName\n        });\n      case "image":\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n          sx: {\n            display: "flex",\n            justifyContent: "center",\n            alignItems: "center",\n            height: "100%"\n          }\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("img", {\n          src: fileUrl,\n          alt: fileName,\n          style: {\n            maxWidth: "100%",\n            maxHeight: "100%",\n            objectFit: "contain"\n          }\n        }));\n      case "video":\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n          sx: {\n            display: "flex",\n            justifyContent: "center",\n            alignItems: "center",\n            height: "100%"\n          }\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("video", {\n          controls: true,\n          width: "100%",\n          height: "100%",\n          style: {\n            maxHeight: "100%"\n          }\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("source", {\n          src: fileUrl,\n          type: "video/mp4"\n        }), "Votre navigateur ne supporte pas la lecture vid\\xE9o."));\n      case "audio":\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n          sx: {\n            display: "flex",\n            justifyContent: "center",\n            alignItems: "center",\n            height: "100%",\n            p: 4\n          }\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("audio", {\n          controls: true,\n          style: {\n            width: "100%"\n          }\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("source", {\n          src: fileUrl,\n          type: "audio/mpeg"\n        }), "Votre navigateur ne supporte pas la lecture audio."));\n      case "text":\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("iframe", {\n          src: fileUrl,\n          width: "100%",\n          height: "100%",\n          style: {\n            border: "none"\n          },\n          title: fileName\n        });\n      default:\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n          sx: {\n            display: "flex",\n            justifyContent: "center",\n            alignItems: "center",\n            height: "100%"\n          }\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n          variant: "h6",\n          color: "text.secondary"\n        }, "Ce type de fichier ne peut pas \\xEAtre affich\\xE9 dans le navigateur"));\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n      sx: {\n        display: "flex",\n        justifyContent: "center",\n        alignItems: "center",\n        height: "100vh"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null));\n  }\n  if (error) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n      sx: {\n        display: "flex",\n        justifyContent: "center",\n        alignItems: "center",\n        height: "100vh",\n        flexDirection: "column",\n        gap: 2\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n      severity: "error",\n      sx: {\n        mb: 2\n      }\n    }, error), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n      variant: "outlined",\n      startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_6__["default"], null),\n      onClick: onClose\n    }, "Retour au Drive"));\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      height: "100vh",\n      display: "flex",\n      flexDirection: "column"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      p: 2,\n      borderBottom: 1,\n      borderColor: "divider",\n      display: "flex",\n      alignItems: "center",\n      gap: 2,\n      backgroundColor: "background.paper"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "outlined",\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_6__["default"], null),\n    onClick: onClose\n  }, "Retour"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    variant: "h6",\n    noWrap: true\n  }, fileName)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      flex: 1,\n      overflow: "hidden"\n    }\n  }, renderFileContent()));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FileViewer);\n\n//# sourceURL=webpack://frontend/./src/components/FileViewer.js?')},"./src/components/Founisseur/NewFournisseurForm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\n\nfunction NewFournisseurForm({\n  open,\n  handleClose,\n  onAddFournisseur\n}) {\n  const [form, setForm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    name: "",\n    Fournisseur_mail: "",\n    phone_Number: "",\n    description_fournisseur: "",\n    magasin: ""\n  });\n  const handleChange = e => setForm({\n    ...form,\n    [e.target.name]: e.target.value\n  });\n  const handleSubmit = async () => {\n    try {\n      // Préparation des données pour le backend\n      const dataToSend = {\n        ...form,\n        phone_Number: form.phone_Number ? parseInt(form.phone_Number, 10) : null\n      };\n      if (!dataToSend.phone_Number) delete dataToSend.phone_Number; // Optionnel : ne pas envoyer si vide\n\n      console.log("Données envoyées au backend pour création fournisseur:", dataToSend);\n      const response = await axios__WEBPACK_IMPORTED_MODULE_1__["default"].post("/api/fournisseurs/", dataToSend);\n      console.log("Réponse du backend:", response);\n      onAddFournisseur();\n      handleClose();\n    } catch (error) {\n      console.error("Erreur lors de la création du fournisseur:", error);\n      if (error.response) {\n        console.error("Réponse du backend:", error.response);\n      }\n      alert("Erreur lors de la création du fournisseur");\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: open,\n    onClose: handleClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "Nouveau Fournisseur"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Soci\\xE9t\\xE9*",\n    name: "name",\n    value: form.name,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Email",\n    name: "Fournisseur_mail",\n    value: form.Fournisseur_mail,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "T\\xE9l\\xE9phone (optionnel)",\n    name: "phone_Number",\n    value: form.phone_Number,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Description",\n    name: "description_fournisseur",\n    value: form.description_fournisseur,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Magasin (optionnel)",\n    name: "magasin",\n    value: form.magasin,\n    onChange: handleChange,\n    fullWidth: true,\n    margin: "normal"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: handleClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: handleSubmit,\n    variant: "contained"\n  }, "Cr\\xE9er")));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (NewFournisseurForm);\n\n//# sourceURL=webpack://frontend/./src/components/Founisseur/NewFournisseurForm.js?')},"./src/components/GestionAppelsOffres.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Transform.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Visibility.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Delete.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Container/Container.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Alert/Alert.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableContainer/TableContainer.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableCell/TableCell.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Chip/Chip.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Tooltip/Tooltip.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputLabel/InputLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\n\n\nconst GestionAppelsOffres = () => {\n  const [appelsOffres, setAppelsOffres] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n  const [dialogOpen, setDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [deleteDialogOpen, setDeleteDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedAppelOffres, setSelectedAppelOffres] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [nouveauStatut, setNouveauStatut] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [raisonRefus, setRaisonRefus] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [alertMessage, setAlertMessage] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [alertSeverity, setAlertSeverity] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("success");\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    fetchAppelsOffres();\n  }, []);\n  const fetchAppelsOffres = async () => {\n    try {\n      setLoading(true);\n      const response = await axios__WEBPACK_IMPORTED_MODULE_1__["default"].get("/api/appels-offres/");\n      setAppelsOffres(response.data);\n    } catch (error) {\n      console.error("Erreur lors du chargement des appels d\'offres:", error);\n      showAlert("Erreur lors du chargement des appels d\'offres", "error");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const showAlert = (message, severity = "success") => {\n    setAlertMessage(message);\n    setAlertSeverity(severity);\n    setTimeout(() => setAlertMessage(""), 5000);\n  };\n  const handleTransformerEnChantier = async appelOffresId => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_1__["default"].post(`/api/appels-offres/${appelOffresId}/transformer_en_chantier/`);\n      showAlert("Appel d\'offres transformé en chantier avec succès !");\n      fetchAppelsOffres();\n    } catch (error) {\n      var _error$response;\n      console.error("Erreur lors de la transformation:", error);\n      const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 || (_error$response = _error$response.data) === null || _error$response === void 0 ? void 0 : _error$response.error) || "Erreur lors de la transformation";\n      showAlert(errorMessage, "error");\n    }\n  };\n  const handleMettreAJourStatut = async () => {\n    try {\n      await axios__WEBPACK_IMPORTED_MODULE_1__["default"].post(`/api/appels-offres/${selectedAppelOffres.id}/mettre_a_jour_statut/`, {\n        statut: nouveauStatut,\n        raison_refus: raisonRefus\n      });\n      setDialogOpen(false);\n      fetchAppelsOffres();\n      showAlert("Statut mis à jour avec succès !");\n    } catch (error) {\n      var _error$response2;\n      console.error("Erreur lors de la mise à jour:", error);\n      const errorMessage = ((_error$response2 = error.response) === null || _error$response2 === void 0 || (_error$response2 = _error$response2.data) === null || _error$response2 === void 0 ? void 0 : _error$response2.error) || "Erreur lors de la mise à jour";\n      showAlert(errorMessage, "error");\n    }\n  };\n  const handleSupprimerAppelOffres = async () => {\n    try {\n      await axios__WEBPACK_IMPORTED_MODULE_1__["default"].delete(`/api/appels-offres/${selectedAppelOffres.id}/supprimer_appel_offres/`);\n      setDeleteDialogOpen(false);\n      fetchAppelsOffres();\n      showAlert("Appel d\'offres supprimé avec succès !");\n    } catch (error) {\n      var _error$response3;\n      console.error("Erreur lors de la suppression:", error);\n      const errorMessage = ((_error$response3 = error.response) === null || _error$response3 === void 0 || (_error$response3 = _error$response3.data) === null || _error$response3 === void 0 ? void 0 : _error$response3.error) || "Erreur lors de la suppression";\n      showAlert(errorMessage, "error");\n    }\n  };\n  const getStatutColor = statut => {\n    const colors = {\n      en_attente: "warning",\n      valide: "success",\n      refuse: "error"\n    };\n    return colors[statut] || "default";\n  };\n  const getStatutLabel = statut => {\n    const labels = {\n      en_attente: "En attente validation",\n      valide: "Validé",\n      refuse: "Refusé"\n    };\n    return labels[statut] || statut;\n  };\n  const formatDate = dateString => {\n    if (!dateString) return "-";\n    return new Date(dateString).toLocaleDateString("fr-FR");\n  };\n  const formatMontant = montant => {\n    return new Intl.NumberFormat("fr-FR", {\n      style: "currency",\n      currency: "EUR"\n    }).format(montant || 0);\n  };\n  if (loading) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n      maxWidth: "lg"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n      sx: {\n        mt: 4,\n        textAlign: "center"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, "Chargement des appels d\'offres...")));\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    maxWidth: "lg"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      mt: 4,\n      mb: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "h4",\n    gutterBottom: true,\n    sx: {\n      color: "white",\n      backgroundColor: "transparent"\n    }\n  }, "Gestion des Appels d\'Offres"), alertMessage && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    severity: alertSeverity,\n    sx: {\n      mb: 2\n    }\n  }, alertMessage), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    elevation: 3\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    sx: {\n      backgroundColor: "#1976d2"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    sx: {\n      color: "white",\n      fontWeight: "bold"\n    }\n  }, "Nom du projet"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    sx: {\n      color: "white",\n      fontWeight: "bold"\n    }\n  }, "Soci\\xE9t\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    sx: {\n      color: "white",\n      fontWeight: "bold"\n    }\n  }, "Montant estim\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    sx: {\n      color: "white",\n      fontWeight: "bold"\n    }\n  }, "Statut"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    sx: {\n      color: "white",\n      fontWeight: "bold"\n    }\n  }, "Date cr\\xE9ation"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    sx: {\n      color: "white",\n      fontWeight: "bold"\n    }\n  }, "Actions"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, appelsOffres.length === 0 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    colSpan: 6,\n    align: "center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body1",\n    color: "textSecondary"\n  }, "Aucun appel d\'offres trouv\\xE9"))) : appelsOffres.map(appelOffres => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    key: appelOffres.id\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "subtitle1",\n    fontWeight: "bold"\n  }, appelOffres.chantier_name), appelOffres.description && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body2",\n    color: "textSecondary"\n  }, appelOffres.description)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, appelOffres.societe ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, appelOffres.societe.nom_societe) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    color: "textSecondary"\n  }, "-")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body2"\n  }, "HT: ", formatMontant(appelOffres.montant_ht)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body2"\n  }, "TTC: ", formatMontant(appelOffres.montant_ttc))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    label: getStatutLabel(appelOffres.statut),\n    color: getStatutColor(appelOffres.statut),\n    size: "small"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, formatDate(appelOffres.date_debut)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      display: "flex",\n      gap: 1,\n      flexWrap: "wrap"\n    }\n  }, appelOffres.statut === "valide" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    title: "Transformer en chantier"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    color: "success",\n    onClick: () => handleTransformerEnChantier(appelOffres.id),\n    size: "small"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_16__["default"], null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    title: "Modifier le statut"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    color: "primary",\n    onClick: () => {\n      setSelectedAppelOffres(appelOffres);\n      setNouveauStatut(appelOffres.statut);\n      setRaisonRefus(appelOffres.raison_refus || "");\n      setDialogOpen(true);\n    },\n    size: "small"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_17__["default"], null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    title: "Supprimer l\'appel d\'offres"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    color: "error",\n    onClick: () => {\n      setSelectedAppelOffres(appelOffres);\n      setDeleteDialogOpen(true);\n    },\n    size: "small"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_18__["default"], null)))))))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    open: dialogOpen,\n    onClose: () => setDialogOpen(false),\n    maxWidth: "sm",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, "Modifier le statut de l\'appel d\'offres"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], null, selectedAppelOffres && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, selectedAppelOffres.chantier_name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body2",\n    color: "textSecondary"\n  }, "Soci\\xE9t\\xE9:", " ", selectedAppelOffres.societe ? selectedAppelOffres.societe.nom_societe : "Non spécifiée")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    fullWidth: true,\n    sx: {\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], null, "Nouveau statut"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    value: nouveauStatut,\n    onChange: e => setNouveauStatut(e.target.value),\n    label: "Nouveau statut"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    value: "en_attente"\n  }, "En attente validation"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    value: "valide"\n  }, "Valid\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    value: "refuse"\n  }, "Refus\\xE9"))), nouveauStatut === "refuse" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    fullWidth: true,\n    multiline: true,\n    rows: 3,\n    label: "Raison du refus",\n    value: raisonRefus,\n    onChange: e => setRaisonRefus(e.target.value),\n    placeholder: "Expliquez la raison du refus..."\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_28__["default"], {\n    onClick: () => setDialogOpen(false)\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_28__["default"], {\n    onClick: handleMettreAJourStatut,\n    variant: "contained",\n    disabled: !nouveauStatut\n  }, "Confirmer"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    open: deleteDialogOpen,\n    onClose: () => setDeleteDialogOpen(false),\n    maxWidth: "sm",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, "Confirmer la suppression"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], null, selectedAppelOffres && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "h6",\n    gutterBottom: true,\n    color: "error"\n  }, "\\u26A0\\uFE0F Attention : Cette action est irr\\xE9versible !"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body1",\n    gutterBottom: true\n  }, "\\xCAtes-vous s\\xFBr de vouloir supprimer l\'appel d\'offres :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "h6",\n    gutterBottom: true,\n    sx: {\n      fontWeight: "bold"\n    }\n  }, selectedAppelOffres.chantier_name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body2",\n    color: "textSecondary",\n    gutterBottom: true\n  }, "Soci\\xE9t\\xE9:", " ", selectedAppelOffres.societe ? selectedAppelOffres.societe.nom_societe : "Non spécifiée"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body2",\n    color: "textSecondary",\n    gutterBottom: true\n  }, "Statut: ", getStatutLabel(selectedAppelOffres.statut)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    severity: "error",\n    sx: {\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body2",\n    fontWeight: "bold",\n    gutterBottom: true\n  }, "\\u26A0\\uFE0F Cette action supprimera d\\xE9finitivement :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body2",\n    component: "ul",\n    sx: {\n      pl: 2,\n      m: 0\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", null, "L\'appel d\'offres et toutes ses donn\\xE9es"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", null, "Tous les devis associ\\xE9s \\xE0 cet appel d\'offres"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", null, "Tous les dossiers et fichiers dans le Drive")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body2",\n    sx: {\n      mt: 1,\n      fontWeight: "bold"\n    }\n  }, "Cette action est irr\\xE9versible !")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_28__["default"], {\n    onClick: () => setDeleteDialogOpen(false)\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_28__["default"], {\n    onClick: handleSupprimerAppelOffres,\n    variant: "contained",\n    color: "error"\n  }, "Supprimer d\\xE9finitivement"))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (GestionAppelsOffres);\n\n//# sourceURL=webpack://frontend/./src/components/GestionAppelsOffres.js?')},"./src/components/GlobalConflictModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/FolderOpen.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Link/Link.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/universalDriveGenerator */ "./src/utils/universalDriveGenerator.js");\n\n\n\n\nconst GlobalConflictModal = () => {\n  const [open, setOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [conflictData, setConflictData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n\n  // Fonction utilitaire pour construire les chemins (unifiée)\n  const buildFilePath = data => {\n    const {\n      documentType,\n      societeName,\n      appelOffresName,\n      appelOffresId,\n      devisId,\n      week,\n      month,\n      year\n    } = data;\n\n    // Fonction custom_slugify (identique au backend)\n    const customSlugify = text => {\n      if (!text) return "";\n      text = text.replace(/\\s+/g, " ").trim();\n      text = text.replace(/\\s+/g, "-");\n      text = text.replace(/[^a-zA-Z0-9\\-_.]/g, "");\n      text = text.replace(/-+/g, "-");\n      text = text.trim("-");\n      if (text) {\n        const parts = text.split("-");\n        const capitalizedParts = [];\n        for (const part of parts) {\n          if (part) {\n            capitalizedParts.push(part[0].toUpperCase() + part.slice(1).toLowerCase());\n          }\n        }\n        text = capitalizedParts.join("-");\n      }\n      return text || "Dossier";\n    };\n    let folderPath = "";\n    let fileName = "";\n    switch (documentType) {\n      case "planning_hebdo":\n        folderPath = `Agents/Document_Generaux/PlanningHebdo/${year}/`;\n        fileName = `PH S${week} ${String(year).slice(-2)}.pdf`;\n        break;\n      case "rapport_mensuel":\n      case "rapport_agents":\n        // Support du nouveau type\n        folderPath = `Agents/Document_Generaux/Rapport_mensuel/${year}/`;\n        const monthNames = ["Janvier", "Février", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"];\n        const monthName = monthNames[month - 1] || `Mois_${month}`;\n        fileName = `RapportComptable_${monthName}_${String(year).slice(-2)}.pdf`;\n        break;\n      case "devis_marche":\n      case "devis_chantier":\n        // Support du nouveau type\n        const societeSlug = customSlugify(societeName);\n        const appelOffresSlug = customSlugify(appelOffresName);\n        folderPath = `Appels_Offres/${societeSlug}/${appelOffresSlug}/Devis/Devis_Marche/`;\n        fileName = `DEV-${String(devisId).padStart(3, "0")}-25 - ${appelOffresName}.pdf`;\n        break;\n      default:\n        folderPath = "Documents/";\n        fileName = "document.pdf";\n    }\n    return {\n      folderPath,\n      fileName,\n      fullPath: `${folderPath}${fileName}`\n    };\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const handleConflictEvent = async event => {\n      // Fermer le modal existant s\'il est ouvert\n      if (open) {\n        setOpen(false);\n        setConflictData(null);\n        setTimeout(() => {\n          processConflictEvent(event);\n        }, 100);\n      } else {\n        processConflictEvent(event);\n      }\n    };\n    const processConflictEvent = async event => {\n      // Vérifier si les données ont réellement changé\n      if (conflictData && conflictData.conflictId === event.detail.conflictId) {\n        return;\n      }\n\n      // Pour les appels d\'offres, utiliser le nom du fichier existant\n      let fileName, folderPath, fullPath;\n      if (event.detail.documentType === "devis_marche" || event.detail.documentType === "devis_chantier") {\n        // Utiliser le nom du fichier existant (celui qui cause le conflit)\n        fileName = event.detail.fileName || event.detail.displayFileName;\n\n        // Construire le chemin du dossier (sans le nom du fichier)\n        const paths = buildFilePath(event.detail);\n        folderPath = paths.folderPath;\n        fullPath = `${folderPath}${fileName}`;\n      } else {\n        // Pour les autres types, utiliser la logique normale\n        const paths = buildFilePath(event.detail);\n        fileName = paths.fileName;\n        folderPath = paths.folderPath;\n        fullPath = paths.fullPath;\n      }\n\n      // Mettre à jour les données avec les chemins corrects\n      const updatedData = {\n        ...event.detail,\n        folderPath: folderPath,\n        fileName: fileName,\n        // Utiliser le nom du fichier existant\n        fullPath: fullPath,\n        drive_url: `/drive?path=${fullPath}&sidebar=closed&focus=file&_t=${Date.now()}`\n      };\n      console.log("📋 Données du conflit mises à jour:", updatedData);\n      console.log("📋 Nom du fichier existant:", fileName);\n      console.log("📋 Chemin du fichier:", fullPath);\n      setConflictData(updatedData);\n      setOpen(true);\n    };\n\n    // Écouter les événements de conflit\n    document.removeEventListener("openConflictDialog", handleConflictEvent);\n    window.removeEventListener("openConflictDialog", handleConflictEvent);\n    document.addEventListener("openConflictDialog", handleConflictEvent);\n    window.addEventListener("openConflictDialog", handleConflictEvent);\n    return () => {\n      document.removeEventListener("openConflictDialog", handleConflictEvent);\n      window.removeEventListener("openConflictDialog", handleConflictEvent);\n    };\n  }, [open, conflictData]);\n  const handleClose = () => {\n    setOpen(false);\n    setConflictData(null);\n  };\n  const handleReplace = async () => {\n    if (!conflictData) return;\n    try {\n      console.log("🚀 Remplacement du fichier avec le nouveau système universel");\n\n      // Pour les nouveaux types, utiliser le système universel\n      if (["devis_chantier", "planning_hebdo", "rapport_agents"].includes(conflictData.documentType)) {\n        // Construire les données pour le système universel selon le type\n        let documentData = {};\n        if (conflictData.documentType === "devis_chantier") {\n          documentData = {\n            devisId: conflictData.devisId,\n            appelOffresId: conflictData.appelOffresId,\n            appelOffresName: conflictData.appelOffresName,\n            societeName: conflictData.societeName,\n            numero: conflictData.numero\n          };\n        } else if (conflictData.documentType === "planning_hebdo") {\n          documentData = {\n            week: conflictData.week,\n            year: conflictData.year\n          };\n        } else if (conflictData.documentType === "rapport_agents") {\n          documentData = {\n            month: conflictData.month,\n            year: conflictData.year\n          };\n        }\n\n        // Utiliser le système universel avec force_replace = true\n        await (0,_utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_1__.generatePDFDrive)(conflictData.documentType, documentData, {\n          onSuccess: response => {\n            console.log("✅ NOUVEAU: Fichier remplacé avec succès", response);\n\n            // Afficher une notification de succès\n            const successEvent = new CustomEvent("showNotification", {\n              detail: {\n                message: "✅ Fichier remplacé avec succès !",\n                type: "success"\n              }\n            });\n            document.dispatchEvent(successEvent);\n\n            // Fermer le modal\n            handleClose();\n          },\n          onError: error => {\n            console.error("❌ NOUVEAU: Erreur lors du remplacement:", error);\n            const errorEvent = new CustomEvent("showNotification", {\n              detail: {\n                message: `❌ Erreur lors du remplacement: ${error.message}`,\n                type: "error"\n              }\n            });\n            document.dispatchEvent(errorEvent);\n          }\n        }, true // forceReplace = true\n        );\n      } else {\n        // Pour les anciens types, utiliser l\'ancien système\n        const requestBody = {\n          document_type: conflictData.documentType,\n          file_path: conflictData.fullPath,\n          file_name: conflictData.fileName,\n          preview_url: conflictData.previewUrl,\n          societe_name: conflictData.societeName,\n          // Paramètres spécifiques selon le type\n          ...(conflictData.week !== undefined && {\n            week: conflictData.week\n          }),\n          ...(conflictData.month !== undefined && {\n            month: conflictData.month\n          }),\n          ...(conflictData.year !== undefined && {\n            year: conflictData.year\n          }),\n          ...(conflictData.appelOffresId !== undefined && {\n            appel_offres_id: conflictData.appelOffresId\n          }),\n          ...(conflictData.appelOffresName !== undefined && {\n            appel_offres_name: conflictData.appelOffresName\n          }),\n          ...(conflictData.devisId !== undefined && {\n            devis_id: conflictData.devisId\n          })\n        };\n        console.log("🚀 Remplacement du fichier avec l\'ancien système:", requestBody);\n\n        // Appeler l\'API pour remplacer le fichier\n        const response = await fetch("/api/replace-file-after-confirmation/", {\n          method: "POST",\n          headers: {\n            "Content-Type": "application/json"\n          },\n          body: JSON.stringify(requestBody)\n        });\n        if (response.ok) {\n          const result = await response.json();\n\n          // Afficher une notification de succès\n          const successEvent = new CustomEvent("showNotification", {\n            detail: {\n              message: "✅ Fichier remplacé avec succès !",\n              type: "success"\n            }\n          });\n          document.dispatchEvent(successEvent);\n\n          // Fermer le modal\n          handleClose();\n\n          // Rediriger vers le Drive si demandé\n          if (result.drive_url) {\n            window.open(result.drive_url, "_blank");\n          }\n        } else {\n          const error = await response.json();\n          const errorEvent = new CustomEvent("showNotification", {\n            detail: {\n              message: `❌ Erreur lors du remplacement: ${error.error}`,\n              type: "error"\n            }\n          });\n          document.dispatchEvent(errorEvent);\n        }\n      }\n    } catch (error) {\n      console.error("Erreur lors du remplacement:", error);\n      const errorEvent = new CustomEvent("showNotification", {\n        detail: {\n          message: "❌ Erreur lors du remplacement du fichier",\n          type: "error"\n        }\n      });\n      document.dispatchEvent(errorEvent);\n    }\n  };\n  const handleCancel = () => {\n    // Afficher une notification d\'annulation\n    const cancelEvent = new CustomEvent("showNotification", {\n      detail: {\n        message: "❌ Remplacement annulé par l\'utilisateur",\n        type: "info"\n      }\n    });\n    document.dispatchEvent(cancelEvent);\n    handleClose();\n  };\n  if (!conflictData) return null;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: open,\n    onClose: handleClose,\n    maxWidth: "md",\n    fullWidth: true,\n    PaperProps: {\n      sx: {\n        borderRadius: 2,\n        boxShadow: "0 8px 32px rgba(0,0,0,0.12)",\n        overflow: "hidden"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      bgcolor: "primary.main",\n      color: "white",\n      display: "flex",\n      alignItems: "center",\n      gap: 1,\n      py: 2,\n      px: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    style: {\n      fontSize: "1.5rem"\n    }\n  }, "\\u26A0\\uFE0F"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "h6",\n    component: "span"\n  }, "Conflit de fichier d\\xE9tect\\xE9")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      p: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body1",\n    gutterBottom: true,\n    sx: {\n      mb: 3,\n      fontSize: "1.1rem"\n    }\n  }, conflictData.conflictMessage), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      p: 3,\n      bgcolor: "grey.50",\n      borderRadius: 2,\n      border: "1px solid",\n      borderColor: "grey.200",\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "subtitle1",\n    color: "text.primary",\n    gutterBottom: true,\n    sx: {\n      fontWeight: 600\n    }\n  }, "\\uD83D\\uDCC4 Fichier existant :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body1",\n    sx: {\n      fontFamily: "monospace",\n      bgcolor: "white",\n      p: 2,\n      borderRadius: 1,\n      border: "1px solid",\n      borderColor: "grey.300",\n      fontSize: "1rem"\n    }\n  }, conflictData.fileName), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      mt: 2,\n      display: "flex",\n      alignItems: "center",\n      gap: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    color: "primary",\n    fontSize: "medium"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    href: conflictData.drive_url,\n    target: "_blank",\n    underline: "hover",\n    sx: {\n      color: "primary.main",\n      fontWeight: 500,\n      "&:hover": {\n        color: "primary.dark"\n      }\n    }\n  }, "Voir dans le Drive"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      p: 3,\n      bgcolor: "info.50",\n      borderRadius: 2,\n      border: "1px solid",\n      borderColor: "info.200"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body2",\n    color: "info.main",\n    sx: {\n      fontWeight: 500\n    }\n  }, "\\uD83D\\uDCA1 ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong", null, "Que se passe-t-il ?"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("br", null), "\\u2022 L\'ancien fichier sera d\\xE9plac\\xE9 dans le dossier \\"Historique\\" avec un timestamp", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("br", null), "\\u2022 Il sera automatiquement supprim\\xE9 apr\\xE8s 30 jours par le syst\\xE8me de nettoyage", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("br", null), "\\u2022 Le nouveau fichier remplacera l\'ancien \\xE0 l\'emplacement original", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("br", null), "\\u2022 Vous pourrez toujours acc\\xE9der \\xE0 l\'historique via le Drive"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    sx: {\n      p: 3,\n      gap: 2,\n      bgcolor: "grey.50"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: handleCancel,\n    variant: "outlined",\n    color: "secondary",\n    size: "large",\n    sx: {\n      px: 3,\n      py: 1.5,\n      borderRadius: 2,\n      textTransform: "none",\n      fontSize: "1rem"\n    }\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: handleReplace,\n    variant: "contained",\n    color: "primary",\n    size: "large",\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n      style: {\n        fontSize: "1.2rem"\n      }\n    }, "\\uD83D\\uDD04"),\n    sx: {\n      px: 3,\n      py: 1.5,\n      borderRadius: 2,\n      textTransform: "none",\n      fontSize: "1rem",\n      boxShadow: "0 4px 12px rgba(25, 118, 210, 0.3)"\n    }\n  }, "Remplacer le fichier")));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (GlobalConflictModal);\n\n//# sourceURL=webpack://frontend/./src/components/GlobalConflictModal.js?')},"./src/components/Header.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _static_css_header_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../static/css/header.css */ "./static/css/header.css");\n\n\nconst Header = () => {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "header"\n  });\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Header);\n\n//# sourceURL=webpack://frontend/./src/components/Header.js?')},"./src/components/LaborCostsSummary.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_icons_material_ExpandMore__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/icons-material/ExpandMore */ "./node_modules/@mui/icons-material/ExpandMore.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/AppBar/AppBar.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Toolbar/Toolbar.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Tabs/Tabs.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Tab/Tab.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Accordion/Accordion.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/AccordionSummary/AccordionSummary.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/AccordionDetails/AccordionDetails.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Divider/Divider.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableCell/TableCell.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dayjs */ "./node_modules/dayjs/dayjs.min.js");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fa__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-icons/fa */ "./node_modules/react-icons/fa/index.mjs");\n/* harmony import */ var _static_css_laborCostSummary_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../static/css/laborCostSummary.css */ "./static/css/laborCostSummary.css");\n\n\n\n\n\n\n\nconst LaborCostsSummary = ({\n  isOpen,\n  onClose,\n  agentId,\n  chantierId\n}) => {\n  const [selectedMonth, setSelectedMonth] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(dayjs__WEBPACK_IMPORTED_MODULE_0___default()().format("YYYY-MM"));\n  const [summary, setSummary] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]); // Résumé planning réel\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("");\n  const [mode, setMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("chantier"); // "chantier" ou "agent"\n\n  // Fonction pour formater l\'affichage des heures selon le type d\'agent\n  const formatHeures = (heures, agentTypePaiement) => {\n    console.log(`DEBUG formatHeures: ${heures}h, type=${agentTypePaiement}`);\n    if (agentTypePaiement === "journalier") {\n      // Pour les agents journaliers, convertir les heures en jours (8h = 1j)\n      const jours = heures / 8;\n      const result = jours === 1 ? "1j" : `${jours}j`;\n      console.log(`DEBUG formatHeures journalier: ${heures}h -> ${result}`);\n      return result;\n    } else {\n      // Pour les agents horaires, afficher les heures normalement\n      console.log(`DEBUG formatHeures horaire: ${heures}h -> ${heures}h`);\n      return `${heures}h`;\n    }\n  };\n\n  // Fonction pour obtenir le label selon le type d\'agent\n  const getLabel = (labelBase, agentTypePaiement) => {\n    if (agentTypePaiement === "journalier") {\n      return labelBase.replace("Heures", "Jours").replace("heures", "jours");\n    }\n    return labelBase;\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (isOpen) {\n      setLoading(true);\n      setError("");\n      let url = `/api/schedule/monthly_summary/?month=${selectedMonth}`;\n      if (agentId) url += `&agent_id=${agentId}`;\n      if (chantierId) url += `&chantier_id=${chantierId}`;\n      axios__WEBPACK_IMPORTED_MODULE_3__["default"].get(url).then(res => {\n        console.log("DEBUG LaborCostsSummary - Données reçues de l\'API:", res.data);\n        setSummary(res.data);\n      }).catch(err => {\n        var _err$response;\n        setError(((_err$response = err.response) === null || _err$response === void 0 || (_err$response = _err$response.data) === null || _err$response === void 0 ? void 0 : _err$response.error) || "Erreur lors du chargement du résumé.");\n      }).finally(() => setLoading(false));\n    }\n  }, [selectedMonth, isOpen, agentId, chantierId]);\n  if (!isOpen) return null;\n  const handleClose = () => {\n    onClose();\n  };\n  const getSelectableMonths = () => {\n    const months = [];\n    let d = dayjs__WEBPACK_IMPORTED_MODULE_0___default()().subtract(12, "month");\n    for (let i = 0; i < 25; i++) {\n      months.push(d.format("YYYY-MM"));\n      d = d.add(1, "month");\n    }\n    return months;\n  };\n\n  // Agrégation par agent côté frontend\n  const aggregateByAgent = () => {\n    const agentMap = {};\n    summary.forEach(chantier => {\n      chantier.details.forEach(detail => {\n        if (!agentMap[detail.agent_id]) {\n          agentMap[detail.agent_id] = {\n            agent_nom: detail.agent_nom,\n            agent_type_paiement: detail.type_paiement,\n            heures_normal: 0,\n            heures_samedi: 0,\n            heures_dimanche: 0,\n            heures_ferie: 0,\n            montant_normal: 0,\n            montant_samedi: 0,\n            montant_dimanche: 0,\n            montant_ferie: 0,\n            jours_majoration: [],\n            chantiers: new Set()\n          };\n        }\n        agentMap[detail.agent_id].heures_normal += detail.heures_normal;\n        agentMap[detail.agent_id].heures_samedi += detail.heures_samedi;\n        agentMap[detail.agent_id].heures_dimanche += detail.heures_dimanche;\n        agentMap[detail.agent_id].heures_ferie += detail.heures_ferie;\n        agentMap[detail.agent_id].montant_normal += detail.montant_normal;\n        agentMap[detail.agent_id].montant_samedi += detail.montant_samedi;\n        agentMap[detail.agent_id].montant_dimanche += detail.montant_dimanche;\n        agentMap[detail.agent_id].montant_ferie += detail.montant_ferie;\n        agentMap[detail.agent_id].jours_majoration.push(...(detail.jours_majoration || []));\n        agentMap[detail.agent_id].chantiers.add(chantier.chantier_nom);\n      });\n    });\n    // Convertit les sets en array\n    Object.values(agentMap).forEach(a => a.chantiers = Array.from(a.chantiers));\n    return agentMap;\n  };\n\n  // Regroupe les jours majorés par date/type/taux et somme les heures\n  const groupMajorations = jours_majoration => {\n    const grouped = {};\n    jours_majoration.forEach(j => {\n      const key = `${j.date}_${j.type}_${j.taux}`;\n      if (!grouped[key]) {\n        grouped[key] = {\n          ...j\n        };\n      } else {\n        grouped[key].hours += j.hours;\n      }\n    });\n    // Trie par date croissante\n    return Object.values(grouped).sort((a, b) => dayjs__WEBPACK_IMPORTED_MODULE_0___default()(a.date).diff(dayjs__WEBPACK_IMPORTED_MODULE_0___default()(b.date)));\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    open: isOpen,\n    onClose: handleClose,\n    maxWidth: "md",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    position: "static",\n    color: "default",\n    sx: {\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    value: mode,\n    onChange: (_, v) => setMode(v),\n    textColor: "primary",\n    indicatorColor: "primary"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    label: "Par chantier",\n    value: "chantier"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    label: "Par agent",\n    value: "agent"\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "space-between"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("span", null, mode === "chantier" ? "Résumé des Heures et Coûts par chantier" : "Résumé des Heures et Coûts par agent"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: handleClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_11__.FaTimes, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    mb: 2,\n    display: "flex",\n    alignItems: "center",\n    gap: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    variant: "body1"\n  }, "Mois :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    value: selectedMonth,\n    onChange: e => setSelectedMonth(e.target.value),\n    size: "small"\n  }, getSelectableMonths().map(m => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    key: m,\n    value: m\n  }, dayjs__WEBPACK_IMPORTED_MODULE_0___default()(m + "-01").format("MMMM YYYY"))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, loading ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", null, "Chargement...") : error ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    style: {\n      color: "red"\n    }\n  }, error) : mode === "chantier" ? summary.length === 0 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", null, "Aucune donn\\xE9e pour ce mois.") : summary.map(chantier => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    key: chantier.chantier_id\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    expandIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_icons_material_ExpandMore__WEBPACK_IMPORTED_MODULE_19__["default"], null)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    width: "100%"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    variant: "h6",\n    style: {\n      color: "rgba(27, 120, 188, 1)",\n      fontWeight: 700\n    }\n  }, chantier.chantier_nom), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    display: "flex",\n    gap: 3,\n    mt: 1,\n    alignItems: "center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    fontWeight: "bold"\n  }, "Heures normales"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, chantier.total_heures_normal, "h"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    color: "textSecondary"\n  }, "Montant : ", chantier.total_montant_normal.toFixed(2), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    fontWeight: "bold"\n  }, "Samedi (125%)"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, chantier.total_heures_samedi, "h"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    color: "textSecondary"\n  }, "Montant : ", chantier.total_montant_samedi.toFixed(2), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    fontWeight: "bold"\n  }, "Dimanche (150%)"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, chantier.total_heures_dimanche, "h"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    color: "textSecondary"\n  }, "Montant :", " ", chantier.total_montant_dimanche.toFixed(2), " \\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    fontWeight: "bold"\n  }, "F\\xE9ri\\xE9 (150%)"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, chantier.total_heures_ferie, "h"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    color: "textSecondary"\n  }, "Montant : ", chantier.total_montant_ferie.toFixed(2), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    fontWeight: "bold",\n    style: {\n      color: "rgba(27, 120, 188, 1)"\n    }\n  }, "Total"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    style: {\n      color: "rgba(27, 120, 188, 1)",\n      fontWeight: 700\n    }\n  }, chantier.total_heures_normal + chantier.total_heures_samedi + chantier.total_heures_dimanche + chantier.total_heures_ferie, "h"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    color: "textSecondary",\n    style: {\n      color: "rgba(27, 120, 188, 1)",\n      fontWeight: 700\n    }\n  }, "Montant :", (chantier.total_montant_normal + chantier.total_montant_samedi + chantier.total_montant_dimanche + chantier.total_montant_ferie).toFixed(2), " ", "\\u20AC"))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    sx: {\n      mb: 2\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    fontWeight: "bold",\n    mb: 1\n  }, "D\\xE9tail par agent"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    size: "small"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, "Agent"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, "Normal"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, "Samedi"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, "Dimanche"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, "F\\xE9ri\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, "Total"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, "Montant"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], null, chantier.details.map((agent, idx) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    key: idx\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, agent.agent_nom), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, formatHeures(agent.heures_normal, agent.agent_type_paiement)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, formatHeures(agent.heures_samedi, agent.agent_type_paiement)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, formatHeures(agent.heures_dimanche, agent.agent_type_paiement)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, formatHeures(agent.heures_ferie, agent.agent_type_paiement)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, formatHeures(agent.heures_normal + agent.heures_samedi + agent.heures_dimanche + agent.heures_ferie, agent.agent_type_paiement)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, (agent.montant_normal + agent.montant_samedi + agent.montant_dimanche + agent.montant_ferie).toFixed(2), " ", "\\u20AC"))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    sx: {\n      my: 2\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    fontWeight: "bold",\n    mb: 1\n  }, "Jours major\\xE9s"), groupMajorations(chantier.jours_majoration).length === 0 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, "Aucun jour major\\xE9 ce mois.") : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    size: "small"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, "Date"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, "Type"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, "Heures"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, "Taux"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], null, groupMajorations(chantier.jours_majoration).map((j, idx) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    key: idx\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, dayjs__WEBPACK_IMPORTED_MODULE_0___default()(j.date).format("DD/MM/YY")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, j.type), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, j.hours), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, j.taux)))))))) :\n  // Mode agent\n  Object.keys(aggregateByAgent()).length === 0 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", null, "Aucune donn\\xE9e pour ce mois.") : Object.entries(aggregateByAgent()).map(([agentId, agent]) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    key: agentId\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    expandIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_icons_material_ExpandMore__WEBPACK_IMPORTED_MODULE_19__["default"], null)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    width: "100%"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    variant: "h6",\n    style: {\n      color: "rgba(27, 120, 188, 1)",\n      fontWeight: 700\n    }\n  }, agent.agent_nom), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    variant: "body2",\n    color: "textSecondary"\n  }, "Chantiers : ", agent.chantiers.join(", ")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    display: "flex",\n    gap: 3,\n    mt: 1,\n    alignItems: "center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    fontWeight: "bold"\n  }, getLabel("Heures normales", agent.agent_type_paiement)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, formatHeures(agent.heures_normal, agent.agent_type_paiement)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    color: "textSecondary"\n  }, "Montant : ", agent.montant_normal.toFixed(2), " \\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    fontWeight: "bold"\n  }, "Samedi (125%)"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, formatHeures(agent.heures_samedi, agent.agent_type_paiement)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    color: "textSecondary"\n  }, "Montant : ", agent.montant_samedi.toFixed(2), " \\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    fontWeight: "bold"\n  }, "Dimanche (150%)"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, formatHeures(agent.heures_dimanche, agent.agent_type_paiement)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    color: "textSecondary"\n  }, "Montant : ", agent.montant_dimanche.toFixed(2), " \\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    fontWeight: "bold"\n  }, "F\\xE9ri\\xE9 (150%)"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, formatHeures(agent.heures_ferie, agent.agent_type_paiement)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    color: "textSecondary"\n  }, "Montant : ", agent.montant_ferie.toFixed(2), " \\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    fontWeight: "bold",\n    style: {\n      color: "rgba(27, 120, 188, 1)"\n    }\n  }, "Total"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    style: {\n      color: "rgba(27, 120, 188, 1)",\n      fontWeight: 700\n    }\n  }, formatHeures(agent.heures_normal + agent.heures_samedi + agent.heures_dimanche + agent.heures_ferie, agent.agent_type_paiement)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    color: "textSecondary",\n    style: {\n      color: "rgba(27, 120, 188, 1)",\n      fontWeight: 700\n    }\n  }, "Montant :", (agent.montant_normal + agent.montant_samedi + agent.montant_dimanche + agent.montant_ferie).toFixed(2), " ", "\\u20AC"))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    sx: {\n      mb: 2\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    fontWeight: "bold",\n    mb: 1\n  }, "Jours major\\xE9s"), groupMajorations(agent.jours_majoration).length === 0 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, "Aucun jour major\\xE9 ce mois.") : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    size: "small"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, "Date"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, "Type"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, "Heures"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, "Taux"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], null, groupMajorations(agent.jours_majoration).map((j, idx) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    key: idx\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, dayjs__WEBPACK_IMPORTED_MODULE_0___default()(j.date).format("DD/MM/YY")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, j.type), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, j.hours), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, j.taux)))))))))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (LaborCostsSummary);\n\n//# sourceURL=webpack://frontend/./src/components/LaborCostsSummary.js?')},"./src/components/Layout.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _static_css_layout_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../static/css/layout.css */ "./static/css/layout.css");\n/* harmony import */ var _BreadcrumbHeader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./BreadcrumbHeader */ "./src/components/BreadcrumbHeader.js");\n/* harmony import */ var _Header__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Header */ "./src/components/Header.js");\n/* harmony import */ var _SlideBar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SlideBar */ "./src/components/SlideBar.js");\n\n\n\n\n\nconst Layout = ({\n  children,\n  user,\n  onLogout\n}) => {\n  const [isSidebarVisible, setSidebarVisible] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n  const toggleSidebar = () => {\n    setSidebarVisible(!isSidebarVisible);\n  };\n\n  // Fonction pour fermer la sidebar\n  const closeSidebar = () => {\n    setSidebarVisible(false);\n  };\n\n  // Écouter l\'événement closeSidebar depuis le composant Drive\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const handleCloseSidebar = () => {\n      closeSidebar();\n    };\n    window.addEventListener("closeSidebar", handleCloseSidebar);\n    return () => {\n      window.removeEventListener("closeSidebar", handleCloseSidebar);\n    };\n  }, []);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: `layout ${isSidebarVisible ? "sidebar-visible" : "sidebar-hidden"}`\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Header__WEBPACK_IMPORTED_MODULE_3__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SlideBar__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    toggleSidebar: toggleSidebar,\n    isSidebarVisible: isSidebarVisible\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "main-content"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_BreadcrumbHeader__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    user: user,\n    onLogout: onLogout\n  }), children));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Layout);\n\n//# sourceURL=webpack://frontend/./src/components/Layout.js?')},"./src/components/ListeBonCommande.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Menu/Menu.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Autocomplete/Autocomplete.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_x_date_pickers_AdapterDateFns__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/x-date-pickers/AdapterDateFns */ "./node_modules/@mui/x-date-pickers/AdapterDateFns/index.js");\n/* harmony import */ var _mui_x_date_pickers_DatePicker__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/x-date-pickers/DatePicker */ "./node_modules/@mui/x-date-pickers/DatePicker/DatePicker.js");\n/* harmony import */ var _mui_x_date_pickers_LocalizationProvider__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/x-date-pickers/LocalizationProvider */ "./node_modules/@mui/x-date-pickers/LocalizationProvider/LocalizationProvider.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var date_fns_locale_fr__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! date-fns/locale/fr */ "./node_modules/date-fns/esm/locale/fr/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_tfi__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-icons/tfi */ "./node_modules/react-icons/tfi/index.mjs");\n/* harmony import */ var _styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/tableStyles */ "./src/styles/tableStyles.js");\n/* harmony import */ var _BonCommandeForm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./BonCommandeForm */ "./src/components/BonCommandeForm.js");\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\n\n\n\n\n\n\n\n\n\n\nconst ListeBonCommande = () => {\n  const [bonsCommande, setBonsCommande] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [filteredBonsCommande, setFilteredBonsCommande] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [filters, setFilters] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    numero: "",\n    chantier_name: "",\n    fournisseur: "",\n    date_creation: "",\n    montant_total: "",\n    statut: "",\n    statut_paiement: "",\n    montant_paye: "",\n    reste_a_payer: ""\n  });\n  const [orderBy, setOrderBy] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("date");\n  const [order, setOrder] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("desc");\n  const [anchorEl, setAnchorEl] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [statusAnchorEl, setStatusAnchorEl] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [selectedBC, setSelectedBC] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [statusModalOpen, setStatusModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedStatus, setSelectedStatus] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [date, setDate] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [magasin, setMagasin] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [magasins, setMagasins] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [inputValue, setInputValue] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [paymentStatusAnchorEl, setPaymentStatusAnchorEl] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [paymentModalOpen, setPaymentModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [paymentAmount, setPaymentAmount] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const fetchBonsCommande = async () => {\n    if (isLoading) return;\n    try {\n      setIsLoading(true);\n      const response = await axios__WEBPACK_IMPORTED_MODULE_3__["default"].get("/api/bons-commande/");\n      setBonsCommande(response.data);\n      setFilteredBonsCommande(response.data);\n    } catch (error) {\n      console.error("Erreur lors du chargement des bons de commande:", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleBonCommandeCreated = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    fetchBonsCommande();\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    fetchBonsCommande();\n  }, []);\n  const handleFilterChange = field => event => {\n    const newFilters = {\n      ...filters,\n      [field]: event.target.value\n    };\n    setFilters(newFilters);\n    let filtered = bonsCommande.filter(bc => {\n      return Object.keys(newFilters).every(key => {\n        var _bc$numero, _bc$chantier_name, _bc$fournisseur, _bc$statut;\n        if (!newFilters[key]) return true;\n        switch (key) {\n          case "numero":\n            return (_bc$numero = bc.numero) === null || _bc$numero === void 0 ? void 0 : _bc$numero.toLowerCase().includes(newFilters[key].toLowerCase());\n          case "chantier_name":\n            return (_bc$chantier_name = bc.chantier_name) === null || _bc$chantier_name === void 0 ? void 0 : _bc$chantier_name.toLowerCase().includes(newFilters[key].toLowerCase());\n          case "fournisseur":\n            return (_bc$fournisseur = bc.fournisseur) === null || _bc$fournisseur === void 0 ? void 0 : _bc$fournisseur.toLowerCase().includes(newFilters[key].toLowerCase());\n          case "date_creation":\n            if (!newFilters[key]) return true;\n            const bcDate = new Date(bc.date_creation).toISOString().split("T")[0];\n            return bcDate === newFilters[key];\n          case "montant_total":\n            if (!newFilters[key]) return true;\n            return parseFloat(bc.montant_total) === parseFloat(newFilters[key]);\n          case "statut":\n            if (!newFilters[key]) return true;\n            return (_bc$statut = bc.statut) === null || _bc$statut === void 0 ? void 0 : _bc$statut.toLowerCase().includes(newFilters[key].toLowerCase());\n          default:\n            return true;\n        }\n      });\n    });\n    setFilteredBonsCommande(filtered);\n  };\n  const handleSort = property => {\n    const isAsc = orderBy === property && order === "asc";\n    setOrder(isAsc ? "desc" : "asc");\n    setOrderBy(property);\n    const sortedBCs = [...filteredBonsCommande].sort((a, b) => {\n      if (property === "date_creation") {\n        return (isAsc ? 1 : -1) * (new Date(a[property]) - new Date(b[property]));\n      }\n      return (isAsc ? 1 : -1) * (a[property] < b[property] ? -1 : 1);\n    });\n    setFilteredBonsCommande(sortedBCs);\n  };\n  const handleMenuOpen = (event, bc) => {\n    setAnchorEl(event.currentTarget);\n    setSelectedBC(bc);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  const handleStatusMenuOpen = () => {\n    handleClose();\n    setStatusAnchorEl(anchorEl);\n    setSelectedBC(selectedBC);\n  };\n  const handleStatusMenuClose = () => {\n    setStatusAnchorEl(null);\n  };\n  const loadMagasins = async fournisseur => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_3__["default"].get(`/api/fournisseur-magasins/?fournisseur=${fournisseur}`);\n      setMagasins(response.data.map(m => m.magasin));\n    } catch (error) {\n      console.error("Erreur lors du chargement des magasins:", error);\n    }\n  };\n  const handleStatusChange = status => {\n    setSelectedStatus(status);\n    if (status === "retrait_magasin" && selectedBC) {\n      loadMagasins(selectedBC.fournisseur);\n    }\n    setStatusModalOpen(true);\n    handleStatusMenuClose();\n  };\n  const handleStatusConfirm = async () => {\n    try {\n      const formattedDate = date ? `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, "0")}-${String(date.getDate()).padStart(2, "0")}` : null;\n      const data = {\n        statut: selectedStatus,\n        date_livraison: formattedDate,\n        magasin_retrait: magasin || ""\n      };\n      console.log("Data envoyée à l\'API:", data);\n      await axios__WEBPACK_IMPORTED_MODULE_3__["default"].patch(`/api/update-bon-commande/${selectedBC.id}/`, data);\n      fetchBonsCommande();\n      setStatusModalOpen(false);\n      setDate(null);\n      setMagasin("");\n      setInputValue("");\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour du statut:", error);\n      console.error("Data qui a causé l\'erreur:", date);\n      alert("Erreur lors de la mise à jour du statut");\n    }\n  };\n  const handlePreviewBonCommande = bonCommandeId => {\n    window.open(`/api/preview-saved-bon-commande/${bonCommandeId}/`, "_blank");\n  };\n  const handleModifyBC = () => {\n    if (selectedBC) {\n      window.location.href = `/ModificationBC/${selectedBC.id}`;\n    }\n    handleClose();\n  };\n  const handleDeleteBC = async () => {\n    if (!selectedBC) return;\n    if (window.confirm("Êtes-vous sûr de vouloir supprimer ce bon de commande ?")) {\n      try {\n        await axios__WEBPACK_IMPORTED_MODULE_3__["default"].delete(`/api/delete-bons-commande/${selectedBC.id}/`);\n        await fetchBonsCommande(); // Recharger la liste après suppression\n        handleClose(); // Fermer le menu\n      } catch (error) {\n        console.error("Erreur lors de la suppression du bon de commande:", error);\n        alert("Erreur lors de la suppression du bon de commande");\n      }\n    }\n  };\n  const handlePaymentMenuOpen = () => {\n    setPaymentModalOpen(true);\n    handleClose();\n  };\n  const handlePaymentSubmit = async () => {\n    if (!selectedBC) {\n      alert("Veuillez sélectionner un bon de commande");\n      return;\n    }\n    try {\n      const montantPaye = parseFloat(paymentAmount);\n      if (isNaN(montantPaye) || montantPaye <= 0) {\n        alert("Veuillez entrer un montant valide");\n        return;\n      }\n\n      // Calculer le nouveau statut de paiement\n      let nouveauStatut;\n      if (montantPaye >= selectedBC.montant_total) {\n        nouveauStatut = "paye";\n      } else if (montantPaye > 0) {\n        nouveauStatut = "paye_partiel";\n      } else {\n        nouveauStatut = "non_paye";\n      }\n      const data = {\n        montant_paye: montantPaye,\n        statut_paiement: nouveauStatut,\n        date_paiement: new Date().toISOString().split("T")[0]\n      };\n      await axios__WEBPACK_IMPORTED_MODULE_3__["default"].patch(`/api/bons-commande/${selectedBC.id}/`, data);\n      await fetchBonsCommande();\n      setPaymentModalOpen(false);\n      setPaymentAmount("");\n      setSelectedBC(null);\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour du paiement:", error);\n      alert("Erreur lors de la mise à jour du paiement");\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    style: {\n      backgroundColor: "#ffffff",\n      width: "100%",\n      maxWidth: "1400px",\n      height: "auto",\n      padding: "20px",\n      paddingBottom: "70px",\n      borderRadius: "10px",\n      boxShadow: "6px 7px 20px -6px rgba(33, 33, 33, 1)",\n      margin: "20px auto"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledBox, {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "right",\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "h5"\n  }, "Liste des Bons de Commande"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_BonCommandeForm__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    onBonCommandeCreated: handleBonCommandeCreated\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTableContainer, {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_5__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "N\\xB0 BC",\n    variant: "standard",\n    value: filters.numero,\n    onChange: handleFilterChange("numero")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Chantier",\n    variant: "standard",\n    value: filters.chantier_name,\n    onChange: handleFilterChange("chantier_name")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Fournisseur",\n    variant: "standard",\n    value: filters.fournisseur,\n    onChange: handleFilterChange("fournisseur")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTextField, {\n    label: "",\n    variant: "standard",\n    type: "date",\n    value: filters.date_creation,\n    onChange: handleFilterChange("date_creation"),\n    InputLabelProps: {\n      shrink: true\n    },\n    sx: {\n      pt: "15px"\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Montant",\n    variant: "standard",\n    value: filters.montant_total,\n    onChange: handleFilterChange("montant_total")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Statut",\n    variant: "standard",\n    value: filters.statut,\n    onChange: handleFilterChange("statut")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Paiement",\n    variant: "standard",\n    value: filters.statut_paiement,\n    onChange: handleFilterChange("statut_paiement"),\n    disabled: true,\n    sx: {\n      opacity: 1\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Pay\\xE9",\n    variant: "standard",\n    value: filters.montant_paye,\n    onChange: handleFilterChange("montant_paye"),\n    disabled: true,\n    sx: {\n      opacity: 1\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "\\xC0 Payer",\n    variant: "standard",\n    value: filters.reste_a_payer,\n    onChange: handleFilterChange("reste_a_payer"),\n    disabled: true,\n    sx: {\n      opacity: 1\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, filteredBonsCommande.map(bc => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    key: bc.id,\n    hover: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.DevisNumber, {\n    onClick: () => handlePreviewBonCommande(bc.id),\n    style: {\n      cursor: "pointer",\n      fontWeight: 700\n    }\n  }, bc.numero), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.ChantierCell, null, bc.chantier_name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.AlignedCell, {\n    sx: {\n      backgroundColor: "white",\n      color: "rgba(27, 120, 188, 1)",\n      fontWeight: 700\n    }\n  }, bc.fournisseur), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, new Date(bc.date_creation).toLocaleDateString()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n    sx: {\n      textAlign: "center"\n    }\n  }, parseFloat(bc.montant_total).toFixed(2), " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, bc.statut === "en_attente" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    style: {\n      color: "#FFA500",\n      fontWeight: "bold",\n      fontSize: "14px"\n    }\n  }, "En attente Livraison"), bc.statut === "livre_chantier" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    style: {\n      color: "#4CAF50",\n      fontWeight: "bold",\n      fontSize: "14px"\n    }\n  }, "Livr\\xE9 Chantier"), bc.statut === "retrait_magasin" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    style: {\n      color: "rgba(27, 120, 188, 1)",\n      fontWeight: "bold",\n      fontSize: "14px"\n    }\n  }, "Retrait Magasin")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, bc.statut_paiement === "non_paye" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    style: {\n      color: "#FF0000",\n      fontSize: "14px",\n      whiteSpace: "nowrap",\n      display: "block",\n      textAlign: "center"\n    }\n  }, "Non Pay\\xE9"), bc.statut_paiement === "paye" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    style: {\n      color: "#4CAF50",\n      fontSize: "14px",\n      whiteSpace: "nowrap",\n      display: "block",\n      textAlign: "center"\n    }\n  }, "Pay\\xE9"), bc.statut_paiement === "paye_partiel" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    style: {\n      color: "#FFA500",\n      fontSize: "14px",\n      whiteSpace: "nowrap",\n      display: "block",\n      textAlign: "center"\n    }\n  }, "Pay\\xE9 Partiellement")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n    sx: {\n      whiteSpace: "nowrap",\n      textAlign: "center"\n    }\n  }, bc.montant_paye, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n    sx: {\n      whiteSpace: "nowrap",\n      textAlign: "center"\n    }\n  }, bc.reste_a_payer, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: e => handleMenuOpen(e, bc)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_tfi__WEBPACK_IMPORTED_MODULE_11__.TfiMore, null)))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    anchorEl: anchorEl,\n    open: Boolean(anchorEl),\n    onClose: handleClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: handleModifyBC\n  }, "Modifier BC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: handleStatusMenuOpen\n  }, "Modifier le statut"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: handlePaymentMenuOpen\n  }, "G\\xE9rer le paiement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: handleDeleteBC,\n    sx: {\n      color: "red"\n    }\n  }, "Supprimer BC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    anchorEl: statusAnchorEl,\n    open: Boolean(statusAnchorEl),\n    onClose: handleStatusMenuClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: () => handleStatusChange("en_attente")\n  }, "En attente Livraison"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: () => handleStatusChange("livre_chantier")\n  }, "Livr\\xE9 Chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: () => handleStatusChange("retrait_magasin")\n  }, "Retrait Magasin")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    open: statusModalOpen,\n    onClose: () => setStatusModalOpen(false)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, selectedStatus === "en_attente" ? "En attente Livraison" : selectedStatus === "livre_chantier" ? "Livré Chantier" : "Retrait Magasin"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], null, selectedStatus !== "en_attente" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_x_date_pickers_LocalizationProvider__WEBPACK_IMPORTED_MODULE_17__.LocalizationProvider, {\n    dateAdapter: _mui_x_date_pickers_AdapterDateFns__WEBPACK_IMPORTED_MODULE_18__.AdapterDateFns,\n    adapterLocale: date_fns_locale_fr__WEBPACK_IMPORTED_MODULE_19__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_x_date_pickers_DatePicker__WEBPACK_IMPORTED_MODULE_20__.DatePicker, {\n    label: "Date de livraison",\n    value: date,\n    onChange: newDate => setDate(newDate),\n    renderInput: params => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], _extends({}, params, {\n      fullWidth: true,\n      sx: {\n        mt: 2\n      }\n    }))\n  })), selectedStatus === "retrait_magasin" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    freeSolo: true,\n    value: magasin,\n    onChange: (event, newValue) => {\n      setMagasin(newValue);\n    },\n    inputValue: inputValue,\n    onInputChange: (event, newInputValue) => {\n      setInputValue(newInputValue);\n    },\n    options: magasins,\n    renderInput: params => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], _extends({}, params, {\n      label: "Magasin",\n      fullWidth: true,\n      sx: {\n        mt: 2\n      }\n    }))\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    onClick: () => setStatusModalOpen(false)\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    onClick: handleStatusConfirm,\n    variant: "contained"\n  }, "Confirmer"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    open: paymentModalOpen,\n    onClose: () => {\n      setPaymentModalOpen(false);\n      setSelectedBC(null);\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, "G\\xE9rer le paiement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body1",\n    gutterBottom: true\n  }, "Montant total : ", selectedBC === null || selectedBC === void 0 ? void 0 : selectedBC.montant_total, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body1",\n    gutterBottom: true\n  }, "D\\xE9j\\xE0 pay\\xE9 : ", (selectedBC === null || selectedBC === void 0 ? void 0 : selectedBC.montant_paye) || 0, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body1",\n    gutterBottom: true\n  }, "Reste \\xE0 payer : ", selectedBC === null || selectedBC === void 0 ? void 0 : selectedBC.reste_a_payer, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    label: "Montant du paiement",\n    type: "number",\n    value: paymentAmount,\n    onChange: e => setPaymentAmount(e.target.value),\n    fullWidth: true,\n    margin: "normal"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    onClick: () => {\n      setPaymentModalOpen(false);\n      setSelectedBC(null);\n    }\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    onClick: handlePaymentSubmit,\n    variant: "contained",\n    color: "primary"\n  }, "Valider"))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ListeBonCommande);\n\n//# sourceURL=webpack://frontend/./src/components/ListeBonCommande.js?')},"./src/components/ListeChantier.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableSortLabel/TableSortLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material_colors__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material/colors */ "./node_modules/@mui/material/colors/green.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/dist/index.js");\n/* harmony import */ var _styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/tableStyles */ "./src/styles/tableStyles.js");\n/* harmony import */ var _NewChantierModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./NewChantierModal */ "./src/components/NewChantierModal.js");\n\n\n\n\n\n\n\nconst ListChantiers = () => {\n  const [chantiers, setChantiers] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [filteredChantiers, setFilteredChantiers] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [filters, setFilters] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    chantier_name: "",\n    client_name: "",\n    state_chantier: "Tous",\n    date_debut: "",\n    chiffre_affaire: "",\n    taux_facturation: ""\n  });\n  const [orderBy, setOrderBy] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("date_debut");\n  const [order, setOrder] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("desc");\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showNewChantierModal, setShowNewChantierModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const statusOptions = ["En Cours", "Terminé", "En Attente Signature"];\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    fetchChantiers();\n  }, []);\n  const fetchChantiers = async () => {\n    try {\n      setLoading(true);\n      const response = await axios__WEBPACK_IMPORTED_MODULE_3__["default"].get("/api/chantier-relations/");\n      console.log("Données reçues:", response.data);\n      setChantiers(response.data);\n      setFilteredChantiers(response.data);\n    } catch (error) {\n      console.error("Erreur lors du chargement des chantiers:", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleFilterChange = field => event => {\n    const newFilters = {\n      ...filters,\n      [field]: event.target.value\n    };\n    setFilters(newFilters);\n    let filtered = chantiers.filter(chantier => {\n      return Object.keys(newFilters).every(key => {\n        var _chantier$key2;\n        if (!newFilters[key] || newFilters[key] === "Tous") return true;\n        if (key === "date_debut" && newFilters[key]) {\n          const chantierDate = new Date(chantier[key]).toLocaleDateString();\n          return chantierDate.includes(newFilters[key]);\n        }\n        if (key === "chiffre_affaire" && newFilters[key]) {\n          var _chantier$key;\n          const chantierCA = ((_chantier$key = chantier[key]) === null || _chantier$key === void 0 ? void 0 : _chantier$key.toString()) || "0";\n          return chantierCA.includes(newFilters[key]);\n        }\n        const value = ((_chantier$key2 = chantier[key]) === null || _chantier$key2 === void 0 ? void 0 : _chantier$key2.toString().toLowerCase()) || "";\n        return value.includes(newFilters[key].toLowerCase());\n      });\n    });\n    setFilteredChantiers(filtered);\n  };\n  const handleSort = property => {\n    const isAsc = orderBy === property && order === "asc";\n    setOrder(isAsc ? "desc" : "asc");\n    setOrderBy(property);\n    const sorted = [...filteredChantiers].sort((a, b) => {\n      if (property === "chiffre_affaire") {\n        return (isAsc ? 1 : -1) * (parseFloat(a.montant_ttc || 0) - parseFloat(b.montant_ttc || 0));\n      }\n      if (property === "taux_facturation") {\n        return (isAsc ? 1 : -1) * (parseFloat(a.taux_facturation || 0) - parseFloat(b.taux_facturation || 0));\n      }\n      return (isAsc ? 1 : -1) * ((a[property] || "") < (b[property] || "") ? -1 : 1);\n    });\n    setFilteredChantiers(sorted);\n  };\n  const handleNewChantierSuccess = newChantier => {\n    fetchChantiers();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    style: {\n      backgroundColor: "#ffffff",\n      width: "100%",\n      maxWidth: "1400px",\n      height: "auto",\n      padding: "20px",\n      paddingBottom: "70px",\n      borderRadius: "10px",\n      boxShadow: "6px 7px 20px -6px rgba(33, 33, 33, 1)",\n      margin: "20px auto"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledBox, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "center",\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h5",\n    gutterBottom: true,\n    sx: {\n      fontFamily: "Merriweather, serif",\n      position: "relative",\n      marginBottom: "20px"\n    }\n  }, "Liste des Chantiers"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    variant: "contained",\n    color: "primary",\n    onClick: () => setShowNewChantierModal(true)\n  }, "Nouveau Chantier")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTableContainer, {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_7__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Nom Chantier",\n    variant: "standard",\n    value: filters.chantier_name,\n    onChange: handleFilterChange("chantier_name")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Client",\n    variant: "standard",\n    value: filters.client_name,\n    onChange: handleFilterChange("client_name")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.AlignedCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    active: orderBy === "date_debut",\n    direction: orderBy === "date_debut" ? order : "asc",\n    onClick: () => handleSort("date_debut")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTextField, {\n    variant: "standard",\n    type: "date",\n    value: filters.date_debut,\n    onChange: handleFilterChange("date_debut"),\n    InputLabelProps: {\n      shrink: true\n    },\n    sx: {\n      pt: "15px"\n    }\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Taux facturation",\n    variant: "standard",\n    value: filters.taux_facturation,\n    onChange: handleFilterChange("taux_facturation")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.AlignedCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    active: orderBy === "chiffre_affaire",\n    direction: orderBy === "chiffre_affaire" ? order : "asc",\n    onClick: () => handleSort("chiffre_affaire")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.PriceTextField, {\n    label: "Chiffre d\'affaires",\n    variant: "standard",\n    value: filters.chiffre_affaire,\n    onChange: handleFilterChange("chiffre_affaire")\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledSelect, {\n    value: filters.state_chantier,\n    onChange: handleFilterChange("state_chantier"),\n    variant: "standard",\n    sx: {\n      pt: "10px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    value: "Tous"\n  }, "Tous"), statusOptions.map(status => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    key: status,\n    value: status\n  }, status)))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, filteredChantiers.map(chantier => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    key: chantier.id\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.DevisNumber, {\n    sx: {\n      fontSize: "16px",\n      fontWeight: 700\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_14__.Link, {\n    to: `/chantier/${chantier.id}`\n  }, chantier.chantier_name)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n    sx: {\n      textAlign: "left"\n    }\n  }, chantier.societe_info ? `${chantier.societe_info.client.name} ${chantier.societe_info.client.surname}` : "Non assigné"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, new Date(chantier.date_debut).toLocaleDateString()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, chantier.taux_facturation, "%"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n    style: {\n      fontWeight: 600\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    style: {\n      display: "flex",\n      flexDirection: "column"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    style: {\n      color: "gray"\n    }\n  }, "Attendu: ", chantier.montant_ttc || "NA", " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    style: {\n      color: _mui_material_colors__WEBPACK_IMPORTED_MODULE_15__["default"][500]\n    }\n  }, "R\\xE9el: ", chantier.ca_reel || 0, " \\u20AC"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StatusCell, {\n    status: chantier.state_chantier\n  }, chantier.state_chantier))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_NewChantierModal__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: showNewChantierModal,\n    onClose: () => setShowNewChantierModal(false),\n    onSuccess: handleNewChantierSuccess\n  }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ListChantiers);\n\n//# sourceURL=webpack://frontend/./src/components/ListeChantier.js?')},"./src/components/ListeDevis.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableSortLabel/TableSortLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/ButtonGroup/ButtonGroup.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Menu/Menu.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Modal/Modal.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material_colors__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/material/colors */ "./node_modules/@mui/material/colors/green.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_ai__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! react-icons/ai */ "./node_modules/react-icons/ai/index.mjs");\n/* harmony import */ var react_icons_fa__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! react-icons/fa */ "./node_modules/react-icons/fa/index.mjs");\n/* harmony import */ var react_icons_tfi__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! react-icons/tfi */ "./node_modules/react-icons/tfi/index.mjs");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");\n/* harmony import */ var _styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/tableStyles */ "./src/styles/tableStyles.js");\n/* harmony import */ var _utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/universalDriveGenerator */ "./src/utils/universalDriveGenerator.js");\n/* harmony import */ var _CreationFacture__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CreationFacture */ "./src/components/CreationFacture.js");\n/* harmony import */ var _CreationSituation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CreationSituation */ "./src/components/CreationSituation.js");\n/* harmony import */ var _StatusChangeModal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./StatusChangeModal */ "./src/components/StatusChangeModal.js");\n/* harmony import */ var _TransformationCIEModal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./TransformationCIEModal */ "./src/components/TransformationCIEModal.js");\n/* harmony import */ var _TransformationTSModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./TransformationTSModal */ "./src/components/TransformationTSModal.js");\n/* harmony import */ var _pdf_drive_functions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./pdf_drive_functions */ "./src/components/pdf_drive_functions.js");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst formatNumber = number => {\n  return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, " ");\n};\nconst ListeDevis = () => {\n  const [devis, setDevis] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [filteredDevis, setFilteredDevis] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [isInitialized, setIsInitialized] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [filters, setFilters] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    numero: "",\n    chantier_name: "",\n    client_name: "",\n    date_creation: "",\n    price_ttc: "",\n    status: "Tous"\n  });\n  const [orderBy, setOrderBy] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("date");\n  const [order, setOrder] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("desc");\n  const [anchorEl, setAnchorEl] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [selectedDevis, setSelectedDevis] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [showStatusModal, setShowStatusModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [devisToUpdate, setDevisToUpdate] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [factureModalOpen, setFactureModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [deleteModalOpen, setDeleteModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [deleteFacturesModalOpen, setDeleteFacturesModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [facturesToDelete, setFacturesToDelete] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [newStatus, setNewStatus] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [tsModalOpen, setTsModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedDevisForTS, setSelectedDevisForTS] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [selectedChantier, setSelectedChantier] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [cieModalOpen, setCieModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedDevisForCIE, setSelectedDevisForCIE] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [situationModalOpen, setSituationModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedDevisForSituation, setSelectedDevisForSituation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const statusOptions = ["En attente", "Validé", "Refusé"];\n  const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_9__.useNavigate)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    fetchDevis();\n\n    // Récupère les paramètres de l\'URL\n    const urlParams = new URLSearchParams(window.location.search);\n    const numeroFilter = urlParams.get("numero");\n\n    // Si un numéro de devis est spécifié dans l\'URL, met à jour le filtre\n    if (numeroFilter) {\n      setFilters(prev => ({\n        ...prev,\n        numero: numeroFilter\n      }));\n\n      // Appliquer le filtre immédiatement sur les devis existants\n      const filtered = devis.filter(devis => {\n        var _devis$numero;\n        return (_devis$numero = devis.numero) === null || _devis$numero === void 0 ? void 0 : _devis$numero.toLowerCase().includes(numeroFilter.toLowerCase());\n      });\n      setFilteredDevis(filtered);\n    }\n\n    // Vérifier s\'il y a une génération PDF en attente\n    checkPendingPDFGeneration();\n\n    // Vérifier s\'il y a un téléchargement automatique demandé via URL\n    checkAutoDownloadFromURL();\n  }, []);\n\n  // Fonction pour vérifier et lancer la génération PDF en attente\n  const checkPendingPDFGeneration = async () => {\n    try {\n      const pendingData = sessionStorage.getItem("pendingPDFGeneration");\n      if (pendingData) {\n        const {\n          type,\n          appelOffresId,\n          appelOffresName,\n          societeName,\n          timestamp\n        } = JSON.parse(pendingData);\n\n        // Vérifier que la demande n\'est pas trop ancienne (max 5 minutes)\n        const now = Date.now();\n        if (now - timestamp > 5 * 60 * 1000) {\n          console.log("⚠️ Génération PDF en attente trop ancienne, suppression");\n          sessionStorage.removeItem("pendingPDFGeneration");\n          return;\n        }\n        if (type === "devis_marche") {\n          console.log("🚀 Lancement de la génération PDF automatique pour l\'appel d\'offre");\n\n          // Pour la génération automatique, on n\'a pas l\'ID du devis\n          // On va récupérer le devis depuis l\'appel d\'offres\n          try {\n            const devisResponse = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/devisa/?appel_offres=${appelOffresId}`);\n            const devisList = devisResponse.data;\n            if (devisList && devisList.length > 0) {\n              const devis = devisList[0]; // Prendre le premier devis\n              await (0,_pdf_drive_functions__WEBPACK_IMPORTED_MODULE_8__.generateDevisMarchePDFDrive)(devis.id,\n              // ID du devis\n              appelOffresId, appelOffresName, societeName, response => {\n                console.log("✅ PDF généré avec succès pour l\'appel d\'offre");\n                sessionStorage.removeItem("pendingPDFGeneration");\n              }, error => {\n                console.error("❌ Erreur lors de la génération du PDF:", error);\n                sessionStorage.removeItem("pendingPDFGeneration");\n              });\n            } else {\n              console.error("❌ Aucun devis trouvé pour l\'appel d\'offres");\n              sessionStorage.removeItem("pendingPDFGeneration");\n            }\n          } catch (error) {\n            console.error("❌ Erreur lors de la récupération du devis:", error);\n            sessionStorage.removeItem("pendingPDFGeneration");\n          }\n        }\n      }\n    } catch (error) {\n      console.error("❌ Erreur lors de la vérification de la génération PDF en attente:", error);\n      // Nettoyer le sessionStorage en cas d\'erreur\n      sessionStorage.removeItem("pendingPDFGeneration");\n    }\n  };\n\n  // Fonction pour vérifier et lancer le téléchargement automatique depuis l\'URL\n  const checkAutoDownloadFromURL = async () => {\n    try {\n      console.log("🔍 NOUVEAU: Vérification du téléchargement automatique depuis l\'URL");\n      console.log("🔍 URL actuelle:", window.location.href);\n      const urlParams = new URLSearchParams(window.location.search);\n      const autoDownload = urlParams.get("autoDownload");\n      if (autoDownload === "true") {\n        const devisId = urlParams.get("devisId");\n        const appelOffresId = urlParams.get("appelOffresId");\n        const appelOffresName = urlParams.get("appelOffresName");\n        const chantierId = urlParams.get("chantierId");\n        const chantierName = urlParams.get("chantierName");\n        const societeName = urlParams.get("societeName");\n        const numero = urlParams.get("numero");\n        console.log("🚀 NOUVEAU: Téléchargement automatique détecté:", {\n          devisId,\n          appelOffresId,\n          appelOffresName,\n          chantierId,\n          chantierName,\n          societeName,\n          numero\n        });\n\n        // Vérifier si c\'est un devis de chantier ou un devis normal\n        if (devisId && appelOffresId && appelOffresName && societeName) {\n          // C\'est un devis de chantier\n          // Attendre que les devis soient chargés\n          setTimeout(async () => {\n            try {\n              console.log("🎯 NOUVEAU: Lancement du téléchargement automatique avec le système universel");\n\n              // Utiliser le nouveau système universel\n              await (0,_utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_2__.generatePDFDrive)("devis_chantier", {\n                devisId: parseInt(devisId),\n                appelOffresId: parseInt(appelOffresId),\n                appelOffresName: appelOffresName,\n                societeName: societeName,\n                numero: numero || `DEV-${devisId}`\n              }, {\n                onSuccess: response => {\n                  console.log("✅ NOUVEAU: Téléchargement automatique réussi:", response);\n                  // Nettoyer l\'URL après succès\n                  const newUrl = window.location.pathname;\n                  window.history.replaceState({}, document.title, newUrl);\n                },\n                onError: error => {\n                  console.error("❌ NOUVEAU: Erreur lors du téléchargement automatique:", error);\n                  // Afficher une notification d\'erreur\n                  alert(`❌ Erreur lors du téléchargement automatique: ${error.message}`);\n                  // Nettoyer l\'URL même en cas d\'erreur\n                  const newUrl = window.location.pathname;\n                  window.history.replaceState({}, document.title, newUrl);\n                }\n              });\n            } catch (error) {\n              console.error("❌ NOUVEAU: Erreur lors du téléchargement automatique:", error);\n              alert(`❌ Erreur lors du téléchargement automatique: ${error.message}`);\n              // Nettoyer l\'URL en cas d\'erreur\n              const newUrl = window.location.pathname;\n              window.history.replaceState({}, document.title, newUrl);\n            }\n          }, 2000); // Attendre 2 secondes pour que les devis soient chargés\n        } else if (devisId && chantierId && chantierName && societeName) {\n          // C\'est un devis normal\n          // Attendre que les devis soient chargés\n          setTimeout(async () => {\n            try {\n              console.log("🎯 NOUVEAU: Lancement du téléchargement automatique pour devis normal avec le système universel");\n\n              // Utiliser le nouveau système universel pour les devis normaux\n              await (0,_utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_2__.generatePDFDrive)("devis_normal", {\n                devisId: parseInt(devisId),\n                chantierId: parseInt(chantierId),\n                chantierName: chantierName,\n                societeName: societeName,\n                numero: numero || `DEV-${devisId}`\n              }, {\n                onSuccess: response => {\n                  console.log("✅ NOUVEAU: Téléchargement automatique devis normal réussi:", response);\n                  // Nettoyer l\'URL après succès\n                  const newUrl = window.location.pathname;\n                  window.history.replaceState({}, document.title, newUrl);\n                },\n                onError: error => {\n                  console.error("❌ NOUVEAU: Erreur lors du téléchargement automatique devis normal:", error);\n                  alert(`❌ Erreur lors du téléchargement automatique: ${error.message}`);\n                  // Nettoyer l\'URL même en cas d\'erreur\n                  const newUrl = window.location.pathname;\n                  window.history.replaceState({}, document.title, newUrl);\n                }\n              });\n            } catch (error) {\n              console.error("❌ NOUVEAU: Erreur lors du téléchargement automatique devis normal:", error);\n              alert(`❌ Erreur lors du téléchargement automatique: ${error.message}`);\n              // Nettoyer l\'URL en cas d\'erreur\n              const newUrl = window.location.pathname;\n              window.history.replaceState({}, document.title, newUrl);\n            }\n          }, 2000); // Attendre 2 secondes pour que les devis soient chargés\n        } else {\n          console.warn("⚠️ NOUVEAU: Paramètres manquants pour le téléchargement automatique");\n          alert("⚠️ Paramètres manquants pour le téléchargement automatique");\n          // Nettoyer l\'URL si les paramètres sont incomplets\n          const newUrl = window.location.pathname;\n          window.history.replaceState({}, document.title, newUrl);\n        }\n      }\n    } catch (error) {\n      console.error("❌ NOUVEAU: Erreur lors de la vérification du téléchargement automatique:", error);\n      alert(`❌ Erreur lors de la vérification du téléchargement automatique: ${error.message}`);\n    }\n  };\n\n  // Fonction pour gérer le téléchargement automatique des nouveaux devis\n  const handleAutoDownloadForNewDevis = async devis => {\n    try {\n      console.log("🎯 Téléchargement automatique pour le nouveau devis:", devis);\n\n      // Récupérer les données complètes du devis\n      const response = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/devisa/${devis.id}/`);\n      const devisComplet = response.data;\n      console.log("📋 Données du devis complet:", devisComplet);\n\n      // Vérifier que c\'est bien un devis de chantier avec un appel d\'offres\n      if (devisComplet.devis_chantier === true && devisComplet.appel_offres) {\n        // Récupérer les données de l\'appel d\'offres\n        const appelOffresResponse = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/appels-offres/${devisComplet.appel_offres}/`);\n        const appelOffres = appelOffresResponse.data;\n\n        // Récupérer les données de la société\n        let societe;\n        if (typeof appelOffres.societe === "object" && appelOffres.societe.id) {\n          societe = appelOffres.societe;\n        } else {\n          const societeResponse = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/societe/${appelOffres.societe}/`);\n          societe = societeResponse.data;\n        }\n        console.log("🚀 Lancement du téléchargement automatique...");\n\n        // Lancer la génération PDF\n        await (0,_pdf_drive_functions__WEBPACK_IMPORTED_MODULE_8__.generateDevisMarchePDFDrive)(devisComplet.id, appelOffres.id, appelOffres.chantier_name, societe.nom_societe, response => {\n          console.log("✅ Téléchargement automatique réussi:", response);\n          alert("✅ Devis téléchargé automatiquement dans le Drive !");\n        }, error => {\n          console.error("❌ Erreur lors du téléchargement automatique:", error);\n          alert("❌ Erreur lors du téléchargement automatique. Vous pouvez le faire manuellement.");\n        });\n      } else {\n        console.log("ℹ️ Ce devis n\'est pas un devis de chantier ou n\'a pas d\'appel d\'offres associé");\n      }\n    } catch (error) {\n      console.error("❌ Erreur lors du téléchargement automatique:", error);\n    }\n  };\n\n  // Ajouter un nouvel useEffect pour réagir aux changements de devis\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const numeroFilter = urlParams.get("numero");\n    if (numeroFilter && devis.length > 0) {\n      const filtered = devis.filter(devis => {\n        var _devis$numero2;\n        return (_devis$numero2 = devis.numero) === null || _devis$numero2 === void 0 ? void 0 : _devis$numero2.toLowerCase().includes(numeroFilter.toLowerCase());\n      });\n      setFilteredDevis(filtered);\n    }\n  }, [devis]);\n  const fetchDevis = async () => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get("/api/devisa/");\n      const newDevis = response.data;\n\n      // Détecter les nouveaux devis (ceux qui n\'étaient pas dans la liste précédente)\n      const previousDevisIds = devis.map(d => d.id);\n      const newlyCreatedDevis = newDevis.filter(d => !previousDevisIds.includes(d.id));\n      console.log("🔍 DEBUG - État précédent:", previousDevisIds);\n      console.log("🔍 DEBUG - Nouveaux devis détectés:", newlyCreatedDevis);\n      setDevis(newDevis);\n      setFilteredDevis(newDevis);\n\n      // Seulement traiter les nouveaux devis si on avait déjà une liste précédente\n      // ET si ce n\'est pas le premier chargement de la page\n      if (newlyCreatedDevis.length > 0 && previousDevisIds.length > 0 && isInitialized) {\n        const chantierDevis = newlyCreatedDevis.filter(d => d.devis_chantier === true);\n        if (chantierDevis.length > 0) {\n          console.log(`🚀 ${chantierDevis.length} nouveau(x) devis de chantier détecté(s), téléchargement automatique...`);\n          // Attendre un peu pour que l\'interface se stabilise\n          setTimeout(() => {\n            // Traiter tous les devis de chantier trouvés\n            chantierDevis.forEach((devis, index) => {\n              // Délai progressif pour éviter les conflits (1s, 2s, 3s, etc.)\n              setTimeout(() => {\n                console.log(`📄 Traitement du devis ${index + 1}/${chantierDevis.length}: ${devis.numero}`);\n                handleAutoDownloadForNewDevis(devis);\n              }, index * 1000); // 1 seconde entre chaque devis\n            });\n          }, 1000);\n        }\n      } else if (!isInitialized) {\n        console.log("ℹ️ Premier chargement - initialisation terminée");\n        setIsInitialized(true);\n      } else {\n        console.log("ℹ️ Aucun nouveau devis détecté");\n      }\n    } catch (error) {\n      console.error("Erreur lors du chargement des devis:", error);\n    }\n  };\n  const handleFilterChange = field => event => {\n    const newFilters = {\n      ...filters,\n      [field]: event.target.value\n    };\n    setFilters(newFilters);\n    let filtered = devis.filter(devis => {\n      return Object.keys(newFilters).every(key => {\n        var _devis$numero3, _devis$chantier_name, _devis$client_name, _devis$price_ttc;\n        if (!newFilters[key] || newFilters[key] === "Tous") return true;\n        switch (key) {\n          case "numero":\n            return (_devis$numero3 = devis.numero) === null || _devis$numero3 === void 0 ? void 0 : _devis$numero3.toLowerCase().includes(newFilters[key].toLowerCase());\n          case "chantier_name":\n            return (_devis$chantier_name = devis.chantier_name) === null || _devis$chantier_name === void 0 ? void 0 : _devis$chantier_name.toLowerCase().includes(newFilters[key].toLowerCase());\n          case "client_name":\n            return (_devis$client_name = devis.client_name) === null || _devis$client_name === void 0 ? void 0 : _devis$client_name.toLowerCase().includes(newFilters[key].toLowerCase());\n          case "date_creation":\n            if (!newFilters[key]) return true;\n            // Convertir la date du devis au format YYYY-MM-DD pour la comparaison\n            const devisDate = new Date(devis.date_creation).toISOString().split("T")[0];\n            return devisDate === newFilters[key];\n          case "price_ttc":\n            const devisPrice = ((_devis$price_ttc = devis.price_ttc) === null || _devis$price_ttc === void 0 ? void 0 : _devis$price_ttc.toString()) || "";\n            return devisPrice.includes(newFilters[key]);\n          case "status":\n            return devis.status === newFilters[key];\n          default:\n            return true;\n        }\n      });\n    });\n    setFilteredDevis(filtered);\n  };\n  const handleSort = property => {\n    const isAsc = orderBy === property && order === "asc";\n    setOrder(isAsc ? "desc" : "asc");\n    setOrderBy(property);\n    const sorted = [...filteredDevis].sort((a, b) => {\n      if (property === "date_creation") {\n        return (isAsc ? 1 : -1) * (new Date(a[property]).getTime() - new Date(b[property]).getTime());\n      }\n      if (property === "price_ttc") {\n        return (isAsc ? 1 : -1) * (parseFloat(a[property]) - parseFloat(b[property]));\n      }\n      return (isAsc ? 1 : -1) * (a[property] < b[property] ? -1 : 1);\n    });\n    setFilteredDevis(sorted);\n  };\n  const handlePreviewDevis = devisId => {\n    const previewUrl = `/api/preview-saved-devis/${devisId}/`;\n    window.open(previewUrl, "_blank");\n  };\n  const handleMoreClick = (event, devis) => {\n    setAnchorEl(event.currentTarget);\n    setSelectedDevis(devis);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  const handleModifyDevis = () => {\n    if (selectedDevis) {\n      if (selectedDevis.status !== "En attente") {\n        alert("Seuls les devis en attente peuvent être modifiés");\n        handleClose();\n        return;\n      }\n      window.location.href = `/ModificationDevis/${selectedDevis.id}`;\n    }\n    handleClose();\n  };\n  const handleConvertToInvoice = () => {\n    // À implémenter\n    handleClose();\n  };\n  const handleChangeStatus = () => {\n    setDevisToUpdate(selectedDevis);\n    setShowStatusModal(true);\n    handleClose();\n  };\n  const handleStatusUpdate = async newStatus => {\n    try {\n      if (!devisToUpdate) return;\n\n      // Si on change l\'état depuis "Validé", vérifier les factures associées\n      if (devisToUpdate.status === "Validé" && newStatus !== "Validé") {\n        const response = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/list-devis/${devisToUpdate.id}/factures/`);\n        const factures = response.data;\n        if (factures.length > 0) {\n          // Stocker l\'ID du devis dans facturesToDelete\n          setFacturesToDelete(factures.map(f => ({\n            ...f,\n            devisId: devisToUpdate.id\n          })));\n          setNewStatus(newStatus);\n          setDeleteFacturesModalOpen(true);\n          setShowStatusModal(false);\n          return;\n        }\n      }\n      await updateDevisStatus(newStatus);\n    } catch (error) {\n      console.error("Erreur lors de la modification du statut:", error);\n      alert("Erreur lors de la modification du statut");\n    }\n  };\n  const updateDevisStatus = async status => {\n    try {\n      await axios__WEBPACK_IMPORTED_MODULE_10__["default"].put(`/api/list-devis/${devisToUpdate.id}/update_status/`, {\n        status: status\n      });\n      setDevis(devis.map(d => d.id === devisToUpdate.id ? {\n        ...d,\n        status: status\n      } : d));\n      setFilteredDevis(filteredDevis.map(d => d.id === devisToUpdate.id ? {\n        ...d,\n        status: status\n      } : d));\n      setShowStatusModal(false);\n      setDevisToUpdate(null);\n      setNewStatus(null);\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour du statut:", error);\n      alert("Erreur lors de la mise à jour du statut");\n    }\n  };\n  const handleConfirmDeleteFactures = async () => {\n    try {\n      if (facturesToDelete.length === 0) return;\n\n      // Récupérer l\'ID du devis depuis la première facture\n      const devisId = facturesToDelete[0].devisId;\n      const statusToUpdate = newStatus;\n\n      // Supprimer toutes les factures associées\n      await Promise.all(facturesToDelete.map(facture => axios__WEBPACK_IMPORTED_MODULE_10__["default"].delete(`/api/facture/${facture.id}/`)));\n\n      // Mettre à jour le statut du devis\n      await axios__WEBPACK_IMPORTED_MODULE_10__["default"].put(`/api/list-devis/${devisId}/update_status/`, {\n        status: statusToUpdate\n      });\n\n      // Mettre à jour l\'état local\n      setDevis(devis.map(d => d.id === devisId ? {\n        ...d,\n        status: statusToUpdate\n      } : d));\n      setFilteredDevis(filteredDevis.map(d => d.id === devisId ? {\n        ...d,\n        status: statusToUpdate\n      } : d));\n\n      // Message de succès\n      const nombreFactures = facturesToDelete.length;\n      const message = nombreFactures === 1 ? `La facture ${facturesToDelete[0].numero} a été supprimée avec succès.` : `${nombreFactures} factures ont été supprimées avec succès.`;\n      alert(message);\n\n      // Réinitialiser les états\n      setDeleteFacturesModalOpen(false);\n      setFacturesToDelete([]);\n      setDevisToUpdate(null);\n      setNewStatus(null);\n      setShowStatusModal(false);\n    } catch (error) {\n      console.error("Erreur lors de la suppression des factures:", error);\n      alert("Erreur lors de la suppression des factures");\n    }\n  };\n  const handleDeleteDevis = () => {\n    setDeleteModalOpen(true);\n    handleClose();\n  };\n  const handleConfirmDelete = async () => {\n    try {\n      if (!selectedDevis) {\n        console.error("Aucun devis sélectionné");\n        return;\n      }\n\n      // Vérifier que l\'URL correspond à celle définie dans urls.py\n      await axios__WEBPACK_IMPORTED_MODULE_10__["default"].delete(`/api/devis/${selectedDevis.id}/`);\n\n      // Mettre à jour l\'état local\n      setDevis(prevDevis => prevDevis.filter(d => d.id !== selectedDevis.id));\n      setFilteredDevis(prevFiltered => prevFiltered.filter(d => d.id !== selectedDevis.id));\n      setDeleteModalOpen(false);\n      setSelectedDevis(null);\n    } catch (error) {\n      console.error("Erreur lors de la suppression du devis:", error);\n      alert("Erreur lors de la suppression du devis");\n    }\n  };\n  const handleCloseDeleteModal = () => {\n    setDeleteModalOpen(false);\n    setSelectedDevis(null);\n  };\n  const handleTransformDevis = async (devis, type) => {\n    try {\n      if (type === "TS") {\n        const devisResponse = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/devisa/${devis.id}/`);\n        const devisComplet = devisResponse.data;\n        console.log("Devis complet:", devisComplet);\n\n        // Vérifier que ce n\'est PAS un devis de chantier\n        if (devisComplet.devis_chantier === true) {\n          alert("Les devis de chantier ne peuvent pas être transformés en TS");\n          return;\n        }\n\n        // Vérifier si une facture existe déjà\n        if (devisComplet.factures && devisComplet.factures.length > 0) {\n          alert(`Une facture existe déjà pour le devis ${devisComplet.numero}`);\n          return;\n        }\n        const response = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/chantier/${devisComplet.chantier}/`);\n        setSelectedChantier(response.data);\n        setSelectedDevisForTS(devisComplet);\n        setTsModalOpen(true);\n      } else if (type === "CIE") {\n        const devisResponse = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/devisa/${devis.id}/`);\n        const devisComplet = devisResponse.data;\n\n        // Vérifier si une facture existe déjà\n        if (devisComplet.factures && devisComplet.factures.length > 0) {\n          alert(`Une facture existe déjà pour le devis ${devisComplet.numero}`);\n          return;\n        }\n        const response = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/chantier/${devisComplet.chantier}/`);\n        setSelectedChantier(response.data);\n        setSelectedDevisForCIE(devisComplet);\n        setCieModalOpen(true);\n      } else {\n        // Pour la facture classique\n        setSelectedDevis(devis);\n        setFactureModalOpen(true);\n      }\n    } catch (error) {\n      var _error$response, _error$response2;\n      console.error("Erreur lors de la récupération des données:", error);\n\n      // Afficher un message d\'erreur plus détaillé\n      if ((_error$response = error.response) !== null && _error$response !== void 0 && (_error$response = _error$response.data) !== null && _error$response !== void 0 && _error$response.error) {\n        alert(`Erreur : ${error.response.data.error}`);\n      } else if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 400) {\n        alert("Erreur : La facture ne peut pas être créée car elle existe déjà ou le numéro est déjà utilisé.");\n      } else {\n        alert("Erreur lors de la préparation de la transformation. Veuillez réessayer.");\n      }\n    }\n  };\n  const handleConvertToBonCommande = async devis => {\n    try {\n      // Récupérer le devis complet\n      const devisResponse = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/devisa/${devis.id}/`);\n      const devisComplet = devisResponse.data;\n\n      // Vérifier que le devis est validé\n      if (devisComplet.status !== "Validé") {\n        alert("Seuls les devis validés peuvent être convertis en bon de commande");\n        return;\n      }\n\n      // Vérifier que le devis a des lignes\n      if (!devisComplet.lignes || devisComplet.lignes.length === 0) {\n        alert("Ce devis n\'a pas de lignes à convertir");\n        return;\n      }\n\n      // Récupérer les informations du chantier\n      const chantierResponse = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/chantier/${devisComplet.chantier}/`);\n      const chantier = chantierResponse.data;\n\n      // Préparer les données pour le bon de commande\n      const bonCommandeData = {\n        numero: `BC-${devisComplet.numero}`,\n        fournisseur: "À définir",\n        // L\'utilisateur devra sélectionner le fournisseur\n        chantier: devisComplet.chantier,\n        emetteur: devisComplet.client || chantier.client,\n        statut: "En attente",\n        date_commande: new Date().toISOString().split(\'T\')[0],\n        date_creation_personnalisee: new Date().toISOString().split(\'T\')[0],\n        contact_type: "client",\n        contact_agent: null,\n        contact_sous_traitant: null,\n        lignes: devisComplet.lignes.map(ligne => ({\n          produit: ligne.ligne_detail,\n          designation: ligne.designation || "Produit du devis",\n          quantite: ligne.quantite,\n          prix_unitaire: ligne.prix_unitaire,\n          total: ligne.quantite * ligne.prix_unitaire\n        })),\n        montant_total: devisComplet.price_ht || 0,\n        devis_origine: devisComplet.id\n      };\n\n      // Rediriger vers la page de création de bon de commande avec les données pré-remplies\n      const queryParams = new URLSearchParams({\n        from_devis: \'true\',\n        devis_id: devis.id,\n        chantier_id: devisComplet.chantier\n      });\n      window.location.href = `/BonCommande?${queryParams.toString()}`;\n    } catch (error) {\n      console.error("Erreur lors de la conversion en bon de commande:", error);\n      alert("Erreur lors de la conversion en bon de commande. Veuillez réessayer.");\n    }\n  };\n  const handleTSModalClose = () => {\n    setTsModalOpen(false);\n    setSelectedDevisForTS(null);\n    setSelectedChantier(null);\n    // Rafraîchir la liste des devis après la création d\'un TS\n    fetchDevis();\n  };\n  const handleCIEModalClose = () => {\n    setCieModalOpen(false);\n    setSelectedDevisForCIE(null);\n    setSelectedChantier(null);\n    // Rafraîchir la liste des devis après la création d\'une facture CIE\n    fetchDevis();\n  };\n  const handleFactureModalClose = () => {\n    setFactureModalOpen(false);\n    setSelectedDevis(null);\n  };\n  const handleFactureSubmit = async factureData => {\n    try {\n      console.log("Données envoyées:", factureData);\n      const response = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].post("/api/facture/", factureData);\n\n      // Message de succès\n      alert(`La facture ${response.data.numero} a été créée avec succès.`);\n\n      // Auto-download de la facture dans le Drive\n      try {\n        console.log("🚀 Lancement de l\'auto-download de la facture vers le Drive");\n\n        // Récupérer les données complètes de la facture créée\n        const factureResponse = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/facture/${response.data.id}/`);\n        const factureComplet = factureResponse.data;\n        console.log("📋 Données de la facture complète:", factureComplet);\n\n        // Récupérer les données de la société depuis le chantier\n        const chantierResponse = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/chantier/${factureComplet.chantier}/`);\n        const chantier = chantierResponse.data;\n\n        // Récupérer les données de la société\n        let societe;\n        if (typeof chantier.societe === "object" && chantier.societe.id) {\n          societe = chantier.societe;\n        } else {\n          const societeResponse = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/societe/${chantier.societe}/`);\n          societe = societeResponse.data;\n        }\n        console.log("🏢 Données de la société:", societe);\n\n        // Utiliser le système universel pour générer le PDF\n        await (0,_utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_2__.generatePDFDrive)("facture", {\n          factureId: factureComplet.id,\n          chantierId: factureComplet.chantier,\n          chantierName: factureComplet.chantier_name,\n          societeName: societe.nom_societe,\n          numero: factureComplet.numero\n        }, {\n          onSuccess: response => {\n            console.log("✅ Facture générée avec succès dans le Drive:", response);\n            alert("✅ Facture téléchargée automatiquement dans le Drive !");\n          },\n          onError: error => {\n            console.error("❌ Erreur lors de la génération de la facture:", error);\n            alert(`❌ Erreur lors de la génération automatique: ${error.message}`);\n          }\n        });\n      } catch (autoDownloadError) {\n        console.error("❌ Erreur lors de l\'auto-download:", autoDownloadError);\n        // Ne pas bloquer le processus principal si l\'auto-download échoue\n        alert("⚠️ Facture créée mais erreur lors du téléchargement automatique. Vous pouvez le faire manuellement.");\n      }\n      handleFactureModalClose();\n      fetchDevis();\n    } catch (error) {\n      var _error$response3;\n      console.error("Erreur lors de la création de la facture:", ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || error);\n      alert("Erreur lors de la création de la facture. Veuillez vérifier les données.");\n    }\n  };\n  const handleGeneratePDF = async devis => {\n    try {\n      console.log("Tentative de génération du PDF pour le devis:", devis.id);\n\n      // Appel à l\'API existante\n      const response = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].post("/api/generate-pdf-from-preview/", {\n        devis_id: devis.id,\n        // Ajoutons des logs pour déboguer\n        preview_url: `/api/preview-saved-devis/${devis.id}/`\n      }, {\n        responseType: "blob",\n        headers: {\n          "Content-Type": "application/json"\n        }\n      });\n\n      // Vérifier si la réponse est bien un PDF\n      if (response.headers["content-type"] === "application/pdf") {\n        // Créer un URL pour le blob\n        const pdfBlob = new Blob([response.data], {\n          type: "application/pdf"\n        });\n        const pdfUrl = window.URL.createObjectURL(pdfBlob);\n\n        // Créer un lien temporaire pour télécharger le PDF\n        const link = document.createElement("a");\n        link.href = pdfUrl;\n        link.download = `devis-${devis.numero}.pdf`;\n        document.body.appendChild(link);\n        link.click();\n\n        // Nettoyer\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(pdfUrl);\n      } else {\n        // Si ce n\'est pas un PDF, c\'est probablement une erreur\n        const reader = new FileReader();\n        reader.onload = function () {\n          const errorMessage = JSON.parse(reader.result);\n          console.error("Erreur serveur:", errorMessage);\n          alert(`Erreur: ${errorMessage.error || "Erreur inconnue"}`);\n        };\n        reader.readAsText(response.data);\n      }\n    } catch (error) {\n      var _error$response4, _error$response5, _error$response6;\n      console.error("Erreur détaillée:", (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data);\n      console.error("Status:", (_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.status);\n      console.error("Headers:", (_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : _error$response6.headers);\n      alert("Erreur lors de la génération du PDF. Vérifiez la console pour plus de détails.");\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    style: {\n      backgroundColor: "#ffffff",\n      width: "100%",\n      maxWidth: "1400px",\n      height: "auto",\n      padding: "20px",\n      paddingBottom: "70px",\n      borderRadius: "10px",\n      boxShadow: "6px 7px 20px -6px rgba(33, 33, 33, 1)",\n      margin: "20px auto"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledBox, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    variant: "h5",\n    gutterBottom: true,\n    sx: {\n      fontFamily: "Merriweather, serif",\n      position: "relative",\n      marginBottom: "20px"\n    }\n  }, "Liste des Devis"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTableContainer, {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_12__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Num\\xE9ro",\n    variant: "standard",\n    value: filters.numero,\n    onChange: handleFilterChange("numero")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Chantier",\n    variant: "standard",\n    value: filters.chantier_name,\n    onChange: handleFilterChange("chantier_name")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Client",\n    variant: "standard",\n    value: filters.client_name,\n    onChange: handleFilterChange("client_name")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.AlignedCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    active: orderBy === "date_creation",\n    direction: orderBy === "date_creation" ? order : "asc",\n    onClick: () => handleSort("date_creation"),\n    sx: {\n      textAlign: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTextField, {\n    variant: "standard",\n    type: "date",\n    value: filters.date_creation,\n    onChange: handleFilterChange("date_creation"),\n    InputLabelProps: {\n      shrink: true\n    },\n    sx: {\n      pt: "15px"\n    }\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.AlignedCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    active: orderBy === "price_ttc",\n    direction: orderBy === "price_ttc" ? order : "asc",\n    onClick: () => handleSort("price_ttc"),\n    sx: {\n      textAlign: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.PriceTextField, {\n    label: "Prix TTC",\n    variant: "standard",\n    value: filters.price_ttc,\n    onChange: handleFilterChange("price_ttc"),\n    sx: {\n      maxWidth: "60px",\n      // Limite la largeur maximale\n      minWidth: "40px",\n      // Assure une largeur minimale\n      "& input": {\n        textAlign: "center"\n      }\n    }\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledSelect, {\n    value: filters.status,\n    onChange: handleFilterChange("status"),\n    variant: "standard",\n    sx: {\n      pt: "10px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    value: "Tous"\n  }, "Tous"), statusOptions.map(status => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    key: status,\n    value: status\n  }, status)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, filteredDevis.map(devis => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n    key: devis.id\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.DevisNumber, {\n    onClick: () => handlePreviewDevis(devis.id),\n    style: {\n      cursor: "pointer",\n      fontWeight: 700\n    }\n  }, devis.numero), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.ChantierCell, null, devis.chantier_name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, devis.client_name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, new Date(devis.date_creation).toLocaleDateString()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n    style: {\n      fontWeight: 600,\n      color: _mui_material_colors__WEBPACK_IMPORTED_MODULE_19__["default"][500]\n    }\n  }, formatNumber(devis.price_ttc), " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StatusCell, {\n    status: devis.status\n  }, devis.status), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n    sx: {\n      width: "60px",\n      padding: "0 8px",\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    variant: "outlined",\n    size: "small",\n    "aria-label": "actions button group",\n    sx: {\n      paddingTop: "10px",\n      "& .MuiButtonGroup-grouped": {\n        minWidth: "35px",\n        padding: "4px",\n        border: "none",\n        "&:hover": {\n          backgroundColor: "rgba(0, 0, 0, 0.04)"\n        }\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    onClick: e => handleMoreClick(e, devis),\n    sx: {\n      backgroundColor: "rgba(0, 0, 0, 0.04)",\n      "&:hover": {\n        backgroundColor: "rgba(0, 0, 0, 0.08)",\n        boxShadow: "0 2px 4px rgba(0,0,0,0.1)"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_tfi__WEBPACK_IMPORTED_MODULE_22__.TfiMore, {\n    size: 16,\n    color: "#666"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    onClick: () => handleGeneratePDF(devis),\n    sx: {\n      color: "primary.main",\n      "&:hover": {\n        backgroundColor: "rgba(25, 118, 210, 0.04)"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_ai__WEBPACK_IMPORTED_MODULE_23__.AiFillFilePdf, {\n    style: {\n      fontSize: "24px"\n    }\n  }))))))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    anchorEl: anchorEl,\n    open: Boolean(anchorEl),\n    onClose: handleClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    onClick: () => {\n      handleClose();\n      navigate(`/ModificationDevis/${selectedDevis === null || selectedDevis === void 0 ? void 0 : selectedDevis.id}`);\n    }\n  }, "Modifier le devis"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    onClick: () => {\n      handleClose();\n      handleTransformDevis(selectedDevis, "facture");\n    }\n  }, "\\xC9diter en facture"), selectedDevis && selectedDevis.devis_chantier !== true && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    onClick: () => {\n      handleClose();\n      handleTransformDevis(selectedDevis, "TS");\n    }\n  }, "\\xC9diter en avenant"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    onClick: () => {\n      handleClose();\n      handleTransformDevis(selectedDevis, "CIE");\n    }\n  }, "\\xC9diter en CIE"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    onClick: () => {\n      handleClose();\n      handleConvertToBonCommande(selectedDevis);\n    }\n  }, "Convertir en bon de commande"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    onClick: handleChangeStatus\n  }, "Modifier l\'\\xE9tat"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    onClick: handleDeleteDevis,\n    sx: {\n      color: "error.main"\n    }\n  }, "Supprimer"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    onClick: async () => {\n      handleClose();\n      try {\n        // Récupérer le devis complet avec tous ses champs\n        const response = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/devisa/${selectedDevis.id}/`);\n        const devisComplet = response.data;\n        if (devisComplet.devis_chantier === true) {\n          const chantierResponse = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/chantier/${devisComplet.chantier}/`);\n          setSelectedChantier(chantierResponse.data);\n          setSelectedDevisForSituation(devisComplet);\n          setSituationModalOpen(true);\n        } else {\n          alert("Seuls les devis de chantier peuvent avoir des situations");\n        }\n      } catch (error) {\n        console.error("Erreur lors du chargement des données:", error);\n        alert("Erreur lors du chargement des données");\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_25__.FaClipboardList, {\n    style: {\n      marginRight: "8px"\n    }\n  }), "Cr\\xE9er une situation"), selectedDevis && selectedDevis.devis_chantier === true && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    onClick: async () => {\n      handleClose();\n      try {\n        console.log("🧪 TEST: Génération PDF Drive pour devis de chantier (ancien système)");\n\n        // Récupérer les données complètes du devis\n        const response = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/devisa/${selectedDevis.id}/`);\n        const devisComplet = response.data;\n        console.log("📋 Données du devis complet:", devisComplet);\n        console.log("📋 Champ appel_offres:", devisComplet.appel_offres);\n        console.log("📋 Type de appel_offres:", typeof devisComplet.appel_offres);\n\n        // Vérifier si appel_offres existe\n        if (!devisComplet.appel_offres) {\n          console.error("❌ ERREUR: Le champ appel_offres est undefined ou null");\n          alert("❌ ERREUR: Ce devis n\'est pas lié à un appel d\'offres. Vérifiez que c\'est bien un devis de chantier.");\n          return;\n        }\n\n        // Récupérer les données de l\'appel d\'offres\n        console.log(`🔍 Récupération de l\'appel d\'offres: /api/appels-offres/${devisComplet.appel_offres}/`);\n        const appelOffresResponse = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/appels-offres/${devisComplet.appel_offres}/`);\n        const appelOffres = appelOffresResponse.data;\n        console.log("📋 Données de l\'appel d\'offres:", appelOffres);\n\n        // Récupérer les données de la société\n        let societe;\n        if (typeof appelOffres.societe === "object" && appelOffres.societe.id) {\n          // La société est déjà un objet complet\n          societe = appelOffres.societe;\n          console.log("📋 Données de la société (déjà récupérées):", societe);\n        } else {\n          // La société est juste un ID, on doit la récupérer\n          const societeResponse = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/societe/${appelOffres.societe}/`);\n          societe = societeResponse.data;\n          console.log("📋 Données de la société (récupérées via API):", societe);\n        }\n\n        // Lancer la génération PDF avec les notifications\n        await (0,_pdf_drive_functions__WEBPACK_IMPORTED_MODULE_8__.generateDevisMarchePDFDrive)(devisComplet.id,\n        // ID du devis\n        appelOffres.id,\n        // ID de l\'appel d\'offres\n        appelOffres.chantier_name, societe.nom_societe, response => {\n          console.log("✅ TEST: PDF généré avec succès", response);\n          alert("✅ TEST: PDF généré avec succès dans le Drive !");\n        }, error => {\n          console.error("❌ TEST: Erreur lors de la génération du PDF:", error);\n          alert(`❌ TEST: Erreur lors de la génération du PDF: ${error.message}`);\n        });\n      } catch (error) {\n        console.error("❌ TEST: Erreur lors de la récupération des données:", error);\n        alert(`❌ TEST: Erreur lors de la récupération des données: ${error.message}`);\n      }\n    }\n  }, "\\uD83D\\uDCC1 T\\xE9l\\xE9charger Drive (ANCIEN)"), selectedDevis && selectedDevis.devis_chantier === true && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    onClick: async () => {\n      handleClose();\n      try {\n        console.log("🚀 NOUVEAU: Génération PDF Drive avec le système universel");\n\n        // Récupérer les données complètes du devis\n        const response = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/devisa/${selectedDevis.id}/`);\n        const devisComplet = response.data;\n        console.log("📋 Données du devis complet:", devisComplet);\n\n        // Vérifier si appel_offres existe\n        if (!devisComplet.appel_offres) {\n          console.error("❌ ERREUR: Le champ appel_offres est undefined ou null");\n          alert("❌ ERREUR: Ce devis n\'est pas lié à un appel d\'offres. Vérifiez que c\'est bien un devis de chantier.");\n          return;\n        }\n\n        // Récupérer les données de l\'appel d\'offres\n        const appelOffresResponse = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/appels-offres/${devisComplet.appel_offres}/`);\n        const appelOffres = appelOffresResponse.data;\n\n        // Récupérer les données de la société\n        let societe;\n        if (typeof appelOffres.societe === "object" && appelOffres.societe.id) {\n          societe = appelOffres.societe;\n        } else {\n          const societeResponse = await axios__WEBPACK_IMPORTED_MODULE_10__["default"].get(`/api/societe/${appelOffres.societe}/`);\n          societe = societeResponse.data;\n        }\n\n        // Utiliser le nouveau système universel\n        await (0,_utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_2__.generatePDFDrive)("devis_chantier", {\n          devisId: devisComplet.id,\n          appelOffresId: appelOffres.id,\n          appelOffresName: appelOffres.chantier_name,\n          societeName: societe.nom_societe,\n          numero: devisComplet.numero\n        }, {\n          onSuccess: response => {\n            console.log("✅ NOUVEAU: PDF généré avec succès", response);\n            alert("✅ NOUVEAU: PDF généré avec succès dans le Drive !");\n          },\n          onError: error => {\n            console.error("❌ NOUVEAU: Erreur lors de la génération du PDF:", error);\n            alert(`❌ NOUVEAU: Erreur lors de la génération du PDF: ${error.message}`);\n          }\n        });\n      } catch (error) {\n        console.error("❌ NOUVEAU: Erreur lors de la récupération des données:", error);\n        alert(`❌ NOUVEAU: Erreur lors de la récupération des données: ${error.message}`);\n      }\n    }\n  }, "\\uD83D\\uDE80 T\\xE9l\\xE9charger Drive (NOUVEAU)")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StatusChangeModal__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    open: showStatusModal,\n    onClose: () => {\n      setShowStatusModal(false);\n      setDevisToUpdate(null);\n    },\n    currentStatus: devisToUpdate === null || devisToUpdate === void 0 ? void 0 : devisToUpdate.status,\n    onStatusChange: handleStatusUpdate,\n    type: "devis",\n    title: "Modifier l\'\\xE9tat du devis"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_TransformationTSModal__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    open: tsModalOpen,\n    onClose: handleTSModalClose,\n    devis: selectedDevisForTS,\n    chantier: selectedChantier\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_TransformationCIEModal__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    open: cieModalOpen,\n    onClose: handleCIEModalClose,\n    devis: selectedDevisForCIE,\n    chantier: selectedChantier\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    open: factureModalOpen,\n    onClose: handleFactureModalClose,\n    "aria-labelledby": "modal-modal-title",\n    "aria-describedby": "modal-modal-description"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], {\n    sx: {\n      position: "absolute",\n      top: "50%",\n      left: "50%",\n      transform: "translate(-50%, -50%)",\n      width: 400,\n      bgcolor: "background.paper",\n      boxShadow: 24,\n      borderRadius: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_CreationFacture__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    devis: selectedDevis,\n    onClose: handleFactureModalClose,\n    onSubmit: handleFactureSubmit\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    open: deleteModalOpen,\n    onClose: handleCloseDeleteModal,\n    "aria-labelledby": "delete-modal-title"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], {\n    sx: {\n      position: "absolute",\n      top: "50%",\n      left: "50%",\n      transform: "translate(-50%, -50%)",\n      width: 400,\n      bgcolor: "background.paper",\n      boxShadow: 24,\n      p: 4,\n      borderRadius: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    id: "delete-modal-title",\n    variant: "h6",\n    component: "h2",\n    gutterBottom: true\n  }, "Confirmer la suppression"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    variant: "body1",\n    gutterBottom: true\n  }, "\\xCAtes-vous s\\xFBr de vouloir supprimer le devis ", selectedDevis === null || selectedDevis === void 0 ? void 0 : selectedDevis.numero, " ", "?"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], {\n    sx: {\n      mt: 3,\n      display: "flex",\n      justifyContent: "flex-end",\n      gap: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    variant: "outlined",\n    onClick: handleCloseDeleteModal\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    variant: "contained",\n    color: "error",\n    onClick: handleConfirmDelete\n  }, "Supprimer")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    open: deleteFacturesModalOpen,\n    onClose: () => {\n      setDeleteFacturesModalOpen(false);\n      setFacturesToDelete([]);\n      setNewStatus(null);\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], {\n    sx: {\n      position: "absolute",\n      top: "50%",\n      left: "50%",\n      transform: "translate(-50%, -50%)",\n      width: 400,\n      bgcolor: "background.paper",\n      boxShadow: 24,\n      p: 4,\n      borderRadius: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    variant: "h6",\n    component: "h2",\n    gutterBottom: true\n  }, "Attention !"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    sx: {\n      mt: 2\n    }\n  }, "Le changement d\'\\xE9tat de ce devis entra\\xEEnera la suppression des factures suivantes :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], {\n    sx: {\n      mt: 2,\n      mb: 2\n    }\n  }, facturesToDelete.map(facture => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    key: facture.id,\n    sx: {\n      color: "error.main"\n    }\n  }, "\\u2022 ", facture.numero))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    sx: {\n      mt: 2,\n      mb: 3\n    }\n  }, "Voulez-vous continuer ?"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "flex-end",\n      gap: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    onClick: () => {\n      setDeleteFacturesModalOpen(false);\n      setFacturesToDelete([]);\n      setNewStatus(null);\n    }\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    variant: "contained",\n    color: "error",\n    onClick: handleConfirmDeleteFactures\n  }, "Confirmer")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_CreationSituation__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    open: situationModalOpen,\n    onClose: () => {\n      setSituationModalOpen(false);\n      setSelectedDevisForSituation(null);\n    },\n    devis: selectedDevisForSituation,\n    chantier: selectedChantier\n  }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ListeDevis);\n\n//# sourceURL=webpack://frontend/./src/components/ListeDevis.js?')},"./src/components/ListeFactures.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableSortLabel/TableSortLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Menu/Menu.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContentText/DialogContentText.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material_colors__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material/colors */ "./node_modules/@mui/material/colors/green.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fa__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react-icons/fa */ "./node_modules/react-icons/fa/index.mjs");\n/* harmony import */ var react_icons_tfi__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! react-icons/tfi */ "./node_modules/react-icons/tfi/index.mjs");\n/* harmony import */ var react_icons_ti__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! react-icons/ti */ "./node_modules/react-icons/ti/index.mjs");\n/* harmony import */ var _styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/tableStyles */ "./src/styles/tableStyles.js");\n/* harmony import */ var _StatusChangeModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./StatusChangeModal */ "./src/components/StatusChangeModal.js");\n\n\n\n\n\n\n\n\n\nconst ListeFactures = () => {\n  const [factures, setFactures] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [filteredFactures, setFilteredFactures] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [orderBy, setOrderBy] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("date");\n  const [order, setOrder] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("desc");\n  const [anchorEl, setAnchorEl] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [selectedFacture, setSelectedFacture] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [filters, setFilters] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    numero_facture: "",\n    chantier_name: "",\n    date_creation: "",\n    montant: "",\n    state_facture: "Tous"\n  });\n  const [chantierDetails, setChantierDetails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [deleteDialogOpen, setDeleteDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showStatusModal, setShowStatusModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [factureToUpdate, setFactureToUpdate] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const statusOptions = ["En cours", "Attente paiement", "Payée"];\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    fetchFactures();\n  }, []);\n  const fetchChantierDetails = async chantierId => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_3__["default"].get(`/api/chantier/${chantierId}/details/`);\n      setChantierDetails(prevDetails => ({\n        ...prevDetails,\n        [chantierId]: response.data\n      }));\n      return response.data;\n    } catch (error) {\n      return null;\n    }\n  };\n  const fetchFactures = async () => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_3__["default"].get("/api/facture/");\n      const facturesData = response.data;\n\n      // Plus besoin de recalculer le TTC puisqu\'il est déjà dans la base de données\n      setFactures(facturesData);\n      setFilteredFactures(facturesData);\n    } catch (error) {\n      console.error("Erreur lors du chargement des factures:", error);\n    }\n  };\n  const handleFilterChange = field => event => {\n    const newFilters = {\n      ...filters,\n      [field]: event.target.value\n    };\n    setFilters(newFilters);\n    let filtered = factures.filter(facture => {\n      return Object.keys(newFilters).every(key => {\n        var _facture$numero, _facture$chantier_nam, _facture$price_ttc;\n        if (!newFilters[key] || newFilters[key] === "Tous") return true;\n        switch (key) {\n          case "numero_facture":\n            return (_facture$numero = facture.numero) === null || _facture$numero === void 0 ? void 0 : _facture$numero.toLowerCase().includes(newFilters[key].toLowerCase());\n          case "chantier_name":\n            return (_facture$chantier_nam = facture.chantier_name) === null || _facture$chantier_nam === void 0 ? void 0 : _facture$chantier_nam.toLowerCase().includes(newFilters[key].toLowerCase());\n          case "date_creation":\n            if (!newFilters[key]) return true;\n            // Convertir la date de la facture au format YYYY-MM-DD pour la comparaison\n            const factureDate = new Date(facture.date_creation).toISOString().split("T")[0];\n            return factureDate === newFilters[key];\n          case "montant":\n            const factureMontant = ((_facture$price_ttc = facture.price_ttc) === null || _facture$price_ttc === void 0 ? void 0 : _facture$price_ttc.toString()) || "";\n            return factureMontant.includes(newFilters[key]);\n          case "state_facture":\n            return facture.state_facture === newFilters[key];\n          default:\n            return true;\n        }\n      });\n    });\n    setFilteredFactures(filtered);\n  };\n  const handleSort = property => {\n    const isAsc = orderBy === property && order === "asc";\n    setOrder(isAsc ? "desc" : "asc");\n    setOrderBy(property);\n    const sorted = [...filteredFactures].sort((a, b) => {\n      if (property === "date_creation") {\n        return (isAsc ? 1 : -1) * (new Date(a[property]).getTime() - new Date(b[property]).getTime());\n      }\n      if (property === "price_ttc") {\n        return (isAsc ? 1 : -1) * (parseFloat(a[property]) - parseFloat(b[property]));\n      }\n      return (isAsc ? 1 : -1) * (a[property] < b[property] ? -1 : 1);\n    });\n    setFilteredFactures(sorted);\n  };\n  const handlePreviewFacture = factureId => {\n    window.open(`/api/preview-facture/${factureId}/`, "_blank");\n  };\n  const handleMenuClick = (event, facture) => {\n    setAnchorEl(event.currentTarget);\n    setSelectedFacture(facture);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n    setSelectedFacture(null);\n  };\n  const handleDeleteFacture = async () => {\n    if (!selectedFacture) return;\n    try {\n      await axios__WEBPACK_IMPORTED_MODULE_3__["default"].delete(`/api/facture/${selectedFacture.id}/`);\n      fetchFactures();\n      handleClose();\n      setDeleteDialogOpen(false);\n    } catch (error) {\n      var _error$response;\n      console.error("Erreur lors de la suppression de la facture:", error);\n      alert("Erreur lors de la suppression de la facture. " + (((_error$response = error.response) === null || _error$response === void 0 || (_error$response = _error$response.data) === null || _error$response === void 0 ? void 0 : _error$response.message) || "Veuillez réessayer."));\n    }\n  };\n  const handleDeleteClick = () => {\n    setDeleteDialogOpen(true);\n    setAnchorEl(null);\n  };\n  const getStatusColor = status => {\n    switch (status) {\n      case "Payée":\n        return "#4caf50";\n      // vert\n      case "Attente paiement":\n        return "#ff9800";\n      // orange\n      case "En cours":\n        return "#f44336";\n      // rouge\n      default:\n        return "#666";\n    }\n  };\n  const handleRedirectToDevis = devisNumero => {\n    // Encode les paramètres pour l\'URL\n    const searchParams = new URLSearchParams({\n      numero: devisNumero\n    }).toString();\n\n    // Ouvre dans un nouvel onglet\n    window.open(`/ListeDevis?${searchParams}`, "_blank");\n  };\n  const handleChangeStatus = () => {\n    setFactureToUpdate(selectedFacture);\n    setShowStatusModal(true);\n    handleClose();\n  };\n  const handleStatusUpdate = async newStatus => {\n    try {\n      if (!factureToUpdate) return;\n      await axios__WEBPACK_IMPORTED_MODULE_3__["default"].put(`/api/facture/${factureToUpdate.id}/update_status/`, {\n        state_facture: newStatus\n      });\n\n      // Mise à jour locale des données\n      setFactures(factures.map(f => f.id === factureToUpdate.id ? {\n        ...f,\n        state_facture: newStatus\n      } : f));\n      setFilteredFactures(filteredFactures.map(f => f.id === factureToUpdate.id ? {\n        ...f,\n        state_facture: newStatus\n      } : f));\n      setShowStatusModal(false);\n      setFactureToUpdate(null);\n    } catch (error) {\n      console.error("Erreur lors de la modification du statut:", error);\n      alert("Erreur lors de la modification du statut");\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    style: {\n      backgroundColor: "#ffffff",\n      width: "100%",\n      maxWidth: "1400px",\n      height: "auto",\n      padding: "20px",\n      paddingBottom: "70px",\n      borderRadius: "10px",\n      boxShadow: "6px 7px 20px -6px rgba(33, 33, 33, 1)",\n      margin: "20px auto"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledBox, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "h5",\n    gutterBottom: true,\n    sx: {\n      fontFamily: "Merriweather, serif",\n      position: "relative",\n      marginBottom: "20px"\n    }\n  }, "Liste des Factures"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTableContainer, {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_5__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Num\\xE9ro",\n    variant: "standard",\n    value: filters.numero_facture,\n    onChange: handleFilterChange("numero_facture")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Chantier",\n    variant: "standard",\n    value: filters.chantier_name,\n    onChange: handleFilterChange("chantier_name")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.AlignedCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    active: orderBy === "date_creation",\n    direction: orderBy === "date_creation" ? order : "asc",\n    onClick: () => handleSort("date_creation"),\n    sx: {\n      textAlign: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTextField, {\n    variant: "standard",\n    type: "date",\n    value: filters.date_creation,\n    onChange: handleFilterChange("date_creation"),\n    InputLabelProps: {\n      shrink: true\n    },\n    sx: {\n      pt: "15px"\n    }\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.AlignedCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    active: orderBy === "price_ttc",\n    direction: orderBy === "price_ttc" ? order : "asc",\n    onClick: () => handleSort("price_ttc"),\n    sx: {\n      textAlign: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.PriceTextField, {\n    label: "Prix TTC",\n    variant: "standard",\n    value: filters.montant,\n    onChange: handleFilterChange("montant")\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledSelect, {\n    value: filters.state_facture,\n    onChange: handleFilterChange("state_facture"),\n    variant: "standard",\n    sx: {\n      pt: "10px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "Tous"\n  }, "Tous"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "En cours"\n  }, "En cours"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "Attente paiement"\n  }, "Attente paiement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "Pay\\xE9e"\n  }, "Pay\\xE9e"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, filteredFactures.map(facture => {\n    var _facture$price_ttc2;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n      key: facture.id\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.DevisNumber, {\n      onClick: () => handlePreviewFacture(facture.id),\n      sx: {\n        cursor: "pointer",\n        fontWeight: 700\n      }\n    }, facture.numero), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, facture.chantier_name, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n      size: "small",\n      onClick: e => {\n        e.stopPropagation();\n        handleRedirectToDevis(facture.devis_numero);\n      },\n      sx: {\n        ml: 1,\n        width: 24,\n        height: 24,\n        backgroundColor: "rgba(0, 0, 0, 0.04)",\n        "&:hover": {\n          backgroundColor: "rgba(0, 0, 0, 0.08)",\n          boxShadow: "0 2px 4px rgba(0,0,0,0.1)"\n        },\n        boxShadow: "0 1px 3px rgba(0,0,0,0.08)"\n      },\n      title: "Voir le devis associ\\xE9"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_13__.FaFileInvoiceDollar, {\n      size: 14,\n      color: "#666"\n    }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, new Date(facture.date_creation).toLocaleDateString()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n      sx: {\n        fontWeight: 600,\n        color: _mui_material_colors__WEBPACK_IMPORTED_MODULE_14__["default"][500]\n      }\n    }, (_facture$price_ttc2 = facture.price_ttc) === null || _facture$price_ttc2 === void 0 ? void 0 : _facture$price_ttc2.toFixed(2), " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StatusCell, {\n      sx: {\n        color: getStatusColor(facture.state_facture),\n        fontWeight: 600\n      }\n    }, facture.state_facture), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n      sx: {\n        width: "60px",\n        padding: "0 8px"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n      onClick: e => handleMenuClick(e, facture)\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_tfi__WEBPACK_IMPORTED_MODULE_15__.TfiMore, {\n      size: 16,\n      color: "#666"\n    }))));\n  }))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    anchorEl: anchorEl,\n    open: Boolean(anchorEl),\n    onClose: handleClose,\n    PaperProps: {\n      elevation: 3,\n      sx: {\n        borderRadius: 2,\n        minWidth: 150\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: () => handlePreviewFacture(selectedFacture === null || selectedFacture === void 0 ? void 0 : selectedFacture.id)\n  }, "Voir la facture"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: handleChangeStatus\n  }, "Modifier le statut"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: handleDeleteClick,\n    sx: {\n      color: "error.main",\n      "&:hover": {\n        backgroundColor: "error.light",\n        color: "error.contrastText"\n      }\n    }\n  }, "Supprimer")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    open: deleteDialogOpen,\n    onClose: () => setDeleteDialogOpen(false),\n    PaperProps: {\n      sx: {\n        borderRadius: 2,\n        padding: 1\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      gap: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_ti__WEBPACK_IMPORTED_MODULE_19__.TiWarning, {\n    size: 24,\n    color: "#f44336"\n  }), "Confirmation de suppression"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], null, "\\xCAtes-vous s\\xFBr de vouloir supprimer la facture", " ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong", null, selectedFacture === null || selectedFacture === void 0 ? void 0 : selectedFacture.numero), " ?", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("br", null), "Cette action est irr\\xE9versible.")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    sx: {\n      padding: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], {\n    onClick: () => setDeleteDialogOpen(false),\n    variant: "outlined",\n    sx: {\n      borderRadius: 2\n    }\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], {\n    onClick: handleDeleteFacture,\n    variant: "contained",\n    color: "error",\n    sx: {\n      borderRadius: 2\n    }\n  }, "Supprimer"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StatusChangeModal__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: showStatusModal,\n    onClose: () => {\n      setShowStatusModal(false);\n      setFactureToUpdate(null);\n    },\n    currentStatus: factureToUpdate === null || factureToUpdate === void 0 ? void 0 : factureToUpdate.state_facture,\n    onStatusChange: handleStatusUpdate,\n    type: "facture",\n    title: "Modifier l\'\\xE9tat de la facture"\n  }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ListeFactures);\n\n//# sourceURL=webpack://frontend/./src/components/ListeFactures.js?')},"./src/components/ListeSituation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_icons_material_Delete__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/icons-material/Delete */ "./node_modules/@mui/icons-material/Delete.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableSortLabel/TableSortLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContentText/DialogContentText.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material_colors__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material/colors */ "./node_modules/@mui/material/colors/green.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/tableStyles */ "./src/styles/tableStyles.js");\n\n\n\n\n\n\nconst formatNumber = number => {\n  return number === null || number === void 0 ? void 0 : number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, " ");\n};\nconst getMonthName = monthNumber => {\n  const months = ["Janvier", "Février", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"];\n  return months[monthNumber - 1];\n};\nconst formatYear = year => {\n  return year.toString().slice(-2);\n};\nconst ListeSituation = () => {\n  const [chantiers, setChantiers] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [selectedChantierId, setSelectedChantierId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [situations, setSituations] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [filteredSituations, setFilteredSituations] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [filters, setFilters] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    numero_situation: "",\n    mois: "",\n    annee: "",\n    pourcentage_avancement: "",\n    montant_apres_retenues: "",\n    statut: "Tous"\n  });\n  const [orderBy, setOrderBy] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("date_creation");\n  const [order, setOrder] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("desc");\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n  const [deleteDialogOpen, setDeleteDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [situationToDelete, setSituationToDelete] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const statusOptions = ["brouillon", "validee", "facturee"];\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const fetchChantiers = async () => {\n      try {\n        setLoading(true);\n        const response = await axios__WEBPACK_IMPORTED_MODULE_2__["default"].get("/api/chantier/");\n        setChantiers(response.data);\n        if (response.data.length > 0) {\n          setSelectedChantierId(response.data[0].id);\n        }\n      } catch (error) {\n        console.error("Erreur lors du chargement des chantiers:", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchChantiers();\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (selectedChantierId) {\n      fetchSituations();\n    }\n  }, [selectedChantierId]);\n  const fetchSituations = async () => {\n    if (!selectedChantierId) return;\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_2__["default"].get(`/api/chantier/${selectedChantierId}/situations/`);\n      setSituations(response.data);\n      setFilteredSituations(response.data);\n    } catch (error) {\n      console.error("Erreur lors du chargement des situations:", error);\n    }\n  };\n  const handleFilterChange = field => event => {\n    const newFilters = {\n      ...filters,\n      [field]: event.target.value\n    };\n    setFilters(newFilters);\n    let filtered = situations.filter(situation => {\n      return Object.keys(newFilters).every(key => {\n        var _situation$numero_sit;\n        if (!newFilters[key] || newFilters[key] === "Tous") return true;\n        switch (key) {\n          case "numero_situation":\n            return (_situation$numero_sit = situation.numero_situation) === null || _situation$numero_sit === void 0 ? void 0 : _situation$numero_sit.toLowerCase().includes(newFilters[key].toLowerCase());\n          case "mois":\n            return situation.mois.toString().includes(newFilters[key]);\n          case "annee":\n            return situation.annee.toString().includes(newFilters[key]);\n          case "pourcentage_avancement":\n            return situation.pourcentage_avancement.toString().includes(newFilters[key]);\n          case "montant_apres_retenues":\n            return situation.montant_apres_retenues.toString().includes(newFilters[key]);\n          case "statut":\n            return situation.statut === newFilters[key];\n          default:\n            return true;\n        }\n      });\n    });\n    setFilteredSituations(filtered);\n  };\n  const handleSort = property => {\n    const isAsc = orderBy === property && order === "asc";\n    setOrder(isAsc ? "desc" : "asc");\n    setOrderBy(property);\n    const sorted = [...filteredSituations].sort((a, b) => {\n      if (property === "montant_apres_retenues") {\n        return (isAsc ? 1 : -1) * (a[property] - b[property]);\n      }\n      return (isAsc ? 1 : -1) * (a[property] < b[property] ? -1 : 1);\n    });\n    setFilteredSituations(sorted);\n  };\n  const handlePreviewSituation = situationId => {\n    window.open(`/api/preview-situation/${situationId}/`, "_blank");\n  };\n  const handleDeleteClick = situation => {\n    setSituationToDelete(situation);\n    setDeleteDialogOpen(true);\n  };\n  const handleDeleteConfirm = async () => {\n    if (!situationToDelete) return;\n    try {\n      await axios__WEBPACK_IMPORTED_MODULE_2__["default"].delete(`/api/situations/${situationToDelete.id}/`);\n\n      // Mettre à jour la liste des situations\n      setSituations(prevSituations => prevSituations.filter(s => s.id !== situationToDelete.id));\n      setDeleteDialogOpen(false);\n      setSituationToDelete(null);\n    } catch (error) {\n      console.error("Erreur lors de la suppression:", error);\n      alert("Erreur lors de la suppression de la situation");\n    }\n  };\n  const handleDeleteCancel = () => {\n    setDeleteDialogOpen(false);\n    setSituationToDelete(null);\n  };\n  if (loading) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n      variant: "body1",\n      sx: {\n        textAlign: "center",\n        mt: 3\n      }\n    }, "Chargement des chantiers...");\n  }\n  if (chantiers.length === 0) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n      variant: "body1",\n      sx: {\n        textAlign: "center",\n        mt: 3\n      }\n    }, "Aucun chantier disponible");\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    style: {\n      backgroundColor: "#ffffff",\n      width: "100%",\n      maxWidth: "1400px",\n      height: "auto",\n      padding: "20px",\n      paddingBottom: "70px",\n      borderRadius: "10px",\n      boxShadow: "6px 7px 20px -6px rgba(33, 33, 33, 1)",\n      margin: "20px auto"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledBox, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    variant: "h5",\n    gutterBottom: true,\n    sx: {\n      fontFamily: "Merriweather, serif",\n      position: "relative",\n      marginBottom: "20px"\n    }\n  }, "Liste des Situations"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    value: selectedChantierId,\n    onChange: e => setSelectedChantierId(e.target.value),\n    variant: "standard",\n    sx: {\n      mb: 3,\n      minWidth: 200,\n      color: "rgba(27, 120, 188, 1)",\n      fontWeight: "bold"\n    }\n  }, "Mois :", chantiers.map(chantier => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    key: chantier.id,\n    value: chantier.id\n  }, chantier.chantier_name))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTableContainer, {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_6__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "N\\xB0 Situation",\n    variant: "standard",\n    value: filters.numero_situation,\n    onChange: handleFilterChange("numero_situation"),\n    sx: {\n      "& .MuiInputBase-input": {\n        color: "rgba(27, 120, 188, 1)",\n        fontWeight: "bold"\n      }\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "P\\xE9riode",\n    variant: "standard",\n    value: filters.mois,\n    onChange: handleFilterChange("mois")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.AlignedCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    active: orderBy === "pourcentage_avancement",\n    direction: orderBy === "pourcentage_avancement" ? order : "asc",\n    onClick: () => handleSort("pourcentage_avancement")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.PriceTextField, {\n    label: "% Avancement",\n    variant: "standard",\n    value: filters.pourcentage_avancement,\n    onChange: handleFilterChange("pourcentage_avancement")\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.AlignedCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    active: orderBy === "montant_apres_retenues",\n    direction: orderBy === "montant_apres_retenues" ? order : "asc",\n    onClick: () => handleSort("montant_apres_retenues")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.PriceTextField, {\n    label: "Montant Total",\n    variant: "standard",\n    value: filters.montant_apres_retenues,\n    onChange: handleFilterChange("montant_apres_retenues")\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledSelect, {\n    value: filters.statut,\n    onChange: handleFilterChange("statut"),\n    variant: "standard"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    value: "Tous"\n  }, "Tous"), statusOptions.map(status => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    key: status,\n    value: status\n  }, status)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    variant: "subtitle2",\n    sx: {\n      color: "rgba(27, 120, 188, 1)",\n      fontWeight: "bold",\n      textAlign: "center"\n    }\n  }, "Actions")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, filteredSituations.map(situation => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    key: situation.id\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.DevisNumber, {\n    onClick: () => handlePreviewSituation(situation.id),\n    style: {\n      cursor: "pointer",\n      fontWeight: "bold"\n    }\n  }, situation.numero_situation), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, `${situation.mois}/${formatYear(situation.annee)}`), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, formatNumber(situation.pourcentage_avancement), "%"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n    style: {\n      fontWeight: 600,\n      color: _mui_material_colors__WEBPACK_IMPORTED_MODULE_12__["default"][500]\n    }\n  }, formatNumber(situation.montant_apres_retenues), " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StatusCell, {\n    status: situation.statut\n  }, situation.statut), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: () => handleDeleteClick(situation),\n    sx: {\n      color: "error.main",\n      "&:hover": {\n        backgroundColor: "error.light",\n        color: "white"\n      }\n    },\n    size: "small"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material_Delete__WEBPACK_IMPORTED_MODULE_14__["default"], null))))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    open: deleteDialogOpen,\n    onClose: handleDeleteCancel,\n    "aria-labelledby": "alert-dialog-title",\n    "aria-describedby": "alert-dialog-description"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    id: "alert-dialog-title"\n  }, "Confirmer la suppression"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    id: "alert-dialog-description"\n  }, "\\xCAtes-vous s\\xFBr de vouloir supprimer la situation", " ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong", null, situationToDelete === null || situationToDelete === void 0 ? void 0 : situationToDelete.numero_situation), " ?", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("br", null), "Cette action est irr\\xE9versible.")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    onClick: handleDeleteCancel,\n    color: "primary"\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    onClick: handleDeleteConfirm,\n    color: "error",\n    autoFocus: true\n  }, "Supprimer"))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ListeSituation);\n\n//# sourceURL=webpack://frontend/./src/components/ListeSituation.js?')},"./src/components/ListeStock.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/styles/styled.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableCell/TableCell.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableContainer/TableContainer.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Tooltip/Tooltip.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TablePagination/TablePagination.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fi__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! react-icons/fi */ "./node_modules/react-icons/fi/index.mjs");\n/* harmony import */ var _EditStockModal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EditStockModal */ "./src/components/EditStockModal.js");\n\n\n\n\n\n\n// Styles personnalisés pour les cellules d\'en-tête\nconst StyledTableCell = (0,_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"])(({\n  theme\n}) => ({\n  backgroundColor: "rgba(27, 120, 188, 1)",\n  color: "white",\n  fontFamily: \'"Roboto", sans-serif\',\n  fontWeight: "bold",\n  fontSize: "0.9rem"\n}));\n\n// Styles personnalisés pour les lignes du tableau\nconst StyledTableRow = (0,_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"])(({\n  theme\n}) => ({\n  "&:nth-of-type(odd)": {\n    backgroundColor: "white"\n  },\n  "&:nth-of-type(even)": {\n    backgroundColor: "#f5f5f5"\n  },\n  "&:hover": {\n    backgroundColor: "#e3f2fd"\n  },\n  // Style pour toutes les cellules dans les lignes\n  "& .MuiTableCell-root": {\n    fontFamily: \'"Roboto Slab", sans-serif\'\n  }\n}));\nconst ListeStock = () => {\n  const [stocks, setStocks] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [page, setPage] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [rowsPerPage, setRowsPerPage] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(10);\n  const [searchTerm, setSearchTerm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [codeRangeFilter, setCodeRangeFilter] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""); // Nouveau filtre par plage de codes\n  const [totalItems, setTotalItems] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [editModalOpen, setEditModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedStock, setSelectedStock] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n\n  // Charger les données\n  const fetchStocks = async () => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_5__["default"].get("/api/stock/", {\n        params: {\n          page: page + 1,\n          page_size: rowsPerPage\n        }\n      });\n      setStocks(response.data.results || response.data);\n      setTotalItems(response.data.count || response.data.length);\n    } catch (error) {\n      console.error("Erreur lors du chargement des stocks:", error);\n    }\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    fetchStocks();\n  }, [page, rowsPerPage]);\n\n  // Exposer la fonction de rafraîchissement\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (window.refreshStockList) {\n      window.refreshStockList = fetchStocks;\n    }\n  }, []);\n\n  // Gestion du changement de page\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  // Gestion du changement du nombre de lignes par page\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  // Filtrer les stocks en fonction de la recherche et de la plage de codes\n  const filteredStocks = stocks.filter(stock => {\n    const searchString = searchTerm.toLowerCase();\n    const matchesSearch = stock.code_produit && stock.code_produit.toLowerCase().includes(searchString) || stock.designation && stock.designation.toLowerCase().includes(searchString) || stock.fournisseur && stock.fournisseur.toLowerCase().includes(searchString);\n\n    // Nouveau filtre par plage de codes\n    const matchesCodeRange = () => {\n      if (codeRangeFilter === "") return true;\n      const code = stock.code_produit || "";\n      const isNumeric = /^\\d+$/.test(code);\n      if (!isNumeric && codeRangeFilter === "non-numeric") return true;\n      if (!isNumeric) return false;\n      const codeNum = parseInt(code);\n      switch (codeRangeFilter) {\n        case "0-99":\n          return codeNum >= 0 && codeNum <= 99;\n        case "100-199":\n          return codeNum >= 100 && codeNum <= 199;\n        case "200-299":\n          return codeNum >= 200 && codeNum <= 299;\n        case "300-399":\n          return codeNum >= 300 && codeNum <= 399;\n        case "400-499":\n          return codeNum >= 400 && codeNum <= 499;\n        case "500+":\n          return codeNum >= 500;\n        default:\n          return true;\n      }\n    };\n    return matchesSearch && matchesCodeRange();\n  });\n\n  // Gestion de la modification d\'un stock\n  const handleEdit = stock => {\n    setSelectedStock(stock);\n    setEditModalOpen(true);\n  };\n\n  // Ajoutez cette fonction pour gérer la mise à jour\n  const handleStockUpdate = updatedStock => {\n    setStocks(prevStocks => prevStocks.map(stock => stock.id === updatedStock.id ? updatedStock : stock));\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      maxWidth: "1430px",\n      width: "100%"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      mb: 2,\n      alignItems: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    variant: "h6",\n    component: "h2",\n    sx: {\n      fontFamily: \'"Roboto", sans-serif\',\n      color: "white",\n      fontWeight: "bold"\n    }\n  }, "Liste des Stocks"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      display: "flex",\n      gap: 2,\n      alignItems: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    label: "Rechercher",\n    variant: "outlined",\n    size: "small",\n    value: searchTerm,\n    onChange: e => setSearchTerm(e.target.value),\n    sx: {\n      width: 250,\n      "& .MuiInputLabel-root": {\n        fontFamily: \'"Roboto", sans-serif\'\n      },\n      "& .MuiInputBase-root": {\n        fontFamily: \'"Roboto Slab", sans-serif\'\n      }\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    select: true,\n    label: "Plage de codes",\n    variant: "outlined",\n    size: "small",\n    value: codeRangeFilter,\n    onChange: e => setCodeRangeFilter(e.target.value),\n    sx: {\n      width: 150,\n      "& .MuiInputLabel-root": {\n        fontFamily: \'"Roboto", sans-serif\'\n      },\n      "& .MuiInputBase-root": {\n        fontFamily: \'"Roboto Slab", sans-serif\'\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: ""\n  }, "Tous les codes"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: "0-99"\n  }, "0-99"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: "100-199"\n  }, "100-199"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: "200-299"\n  }, "200-299"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: "300-399"\n  }, "300-399"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: "400-499"\n  }, "400-499"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: "500+"\n  }, "500+"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: "non-numeric"\n  }, "Non-num\\xE9rique")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_11__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    size: "small",\n    "aria-label": "dense table"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledTableCell, null, "Code Produit"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledTableCell, null, "Nom du Mat\\xE9riel"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledTableCell, null, "Fournisseur"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledTableCell, {\n    align: "right"\n  }, "Prix Unitaire"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledTableCell, {\n    align: "center"\n  }, "Modifier"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, filteredStocks.map(stock => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledTableRow, {\n    key: stock.id\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      fontWeight: "bold"\n    }\n  }, stock.code_produit), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, stock.designation), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, stock.fournisseur || "N/A"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    align: "right"\n  }, stock.prix_unitaire, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    align: "center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    title: "Modifier"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    size: "small",\n    onClick: () => handleEdit(stock)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fi__WEBPACK_IMPORTED_MODULE_17__.FiEdit, {\n    style: {\n      fontSize: "1.1rem",\n      color: "rgba(27, 120, 188, 1)"\n    }\n  }))))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    rowsPerPageOptions: [5, 10, 25],\n    component: "div",\n    count: totalItems,\n    rowsPerPage: rowsPerPage,\n    page: page,\n    onPageChange: handleChangePage,\n    onRowsPerPageChange: handleChangeRowsPerPage,\n    labelRowsPerPage: "Lignes par page",\n    labelDisplayedRows: ({\n      from,\n      to,\n      count\n    }) => `${from}-${to} sur ${count}`,\n    sx: {\n      fontFamily: \'"Roboto Slab", sans-serif\',\n      "& .MuiToolbar-root": {\n        fontFamily: \'"Roboto Slab", sans-serif\'\n      }\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_EditStockModal__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: editModalOpen,\n    onClose: () => setEditModalOpen(false),\n    stock: selectedStock,\n    onUpdate: handleStockUpdate\n  }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ListeStock);\n\n//# sourceURL=webpack://frontend/./src/components/ListeStock.js?')},"./src/components/Login.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Lock.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Person.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/VisibilityOff.js");\n/* harmony import */ var _mui_icons_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/icons-material */ "./node_modules/@mui/icons-material/esm/Visibility.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Container/Container.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Alert/Alert.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputAdornment/InputAdornment.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/CircularProgress/CircularProgress.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _services_authService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/authService */ "./src/services/authService.js");\n\n\n\n\nconst Login = ({\n  onLoginSuccess\n}) => {\n  const [formData, setFormData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    username: "",\n    password: ""\n  });\n  const [showPassword, setShowPassword] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [success, setSuccess] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    // Effacer les messages d\'erreur quand l\'utilisateur tape\n    if (error) setError("");\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError("");\n    setSuccess("");\n    try {\n      // Utiliser le service d\'authentification pour gérer le rechargement automatique\n      const result = await _services_authService__WEBPACK_IMPORTED_MODULE_1__["default"].login(formData);\n      if (result.success) {\n        // Vérifier si un rechargement automatique est en cours\n        if (result.reloading) {\n          setSuccess("Connexion réussie ! Rechargement automatique...");\n          // Le rechargement est géré automatiquement par authService\n          return; // Ne pas continuer l\'exécution\n        }\n        setSuccess("Connexion réussie !");\n\n        // Appeler la fonction de callback pour rediriger (connexion normale)\n        if (onLoginSuccess) {\n          onLoginSuccess(result.user);\n        }\n      } else {\n        setError(result.error || "Erreur de connexion");\n      }\n    } catch (err) {\n      setError("Erreur de connexion au serveur");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleTogglePasswordVisibility = () => {\n    setShowPassword(!showPassword);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    component: "main",\n    maxWidth: "sm"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      marginTop: 8,\n      display: "flex",\n      flexDirection: "column",\n      alignItems: "center",\n      minHeight: "100vh",\n      justifyContent: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    elevation: 3,\n    sx: {\n      padding: 4,\n      display: "flex",\n      flexDirection: "column",\n      alignItems: "center",\n      width: "100%",\n      maxWidth: 400,\n      borderRadius: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      width: 80,\n      height: 80,\n      borderRadius: "50%",\n      backgroundColor: "primary.main",\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "center",\n      marginBottom: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      fontSize: 40,\n      color: "white"\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    component: "h1",\n    variant: "h4",\n    sx: {\n      marginBottom: 3,\n      fontWeight: "bold"\n    }\n  }, "P3000"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    component: "h2",\n    variant: "h6",\n    sx: {\n      marginBottom: 4,\n      color: "text.secondary"\n    }\n  }, "Connexion \\xE0 l\'application"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    component: "form",\n    onSubmit: handleSubmit,\n    sx: {\n      width: "100%"\n    }\n  }, error && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    severity: "error",\n    sx: {\n      marginBottom: 2\n    }\n  }, error), success && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    severity: "success",\n    sx: {\n      marginBottom: 2\n    }\n  }, success), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    margin: "normal",\n    required: true,\n    fullWidth: true,\n    id: "username",\n    label: "Nom d\'utilisateur",\n    name: "username",\n    autoComplete: "username",\n    autoFocus: true,\n    value: formData.username,\n    onChange: handleInputChange,\n    InputProps: {\n      startAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n        position: "start"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n        color: "action"\n      }))\n    },\n    sx: {\n      marginBottom: 2\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    margin: "normal",\n    required: true,\n    fullWidth: true,\n    name: "password",\n    label: "Mot de passe",\n    type: showPassword ? "text" : "password",\n    id: "password",\n    autoComplete: "current-password",\n    value: formData.password,\n    onChange: handleInputChange,\n    InputProps: {\n      startAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n        position: "start"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n        color: "action"\n      })),\n      endAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n        position: "end"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n        "aria-label": "toggle password visibility",\n        onClick: handleTogglePasswordVisibility,\n        edge: "end"\n      }, showPassword ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_12__["default"], null) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material__WEBPACK_IMPORTED_MODULE_13__["default"], null)))\n    },\n    sx: {\n      marginBottom: 3\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    type: "submit",\n    fullWidth: true,\n    variant: "contained",\n    disabled: loading || !formData.username || !formData.password,\n    sx: {\n      mt: 2,\n      mb: 2,\n      py: 1.5,\n      fontSize: "1.1rem",\n      fontWeight: "bold"\n    }\n  }, loading ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    size: 24,\n    color: "inherit"\n  }) : "Se connecter")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    variant: "body2",\n    color: "text.secondary",\n    align: "center",\n    sx: {\n      mt: 2\n    }\n  }, "Contactez l\'administrateur pour obtenir vos identifiants"))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Login);\n\n//# sourceURL=webpack://frontend/./src/components/Login.js?')},"./src/components/ModificationDevis.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Container/Container.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormLabel/FormLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/RadioGroup/RadioGroup.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControlLabel/FormControlLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Radio/Radio.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputAdornment/InputAdornment.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Accordion/Accordion.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/AccordionSummary/AccordionSummary.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/AccordionDetails/AccordionDetails.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Checkbox/Checkbox.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Card/Card.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/CardContent/CardContent.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fa__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! react-icons/fa */ "./node_modules/react-icons/fa/index.mjs");\n/* harmony import */ var react_icons_fi__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! react-icons/fi */ "./node_modules/react-icons/fi/index.mjs");\n/* harmony import */ var react_icons_ri__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! react-icons/ri */ "./node_modules/react-icons/ri/index.mjs");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");\n/* harmony import */ var _ChantierForm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ChantierForm */ "./src/components/ChantierForm.js");\n/* harmony import */ var _ClientInfoModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ClientInfoModal */ "./src/components/ClientInfoModal.js");\n/* harmony import */ var _ClientTypeModal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ClientTypeModal */ "./src/components/ClientTypeModal.js");\n/* harmony import */ var _CreatePartieModal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CreatePartieModal */ "./src/components/CreatePartieModal.js");\n/* harmony import */ var _DevisModal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./DevisModal */ "./src/components/DevisModal.js");\n/* harmony import */ var _EditModal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./EditModal */ "./src/components/EditModal.js");\n/* harmony import */ var _SelectSocieteModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./SelectSocieteModal */ "./src/components/SelectSocieteModal.js");\n/* harmony import */ var _SocieteInfoModal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./SocieteInfoModal */ "./src/components/SocieteInfoModal.js");\n/* harmony import */ var _SpecialLineModal__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./SpecialLineModal */ "./src/components/SpecialLineModal.js");\n/* harmony import */ var _SpecialLinesOverview__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./SpecialLinesOverview */ "./src/components/SpecialLinesOverview.js");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst ModificationDevis = () => {\n  var _specialLines$current;\n  const {\n    devisId\n  } = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_11__.useParams)();\n  const location = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_11__.useLocation)();\n  const [pendingChantierData, setPendingChantierData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    client: {\n      name: "",\n      surname: "",\n      client_mail: "",\n      phone_Number: ""\n    },\n    societe: {\n      nom_societe: "",\n      ville_societe: "",\n      rue_societe: "",\n      codepostal_societe: ""\n    },\n    chantier: {\n      id: -1,\n      chantier_name: "",\n      ville: "",\n      rue: "",\n      code_postal: ""\n    },\n    devis: null\n  });\n  const [hiddenParties, setHiddenParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [hiddenSousParties, setHiddenSousParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [hiddenLignes, setHiddenLignes] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [chantiers, setChantiers] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [selectedChantierId, setSelectedChantierId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [parties, setParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [selectedParties, setSelectedParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [selectedPartieType, setSelectedPartieType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("PEINTURE");\n  const [sousParties, setSousParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [filteredSousParties, setFilteredSousParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [selectedSousParties, setSelectedSousParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [allLignesDetails, setAllLignesDetails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [filteredLignesDetails, setFilteredLignesDetails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [quantities, setQuantities] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [customPrices, setCustomPrices] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n\n  // États pour la gestion dynamique des domaines\n  const [availableDomaines, setAvailableDomaines] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n\n  // Nouveaux états pour les coûts détaillés\n  const [customCouts, setCustomCouts] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [customTauxFixes, setCustomTauxFixes] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [customMarges, setCustomMarges] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [tauxFixe, setTauxFixe] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n\n  // États pour la gestion des erreurs\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [errorDetails, setErrorDetails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showCreationPartie, setShowCreationPartie] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [isPreviewed, setIsPreviewed] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [devisType, setDevisType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("normal");\n  const [showClientForm, setShowClientForm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [societeId, setSocieteId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [showClientTypeModal, setShowClientTypeModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showExistingClientForm, setShowExistingClientForm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showSelectSocieteModal, setShowSelectSocieteModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedSocieteId, setSelectedSocieteId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [selectedLignes, setSelectedLignes] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [slidingLines, setSlidingLines] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [openDevisModal, setOpenDevisModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [devisModalData, setDevisModalData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    numero: "",\n    client: "",\n    chantier_name: "",\n    montant_ttc: "",\n    description: ""\n  });\n  const [openCreatePartieModal, setOpenCreatePartieModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [editData, setEditData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [editModalOpen, setEditModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [itemToEdit, setItemToEdit] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [slidingParties, setSlidingParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [slidingSousParties, setSlidingSousParties] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [slidingLignes, setSlidingLignes] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [showClientInfoModal, setShowClientInfoModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showSocieteInfoModal, setShowSocieteInfoModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showChantierForm, setShowChantierForm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [tvaRate, setTvaRate] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(20);\n  const [natureTravaux, setNatureTravaux] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [specialLines, setSpecialLines] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    parties: {},\n    sousParties: {},\n    lignes: {},\n    global: []\n  });\n  const [openSpecialLineModal, setOpenSpecialLineModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [currentSpecialLineTarget, setCurrentSpecialLineTarget] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    type: "",\n    id: null\n  });\n\n  // Ajouter cet état pour gérer les termes de recherche par sous-partie\n  const [searchTerms, setSearchTerms] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n\n  // Ajout de l\'état pour contrôler la visibilité de la box de résumé\n  const [showSummaryBox, setShowSummaryBox] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // Fonction pour charger les domaines disponibles\n  const loadDomaines = () => {\n    axios__WEBPACK_IMPORTED_MODULE_12__["default"].get("/api/parties/domaines/").then(response => {\n      setAvailableDomaines(response.data);\n      // Si aucun domaine n\'est sélectionné, prendre le premier disponible\n      if (!selectedPartieType && response.data.length > 0) {\n        setSelectedPartieType(response.data[0]);\n      }\n    }).catch(error => {\n      console.error("Erreur lors du chargement des domaines", error);\n    });\n  };\n\n  // Fonction utilitaire pour formater les prix\n  const formatPrice = value => {\n    if (value === null || value === undefined || value === "") {\n      return "0.00";\n    }\n    const numValue = parseFloat(value);\n    if (isNaN(numValue)) {\n      return "0.00";\n    }\n    return numValue.toFixed(2);\n  };\n\n  // Fonction pour calculer le prix à partir des coûts\n  const calculatePriceFromCosts = ligne => {\n    var _customCouts$ligne$id, _customCouts$ligne$id2;\n    const coutMainOeuvre = parseFloat(((_customCouts$ligne$id = customCouts[ligne.id]) === null || _customCouts$ligne$id === void 0 ? void 0 : _customCouts$ligne$id.main_oeuvre) || ligne.cout_main_oeuvre || 0);\n    const coutMateriel = parseFloat(((_customCouts$ligne$id2 = customCouts[ligne.id]) === null || _customCouts$ligne$id2 === void 0 ? void 0 : _customCouts$ligne$id2.materiel) || ligne.cout_materiel || 0);\n    const tauxFixeLigne = parseFloat(customTauxFixes[ligne.id] || ligne.taux_fixe || tauxFixe || 0);\n    const marge = parseFloat(customMarges[ligne.id] || ligne.marge || 0);\n    const coutTotal = coutMainOeuvre + coutMateriel;\n    const prixAvecTaux = coutTotal * (1 + tauxFixeLigne / 100);\n    const prixFinal = prixAvecTaux * (1 + marge / 100);\n    return parseFloat(prixFinal.toFixed(2));\n  };\n\n  // Fonction pour sauvegarder les coûts personnalisés\n  const saveCustomCostsToDatabase = async ligneId => {\n    try {\n      var _customCouts$ligneId, _customCouts$ligneId2;\n      setError(null);\n      const ligne = filteredLignesDetails.find(l => l.id === ligneId);\n      if (!ligne) {\n        throw new Error(`Ligne avec l\'ID ${ligneId} non trouvée`);\n      }\n      const coutMainOeuvre = parseFloat(((_customCouts$ligneId = customCouts[ligneId]) === null || _customCouts$ligneId === void 0 ? void 0 : _customCouts$ligneId.main_oeuvre) || 0).toFixed(2);\n      const coutMateriel = parseFloat(((_customCouts$ligneId2 = customCouts[ligneId]) === null || _customCouts$ligneId2 === void 0 ? void 0 : _customCouts$ligneId2.materiel) || 0).toFixed(2);\n      const tauxFixeLigne = parseFloat(customTauxFixes[ligneId] || 0).toFixed(2);\n      const marge = parseFloat(customMarges[ligneId] || 0).toFixed(2);\n      const response = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].put(`/api/ligne-details/${ligneId}/`, {\n        cout_main_oeuvre: coutMainOeuvre,\n        cout_materiel: coutMateriel,\n        taux_fixe: tauxFixeLigne,\n        marge: marge\n      });\n      if (response.data) {\n        // Mettre à jour les données locales\n        setAllLignesDetails(prev => prev.map(ligne => ligne.id === ligneId ? {\n          ...ligne,\n          ...response.data\n        } : ligne));\n        setFilteredLignesDetails(prev => prev.map(ligne => ligne.id === ligneId ? {\n          ...ligne,\n          ...response.data\n        } : ligne));\n      }\n    } catch (error) {\n      var _error$response, _error$response2, _ligne;\n      console.error("Erreur lors de la sauvegarde des coûts:", error);\n      setError("Impossible de sauvegarder les modifications des coûts");\n      setErrorDetails({\n        message: "Erreur lors de la sauvegarde des coûts dans la base de données",\n        details: ((_error$response = error.response) === null || _error$response === void 0 || (_error$response = _error$response.data) === null || _error$response === void 0 ? void 0 : _error$response.detail) || error.message,\n        code: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status,\n        ligneId: ligneId,\n        ligneDescription: ((_ligne = ligne) === null || _ligne === void 0 ? void 0 : _ligne.description) || "Inconnue",\n        timestamp: new Date().toISOString()\n      });\n    }\n  };\n\n  // Fonction pour gérer la mise à jour du taux fixe global\n  const handleTauxFixeUpdated = (nouveauTaux, lignesMisesAJour) => {\n    setTauxFixe(nouveauTaux);\n\n    // Mettre à jour les lignes avec les nouvelles données\n    lignesMisesAJour.forEach(ligneMiseAJour => {\n      setAllLignesDetails(prev => prev.map(ligne => ligne.id === ligneMiseAJour.id ? {\n        ...ligne,\n        ...ligneMiseAJour\n      } : ligne));\n      setFilteredLignesDetails(prev => prev.map(ligne => ligne.id === ligneMiseAJour.id ? {\n        ...ligne,\n        ...ligneMiseAJour\n      } : ligne));\n    });\n\n    // Nettoyer les coûts personnalisés car ils sont maintenant obsolètes\n    setCustomCouts({});\n    setCustomTauxFixes({});\n    setCustomMarges({});\n  };\n\n  // Charger les chantiers et l\'état sauvegardé\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    fetchChantiers();\n    loadStateFromLocalStorage();\n    loadDomaines(); // Charger les domaines disponibles\n  }, []);\n\n  // Recharger les domaines quand la fenêtre reprend le focus\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const handleFocus = () => {\n      loadDomaines();\n    };\n    window.addEventListener("focus", handleFocus);\n    return () => window.removeEventListener("focus", handleFocus);\n  }, []);\n  const fetchChantiers = async () => {\n    try {\n      setError(null);\n      const response = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get("/api/chantier/");\n      setChantiers(response.data);\n    } catch (error) {\n      var _error$response3, _error$response4;\n      console.error("Erreur lors du chargement des chantiers:", error);\n      setError("Impossible de charger la liste des chantiers");\n      setErrorDetails({\n        message: "Erreur lors de la récupération des chantiers",\n        details: ((_error$response3 = error.response) === null || _error$response3 === void 0 || (_error$response3 = _error$response3.data) === null || _error$response3 === void 0 ? void 0 : _error$response3.detail) || error.message,\n        code: (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status,\n        timestamp: new Date().toISOString()\n      });\n    }\n  };\n\n  // Charger le taux fixe global\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const fetchTauxFixe = async () => {\n      try {\n        setError(null);\n        const response = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get("/api/parametres/taux-fixe/");\n        setTauxFixe(response.data.valeur || 0);\n      } catch (error) {\n        var _error$response5, _error$response6;\n        console.error("Erreur lors du chargement du taux fixe:", error);\n        setError("Impossible de charger le taux fixe global");\n        setErrorDetails({\n          message: "Erreur lors de la récupération du taux fixe",\n          details: ((_error$response5 = error.response) === null || _error$response5 === void 0 || (_error$response5 = _error$response5.data) === null || _error$response5 === void 0 ? void 0 : _error$response5.detail) || error.message,\n          code: (_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : _error$response6.status,\n          timestamp: new Date().toISOString()\n        });\n      }\n    };\n    fetchTauxFixe();\n  }, []);\n\n  // Charger les parties filtrées par type\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    setError(null);\n    const params = {\n      type: selectedPartieType\n    };\n    axios__WEBPACK_IMPORTED_MODULE_12__["default"].get("/api/parties/", {\n      params\n    }).then(response => {\n      setParties(response.data);\n    }).catch(error => {\n      var _error$response7, _error$response8;\n      console.error("Erreur lors du chargement des parties", error);\n      setError("Impossible de charger les parties");\n      setErrorDetails({\n        message: "Erreur lors de la récupération des parties",\n        details: ((_error$response7 = error.response) === null || _error$response7 === void 0 || (_error$response7 = _error$response7.data) === null || _error$response7 === void 0 ? void 0 : _error$response7.detail) || error.message,\n        code: (_error$response8 = error.response) === null || _error$response8 === void 0 ? void 0 : _error$response8.status,\n        timestamp: new Date().toISOString()\n      });\n    });\n  }, [selectedPartieType]);\n\n  // Charger toutes les sous-parties\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    setError(null);\n    axios__WEBPACK_IMPORTED_MODULE_12__["default"].get("/api/sous-parties/").then(response => {\n      setSousParties(response.data);\n    }).catch(error => {\n      var _error$response9, _error$response10;\n      console.error("Erreur lors du chargement des sous-parties", error);\n      setError("Impossible de charger les sous-parties");\n      setErrorDetails({\n        message: "Erreur lors de la récupération des sous-parties",\n        details: ((_error$response9 = error.response) === null || _error$response9 === void 0 || (_error$response9 = _error$response9.data) === null || _error$response9 === void 0 ? void 0 : _error$response9.detail) || error.message,\n        code: (_error$response10 = error.response) === null || _error$response10 === void 0 ? void 0 : _error$response10.status,\n        timestamp: new Date().toISOString()\n      });\n    });\n  }, []);\n\n  // Filtrer les sous-parties en fonction des parties sélectionnées\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (selectedParties.length > 0) {\n      const filtered = sousParties.filter(sousPartie => selectedParties.includes(sousPartie.partie));\n      setFilteredSousParties(filtered);\n    } else {\n      setFilteredSousParties([]);\n    }\n  }, [selectedParties, sousParties]);\n  const handlePartiesChange = partieId => {\n    setIsPreviewed(false);\n    const isSelected = selectedParties.includes(partieId);\n    if (isSelected) {\n      setSelectedParties(prev => prev.filter(id => id !== partieId));\n    } else {\n      setSelectedParties(prev => [...prev, partieId]);\n    }\n  };\n  const handleSousPartiesChange = sousPartieId => {\n    setIsPreviewed(false); // Annuler l\'état de prévisualisation si des modifications sont faites\n    const isSelected = selectedSousParties.includes(sousPartieId);\n    if (isSelected) {\n      setSelectedSousParties(selectedSousParties.filter(id => id !== sousPartieId));\n    } else {\n      setSelectedSousParties([...selectedSousParties, sousPartieId]);\n    }\n  };\n\n  // Charger les lignes de détail basées sur les sous-parties sélectionnées\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (selectedSousParties.length > 0) {\n      // Récupérer les sous-parties sélectionnées avec leurs lignes de détail\n      axios__WEBPACK_IMPORTED_MODULE_12__["default"].get("/api/sous-parties/", {\n        params: {\n          id__in: selectedSousParties.join(",")\n        }\n      }).then(response => {\n        // Extraire toutes les lignes de détail des sous-parties\n        const allLignes = response.data.reduce((acc, sousPartie) => {\n          const lignesWithSousPartie = sousPartie.lignes_details.map(ligne => ({\n            ...ligne,\n            sous_partie: sousPartie.id\n          }));\n          return [...acc, ...lignesWithSousPartie];\n        }, []);\n        setAllLignesDetails(allLignes);\n        setFilteredLignesDetails(allLignes);\n      }).catch(error => {\n        console.error("Erreur lors du chargement des lignes de détail", error);\n      });\n    } else {\n      setAllLignesDetails([]);\n      setFilteredLignesDetails([]);\n    }\n  }, [selectedSousParties]);\n  const handleQuantityChange = (ligneId, quantity) => {\n    setIsPreviewed(false); // Annuler l\'état de prévisualisation si des modifications sont faites\n    setQuantities({\n      ...quantities,\n      [ligneId]: quantity\n    });\n  };\n  const handlePriceChange = (ligneId, price) => {\n    setIsPreviewed(false); // Annuler l\'état de prévisualisation si des modifications sont faites\n    const value = price === "" ? "" : price;\n    setCustomPrices({\n      ...customPrices,\n      [ligneId]: value\n    });\n  };\n\n  // Gestionnaires pour les coûts détaillés\n  const handleCoutChange = (ligneId, type, value) => {\n    setIsPreviewed(false);\n    const cleanValue = value === "" ? "" : value;\n    setCustomCouts(prev => ({\n      ...prev,\n      [ligneId]: {\n        ...prev[ligneId],\n        [type]: cleanValue\n      }\n    }));\n  };\n  const handleTauxFixeChange = (ligneId, value) => {\n    setIsPreviewed(false);\n    const cleanValue = value === "" ? "" : value;\n    setCustomTauxFixes(prev => ({\n      ...prev,\n      [ligneId]: cleanValue\n    }));\n  };\n  const handleMargeChange = (ligneId, value) => {\n    setIsPreviewed(false);\n    const cleanValue = value === "" ? "" : value;\n    setCustomMarges(prev => ({\n      ...prev,\n      [ligneId]: cleanValue\n    }));\n  };\n  const handleResetCosts = ligneId => {\n    setCustomCouts(prev => {\n      const newCouts = {\n        ...prev\n      };\n      delete newCouts[ligneId];\n      return newCouts;\n    });\n    setCustomTauxFixes(prev => {\n      const newTauxFixes = {\n        ...prev\n      };\n      delete newTauxFixes[ligneId];\n      return newTauxFixes;\n    });\n    setCustomMarges(prev => {\n      const newMarges = {\n        ...prev\n      };\n      delete newMarges[ligneId];\n      return newMarges;\n    });\n  };\n\n  // Fonction pour prévisualiser le devis\n  const handlePreviewDevis = () => {\n    const devisData = {\n      numero: devisModalData.numero,\n      chantier: selectedChantierId,\n      client: [selectedSocieteId],\n      price_ht: calculateGrandTotal(specialLines).totalHT,\n      description: devisModalData.description,\n      tva_rate: tvaRate,\n      nature_travaux: natureTravaux,\n      parties: selectedParties,\n      sous_parties: selectedSousParties,\n      lignes_details: filteredLignesDetails.filter(ligne => selectedSousParties.includes(ligne.sous_partie)).map(ligne => ({\n        id: ligne.id,\n        quantity: quantities[ligne.id] || 0,\n        custom_price: customPrices[ligne.id] || ligne.prix\n      })),\n      specialLines: specialLines\n    };\n    if (selectedChantierId === -1) {\n      devisData.tempData = {\n        client: pendingChantierData.client || {},\n        societe: pendingChantierData.societe || {},\n        chantier: pendingChantierData.chantier || {}\n      };\n    }\n    const queryString = encodeURIComponent(JSON.stringify(devisData));\n    const previewUrl = `/api/preview-devis/?devis=${queryString}`;\n    window.open(previewUrl, "_blank");\n    setIsPreviewed(true);\n  };\n\n  // Ajouter un effet pour nettoyer les données temporaires\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const cleanupTempData = () => {\n      setPendingChantierData({\n        client: {\n          name: "",\n          surname: "",\n          client_mail: "",\n          phone_Number: ""\n        },\n        societe: {\n          nom_societe: "",\n          ville_societe: "",\n          rue_societe: "",\n          codepostal_societe: ""\n        },\n        chantier: {\n          id: -1,\n          chantier_name: "",\n          ville: "",\n          rue: "",\n          code_postal: ""\n        },\n        devis: null\n      });\n    };\n\n    // Nettoyer lors du démontage du composant\n    return () => cleanupTempData();\n  }, []);\n\n  // Modifier le gestionnaire onSubmit du ClientSocieteForm\n  const handleClientFormSubmit = newSocieteId => {\n    setSocieteId(newSocieteId);\n    setShowClientForm(false);\n  };\n  const handleDeleteSpecialLineFromOverview = (groupId, index) => {\n    setSpecialLines(prev => {\n      const newSpecialLines = {\n        ...prev\n      };\n      if (groupId === "global") {\n        newSpecialLines.global = prev.global.filter((_, i) => i !== index);\n      } else {\n        const [type, id] = groupId.split("-");\n        newSpecialLines[type][id] = prev[type][id].filter((_, i) => i !== index);\n      }\n      return newSpecialLines;\n    });\n  };\n  const getFilteredLignes = (sousPartieId, lignes) => {\n    var _searchTerms$sousPart;\n    const searchTerm = ((_searchTerms$sousPart = searchTerms[sousPartieId]) === null || _searchTerms$sousPart === void 0 ? void 0 : _searchTerms$sousPart.toLowerCase()) || "";\n    if (!searchTerm) return lignes;\n    return lignes.filter(ligne => ligne.description.toLowerCase().includes(searchTerm));\n  };\n  // Fonction pour générer le numéro de devis\n  const generateDevisNumber = async () => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get("/api/get-next-devis-number/");\n      return `DEV-${response.data.next_number}-${new Date().getFullYear().toString().slice(-2)}`;\n    } catch (error) {\n      console.error("Erreur lors de la génération du numéro de devis:", error);\n      return `DEV-ERR-${new Date().getFullYear().toString().slice(-2)}`;\n    }\n  };\n\n  // Ajouter ces fonctions de vérification\n  const checkClientExists = async clientData => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get("/api/check-client/", {\n        params: {\n          email: clientData.client_mail,\n          phone: clientData.phone_Number\n        }\n      });\n      return response.data.client || null;\n    } catch (error) {\n      console.error("Erreur lors de la vérification du client:", error);\n      return null;\n    }\n  };\n  const checkSocieteExists = async societeData => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get("/api/check-societe/", {\n        params: {\n          nom_societe: societeData.nom_societe,\n          codepostal_societe: societeData.codepostal_societe\n        }\n      });\n      return response.data.societe || null;\n    } catch (error) {\n      console.error("Erreur lors de la vérification de la société:", error);\n      return null;\n    }\n  };\n\n  // Modifier le handleSaveDevis\n  const handleSaveDevis = async () => {\n    try {\n      if (!selectedChantierId) {\n        alert("Veuillez sélectionner un chantier");\n        return;\n      }\n\n      // Récupérer les informations du chantier sélectionné\n      let clientName;\n      if (selectedChantierId !== -1) {\n        const chantierResponse = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/chantier/${selectedChantierId}/`);\n        const chantier = chantierResponse.data;\n        if (chantier.societe && chantier.societe.client_name) {\n          clientName = `${chantier.societe.client_name.name} ${chantier.societe.client_name.surname}`;\n        }\n      } else if (pendingChantierData.client) {\n        clientName = `${pendingChantierData.client.name} ${pendingChantierData.client.surname}`;\n      }\n\n      // Si aucun nom de client n\'est trouvé, utiliser les données de la société\n      if (!clientName && selectedSocieteId) {\n        const societeResponse = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/societe/${selectedSocieteId}/`);\n        const societeData = societeResponse.data;\n        if (societeData.client_name) {\n          clientName = `${societeData.client_name.name} ${societeData.client_name.surname}`;\n        }\n      }\n\n      // Si toujours pas de nom, utiliser une valeur par défaut\n      if (!clientName) {\n        clientName = "Client non spécifié";\n      }\n      const nextDevisNumber = await generateDevisNumber();\n      setDevisModalData(prev => ({\n        ...prev,\n        numero: devisModalData.numero || "",\n        client: clientName,\n        price_ht: calculateGrandTotal(specialLines).totalHT,\n        description: devisModalData.description || ""\n      }));\n      setOpenDevisModal(true);\n    } catch (error) {\n      console.error("Erreur lors de la préparation du devis:", error);\n      alert("Une erreur est survenue lors de la préparation du devis");\n    }\n  };\n  const handleDevisModalSubmit = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const totals = calculateGrandTotal(specialLines);\n      const totalHT = totals.totalHT;\n      const totalTTC = totals.totalTTC;\n\n      // Préparation des données du devis\n      const devisData = {\n        numero: devisModalData.numero,\n        chantier: selectedChantierId,\n        price_ht: parseFloat(totalHT.toFixed(2)),\n        price_ttc: parseFloat(totalTTC.toFixed(2)),\n        tva_rate: parseFloat(tvaRate),\n        description: devisModalData.description,\n        nature_travaux: natureTravaux,\n        lignes: selectedLignes.map(ligneId => {\n          const ligne = filteredLignesDetails.find(l => l.id === ligneId);\n          return {\n            ligne_detail: parseInt(ligneId),\n            quantite: parseFloat(quantities[ligneId] || 0).toFixed(2),\n            prix_unitaire: parseFloat(customPrices[ligneId] || (ligne === null || ligne === void 0 ? void 0 : ligne.prix) || 0).toFixed(2),\n            taux_fixe: (ligne === null || ligne === void 0 ? void 0 : ligne.taux_fixe) || tauxFixe || 20\n          };\n        }),\n        lignes_speciales: {\n          global: (specialLines.global || []).map(line => ({\n            ...line,\n            montant_calcule: line.valueType === "percentage" ? calculateBaseTotalHT() * parseFloat(line.value) / 100 : parseFloat(line.value)\n          })),\n          parties: Object.fromEntries(Object.entries(specialLines.parties || {}).map(([partieId, lines]) => [partieId, lines.map(line => ({\n            ...line,\n            montant_calcule: line.valueType === "percentage" ? calculateBaseTotalHT() * parseFloat(line.value) / 100 : parseFloat(line.value)\n          }))])),\n          sousParties: Object.fromEntries(Object.entries(specialLines.sousParties || {}).map(([sousPartieId, lines]) => [sousPartieId, lines.map(line => ({\n            ...line,\n            montant_calcule: line.valueType === "percentage" ? calculateBaseTotalHT() * parseFloat(line.value) / 100 : parseFloat(line.value)\n          }))]))\n        }\n      };\n      console.log("Données envoyées:", devisData);\n\n      // Appel API pour mettre à jour le devis\n      const response = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].put(`/api/devisa/${devisId}/`, devisData);\n      if (response.data) {\n        clearSavedState();\n        alert("Devis modifié avec succès!");\n        window.location.href = "/ListeDevis";\n      }\n    } catch (error) {\n      var _error$response11, _error$response12, _error$response13, _error$response14, _error$response15;\n      console.error("Erreur détaillée lors de la modification du devis:", {\n        message: error.message,\n        response: (_error$response11 = error.response) === null || _error$response11 === void 0 ? void 0 : _error$response11.data,\n        status: (_error$response12 = error.response) === null || _error$response12 === void 0 ? void 0 : _error$response12.status,\n        data: (_error$response13 = error.response) === null || _error$response13 === void 0 || (_error$response13 = _error$response13.config) === null || _error$response13 === void 0 ? void 0 : _error$response13.data\n      });\n      setError("Impossible de modifier le devis");\n      setErrorDetails({\n        message: "Erreur lors de la modification du devis",\n        details: ((_error$response14 = error.response) === null || _error$response14 === void 0 || (_error$response14 = _error$response14.data) === null || _error$response14 === void 0 ? void 0 : _error$response14.detail) || error.message,\n        code: (_error$response15 = error.response) === null || _error$response15 === void 0 ? void 0 : _error$response15.status,\n        devisId: devisId,\n        devisData: devisData,\n        timestamp: new Date().toISOString()\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Ajouter cette fonction de réinitialisation\n  const resetForm = () => {\n    setPendingChantierData({\n      client: {\n        name: "",\n        surname: "",\n        client_mail: "",\n        phone_Number: ""\n      },\n      societe: {\n        nom_societe: "",\n        ville_societe: "",\n        rue_societe: "",\n        codepostal_societe: ""\n      },\n      chantier: {\n        id: -1,\n        chantier_name: "",\n        ville: "",\n        rue: "",\n        code_postal: ""\n      },\n      devis: null\n    });\n    setSelectedSocieteId(null);\n    setSelectedChantierId(null);\n    setShowClientForm(false);\n    setShowChantierForm(false);\n    setShowClientTypeModal(false);\n    setShowSelectSocieteModal(false);\n  };\n  const handleNewClient = () => {\n    setShowClientTypeModal(false);\n    setShowClientInfoModal(true);\n  };\n  const handleExistingClient = () => {\n    setShowClientTypeModal(false);\n    setShowSelectSocieteModal(true);\n  };\n  const handleSocieteSelect = async societeId => {\n    try {\n      // Récupérer les données de la société\n      const societeResponse = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/societe/${societeId}/`);\n      const societeData = societeResponse.data;\n\n      // Récupérer les données du client\n      const clientResponse = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/client/${societeData.client_name}/`);\n      const clientData = clientResponse.data;\n\n      // Mettre à jour pendingChantierData avec les données récupérées\n      setPendingChantierData(prev => ({\n        ...prev,\n        client: {\n          name: clientData.name,\n          surname: clientData.surname,\n          phone_Number: parseInt(clientData.phone_Number) || 0,\n          client_mail: clientData.client_mail || ""\n        },\n        societe: {\n          nom_societe: societeData.nom_societe,\n          ville_societe: societeData.ville_societe,\n          rue_societe: societeData.rue_societe,\n          codepostal_societe: societeData.codepostal_societe\n        }\n      }));\n      setSelectedSocieteId(societeId);\n      setShowSelectSocieteModal(false);\n      setShowChantierForm(true);\n    } catch (error) {\n      console.error("Erreur lors de la récupération des données:", error);\n      alert("Erreur lors de la récupération des données du client et de la société");\n    }\n  };\n  const handleLigneSelection = ligneId => {\n    setSelectedLignes(prev => {\n      const newSelection = prev.includes(ligneId) ? prev.filter(id => id !== ligneId) : [...prev, ligneId];\n\n      // Si la ligne vient d\'être sélectionnée, on met le focus sur le champ quantité\n      if (!prev.includes(ligneId)) {\n        // On utilise setTimeout pour s\'assurer que le champ existe dans le DOM\n        setTimeout(() => {\n          const quantityInput = document.querySelector(`#quantity-${ligneId}`);\n          if (quantityInput) {\n            quantityInput.focus();\n          }\n        }, 0);\n      }\n      return newSelection;\n    });\n  };\n  const handleRemoveLigne = ligneId => {\n    setSlidingLines([...slidingLines, ligneId]);\n\n    // Attendre que l\'animation soit terminée avant de cacher la ligne\n    setTimeout(() => {\n      setHiddenLignes([...hiddenLignes, ligneId]);\n      setSlidingLines(slidingLines.filter(id => id !== ligneId));\n\n      // Si la ligne était sélectionnée, on la désélectionne\n      if (selectedLignes.includes(ligneId)) {\n        setSelectedLignes(selectedLignes.filter(id => id !== ligneId));\n      }\n    }, 300); // Durée de l\'animation\n  };\n\n  // Ajoutez cette fonction de calcul du prix total\n  const calculateTotalPrice = ligne => {\n    if (!ligne) return 0;\n    const quantity = quantities[ligne.id] || 0;\n    const price = customCouts[ligne.id] || customTauxFixes[ligne.id] || customMarges[ligne.id] ? calculatePriceFromCosts(ligne) : customPrices[ligne.id] || ligne.prix || 0;\n    return parseFloat(formatPrice(quantity * price));\n  };\n  const calculateTotalWithSpecialLines = (baseTotal, specialLines) => {\n    let total = baseTotal;\n    specialLines.forEach(line => {\n      const value = parseFloat(line.value);\n      let montant;\n      if (line.valueType === "percentage") {\n        montant = baseTotal * value / 100;\n      } else {\n        montant = value;\n      }\n\n      // Afficher le signe négatif pour les réductions\n      if (line.type === "reduction") {\n        montant = -Math.abs(montant); // Force la valeur à être négative\n      }\n      total += montant; // On ajoute toujours le montant (qui sera négatif pour les réductions)\n    });\n    return total;\n  };\n  const handleAddGlobalSpecialLine = () => {\n    setOpenSpecialLineModal(true);\n    setCurrentSpecialLineTarget({\n      type: "global",\n      id: null\n    });\n  };\n\n  // Fonction pour calculer le total HT de base (sans lignes spéciales)\n  const calculateBaseTotalHT = () => {\n    let totalHT = 0;\n    selectedLignes.forEach(ligneId => {\n      const ligne = filteredLignesDetails.find(l => l.id === ligneId);\n      if (ligne) {\n        const quantity = quantities[ligneId] || 0;\n        const price = customPrices[ligneId] || ligne.prix;\n        const ligneTotalHT = quantity * price;\n        totalHT += ligneTotalHT;\n      }\n    });\n    return totalHT;\n  };\n  const calculateGrandTotal = specialLines => {\n    console.group("Calcul du Total du Devis");\n\n    // 1. Calcul initial du total HT des lignes de détail et par sous-partie\n    let totalHT = 0;\n    const sousPartieTotals = {};\n    selectedLignes.forEach(ligneId => {\n      const ligne = filteredLignesDetails.find(l => l.id === ligneId);\n      if (ligne) {\n        const quantity = quantities[ligneId] || 0;\n        const price = customPrices[ligneId] || ligne.prix;\n        const ligneTotalHT = quantity * price;\n        totalHT += ligneTotalHT;\n        const sousPartieId = ligne.sous_partie;\n        if (!sousPartieTotals[sousPartieId]) {\n          sousPartieTotals[sousPartieId] = 0;\n        }\n        sousPartieTotals[sousPartieId] += ligneTotalHT;\n      }\n    });\n\n    // 2. Appliquer les lignes spéciales par niveau\n    if (specialLines) {\n      // Appliquer d\'abord les lignes spéciales des sous-parties\n      if (specialLines.sousParties) {\n        Object.entries(specialLines.sousParties).forEach(([sousPartieId, lines]) => {\n          const sousPartieTotal = sousPartieTotals[sousPartieId] || 0;\n          lines.forEach(line => {\n            // Les lignes de type \'display\' ne participent pas au calcul\n            if (line.type === "display") {\n              return; // Skip this line\n            }\n            let montant = 0;\n            if (line.valueType === "percentage") {\n              montant = sousPartieTotal * parseFloat(line.value) / 100;\n            } else {\n              montant = parseFloat(line.value);\n            }\n            if (line.type === "reduction") {\n              totalHT -= montant;\n            } else {\n              totalHT += montant;\n            }\n          });\n        });\n      }\n\n      // Puis les lignes spéciales des parties\n      if (specialLines.parties) {\n        Object.entries(specialLines.parties).forEach(([partieId, lines]) => {\n          lines.forEach(line => {\n            // Les lignes de type \'display\' ne participent pas au calcul\n            if (line.type === "display") {\n              return; // Skip this line\n            }\n            let montant = 0;\n            if (line.valueType === "percentage") {\n              montant = totalHT * parseFloat(line.value) / 100;\n            } else {\n              montant = parseFloat(line.value);\n            }\n            if (line.type === "reduction") {\n              totalHT -= montant;\n            } else {\n              totalHT += montant;\n            }\n          });\n        });\n      }\n\n      // Enfin, appliquer les lignes spéciales globales\n      if (specialLines.global && specialLines.global.length > 0) {\n        console.group("Lignes spéciales globales:");\n        specialLines.global.forEach(line => {\n          // Les lignes de type \'display\' ne participent pas au calcul\n          if (line.type === "display") {\n            return; // Skip this line\n          }\n          let montant = 0;\n          if (line.valueType === "percentage") {\n            montant = totalHT * parseFloat(line.value) / 100;\n          } else {\n            montant = parseFloat(line.value);\n          }\n          if (line.type === "reduction") {\n            totalHT -= montant;\n          } else {\n            totalHT += montant;\n          }\n        });\n        console.groupEnd();\n      }\n    }\n\n    // 3. Calcul final avec TVA\n    const tva = totalHT * parseFloat(tvaRate) / 100;\n    const totalTTC = totalHT + tva;\n    console.groupEnd();\n    return {\n      totalHT: parseFloat(totalHT.toFixed(2)),\n      totalTTC: parseFloat(totalTTC.toFixed(2))\n    };\n  };\n  const handlePartieCreated = createdData => {\n    if (!createdData) return;\n    switch (createdData.type) {\n      case "partie":\n        setParties(prevParties => [...prevParties, createdData.data]);\n        setSousParties(prevSousParties => [...prevSousParties, ...createdData.data.sous_parties]);\n\n        // Mettre à jour les lignes de détail\n        const allNewLignes = createdData.data.sous_parties.flatMap(sp => sp.lignes_details || []);\n        setAllLignesDetails(prev => [...prev, ...allNewLignes]);\n\n        // Mettre à jour les filtres si nécessaire\n        if (selectedParties.includes(createdData.data.id)) {\n          setFilteredSousParties(prev => [...prev, ...createdData.data.sous_parties]);\n          setFilteredLignesDetails(prev => [...prev, ...allNewLignes]);\n        }\n\n        // Recharger les domaines après création d\'une partie\n        loadDomaines();\n        break;\n      case "sousPartie":\n        setSousParties(prevSousParties => [...prevSousParties, createdData.data]);\n        if (selectedParties.includes(createdData.data.partie)) {\n          setFilteredSousParties(prev => [...prev, createdData.data]);\n        }\n        // Ajouter les nouvelles lignes de détail\n        if (createdData.data.lignes_details) {\n          setAllLignesDetails(prev => [...prev, ...createdData.data.lignes_details]);\n          if (selectedSousParties.includes(createdData.data.id)) {\n            setFilteredLignesDetails(prev => [...prev, ...createdData.data.lignes_details]);\n          }\n        }\n        break;\n      case "ligne":\n        setAllLignesDetails(prev => [...prev, createdData.data]);\n        if (selectedSousParties.includes(createdData.data.sous_partie)) {\n          setFilteredLignesDetails(prev => [...prev, createdData.data]);\n        }\n        break;\n    }\n  };\n  const handleEditPartie = partie => {\n    setItemToEdit({\n      ...partie,\n      type: "partie"\n    });\n    setEditModalOpen(true);\n  };\n  const handleEditSousPartie = sousPartie => {\n    setItemToEdit({\n      ...sousPartie,\n      type: "sousPartie"\n    });\n    setEditModalOpen(true);\n  };\n  const handleEditLigne = ligne => {\n    setItemToEdit({\n      ...ligne,\n      type: "ligne"\n    });\n    setEditModalOpen(true);\n  };\n  const handleAddSpecialLine = (type, id) => {\n    // Assurons-nous que le type est correctement défini\n    const targetType = type === "parties" ? "parties" : "sousParties";\n    setOpenSpecialLineModal(true);\n    setCurrentSpecialLineTarget({\n      type: targetType,\n      // Utiliser le type correct\n      id: id.toString() // Assurez-vous que l\'ID est une chaîne\n    });\n  };\n  const handleSpecialLineSave = lineData => {\n    setSpecialLines(prev => {\n      var _prev$targetKey;\n      const target = currentSpecialLineTarget;\n      const newLine = {\n        description: lineData.description,\n        value: parseFloat(lineData.value),\n        valueType: lineData.valueType,\n        type: lineData.type,\n        isHighlighted: lineData.isHighlighted || false\n      };\n\n      // Si c\'est une ligne globale\n      if (target.type === "global") {\n        return {\n          ...prev,\n          global: [...(prev.global || []), newLine]\n        };\n      }\n\n      // Pour les parties et sous-parties\n      const targetKey = target.type; // Utiliser directement le type correct\n      return {\n        ...prev,\n        [targetKey]: {\n          ...prev[targetKey],\n          [target.id]: [...(((_prev$targetKey = prev[targetKey]) === null || _prev$targetKey === void 0 ? void 0 : _prev$targetKey[target.id]) || []), newLine]\n        }\n      };\n    });\n    setOpenSpecialLineModal(false);\n  };\n  const handleSaveEdit = async editedData => {\n    let endpoint = "";\n    let dataToSend = {};\n    try {\n      setError(null);\n      if (editedData.type === "partie") {\n        endpoint = `/api/parties/${editedData.id}/`;\n        dataToSend = {\n          titre: editedData.titre\n        };\n      } else if (editedData.type === "sousPartie") {\n        endpoint = `/api/sous-parties/${editedData.id}/`;\n        dataToSend = {\n          description: editedData.description,\n          partie: editedData.partie\n        };\n      } else if (editedData.type === "ligne") {\n        endpoint = `/api/ligne-details/${editedData.id}/`;\n\n        // Trouver la ligne originale pour comparer\n        const originalLigne = allLignesDetails.find(l => l.id === editedData.id);\n\n        // Ne envoyer que les champs qui ont changé\n        dataToSend = {};\n        if (originalLigne) {\n          if (originalLigne.description !== editedData.description) {\n            dataToSend.description = editedData.description;\n          }\n          if (originalLigne.unite !== editedData.unite) {\n            dataToSend.unite = editedData.unite;\n          }\n          if (originalLigne.prix !== editedData.prix) {\n            dataToSend.prix = editedData.prix;\n          }\n          // Ne pas envoyer sous_partie sauf si elle a vraiment changé\n          if (originalLigne.sous_partie !== editedData.sous_partie) {\n            dataToSend.sous_partie = editedData.sous_partie;\n          }\n        } else {\n          // Si on ne trouve pas la ligne originale, envoyer tous les champs\n          dataToSend = {\n            description: editedData.description,\n            unite: editedData.unite,\n            prix: editedData.prix,\n            sous_partie: editedData.sous_partie\n          };\n        }\n      }\n      const response = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].put(endpoint, dataToSend);\n\n      // Mettre à jour les données locales\n      if (editedData.type === "partie") {\n        setParties(parties.map(p => p.id === editedData.id ? response.data : p));\n      } else if (editedData.type === "sousPartie") {\n        setSousParties(sousParties.map(sp => sp.id === editedData.id ? response.data : sp));\n      } else {\n        setAllLignesDetails(allLignesDetails.map(l => l.id === editedData.id ? response.data : l));\n      }\n    } catch (error) {\n      var _error$response16, _error$response17, _error$response18, _error$response19, _error$response20;\n      console.error("Erreur lors de la modification:", error);\n\n      // Extraire le message d\'erreur du backend\n      let errorMessage = "Impossible de modifier l\'élément";\n      let errorDetails = ((_error$response16 = error.response) === null || _error$response16 === void 0 || (_error$response16 = _error$response16.data) === null || _error$response16 === void 0 ? void 0 : _error$response16.detail) || error.message;\n\n      // Si c\'est une erreur de validation du backend\n      if ((_error$response17 = error.response) !== null && _error$response17 !== void 0 && (_error$response17 = _error$response17.data) !== null && _error$response17 !== void 0 && _error$response17.error) {\n        try {\n          const backendError = JSON.parse(error.response.data.error);\n          if (backendError.description) {\n            errorMessage = "Erreur de validation : " + backendError.description[0];\n            errorDetails = backendError.description[0];\n          }\n        } catch (parseError) {\n          // Si le parsing échoue, utiliser le message brut\n          errorMessage = "Erreur de validation du backend";\n          errorDetails = error.response.data.error;\n        }\n      } else if ((_error$response18 = error.response) !== null && _error$response18 !== void 0 && (_error$response18 = _error$response18.data) !== null && _error$response18 !== void 0 && _error$response18.detail) {\n        // Si l\'erreur est dans le champ detail\n        errorMessage = "Erreur de validation : " + error.response.data.detail;\n        errorDetails = error.response.data.detail;\n      } else if (typeof ((_error$response19 = error.response) === null || _error$response19 === void 0 ? void 0 : _error$response19.data) === "object") {\n        // Si l\'erreur est directement dans response.data\n        const errorData = error.response.data;\n        if (errorData.description && Array.isArray(errorData.description)) {\n          errorMessage = "Erreur de validation : " + errorData.description[0];\n          errorDetails = errorData.description[0];\n        } else if (errorData.description) {\n          errorMessage = "Erreur de validation : " + errorData.description;\n          errorDetails = errorData.description;\n        }\n      }\n      setError(errorMessage);\n      setErrorDetails({\n        message: "Erreur lors de la modification",\n        details: errorDetails,\n        code: (_error$response20 = error.response) === null || _error$response20 === void 0 ? void 0 : _error$response20.status,\n        editedData: {\n          type: editedData.type,\n          id: editedData.id,\n          data: dataToSend\n        },\n        timestamp: new Date().toISOString()\n      });\n    }\n  };\n  const visibleParties = parties.filter(partie => !hiddenParties.includes(partie.id));\n  const visibleSousParties = filteredSousParties.filter(sousPartie => !hiddenSousParties.includes(sousPartie.id));\n  const visibleLignesDetails = filteredLignesDetails.filter(ligne => !hiddenLignes.includes(ligne.id));\n\n  // Tri des parties\n  const sortedParties = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    return [...visibleParties].sort((a, b) => {\n      var _a$titre$match, _b$titre$match;\n      const numA = parseInt(((_a$titre$match = a.titre.match(/^(\\d+)-/)) === null || _a$titre$match === void 0 ? void 0 : _a$titre$match[1]) || "0");\n      const numB = parseInt(((_b$titre$match = b.titre.match(/^(\\d+)-/)) === null || _b$titre$match === void 0 ? void 0 : _b$titre$match[1]) || "0");\n      if (numA && numB) {\n        return numA - numB;\n      }\n      return a.titre.localeCompare(b.titre, "fr", {\n        sensitivity: "base"\n      });\n    });\n  }, [visibleParties]);\n\n  // Tri des sous-parties\n  const sortedSousParties = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    return [...visibleSousParties].sort((a, b) => {\n      var _a$description$match, _b$description$match;\n      // Extraire les numéros du début des descriptions s\'ils existent\n      const numA = parseInt(((_a$description$match = a.description.match(/^(\\d+)-/)) === null || _a$description$match === void 0 ? void 0 : _a$description$match[1]) || "0");\n      const numB = parseInt(((_b$description$match = b.description.match(/^(\\d+)-/)) === null || _b$description$match === void 0 ? void 0 : _b$description$match[1]) || "0");\n\n      // Si les deux descriptions commencent par des numéros, trier par numéro\n      if (numA && numB) {\n        return numA - numB;\n      }\n\n      // Sinon, trier alphabétiquement\n      return a.description.localeCompare(b.description, "fr", {\n        sensitivity: "base"\n      });\n    });\n  }, [visibleSousParties]);\n\n  // Tri des lignes de détail\n  const sortedLignesDetails = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    return lignes => {\n      return [...lignes].sort((a, b) => {\n        var _a$description$match2, _b$description$match2;\n        // Extraire les numéros du début des descriptions s\'ils existent\n        const numA = parseInt(((_a$description$match2 = a.description.match(/^(\\d+)-/)) === null || _a$description$match2 === void 0 ? void 0 : _a$description$match2[1]) || "0");\n        const numB = parseInt(((_b$description$match2 = b.description.match(/^(\\d+)-/)) === null || _b$description$match2 === void 0 ? void 0 : _b$description$match2[1]) || "0");\n\n        // Si les deux descriptions commencent par des numéros, trier par numéro\n        if (numA && numB) {\n          return numA - numB;\n        }\n\n        // Sinon, trier alphabétiquement\n        return a.description.localeCompare(b.description, "fr", {\n          sensitivity: "base"\n        });\n      });\n    };\n  }, []);\n  const handleHidePartie = partieId => {\n    setSlidingParties([...slidingParties, partieId]);\n    setTimeout(() => {\n      setHiddenParties([...hiddenParties, partieId]);\n      setSelectedParties(selectedParties.filter(id => id !== partieId));\n      setSlidingParties(slidingParties.filter(id => id !== partieId));\n    }, 300);\n  };\n  const handleHideSousPartie = sousPartieId => {\n    setSlidingSousParties([...slidingSousParties, sousPartieId]);\n    setTimeout(() => {\n      setHiddenSousParties([...hiddenSousParties, sousPartieId]);\n      setSelectedSousParties(selectedSousParties.filter(id => id !== sousPartieId));\n      setSlidingSousParties(slidingSousParties.filter(id => id !== sousPartieId));\n    }, 300);\n  };\n  const handleHideLigne = ligneId => {\n    setSlidingLignes([...slidingLignes, ligneId]);\n    setTimeout(() => {\n      setHiddenLignes([...hiddenLignes, ligneId]);\n      setSelectedLignes(selectedLignes.filter(id => id !== ligneId));\n      setSlidingLignes(slidingLignes.filter(id => id !== ligneId));\n    }, 300);\n  };\n  const handleClientInfoSubmit = async clientData => {\n    if (!clientData.name || !clientData.surname || !clientData.phone_Number) {\n      alert("Tous les champs sont obligatoires");\n      return;\n    }\n    if (!clientData) {\n      console.error("clientData est undefined");\n      return;\n    }\n    try {\n      setPendingChantierData(prev => ({\n        ...prev,\n        client: {\n          name: clientData.name || "",\n          surname: clientData.surname || "",\n          phone_Number: parseInt(clientData.phone_Number) || 0,\n          client_mail: clientData.client_mail || ""\n        }\n      }));\n      setShowClientInfoModal(false);\n      setShowSocieteInfoModal(true);\n    } catch (error) {\n      console.error("Erreur:", error);\n    }\n  };\n  const handleSocieteInfoSubmit = async societeData => {\n    setPendingChantierData(prev => ({\n      ...prev,\n      societe: {\n        nom_societe: societeData.nom_societe,\n        ville_societe: societeData.ville_societe,\n        rue_societe: societeData.rue_societe,\n        codepostal_societe: societeData.codepostal_societe\n      }\n    }));\n    setShowSocieteInfoModal(false);\n    setShowChantierForm(true);\n  };\n  const handleChange = (e, type) => {\n    const {\n      name,\n      value\n    } = e.target;\n    if (type === "client") {\n      setPendingChantierData(prev => ({\n        ...prev,\n        client: {\n          ...prev.client,\n          [name]: value\n        }\n      }));\n    } else if (type === "societe") {\n      setPendingChantierData(prev => ({\n        ...prev,\n        societe: {\n          ...prev.societe,\n          [name]: value\n        }\n      }));\n    }\n  };\n\n  // Modifiez le gestionnaire de changement de type de devis\n  const handleDevisTypeChange = e => {\n    const newValue = e.target.value;\n    setDevisType(newValue);\n    if (newValue === "chantier") {\n      setShowClientTypeModal(true);\n    }\n  };\n  const handleChantierInfoSubmit = chantierInfo => {\n    setPendingChantierData(prev => ({\n      ...prev,\n      chantier: {\n        ...prev.chantier,\n        ...chantierInfo\n      }\n    }));\n    setShowChantierForm(false);\n  };\n  const handleLignesChange = ligneId => {\n    setIsPreviewed(false);\n    const isSelected = selectedLignes.includes(ligneId);\n    if (isSelected) {\n      setSelectedLignes(selectedLignes.filter(id => id !== ligneId));\n    } else {\n      setSelectedLignes(prev => [...prev, ligneId]);\n    }\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const fetchDevisData = async () => {\n      if (!devisId) {\n        console.error("Aucun ID de devis fourni");\n        return;\n      }\n      try {\n        console.log("Récupération des données pour le devis ID:", devisId);\n        const response = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/devisa/${devisId}/`);\n        const devisData = response.data;\n        console.log("Données du devis récupérées:", devisData);\n\n        // Pré-remplir les états avec les données du devis\n        setSelectedChantierId(devisData.chantier);\n\n        // Gérer les lignes et leurs sélections\n        if (devisData.lignes && Array.isArray(devisData.lignes)) {\n          const newQuantities = {};\n          const newCustomPrices = {};\n          const selectedLigneIds = [];\n          const selectedSousPartieIds = new Set();\n          const selectedPartieIds = new Set();\n\n          // Récupérer d\'abord toutes les lignes de détail\n          for (const ligne of devisData.lignes) {\n            if (ligne && ligne.ligne_detail) {\n              newQuantities[ligne.ligne_detail] = ligne.quantite || 0;\n              newCustomPrices[ligne.ligne_detail] = ligne.prix_unitaire || 0;\n              selectedLigneIds.push(ligne.ligne_detail);\n\n              // Récupérer la sous-partie correspondante\n              try {\n                const ligneDetailResponse = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/ligne-details/${ligne.ligne_detail}/`);\n                const sousPartieId = ligneDetailResponse.data.sous_partie;\n                selectedSousPartieIds.add(sousPartieId);\n\n                // Récupérer la partie correspondante\n                const sousPartieResponse = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/sous-parties/${sousPartieId}/`);\n                const partieId = sousPartieResponse.data.partie;\n                selectedPartieIds.add(partieId);\n              } catch (error) {\n                console.error("Erreur lors de la récupération des relations:", error);\n              }\n            }\n          }\n\n          // Mettre à jour tous les états\n          setQuantities(newQuantities);\n          setCustomPrices(newCustomPrices);\n          setSelectedLignes(selectedLigneIds);\n          setSelectedSousParties(Array.from(selectedSousPartieIds));\n          setSelectedParties(Array.from(selectedPartieIds));\n        }\n\n        // Gérer les lignes spéciales\n        if (devisData.lignes_speciales) {\n          setSpecialLines(devisData.lignes_speciales);\n        }\n        console.log("Données du devis récupérées:", devisData);\n        setTvaRate(devisData.tva_rate || 20);\n        setNatureTravaux(devisData.nature_travaux || "");\n        setDevisModalData(prev => ({\n          ...prev,\n          numero: devisData.numero || "",\n          description: devisData.description || "",\n          montant_ttc: devisData.price_ttc || ""\n        }));\n      } catch (error) {\n        console.error("Erreur lors du chargement des données:", error);\n        alert("Erreur lors du chargement des données du devis");\n      }\n    };\n    fetchDevisData();\n  }, [devisId]);\n\n  // Sauvegarder l\'état automatiquement quand il change\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    saveStateToLocalStorage();\n  }, [selectedChantierId, selectedParties, selectedSousParties, selectedLignes, quantities, customPrices, customCouts, customTauxFixes, customMarges, tvaRate, natureTravaux, specialLines, devisType, pendingChantierData, selectedSocieteId, showSummaryBox]);\n\n  // Fonctions pour sauvegarder et restaurer l\'état\n  const saveStateToLocalStorage = () => {\n    const stateToSave = {\n      selectedChantierId,\n      selectedParties,\n      selectedSousParties,\n      selectedLignes,\n      quantities,\n      customPrices,\n      customCouts,\n      customTauxFixes,\n      customMarges,\n      tvaRate,\n      natureTravaux,\n      specialLines,\n      devisType,\n      pendingChantierData,\n      selectedSocieteId,\n      showSummaryBox\n    };\n    localStorage.setItem("modificationDevisState", JSON.stringify(stateToSave));\n  };\n  const loadStateFromLocalStorage = () => {\n    const savedState = localStorage.getItem("modificationDevisState");\n    if (savedState) {\n      try {\n        const parsedState = JSON.parse(savedState);\n        setSelectedChantierId(parsedState.selectedChantierId || null);\n        setSelectedParties(parsedState.selectedParties || []);\n        setSelectedSousParties(parsedState.selectedSousParties || []);\n        setSelectedLignes(parsedState.selectedLignes || []);\n        setQuantities(parsedState.quantities || {});\n        setCustomPrices(parsedState.customPrices || {});\n        setCustomCouts(parsedState.customCouts || {});\n        setCustomTauxFixes(parsedState.customTauxFixes || {});\n        setCustomMarges(parsedState.customMarges || {});\n        setTvaRate(parsedState.tvaRate || 20);\n        setNatureTravaux(parsedState.natureTravaux || "");\n        setSpecialLines(parsedState.specialLines || {\n          parties: {},\n          sousParties: {},\n          lignes: {},\n          global: []\n        });\n        setDevisType(parsedState.devisType || "normal");\n        setPendingChantierData(parsedState.pendingChantierData || {\n          client: {\n            name: "",\n            surname: "",\n            client_mail: "",\n            phone_Number: ""\n          },\n          societe: {\n            nom_societe: "",\n            ville_societe: "",\n            rue_societe: "",\n            codepostal_societe: ""\n          },\n          chantier: {\n            id: -1,\n            chantier_name: "",\n            ville: "",\n            rue: "",\n            code_postal: ""\n          },\n          devis: null\n        });\n        setSelectedSocieteId(parsedState.selectedSocieteId || null);\n        setShowSummaryBox(parsedState.showSummaryBox || false);\n      } catch (error) {\n        console.error("Erreur lors du chargement de l\'état:", error);\n      }\n    }\n  };\n  const clearSavedState = () => {\n    localStorage.removeItem("modificationDevisState");\n  };\n\n  // Fonctions utilitaires pour la gestion des erreurs\n  const clearError = () => {\n    setError(null);\n    setErrorDetails(null);\n  };\n  const copyErrorToClipboard = () => {\n    if (errorDetails) {\n      const errorText = `\nERREUR DÉTECTÉE DANS MODIFICATIONDEVIS.JS\n=========================================\n\nMessage: ${errorDetails.message}\nDétails: ${errorDetails.details}\nCode: ${errorDetails.code || "N/A"}\nTimestamp: ${errorDetails.timestamp}\n\nDonnées contextuelles:\n${JSON.stringify(errorDetails, null, 2)}\n\nPour rapporter cette erreur, copiez ce texte et envoyez-le au développeur.\n      `.trim();\n      navigator.clipboard.writeText(errorText).then(() => {\n        alert("Détails de l\'erreur copiés dans le presse-papiers !");\n      }).catch(() => {\n        alert("Impossible de copier automatiquement. Veuillez copier manuellement les détails ci-dessus.");\n      });\n    }\n  };\n  const getErrorMessage = error => {\n    var _error$response21, _error$response22, _error$response23, _error$response24;\n    if (((_error$response21 = error.response) === null || _error$response21 === void 0 ? void 0 : _error$response21.status) === 404) {\n      return "Ressource non trouvée. Veuillez vérifier que les données existent.";\n    } else if (((_error$response22 = error.response) === null || _error$response22 === void 0 ? void 0 : _error$response22.status) === 400) {\n      return "Données invalides. Veuillez vérifier les informations saisies.";\n    } else if (((_error$response23 = error.response) === null || _error$response23 === void 0 ? void 0 : _error$response23.status) === 500) {\n      return "Erreur serveur. Veuillez réessayer plus tard.";\n    } else if (((_error$response24 = error.response) === null || _error$response24 === void 0 ? void 0 : _error$response24.status) === 403) {\n      return "Accès refusé. Vous n\'avez pas les permissions nécessaires.";\n    } else if (error.code === "NETWORK_ERROR") {\n      return "Erreur de connexion. Vérifiez votre connexion internet.";\n    } else {\n      return error.message || "Une erreur inattendue s\'est produite.";\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    maxWidth: "lg"\n  }, error && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      position: "fixed",\n      top: 20,\n      left: "50%",\n      transform: "translateX(-50%)",\n      zIndex: 9999,\n      maxWidth: "90vw",\n      width: "600px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    elevation: 8,\n    sx: {\n      p: 3,\n      backgroundColor: "#fff3cd",\n      border: "2px solid #ffc107",\n      borderRadius: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "h6",\n    sx: {\n      color: "#856404",\n      fontWeight: "bold",\n      flexGrow: 1\n    }\n  }, "\\u26A0\\uFE0F ", error), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    size: "small",\n    onClick: clearError,\n    sx: {\n      color: "#856404",\n      minWidth: "auto"\n    }\n  }, "\\u2715")), errorDetails && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "body2",\n    sx: {\n      color: "#856404",\n      mb: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong", null, "D\\xE9tails techniques :")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      backgroundColor: "#fff",\n      p: 2,\n      borderRadius: 1,\n      border: "1px solid #dee2e6",\n      maxHeight: "200px",\n      overflow: "auto",\n      fontFamily: "monospace",\n      fontSize: "0.8rem"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "caption",\n    sx: {\n      color: "#6c757d"\n    }\n  }, "Message: ", errorDetails.message), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "caption",\n    sx: {\n      color: "#6c757d"\n    }\n  }, "D\\xE9tails: ", errorDetails.details), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "caption",\n    sx: {\n      color: "#6c757d"\n    }\n  }, "Code: ", errorDetails.code || "N/A"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "caption",\n    sx: {\n      color: "#6c757d"\n    }\n  }, "Timestamp:", " ", new Date(errorDetails.timestamp).toLocaleString()))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      display: "flex",\n      gap: 1,\n      justifyContent: "flex-end"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    size: "small",\n    variant: "outlined",\n    onClick: copyErrorToClipboard,\n    sx: {\n      color: "#856404",\n      borderColor: "#856404",\n      "&:hover": {\n        borderColor: "#856404",\n        backgroundColor: "rgba(133, 100, 4, 0.1)"\n      }\n    }\n  }, "\\uD83D\\uDCCB Copier les d\\xE9tails"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    size: "small",\n    variant: "contained",\n    onClick: clearError,\n    sx: {\n      backgroundColor: "#856404",\n      "&:hover": {\n        backgroundColor: "#6d5603"\n      }\n    }\n  }, "Fermer")))), isLoading && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      position: "fixed",\n      top: 0,\n      left: 0,\n      right: 0,\n      zIndex: 9998,\n      backgroundColor: "rgba(0, 0, 0, 0.5)",\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "center",\n      height: "100vh"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    elevation: 8,\n    sx: {\n      p: 4,\n      textAlign: "center",\n      backgroundColor: "white",\n      borderRadius: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "h6",\n    sx: {\n      mb: 2\n    }\n  }, "\\u23F3 Traitement en cours..."), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "body2",\n    sx: {\n      color: "text.secondary"\n    }\n  }, "Veuillez patienter pendant la modification du devis."))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      mt: 4,\n      mb: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    elevation: 3,\n    sx: {\n      p: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    fullWidth: true,\n    sx: {\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, "S\\xE9lectionner le Chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    value: selectedChantierId,\n    onChange: e => setSelectedChantierId(e.target.value),\n    displayEmpty: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    value: ""\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("em", null, "-- S\\xE9lectionner un Chantier --")), pendingChantierData.chantier && pendingChantierData.chantier.id === -1 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    value: -1\n  }, pendingChantierData.chantier.chantier_name, " (En cours de cr\\xE9ation)"), chantiers.map(chantier => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    key: chantier.id,\n    value: chantier.id\n  }, chantier.chantier_name)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "center",\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    component: "fieldset"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    component: "legend"\n  }, "Type de devis"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    row: true,\n    "aria-label": "devis-type",\n    name: "devis-type",\n    value: devisType,\n    onChange: handleDevisTypeChange\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], {\n    value: "normal",\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], null),\n    label: "Devis normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], {\n    value: "chantier",\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], null),\n    label: "Devis chantier"\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "contained",\n    color: "primary",\n    onClick: () => setOpenCreatePartieModal(true),\n    sx: {\n      fontFamily: "\'Work Sans\', sans-serif",\n      textTransform: "none",\n      fontSize: "1rem"\n    }\n  }, "Cr\\xE9er une nouvelle partie")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      mt: 2,\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    fullWidth: true,\n    label: "Nature des travaux",\n    value: natureTravaux,\n    onChange: e => setNatureTravaux(e.target.value),\n    sx: {\n      mb: 2\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    type: "number",\n    label: "Taux de TVA (%)",\n    value: tvaRate,\n    onChange: e => setTvaRate(parseFloat(e.target.value)),\n    inputProps: {\n      step: "0.01",\n      min: "0",\n      max: "100"\n    },\n    InputProps: {\n      endAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n        position: "end"\n      }, "%")\n    },\n    sx: {\n      mb: 2\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "center",\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, "Type de domaine"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "outlined",\n    size: "small",\n    onClick: loadDomaines,\n    sx: {\n      fontSize: "0.75rem"\n    }\n  }, "\\uD83D\\uDD04 Rafra\\xEEchir les domaines")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    fullWidth: true,\n    sx: {\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    value: selectedPartieType,\n    onChange: e => setSelectedPartieType(e.target.value),\n    displayEmpty: true\n  }, availableDomaines.map(domaine => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    key: domaine,\n    value: domaine\n  }, domaine)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, "Parties (", selectedPartieType, ")"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_28__["default"], {\n    expandIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n      style: {\n        fontSize: "1.5rem"\n      }\n    }, "+")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], null, "S\\xE9lectionner les parties (", selectedParties.length, " ", "s\\xE9lectionn\\xE9es)")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_29__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      display: "flex",\n      flexDirection: "column",\n      gap: 1\n    }\n  }, sortedParties.map(partie => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    key: partie.id,\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "space-between",\n      paddingY: "2px",\n      transition: "transform 0.3s ease-out, opacity 0.3s ease-out",\n      transform: slidingParties.includes(partie.id) ? "translateX(100%)" : "translateX(0)",\n      opacity: slidingParties.includes(partie.id) ? 0 : 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      gap: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_30__["default"], {\n    checked: selectedParties.includes(partie.id),\n    onChange: () => handlePartiesChange(partie.id),\n    sx: {\n      "& .MuiSvgIcon-root": {\n        width: "30px",\n        height: "30px"\n      }\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "h6"\n  }, partie.titre)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    size: "small",\n    variant: "outlined",\n    onClick: () => handleAddSpecialLine("parties", partie.id),\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fi__WEBPACK_IMPORTED_MODULE_31__.FiPlusCircle, {\n      size: 16,\n      style: {\n        strokeWidth: 2\n      }\n    }),\n    sx: {\n      borderRadius: "20px",\n      textTransform: "none",\n      fontSize: "0.65rem",\n      padding: "4px 10px",\n      marginLeft: "10px",\n      borderColor: "primary.main",\n      color: "primary.main",\n      backgroundColor: "white",\n      "&:hover": {\n        backgroundColor: "primary.main",\n        color: "white",\n        borderColor: "primary.main",\n        boxShadow: "0 2px 5px rgba(0,0,0,0.2)"\n      },\n      transition: "all 0.3s ease",\n      minWidth: "130px",\n      height: "32px",\n      fontWeight: 500\n    }\n  }, "Ligne sp\\xE9ciale")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      display: "flex",\n      gap: 1,\n      alignItems: "center",\n      height: "100%"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    style: {\n      backgroundColor: "transparent",\n      color: "#4CAF50",\n      border: "2px solid #4CAF50",\n      borderRadius: "4px",\n      padding: "2px",\n      cursor: "pointer",\n      height: "24px",\n      width: "24px",\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "center"\n    },\n    onClick: () => handleEditPartie(partie)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_ri__WEBPACK_IMPORTED_MODULE_32__.RiPencilFill, {\n    size: 16\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    style: {\n      backgroundColor: "transparent",\n      color: "#f44336",\n      border: "2px solid #f44336",\n      borderRadius: "4px",\n      padding: "2px",\n      cursor: "pointer",\n      height: "24px",\n      width: "24px",\n      marginRight: "4px",\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "center"\n    },\n    onClick: e => {\n      e.stopPropagation();\n      handleHidePartie(partie.id);\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_33__.FaEyeSlash, {\n    size: 16\n  }))))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, "Sous-Parties et Lignes de D\\xE9tail"), sortedSousParties.map(sousPartie => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], {\n    key: sousPartie.id,\n    sx: {\n      mb: 1,\n      transition: "transform 0.3s ease-out, opacity 0.3s ease-out",\n      transform: slidingSousParties.includes(sousPartie.id) ? "translateX(100%)" : "translateX(0)",\n      opacity: slidingSousParties.includes(sousPartie.id) ? 0 : 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_28__["default"], {\n    expandIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n      style: {\n        fontSize: "1.5rem",\n        cursor: "pointer",\n        userSelect: "none"\n      }\n    }, "+"),\n    onClick: e => {\n      // Empêcher la sélection/déséselection si on clique sur les contrôles\n      if (e.target.closest("button") || e.target.closest(".MuiCheckbox-root")) {\n        e.stopPropagation();\n        return;\n      }\n      // Si on clique sur le titre ou la zone générale (pas sur l\'icône d\'expansion)\n      // et que la sous-partie n\'est pas déjà sélectionnée, la cocher automatiquement\n      if (!e.target.closest(".MuiAccordionSummary-expandIconWrapper") && !selectedSousParties.includes(sousPartie.id)) {\n        handleSousPartiesChange(sousPartie.id);\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      gap: 1,\n      width: "auto"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], {\n    sx: {\n      "& .MuiFormControlLabel-label": {\n        marginLeft: "-4px",\n        fontFamily: "\'Merriweather\', serif",\n        fontSize: "1rem",\n        fontWeight: 500,\n        color: "black",\n        cursor: "pointer"\n      }\n    },\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n      sx: {\n        display: "flex",\n        alignItems: "center"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n      style: {\n        backgroundColor: "transparent",\n        color: "#4CAF50",\n        border: "2px solid #4CAF50",\n        borderRadius: "4px",\n        display: "flex",\n        alignItems: "center",\n        justifyContent: "center",\n        cursor: "pointer",\n        padding: "2px",\n        marginRight: "4px"\n      },\n      onClick: e => {\n        e.stopPropagation();\n        handleEditSousPartie(sousPartie);\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_ri__WEBPACK_IMPORTED_MODULE_32__.RiPencilFill, {\n      size: 16\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n      style: {\n        backgroundColor: "transparent",\n        color: "#f44336",\n        border: "2px solid #f44336",\n        borderRadius: "4px",\n        padding: "2px",\n        cursor: "pointer",\n        height: "24px",\n        width: "24px",\n        marginRight: "4px"\n      },\n      onClick: e => {\n        e.stopPropagation();\n        handleHideSousPartie(sousPartie.id);\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_33__.FaEyeSlash, {\n      size: 16\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_30__["default"], {\n      checked: selectedSousParties.includes(sousPartie.id),\n      onChange: () => handleSousPartiesChange(sousPartie.id),\n      onClick: e => e.stopPropagation(),\n      sx: {\n        marginLeft: "-12px",\n        "& .MuiSvgIcon-root": {\n          width: "30px",\n          height: "30px"\n        }\n      }\n    }))\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      display: "flex",\n      gap: 1,\n      alignItems: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "subtitle1"\n  }, sousPartie.description), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    size: "small",\n    variant: "outlined",\n    onClick: () => handleAddSpecialLine("sousParties", sousPartie.id),\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fi__WEBPACK_IMPORTED_MODULE_31__.FiPlusCircle, {\n      size: 16,\n      style: {\n        strokeWidth: 2\n      }\n    }),\n    sx: {\n      borderRadius: "20px",\n      textTransform: "none",\n      fontSize: "0.85rem",\n      padding: "4px 12px",\n      borderColor: "primary.main",\n      color: "primary.main",\n      backgroundColor: "white",\n      "&:hover": {\n        backgroundColor: "primary.main",\n        color: "white",\n        borderColor: "primary.main",\n        boxShadow: "0 2px 5px rgba(0,0,0,0.2)"\n      },\n      transition: "all 0.3s ease",\n      minWidth: "130px",\n      height: "32px",\n      fontWeight: 500\n    }\n  }, "Ligne sp\\xE9ciale"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_29__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    fullWidth: true,\n    size: "small",\n    placeholder: "Rechercher une ligne...",\n    sx: {\n      mb: 2\n    },\n    onChange: e => setSearchTerms(prev => ({\n      ...prev,\n      [sousPartie.id]: e.target.value\n    })),\n    value: searchTerms[sousPartie.id] || ""\n  }), sortedLignesDetails(getFilteredLignes(sousPartie.id, visibleLignesDetails.filter(ligne => {\n    return ligne.sous_partie === sousPartie.id;\n  }))).map(ligne => {\n    var _customCouts$ligne$id3, _customCouts$ligne$id4, _customCouts$ligne$id5, _customCouts$ligne$id6;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_34__["default"], {\n      key: ligne.id,\n      sx: {\n        mb: 1,\n        transition: "transform 0.3s ease-out, opacity 0.3s ease-out",\n        transform: slidingLignes.includes(ligne.id) ? "translateX(100%)" : "translateX(0)",\n        opacity: slidingLignes.includes(ligne.id) ? 0 : 1,\n        backgroundColor: "white",\n        "& .MuiTypography-root": {\n          color: "black"\n        }\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_35__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n      sx: {\n        display: "flex",\n        alignItems: "center",\n        mb: 1,\n        gap: 2,\n        width: "100%",\n        justifyContent: "space-between"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n      sx: {\n        display: "flex",\n        alignItems: "center",\n        gap: 2\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n      sx: {\n        display: "flex",\n        alignItems: "center"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n      sx: {\n        display: "flex",\n        alignItems: "center"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n      sx: {\n        display: "flex",\n        gap: 1,\n        alignItems: "center"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n      style: {\n        backgroundColor: "transparent",\n        color: "#4CAF50",\n        border: "2px solid #4CAF50",\n        borderRadius: "4px",\n        padding: "2px",\n        cursor: "pointer",\n        height: "24px",\n        width: "24px",\n        display: "flex",\n        alignItems: "center",\n        justifyContent: "center"\n      },\n      onClick: () => handleEditLigne(ligne)\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_ri__WEBPACK_IMPORTED_MODULE_32__.RiPencilFill, {\n      size: 16\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n      style: {\n        backgroundColor: "transparent",\n        color: "#f44336",\n        border: "2px solid #f44336",\n        borderRadius: "4px",\n        padding: "2px",\n        cursor: "pointer",\n        height: "24px",\n        width: "24px",\n        display: "flex",\n        alignItems: "center",\n        justifyContent: "center"\n      },\n      onClick: () => handleHideLigne(ligne.id)\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_33__.FaEyeSlash, {\n      size: 16\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_30__["default"], {\n      checked: selectedLignes.includes(ligne.id),\n      onChange: () => handleLignesChange(ligne.id),\n      sx: {\n        marginLeft: "-12px",\n        "& .MuiSvgIcon-root": {\n          width: "30px",\n          height: "30px"\n        }\n      }\n    })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n      sx: {\n        display: "flex",\n        gap: 1,\n        alignItems: "center"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], null, ligne.description))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n      variant: "subtitle1",\n      sx: {\n        minWidth: "80px",\n        textAlign: "right",\n        fontWeight: "bold",\n        color: "primary.main"\n      }\n    }, formatPrice(calculateTotalPrice(ligne)), " \\u20AC")), selectedLignes.includes(ligne.id) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n      sx: {\n        display: "flex",\n        flexDirection: "column",\n        gap: 2,\n        ml: 4\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n      sx: {\n        display: "flex",\n        gap: 2,\n        alignItems: "center"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n      variant: "subtitle2",\n      sx: {\n        fontWeight: "bold",\n        color: "primary.main"\n      }\n    }, "Co\\xFBts d\\xE9taill\\xE9s:"), (customCouts[ligne.id] || customTauxFixes[ligne.id] || customMarges[ligne.id]) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n      variant: "caption",\n      sx: {\n        color: "orange",\n        fontWeight: "bold"\n      }\n    }, "Modifi\\xE9")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n      sx: {\n        display: "flex",\n        gap: 2,\n        flexWrap: "wrap"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n      label: "Main d\'\\u0153uvre",\n      type: "number",\n      step: "0.01",\n      size: "small",\n      value: ((_customCouts$ligne$id3 = customCouts[ligne.id]) === null || _customCouts$ligne$id3 === void 0 ? void 0 : _customCouts$ligne$id3.main_oeuvre) || ligne.cout_main_oeuvre || "",\n      onChange: e => handleCoutChange(ligne.id, "main_oeuvre", e.target.value),\n      onBlur: e => {\n        const value = e.target.value;\n        if (value === "" || isNaN(parseFloat(value))) {\n          handleCoutChange(ligne.id, "main_oeuvre", "");\n        }\n      },\n      InputProps: {\n        endAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n          position: "end"\n        }, "\\u20AC")\n      },\n      sx: {\n        minWidth: "120px"\n      }\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n      label: "Mat\\xE9riel",\n      type: "number",\n      step: "0.01",\n      size: "small",\n      value: ((_customCouts$ligne$id4 = customCouts[ligne.id]) === null || _customCouts$ligne$id4 === void 0 ? void 0 : _customCouts$ligne$id4.materiel) || ligne.cout_materiel || "",\n      onChange: e => handleCoutChange(ligne.id, "materiel", e.target.value),\n      onBlur: e => {\n        const value = e.target.value;\n        if (value === "" || isNaN(parseFloat(value))) {\n          handleCoutChange(ligne.id, "materiel", "");\n        }\n      },\n      InputProps: {\n        endAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n          position: "end"\n        }, "\\u20AC")\n      },\n      sx: {\n        minWidth: "120px"\n      }\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n      label: "Taux fixe",\n      type: "number",\n      step: "0.01",\n      size: "small",\n      value: customTauxFixes[ligne.id] || ligne.taux_fixe || tauxFixe || "",\n      onChange: e => handleTauxFixeChange(ligne.id, e.target.value),\n      onBlur: e => {\n        const value = e.target.value;\n        if (value === "" || isNaN(parseFloat(value))) {\n          handleTauxFixeChange(ligne.id, "");\n        }\n      },\n      InputProps: {\n        endAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n          position: "end"\n        }, "%")\n      },\n      sx: {\n        minWidth: "120px"\n      }\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n      label: "Marge",\n      type: "number",\n      step: "0.01",\n      size: "small",\n      value: customMarges[ligne.id] || ligne.marge || "",\n      onChange: e => handleMargeChange(ligne.id, e.target.value),\n      onBlur: e => {\n        const value = e.target.value;\n        if (value === "" || isNaN(parseFloat(value))) {\n          handleMargeChange(ligne.id, "");\n        }\n      },\n      InputProps: {\n        endAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n          position: "end"\n        }, "%")\n      },\n      sx: {\n        minWidth: "120px"\n      }\n    })), (customCouts[ligne.id] || customTauxFixes[ligne.id] || customMarges[ligne.id]) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n      sx: {\n        backgroundColor: "rgba(25, 118, 210, 0.1)",\n        p: 1,\n        borderRadius: 1,\n        border: "1px solid rgba(25, 118, 210, 0.3)"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n      variant: "caption",\n      sx: {\n        fontWeight: "bold",\n        color: "primary.main"\n      }\n    }, "Calcul: (", ((_customCouts$ligne$id5 = customCouts[ligne.id]) === null || _customCouts$ligne$id5 === void 0 ? void 0 : _customCouts$ligne$id5.main_oeuvre) || ligne.cout_main_oeuvre || 0, " ", "+", " ", ((_customCouts$ligne$id6 = customCouts[ligne.id]) === null || _customCouts$ligne$id6 === void 0 ? void 0 : _customCouts$ligne$id6.materiel) || ligne.cout_materiel || 0, ") \\xD7 (1 +", " ", customTauxFixes[ligne.id] || ligne.taux_fixe || tauxFixe || 0, "%) \\xD7 (1 +", " ", customMarges[ligne.id] || ligne.marge || 0, "%) =", " ", formatPrice(calculatePriceFromCosts(ligne)), " ", "\\u20AC")), (customCouts[ligne.id] || customTauxFixes[ligne.id] || customMarges[ligne.id]) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n      sx: {\n        display: "flex",\n        gap: 1\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n      size: "small",\n      variant: "contained",\n      onClick: () => saveCustomCostsToDatabase(ligne.id),\n      sx: {\n        textTransform: "none",\n        fontSize: "0.75rem"\n      }\n    }, "Sauvegarder"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n      size: "small",\n      variant: "outlined",\n      onClick: () => handleResetCosts(ligne.id),\n      sx: {\n        textTransform: "none",\n        fontSize: "0.75rem"\n      }\n    }, "R\\xE9initialiser")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n      sx: {\n        display: "flex",\n        gap: 2,\n        alignItems: "center"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n      id: `quantity-${ligne.id}`,\n      label: "Quantit\\xE9",\n      type: "number",\n      value: quantities[ligne.id] || "",\n      onChange: e => handleQuantityChange(ligne.id, e.target.value),\n      size: "small"\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n      label: "Prix Unitaire",\n      type: "number",\n      step: "0.01",\n      value: customCouts[ligne.id] || customTauxFixes[ligne.id] || customMarges[ligne.id] ? formatPrice(calculatePriceFromCosts(ligne)) : customPrices[ligne.id] !== undefined ? customPrices[ligne.id] : ligne.prix || "",\n      onChange: e => handlePriceChange(ligne.id, e.target.value),\n      onBlur: e => {\n        const value = e.target.value;\n        if (value === "" || isNaN(parseFloat(value))) {\n          handlePriceChange(ligne.id, "");\n        }\n      },\n      size: "small",\n      readOnly: customCouts[ligne.id] || customTauxFixes[ligne.id] || customMarges[ligne.id],\n      InputProps: {\n        endAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n          position: "end"\n        }, "\\u20AC")\n      }\n    })))));\n  }))))), selectedLignes.length > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      mb: 3,\n      p: 2,\n      backgroundColor: "rgba(25, 118, 210, 0.05)",\n      borderRadius: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "subtitle2",\n    sx: {\n      fontWeight: "bold",\n      color: "primary.main",\n      mb: 1\n    }\n  }, "Statistiques des lignes s\\xE9lectionn\\xE9es:"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      display: "flex",\n      gap: 3,\n      flexWrap: "wrap"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "body2"\n  }, "Lignes calcul\\xE9es automatiquement:", " ", selectedLignes.filter(ligneId => {\n    const ligne = filteredLignesDetails.find(l => l.id === ligneId);\n    return ligne && (ligne.cout_main_oeuvre || ligne.cout_materiel || ligne.taux_fixe || ligne.marge);\n  }).length), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "body2"\n  }, "Lignes avec prix manuel:", " ", selectedLignes.filter(ligneId => {\n    const ligne = filteredLignesDetails.find(l => l.id === ligneId);\n    return ligne && !(ligne.cout_main_oeuvre || ligne.cout_materiel || ligne.taux_fixe || ligne.marge);\n  }).length), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "body2"\n  }, "Lignes modifi\\xE9es en cours:", " ", selectedLignes.filter(ligneId => customCouts[ligneId] || customTauxFixes[ligneId] || customMarges[ligneId]).length))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      mb: 3,\n      display: "flex",\n      justifyContent: "flex-end"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "outlined",\n    color: "primary",\n    onClick: handleAddGlobalSpecialLine,\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fi__WEBPACK_IMPORTED_MODULE_31__.FiPlusCircle, null),\n    sx: {\n      borderRadius: "20px",\n      textTransform: "none",\n      fontSize: "0.85rem",\n      padding: "8px 16px"\n    }\n  }, "Ajouter une ligne sp\\xE9ciale globale")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      display: "flex",\n      gap: 2,\n      alignItems: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "contained",\n    color: "primary",\n    onClick: isPreviewed ? handleSaveDevis : handlePreviewDevis\n  }, isPreviewed ? "Enregistrer le devis" : "Voir le devis"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "outlined",\n    color: "secondary",\n    onClick: () => {\n      if (window.confirm("Voulez-vous vraiment effacer toutes les données en cours ? Cette action ne peut pas être annulée.")) {\n        clearSavedState();\n        window.location.reload();\n      }\n    },\n    title: "Effacer toutes les donn\\xE9es sauvegard\\xE9es"\n  }, "\\uD83D\\uDDD1\\uFE0F Effacer")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ClientTypeModal__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    open: showClientTypeModal,\n    onClose: () => {\n      setShowClientTypeModal(false);\n      setDevisType("normal"); // Réinitialiser le type si l\'utilisateur annule\n    },\n    onNewClient: handleNewClient,\n    onExistingClient: handleExistingClient\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SelectSocieteModal__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    open: showSelectSocieteModal,\n    onClose: () => setShowSelectSocieteModal(false),\n    onSocieteSelect: handleSocieteSelect\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      position: "fixed",\n      bottom: 20,\n      right: 20,\n      backgroundColor: "white",\n      padding: "15px",\n      borderRadius: "8px",\n      boxShadow: "0 2px 10px rgba(0,0,0,0.2)",\n      zIndex: 1000,\n      border: "2px solid",\n      borderColor: "primary.main",\n      display: showSummaryBox ? "block" : "none",\n      transition: "all 0.3s ease"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    variant: "h6",\n    sx: {\n      color: "primary.main"\n    }\n  }, "Total TTC: ", calculateGrandTotal(specialLines).totalTTC, " \\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    variant: "contained",\n    color: "primary",\n    onClick: () => setShowSummaryBox(!showSummaryBox),\n    sx: {\n      position: "fixed",\n      bottom: 20,\n      right: showSummaryBox ? 320 : 20,\n      zIndex: 1001,\n      minWidth: "auto",\n      width: "40px",\n      height: "40px",\n      borderRadius: "50%",\n      boxShadow: "0 2px 10px rgba(0,0,0,0.2)",\n      transition: "all 0.3s ease",\n      "&:hover": {\n        transform: "scale(1.1)"\n      }\n    }\n  }, showSummaryBox ? "👁️" : "📊"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_DevisModal__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    open: openDevisModal,\n    handleClose: () => setOpenDevisModal(false),\n    devisData: devisModalData,\n    handleChange: e => setDevisModalData({\n      ...devisModalData,\n      [e.target.name]: e.target.value\n    }),\n    handleSubmit: handleDevisModalSubmit\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_CreatePartieModal__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    open: openCreatePartieModal,\n    handleClose: () => {\n      setOpenCreatePartieModal(false);\n      setEditData(null);\n    },\n    onPartieCreated: handlePartieCreated,\n    editData: editData,\n    onTauxFixeUpdated: handleTauxFixeUpdated\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_EditModal__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    open: editModalOpen,\n    handleClose: () => setEditModalOpen(false),\n    data: itemToEdit,\n    handleSave: handleSaveEdit,\n    parties: parties,\n    sousParties: sousParties,\n    allLignesDetails: allLignesDetails\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ClientInfoModal__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: showClientInfoModal,\n    onClose: () => setShowClientInfoModal(false),\n    onSubmit: handleClientInfoSubmit\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SocieteInfoModal__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    open: showSocieteInfoModal,\n    onClose: () => setShowSocieteInfoModal(false),\n    onSubmit: handleSocieteInfoSubmit\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ChantierForm__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: showChantierForm,\n    onClose: () => setShowChantierForm(false),\n    onSubmit: chantierData => {\n      setPendingChantierData(prev => ({\n        ...prev,\n        chantier: {\n          ...prev.chantier,\n          ...chantierData\n        }\n      }));\n      setSelectedChantierId(-1);\n      setShowChantierForm(false);\n    },\n    societeId: selectedSocieteId,\n    chantierData: pendingChantierData.chantier\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SpecialLineModal__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    open: openSpecialLineModal,\n    onClose: () => setOpenSpecialLineModal(false),\n    onSave: handleSpecialLineSave,\n    currentSpecialLines: currentSpecialLineTarget.type === "global" ? specialLines.global : ((_specialLines$current = specialLines[currentSpecialLineTarget.type]) === null || _specialLines$current === void 0 ? void 0 : _specialLines$current[currentSpecialLineTarget.id]) || [],\n    onDelete: index => handleDeleteSpecialLineFromOverview(currentSpecialLineTarget.type, index)\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      my: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SpecialLinesOverview__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    specialLines: specialLines,\n    onDelete: handleDeleteSpecialLineFromOverview\n  })));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ModificationDevis);\n\n//# sourceURL=webpack://frontend/./src/components/ModificationDevis.js?')},"./src/components/NewChantierModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Stepper/Stepper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Step/Step.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/StepLabel/StepLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _ChantierDetailsModal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ChantierDetailsModal */ "./src/components/ChantierDetailsModal.js");\n/* harmony import */ var _ChantierForm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ChantierForm */ "./src/components/ChantierForm.js");\n/* harmony import */ var _ClientInfoModal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ClientInfoModal */ "./src/components/ClientInfoModal.js");\n/* harmony import */ var _SocieteInfoModal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SocieteInfoModal */ "./src/components/SocieteInfoModal.js");\n\n\n\n\n\n\n\nconst NewChantierModal = ({\n  open,\n  onClose,\n  onSuccess\n}) => {\n  const [activeStep, setActiveStep] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [showClientInfoModal, setShowClientInfoModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n  const [showSocieteInfoModal, setShowSocieteInfoModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showChantierForm, setShowChantierForm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showChantierDetailsModal, setShowChantierDetailsModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [chantierBasicData, setChantierBasicData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [clientData, setClientData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    name: "",\n    surname: "",\n    client_mail: "",\n    phone_Number: "",\n    societe: {\n      nom_societe: "",\n      ville_societe: "",\n      rue_societe: "",\n      codepostal_societe: ""\n    }\n  });\n  const [pendingData, setPendingData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    client: null,\n    societe: null,\n    chantier: null,\n    chantierDetails: null\n  });\n  const handleChange = (e, type) => {\n    const {\n      name,\n      value\n    } = e.target;\n    if (type === "client") {\n      setClientData({\n        ...clientData,\n        [name]: value\n      });\n    } else if (type === "societe") {\n      setClientData({\n        ...clientData,\n        societe: {\n          ...clientData.societe,\n          [name]: value\n        }\n      });\n    }\n  };\n  const handleClientInfoSubmit = async () => {\n    try {\n      const clientResponse = await axios__WEBPACK_IMPORTED_MODULE_5__["default"].get("/api/client/", {\n        params: {\n          client_mail: clientData.client_mail.trim()\n        }\n      });\n      let clientInfo = {\n        name: clientData.name,\n        surname: clientData.surname,\n        client_mail: clientData.client_mail,\n        phone_Number: parseInt(clientData.phone_Number)\n      };\n      if (clientResponse.data.length > 0 && clientResponse.data[0].client_mail === clientData.client_mail.trim()) {\n        const existingClient = clientResponse.data[0];\n        clientInfo = {\n          name: existingClient.name,\n          surname: existingClient.surname,\n          client_mail: existingClient.client_mail,\n          phone_Number: existingClient.phone_Number\n        };\n        alert("Ce client existe déjà, nous allons utiliser ses informations existantes.");\n      }\n      setPendingData(prev => ({\n        ...prev,\n        client: clientInfo\n      }));\n      setClientData(prev => ({\n        ...prev,\n        ...clientInfo\n      }));\n      setShowClientInfoModal(false);\n      setShowSocieteInfoModal(true);\n      setActiveStep(1);\n    } catch (error) {\n      console.error("Erreur lors de la vérification du client:", error);\n      alert("Erreur lors de la vérification du client");\n    }\n  };\n  const handleSocieteInfoSubmit = async () => {\n    try {\n      const societeResponse = await axios__WEBPACK_IMPORTED_MODULE_5__["default"].get("/api/societe/", {\n        params: {\n          nom_societe: clientData.societe.nom_societe.trim(),\n          client_name: pendingData.client.id\n        }\n      });\n      let societeInfo = {\n        ...clientData.societe\n      };\n      if (societeResponse.data.length > 0 && societeResponse.data[0].nom_societe === clientData.societe.nom_societe.trim() && societeResponse.data[0].client_name === pendingData.client.id) {\n        const existingSociete = societeResponse.data[0];\n        societeInfo = {\n          id: existingSociete.id,\n          nom_societe: existingSociete.nom_societe,\n          ville_societe: existingSociete.ville_societe,\n          rue_societe: existingSociete.rue_societe,\n          codepostal_societe: existingSociete.codepostal_societe\n        };\n        alert("Cette société existe déjà, nous allons utiliser ses informations existantes.");\n      }\n      setPendingData(prev => ({\n        ...prev,\n        societe: societeInfo\n      }));\n      setClientData(prev => ({\n        ...prev,\n        societe: societeInfo\n      }));\n      setShowSocieteInfoModal(false);\n      setShowChantierForm(true);\n      setActiveStep(2);\n    } catch (error) {\n      console.error("Erreur lors de la vérification de la société:", error);\n      alert("Erreur lors de la vérification de la société");\n    }\n  };\n  const handleChantierSubmit = basicChantierData => {\n    setPendingData(prev => ({\n      ...prev,\n      chantier: basicChantierData\n    }));\n    setShowChantierDetailsModal(true);\n    setActiveStep(3);\n  };\n  const handleChantierDetailsSubmit = async detailsData => {\n    try {\n      var _pendingData$client, _pendingData$societe;\n      // Convertir les valeurs numériques\n      const formattedDetailsData = {\n        ...detailsData,\n        montant_ttc: parseFloat(detailsData.montant_ttc) || null,\n        montant_ht: parseFloat(detailsData.montant_ht) || null,\n        cout_materiel: parseFloat(detailsData.cout_materiel) || null,\n        cout_main_oeuvre: parseFloat(detailsData.cout_main_oeuvre) || null,\n        cout_sous_traitance: parseFloat(detailsData.cout_sous_traitance) || null\n      };\n\n      // Création du client si nouveau\n      let clientId = (_pendingData$client = pendingData.client) === null || _pendingData$client === void 0 ? void 0 : _pendingData$client.id;\n      if (!clientId) {\n        const clientResponse = await axios__WEBPACK_IMPORTED_MODULE_5__["default"].post("/api/client/", pendingData.client);\n        clientId = clientResponse.data.id;\n      }\n\n      // Création de la société si nouvelle\n      let societeId = (_pendingData$societe = pendingData.societe) === null || _pendingData$societe === void 0 ? void 0 : _pendingData$societe.id;\n      if (!societeId) {\n        const societeResponse = await axios__WEBPACK_IMPORTED_MODULE_5__["default"].post("/api/societe/", {\n          ...pendingData.societe,\n          client_name: clientId\n        });\n        societeId = societeResponse.data.id;\n      }\n\n      // Création du chantier avec toutes les données\n      const chantierData = {\n        ...pendingData.chantier,\n        ...formattedDetailsData,\n        societe: societeId\n      };\n      console.log("Données du chantier à envoyer:", chantierData); // Pour le débogage\n\n      const chantierResponse = await axios__WEBPACK_IMPORTED_MODULE_5__["default"].post("/api/chantier/", chantierData);\n      onSuccess(chantierResponse.data);\n      handleMainModalClose();\n    } catch (error) {\n      var _error$response;\n      console.error("Erreur lors de la création:", error);\n      console.log("Données qui ont causé l\'erreur:", (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data); // Pour voir les détails de l\'erreur\n      alert("Erreur lors de la création");\n    }\n  };\n  const handleMainModalClose = () => {\n    setShowClientInfoModal(true);\n    setShowSocieteInfoModal(false);\n    setShowChantierForm(false);\n    setActiveStep(0);\n    setClientData({\n      name: "",\n      surname: "",\n      client_mail: "",\n      phone_Number: "",\n      societe: {\n        nom_societe: "",\n        ville_societe: "",\n        rue_societe: "",\n        codepostal_societe: ""\n      }\n    });\n    onClose();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    open: open,\n    onClose: handleMainModalClose,\n    maxWidth: "md",\n    fullWidth: true,\n    sx: {\n      top: "-700px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    sx: {\n      width: "100%"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, "Nouveau Chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    activeStep: activeStep\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "Client")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "Soci\\xE9t\\xE9")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "Chantier"))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ClientInfoModal__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    open: showClientInfoModal,\n    onClose: () => {\n      setShowClientInfoModal(false);\n      handleMainModalClose();\n    },\n    clientData: clientData,\n    onChange: handleChange,\n    onSubmit: handleClientInfoSubmit\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SocieteInfoModal__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    open: showSocieteInfoModal,\n    onClose: () => {\n      setShowSocieteInfoModal(false);\n      setShowClientInfoModal(true);\n      setActiveStep(0);\n    },\n    societeData: clientData.societe,\n    onChange: handleChange,\n    onSubmit: handleSocieteInfoSubmit\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ChantierForm__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: showChantierForm,\n    onClose: () => {\n      setShowChantierForm(false);\n      setShowSocieteInfoModal(true);\n      setActiveStep(1);\n    },\n    onSubmit: handleChantierSubmit\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ChantierDetailsModal__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: showChantierDetailsModal,\n    onClose: () => setShowChantierDetailsModal(false),\n    onSubmit: handleChantierDetailsSubmit,\n    initialData: chantierBasicData\n  })));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (NewChantierModal);\n\n//# sourceURL=webpack://frontend/./src/components/NewChantierModal.js?')},"./src/components/NewProductForm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Modal/Modal.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Autocomplete/Autocomplete.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-icons/fi */ "./node_modules/react-icons/fi/index.mjs");\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\n\n\n\n\nconst style = {\n  position: "absolute",\n  top: "50%",\n  left: "50%",\n  transform: "translate(-50%, -50%)",\n  width: 400,\n  bgcolor: "background.paper",\n  borderRadius: "8px",\n  boxShadow: 24,\n  p: 4\n};\nconst inputStyle = {\n  marginBottom: "1rem",\n  width: "100%"\n};\nconst NewProductForm = ({\n  open,\n  handleClose,\n  onAddProduct,\n  fournisseur\n}) => {\n  const [formData, setFormData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    code_produit: "",\n    designation: "",\n    fournisseur: fournisseur || "",\n    prix_unitaire: "",\n    unite: ""\n  });\n  const [errors, setErrors] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [fournisseurs, setFournisseurs] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    setFormData(prev => ({\n      ...prev,\n      fournisseur: fournisseur || ""\n    }));\n\n    // Générer automatiquement le code produit à l\'ouverture\n    if (open && (fournisseur || formData.fournisseur)) {\n      generateCodeProduit(fournisseur || formData.fournisseur);\n    }\n  }, [fournisseur, open]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!fournisseur && open) {\n      const fetchFournisseurs = async () => {\n        try {\n          const response = await axios__WEBPACK_IMPORTED_MODULE_1__["default"].get("/api/fournisseurs/");\n          setFournisseurs(response.data);\n        } catch (error) {\n          console.error("Erreur lors du chargement des fournisseurs:", error);\n        }\n      };\n      fetchFournisseurs();\n    }\n  }, [open, fournisseur]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ""\n      }));\n    }\n  };\n  const generateCodeProduit = async (fournisseurParam = null) => {\n    const fournisseurId = parseInt(fournisseurParam || formData.fournisseur);\n    if (!fournisseurId) {\n      // Si pas de fournisseur, on ne génère pas de code (silencieux)\n      return;\n    }\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_1__["default"].get(`/api/stock/latest_code?fournisseur_id=${fournisseurId}`);\n      const lastCode = response.data.last_code_produit || "0";\n      const nextCode = incrementCode(lastCode);\n      setFormData(prev => ({\n        ...prev,\n        code_produit: nextCode\n      }));\n      if (errors.code_produit) {\n        setErrors(prev => ({\n          ...prev,\n          code_produit: ""\n        }));\n      }\n    } catch (error) {\n      console.error("Erreur lors de la génération du code:", error);\n      // En mode automatique, on ne montre pas d\'erreur à l\'utilisateur\n    }\n  };\n  const incrementCode = lastCode => {\n    const codeNumber = parseInt(lastCode, 10) + 1;\n    return codeNumber.toString().padStart(lastCode.length || 3, "0");\n  };\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.code_produit) newErrors.code_produit = "Le code produit est requis";\n    if (!formData.designation) newErrors.designation = "La désignation est requise";\n    if (!formData.unite) newErrors.unite = "L\'unité est requise";\n    if (!formData.prix_unitaire || formData.prix_unitaire <= 0) {\n      newErrors.prix_unitaire = "Le prix unitaire doit être supérieur à 0";\n    }\n    if (!fournisseur && !formData.fournisseur) newErrors.fournisseur = "Le fournisseur est requis";\n    return newErrors;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const validationErrors = validateForm();\n    if (Object.keys(validationErrors).length > 0) {\n      setErrors(validationErrors);\n      return;\n    }\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_1__["default"].post("/api/stock/", {\n        ...formData,\n        fournisseur: parseInt(fournisseur) || parseInt(formData.fournisseur) || null,\n        prix_unitaire: parseFloat(formData.prix_unitaire)\n      });\n      onAddProduct(response.data);\n      if (window.refreshStockList) {\n        window.refreshStockList();\n      }\n      handleClose();\n      setFormData({\n        code_produit: "",\n        designation: "",\n        fournisseur: fournisseur || "",\n        prix_unitaire: "",\n        unite: ""\n      });\n    } catch (error) {\n      var _error$response;\n      console.error("Erreur lors de l\'ajout du produit:", error);\n      if ((_error$response = error.response) !== null && _error$response !== void 0 && (_error$response = _error$response.data) !== null && _error$response !== void 0 && _error$response.non_field_errors) {\n        const errorMessage = error.response.data.non_field_errors[0];\n        if (errorMessage.includes("code_produit, fournisseur must make a unique set")) {\n          setErrors({\n            code_produit: "Ce code produit existe déjà pour ce fournisseur. Veuillez choisir un code différent."\n          });\n        } else {\n          setErrors({\n            submit: errorMessage\n          });\n        }\n      } else {\n        setErrors({\n          submit: "Une erreur est survenue lors de l\'ajout du produit"\n        });\n      }\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: open,\n    onClose: handleClose,\n    "aria-labelledby": "modal-nouveau-produit"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: style\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "center",\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "h6",\n    component: "h2"\n  }, "Nouveau Produit"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    onClick: handleClose,\n    size: "small"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiX, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("form", {\n    onSubmit: handleSubmit\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    name: "code_produit",\n    label: "Code Produit (g\\xE9n\\xE9r\\xE9 automatiquement)",\n    value: formData.code_produit,\n    onChange: handleChange,\n    error: !!errors.code_produit,\n    helperText: errors.code_produit || "Le code est pré-rempli automatiquement, vous pouvez le modifier",\n    sx: inputStyle\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    name: "designation",\n    label: "D\\xE9signation",\n    value: formData.designation,\n    onChange: handleChange,\n    error: !!errors.designation,\n    helperText: errors.designation,\n    sx: inputStyle\n  }), !fournisseur && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    freeSolo: true,\n    options: fournisseurs,\n    getOptionLabel: option => typeof option === "object" ? option.name : option,\n    value: fournisseurs.find(f => f.id === parseInt(formData.fournisseur)) || formData.fournisseur,\n    onChange: (event, newValue) => {\n      const newFournisseurId = typeof newValue === "object" ? newValue.id : newValue || "";\n      setFormData(prev => ({\n        ...prev,\n        fournisseur: newFournisseurId\n      }));\n      // Générer un nouveau code quand on change de fournisseur\n      if (newFournisseurId && typeof newValue === "object") {\n        generateCodeProduit(newFournisseurId);\n      }\n    },\n    onInputChange: (event, newInputValue) => {\n      // Permettre la saisie libre pour les nouveaux fournisseurs\n      if (!fournisseurs.find(f => f.name === newInputValue)) {\n        setFormData(prev => ({\n          ...prev,\n          fournisseur: newInputValue\n        }));\n      }\n    },\n    renderInput: params => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], _extends({}, params, {\n      name: "fournisseur",\n      label: "Fournisseur",\n      error: !!errors.fournisseur,\n      helperText: errors.fournisseur,\n      sx: inputStyle\n    }))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    name: "prix_unitaire",\n    label: "Prix Unitaire",\n    type: "number",\n    value: formData.prix_unitaire,\n    onChange: handleChange,\n    error: !!errors.prix_unitaire,\n    helperText: errors.prix_unitaire,\n    InputProps: {\n      inputProps: {\n        min: 0,\n        step: "0.01"\n      }\n    },\n    sx: inputStyle\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    name: "unite",\n    label: "Unit\\xE9",\n    value: formData.unite,\n    onChange: handleChange,\n    error: !!errors.unite,\n    helperText: errors.unite,\n    sx: inputStyle\n  }), errors.submit && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    color: "error",\n    sx: {\n      mt: 1,\n      mb: 1\n    }\n  }, errors.submit), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "flex-end",\n      gap: 2,\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    variant: "outlined",\n    onClick: handleClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    variant: "contained",\n    type: "submit",\n    sx: {\n      backgroundColor: "rgba(27, 120, 188, 1)",\n      "&:hover": {\n        backgroundColor: "rgba(27, 120, 188, 0.8)"\n      }\n    }\n  }, "Ajouter")))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (NewProductForm);\n\n//# sourceURL=webpack://frontend/./src/components/NewProductForm.js?')},"./src/components/PaiementsSousTraitantPage.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");\n/* harmony import */ var _TableauPaiementSousTraitant__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TableauPaiementSousTraitant */ "./src/components/TableauPaiementSousTraitant.js");\n\n\n\nconst PaiementsSousTraitantPage = () => {\n  const {\n    chantierId,\n    sousTraitantId\n  } = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_2__.useParams)();\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_TableauPaiementSousTraitant__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    chantierId: chantierId,\n    sousTraitantId: sousTraitantId\n  });\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PaiementsSousTraitantPage);\n\n//# sourceURL=webpack://frontend/./src/components/PaiementsSousTraitantPage.js?')},"./src/components/PlanningContainer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputLabel/InputLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material_styles__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material/styles */ "./node_modules/@mui/material/styles/styled.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dayjs */ "./node_modules/dayjs/dayjs.min.js");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/universalDriveGenerator */ "./src/utils/universalDriveGenerator.js");\n/* harmony import */ var _LaborCostsSummary__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./LaborCostsSummary */ "./src/components/LaborCostsSummary.js");\n/* harmony import */ var _PlanningHebdoAgent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./PlanningHebdoAgent */ "./src/components/PlanningHebdoAgent.js");\n\n\n\n\n\n\n\n\nconst StyledFormControl = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_5__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"])({\n  minWidth: 150,\n  marginRight: "20px"\n});\nconst ControlsContainer = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_5__["default"])("div")({\n  display: "flex",\n  alignItems: "center",\n  justifyContent: "flex-start",\n  padding: "15px",\n  backgroundColor: "#f5f5f5",\n  borderRadius: "4px",\n  marginBottom: "20px",\n  marginTop: "20px",\n  width: "fit-content"\n});\nconst SelectGroup = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_5__["default"])("div")({\n  display: "flex",\n  gap: "20px",\n  marginRight: "40px"\n});\nconst ButtonGroup = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_5__["default"])("div")({\n  display: "flex",\n  gap: "10px"\n});\nconst PlanningContainer = () => {\n  var _agents$find;\n  const [selectedWeek, setSelectedWeek] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(dayjs__WEBPACK_IMPORTED_MODULE_0___default()().isoWeek());\n  const [selectedYear, setSelectedYear] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(dayjs__WEBPACK_IMPORTED_MODULE_0___default()().year());\n  const [selectedAgentId, setSelectedAgentId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const [schedule, setSchedule] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n  const [laborCosts, setLaborCosts] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n  const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [showCostsSummary, setShowCostsSummary] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [agents, setAgents] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n  const [isLaborCostsSummaryOpen, setIsLaborCostsSummaryOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [isCopyModalOpen, setIsCopyModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [targetAgentId, setTargetAgentId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const [targetWeek, setTargetWeek] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(dayjs__WEBPACK_IMPORTED_MODULE_0___default()().isoWeek());\n  const [targetYear, setTargetYear] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(dayjs__WEBPACK_IMPORTED_MODULE_0___default()().year());\n  const [isCopying, setIsCopying] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [selectedMonth, setSelectedMonth] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(dayjs__WEBPACK_IMPORTED_MODULE_0___default()().month() + 1);\n  const [selectedReportYear, setSelectedReportYear] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(dayjs__WEBPACK_IMPORTED_MODULE_0___default()().year());\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const fetchAgents = async () => {\n      try {\n        const response = await axios__WEBPACK_IMPORTED_MODULE_7__["default"].get("/api/agent/");\n        setAgents(response.data);\n        if (response.data.length > 0) {\n          setSelectedAgentId(response.data[0].id); // Sélectionner le premier agent par défaut\n        }\n      } catch (error) {\n        console.error("Erreur lors de la récupération des agents :", error);\n      }\n    };\n    fetchAgents();\n  }, []);\n  const handleSelectionChange = (agentId, week, year) => {\n    setSelectedAgentId(agentId);\n    setSelectedWeek(week);\n    setSelectedYear(year);\n  };\n  const handleTargetAgentChange = e => {\n    setTargetAgentId(Number(e.target.value));\n  };\n  const generateWeeks = () => {\n    return Array.from({\n      length: 53\n    }, (_, i) => i + 1);\n  };\n  const generateYears = () => {\n    const currentYear = dayjs__WEBPACK_IMPORTED_MODULE_0___default()().year();\n    const minYear = 2023;\n    const maxYear = currentYear + 2;\n    return Array.from({\n      length: maxYear - minYear + 1\n    }, (_, i) => maxYear - i);\n  };\n  const generateMonths = () => {\n    return [{\n      value: 1,\n      label: "Janvier"\n    }, {\n      value: 2,\n      label: "Février"\n    }, {\n      value: 3,\n      label: "Mars"\n    }, {\n      value: 4,\n      label: "Avril"\n    }, {\n      value: 5,\n      label: "Mai"\n    }, {\n      value: 6,\n      label: "Juin"\n    }, {\n      value: 7,\n      label: "Juillet"\n    }, {\n      value: 8,\n      label: "Août"\n    }, {\n      value: 9,\n      label: "Septembre"\n    }, {\n      value: 10,\n      label: "Octobre"\n    }, {\n      value: 11,\n      label: "Novembre"\n    }, {\n      value: 12,\n      label: "Décembre"\n    }];\n  };\n  const handleGenerateMonthlyReport = async () => {\n    try {\n      console.log(`🚀 NOUVEAU: Génération du rapport mensuel agents ${selectedMonth}/${selectedReportYear} vers le Drive...`);\n\n      // Utiliser le nouveau système universel\n      await (0,_utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_2__.generatePDFDrive)("rapport_agents", {\n        month: selectedMonth,\n        year: selectedReportYear\n      }, {\n        onSuccess: response => {\n          console.log("✅ NOUVEAU: Rapport mensuel généré avec succès:", response);\n        },\n        onError: error => {\n          console.error("❌ NOUVEAU: Erreur lors de la génération du rapport mensuel:", error);\n          alert(`❌ Erreur lors de la génération du rapport mensuel: ${error.message}`);\n        }\n      });\n    } catch (error) {\n      console.error("❌ NOUVEAU: Erreur lors de la génération du rapport mensuel:", error);\n      alert(`❌ Erreur lors de la génération du rapport mensuel: ${error.message}`);\n    }\n  };\n  const copySchedule = async () => {\n    setIsCopying(true);\n    try {\n      await axios__WEBPACK_IMPORTED_MODULE_7__["default"].post("/api/copy_schedule/", {\n        sourceAgentId: selectedAgentId,\n        targetAgentId: targetAgentId,\n        sourceWeek: selectedWeek,\n        targetWeek: targetWeek,\n        sourceYear: selectedYear,\n        targetYear: targetYear\n      });\n      alert("Planning copié avec succès!");\n      setIsCopyModalOpen(false);\n    } catch (error) {\n      console.error("Erreur lors de la copie du planning:", error);\n      alert("Erreur lors de la copie du planning");\n    } finally {\n      setIsCopying(false);\n    }\n  };\n  const updateLaborCosts = async (chantierId, hours) => {\n    try {\n      await axios__WEBPACK_IMPORTED_MODULE_7__["default"].post("/api/update_labor_costs/", {\n        agent_id: selectedAgentId,\n        chantier_id: chantierId,\n        week: selectedWeek,\n        year: selectedYear,\n        hours: hours\n      });\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour des coûts:", error);\n      throw error;\n    }\n  };\n  const handleScheduleUpdate = async (updatedSchedule, chantierId, hoursChange) => {\n    try {\n      // Mise à jour du planning\n      await axios__WEBPACK_IMPORTED_MODULE_7__["default"].post("/api/update_schedule/", {\n        agent_id: selectedAgentId,\n        week: selectedWeek,\n        year: selectedYear,\n        schedule: updatedSchedule[selectedAgentId]\n      });\n\n      // Mise à jour des coûts\n      await updateLaborCosts(chantierId, hoursChange);\n      setSchedule(updatedSchedule);\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour:", error);\n      alert("Une erreur est survenue lors de la mise à jour");\n    }\n  };\n  const handleCostsCalculated = async laborCosts => {\n    try {\n      const payload = {\n        agent_id: selectedAgentId,\n        week: selectedWeek,\n        year: selectedYear,\n        costs: laborCosts,\n        schedule: schedule[selectedAgentId] || {} // Ajout du planning détaillé pour l\'agent\n      };\n      console.log("Données envoyées à l\'API:", payload);\n      const response = await axios__WEBPACK_IMPORTED_MODULE_7__["default"].post("/api/save_labor_costs/", payload);\n      console.log("Réponse de l\'API:", response.data);\n    } catch (error) {\n      var _error$response;\n      console.error("Erreur détaillée:", (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n      console.error("Erreur lors de la sauvegarde des coûts:", error);\n    }\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!selectedAgentId || !selectedWeek || !selectedYear) return;\n\n    // Trouver l\'agent sélectionné pour connaître son type de paiement\n    const selectedAgent = agents.find(agent => agent.id === selectedAgentId);\n    const isAgentJournalier = (selectedAgent === null || selectedAgent === void 0 ? void 0 : selectedAgent.type_paiement) === "journalier";\n\n    // Calculer les heures par chantier pour l\'agent/semaine/année sélectionnés\n    const hoursPerChantier = {};\n    if (schedule[selectedAgentId]) {\n      Object.entries(schedule[selectedAgentId]).forEach(([hour, dayData]) => {\n        Object.entries(dayData).forEach(([day, chantier]) => {\n          let chantierName;\n\n          // Gérer le nouveau format d\'objet et l\'ancien format de chaîne\n          if (typeof chantier === "object" && chantier !== null) {\n            chantierName = chantier.chantierName;\n          } else {\n            chantierName = chantier;\n          }\n          if (chantierName && chantierName.trim() !== "") {\n            if (isAgentJournalier) {\n              // Pour les agents journaliers : Matin ou Après-midi = 0.5 jour = 4h\n              hoursPerChantier[chantierName] = (hoursPerChantier[chantierName] || 0) + 4;\n            } else {\n              // Pour les agents horaires : 1 heure par créneau\n              hoursPerChantier[chantierName] = (hoursPerChantier[chantierName] || 0) + 1;\n            }\n          }\n        });\n      });\n    }\n    const laborCosts = Object.entries(hoursPerChantier).map(([chantierName, hours]) => ({\n      chantier_name: chantierName,\n      hours: hours\n    }));\n\n    // Appeler la sauvegarde (même si laborCosts est vide)\n    handleCostsCalculated(laborCosts);\n    // eslint-disable-next-line\n  }, [schedule, selectedAgentId, selectedWeek, selectedYear, agents]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    className: "planning-container"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(ControlsContainer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(SelectGroup, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(StyledFormControl, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, "Agent"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: selectedAgentId || "",\n    onChange: e => handleSelectionChange(Number(e.target.value), selectedWeek, selectedYear),\n    label: "Agent"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: ""\n  }, "--S\\xE9lectionner un agent--"), agents.map(agent => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    key: agent.id,\n    value: agent.id\n  }, agent.name)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(StyledFormControl, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, "Semaine"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: selectedWeek,\n    onChange: e => handleSelectionChange(selectedAgentId, Number(e.target.value), selectedYear),\n    label: "Semaine"\n  }, Array.from({\n    length: 53\n  }, (_, i) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    key: i + 1,\n    value: i + 1\n  }, "Semaine ", i + 1)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(StyledFormControl, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, "Ann\\xE9e"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: selectedYear,\n    onChange: e => handleSelectionChange(selectedAgentId, selectedWeek, Number(e.target.value)),\n    label: "Ann\\xE9e"\n  }, generateYears().map(year => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    key: year,\n    value: year\n  }, year))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(ButtonGroup, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    variant: "contained",\n    onClick: () => setIsLaborCostsSummaryOpen(true),\n    sx: {\n      backgroundColor: "rgba(27, 120, 188, 1)",\n      "&:hover": {\n        backgroundColor: "rgba(27, 120, 188, 0.8)"\n      }\n    }\n  }, "R\\xE9sum\\xE9 des heures"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    variant: "outlined",\n    onClick: () => setIsCopyModalOpen(true),\n    sx: {\n      marginLeft: "20px",\n      backgroundColor: "#9c27b0",\n      color: "white",\n      borderColor: "#9c27b0",\n      "&:hover": {\n        backgroundColor: "#7b1fa2",\n        borderColor: "#9c27b0"\n      }\n    }\n  }, "Copier le Planning"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(ControlsContainer, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(SelectGroup, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(StyledFormControl, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, "Mois"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: selectedMonth,\n    onChange: e => setSelectedMonth(Number(e.target.value)),\n    label: "Mois"\n  }, generateMonths().map(month => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    key: month.value,\n    value: month.value\n  }, month.label)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(StyledFormControl, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, "Ann\\xE9e"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: selectedReportYear,\n    onChange: e => setSelectedReportYear(Number(e.target.value)),\n    label: "Ann\\xE9e"\n  }, generateYears().map(year => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    key: year,\n    value: year\n  }, year))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(ButtonGroup, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    variant: "contained",\n    onClick: handleGenerateMonthlyReport,\n    sx: {\n      backgroundColor: "#4caf50",\n      "&:hover": {\n        backgroundColor: "#45a049"\n      }\n    }\n  }, "G\\xE9n\\xE9rer Rapport Mensuel PDF"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_PlanningHebdoAgent__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    schedule: schedule,\n    selectedAgentId: selectedAgentId,\n    selectedWeek: selectedWeek,\n    selectedYear: selectedYear,\n    isLoading: isLoading,\n    setIsLoading: setIsLoading,\n    setSchedule: setSchedule,\n    setSelectedAgentId: setSelectedAgentId,\n    onCopyClick: () => setIsCopyModalOpen(true),\n    onSelectionChange: handleSelectionChange\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_LaborCostsSummary__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    schedule: schedule,\n    selectedAgentId: selectedAgentId,\n    isOpen: isLaborCostsSummaryOpen,\n    onClose: () => setIsLaborCostsSummaryOpen(false),\n    tauxHoraire: ((_agents$find = agents.find(agent => agent.id === selectedAgentId)) === null || _agents$find === void 0 ? void 0 : _agents$find.taux_Horaire) || 0,\n    onCostsCalculated: handleCostsCalculated\n  }), isCopyModalOpen && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    className: "modal"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    className: "modal-content"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("h2", null, "Copier le Planning vers un Autre Agent"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("label", {\n    htmlFor: "target-agent-select"\n  }, "S\\xE9lectionner un agent cible :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("select", {\n    id: "target-agent-select",\n    value: targetAgentId || "",\n    onChange: handleTargetAgentChange,\n    style: {\n      width: "100%",\n      padding: "8px",\n      marginTop: "10px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("option", {\n    value: ""\n  }, "--S\\xE9lectionner un agent cible--"), agents.filter(agent => agent.id !== selectedAgentId).map(agent => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("option", {\n    key: agent.id,\n    value: agent.id\n  }, agent.name))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("label", {\n    htmlFor: "target-year-select",\n    style: {\n      marginTop: "10px"\n    }\n  }, "S\\xE9lectionner une ann\\xE9e cible :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("select", {\n    id: "target-year-select",\n    value: targetYear,\n    onChange: e => setTargetYear(Number(e.target.value)),\n    style: {\n      width: "100%",\n      padding: "8px",\n      marginTop: "5px"\n    }\n  }, generateYears().map(year => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("option", {\n    key: year,\n    value: year\n  }, year))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("label", {\n    htmlFor: "target-week-select",\n    style: {\n      marginTop: "10px"\n    }\n  }, "S\\xE9lectionner une semaine cible :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("select", {\n    id: "target-week-select",\n    value: targetWeek,\n    onChange: e => setTargetWeek(Number(e.target.value)),\n    style: {\n      width: "100%",\n      padding: "8px",\n      marginTop: "5px"\n    }\n  }, generateWeeks().map(week => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("option", {\n    key: week,\n    value: week\n  }, "Semaine ", week))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("div", {\n    style: {\n      marginTop: "15px",\n      display: "flex",\n      justifyContent: "flex-end"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    variant: "contained",\n    onClick: copySchedule,\n    disabled: !targetAgentId || isCopying,\n    sx: {\n      backgroundColor: "rgba(27, 120, 188, 1)",\n      "&:hover": {\n        backgroundColor: "rgba(27, 120, 188, 0.8)"\n      }\n    }\n  }, isCopying ? "Copie en cours..." : "Copier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    variant: "contained",\n    onClick: () => setIsCopyModalOpen(false),\n    sx: {\n      backgroundColor: "#ccc",\n      color: "black",\n      "&:hover": {\n        backgroundColor: "#999"\n      }\n    }\n  }, "Annuler")))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PlanningContainer);\n\n//# sourceURL=webpack://frontend/./src/components/PlanningContainer.js?')},"./src/components/PlanningHebdoAgent.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_icons_material_Assignment__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/icons-material/Assignment */ "./node_modules/@mui/icons-material/Assignment.js");\n/* harmony import */ var _mui_icons_material_Delete__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/icons-material/Delete */ "./node_modules/@mui/icons-material/Delete.js");\n/* harmony import */ var _mui_icons_material_InfoOutlined__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/icons-material/InfoOutlined */ "./node_modules/@mui/icons-material/InfoOutlined.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/styles/styled.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Tooltip/Tooltip.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dayjs */ "./node_modules/dayjs/dayjs.min.js");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var dayjs_locale_fr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dayjs/locale/fr */ "./node_modules/dayjs/locale/fr.js");\n/* harmony import */ var dayjs_locale_fr__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dayjs_locale_fr__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var dayjs_plugin_isoWeek__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dayjs/plugin/isoWeek */ "./node_modules/dayjs/plugin/isoWeek.js");\n/* harmony import */ var dayjs_plugin_isoWeek__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(dayjs_plugin_isoWeek__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/universalDriveGenerator */ "./src/utils/universalDriveGenerator.js");\n/* harmony import */ var _static_css_planningHebdo_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./../../static/css/planningHebdo.css */ "./static/css/planningHebdo.css");\n/* harmony import */ var _LaborCostsSummary__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./LaborCostsSummary */ "./src/components/LaborCostsSummary.js");\n\n\n\n\n\n\n\n // Assurez-vous d\'importer la locale\n\n\n\n\n\ndayjs__WEBPACK_IMPORTED_MODULE_0___default().extend((dayjs_plugin_isoWeek__WEBPACK_IMPORTED_MODULE_2___default()));\ndayjs__WEBPACK_IMPORTED_MODULE_0___default().locale("fr"); // Définir la locale sur français\n\n// Styles personnalisés pour les boutons Material UI\nconst StyledButton = (0,_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"])(({\n  theme\n}) => ({\n  margin: "10px",\n  textTransform: "none",\n  fontWeight: 500\n}));\nconst PlanningHebdoAgent = ({\n  selectedAgentId,\n  selectedWeek,\n  selectedYear,\n  schedule,\n  isLoading,\n  setIsLoading,\n  setSchedule,\n  onCopyClick,\n  setSelectedAgentId,\n  onSelectionChange\n}) => {\n  var _agents$find;\n  const [agents, setAgents] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)([]);\n  const daysOfWeek = ["Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi", "Dimanche"];\n\n  // Déterminer le type d\'agent sélectionné\n  const selectedAgent = agents.find(agent => agent.id === selectedAgentId);\n  const isAgentJournalier = (selectedAgent === null || selectedAgent === void 0 ? void 0 : selectedAgent.type_paiement) === "journalier";\n\n  // Adapter les heures selon le type d\'agent\n  const hours = isAgentJournalier ? ["Matin", "Après-midi"] : Array.from({\n    length: 17\n  }, (_, i) => `${i + 6}:00`); // Heures de 6h à 22h\n\n  // Fonction pour formater l\'affichage des heures (uniquement pour l\'affichage)\n  const formatHourDisplay = hour => {\n    if (isAgentJournalier) {\n      return hour; // "Matin" ou "Après-midi" restent inchangés\n    }\n    // Pour les agents horaires, convertir "6:00" en "6h-7h"\n    const hourNum = parseInt(hour.split(\':\')[0]);\n    return `${hourNum}h-${hourNum + 1}h`;\n  };\n\n  // Fonction pour vérifier si c\'est l\'heure de pause (12h-13h)\n  const isPauseHour = hour => {\n    if (isAgentJournalier) {\n      return false; // Pas de pause pour les agents journaliers\n    }\n    return hour === "12:00"; // Heure de pause pour tous les agents horaires\n  };\n  const [events, setEvents] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)([]);\n  const [selectedCells, setSelectedCells] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)([]);\n  const [lastSelectedCell, setLastSelectedCell] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n  const [chantiers, setChantiers] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)([]); // Nouvel état pour les chantiers\n  const [isChantierModalOpen, setIsChantierModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false); // État pour le modal\n  const [selectedChantier, setSelectedChantier] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null); // Chantier sélectionné\n  const [isSav, setIsSav] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false); // État pour la checkbox SAV\n\n  // Nouvel état pour le modal de copie\n  const [targetAgentId, setTargetAgentId] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n  const [targetWeek, setTargetWeek] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(selectedWeek);\n  const [targetYear, setTargetYear] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(selectedYear);\n  const [isCopyModalOpen, setIsCopyModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  const [isCopying, setIsCopying] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  const [showCostsSummary, setShowCostsSummary] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  const currentYear = dayjs__WEBPACK_IMPORTED_MODULE_0___default()().year();\n  const currentWeek = dayjs__WEBPACK_IMPORTED_MODULE_0___default()().isoWeek();\n  const minYear = 2023; // adapte cette valeur à ton année de début\n  const isFirstWeek = selectedYear === minYear && selectedWeek === 1;\n  const isLastWeek = selectedWeek === 52; // ou 53 si tu utilises 53 semaines\n\n  // Fonction utilitaire pour récupérer le nom du chantier\n  const getChantierName = chantierId => {\n    const chantier = chantiers.find(c => c.id === chantierId);\n    return chantier ? chantier.chantier_name : `Chantier ${chantierId}`;\n  };\n\n  // Générer une liste d\'années\n  const generateYears = () => {\n    const currentYear = dayjs__WEBPACK_IMPORTED_MODULE_0___default()().year();\n    const years = [];\n    const minYear = 2023; // adapte à ton année de début\n    const maxYear = currentYear + 2; // autorise 2 ans dans le futur\n    for (let i = maxYear; i >= minYear; i--) {\n      years.push(i);\n    }\n    return years;\n  };\n\n  // Générer une liste de semaines\n  const generateWeeks = () => {\n    const weeks = [];\n    for (let i = 1; i <= 53; i++) {\n      weeks.push(i);\n    }\n    return weeks;\n  };\n\n  // Fonction pour récupérer les agents\n  const fetchAgents = async () => {\n    setIsLoading(true);\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_9__["default"].get("/api/agent/");\n      setAgents(response.data);\n      if (response.data.length > 0) {\n        setSelectedAgentId(response.data[0].id);\n      }\n    } catch (error) {\n      console.error("Erreur lors de la récupération des agents :", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    fetchAgents();\n  }, []);\n\n  // Récupérer les chantiers depuis l\'API\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    const fetchChantiers = async () => {\n      try {\n        const response = await axios__WEBPACK_IMPORTED_MODULE_9__["default"].get("/api/chantier/"); // URL de votre API pour les chantiers\n        setChantiers(response.data);\n      } catch (error) {\n        console.error("Erreur lors de la récupération des chantiers :", error);\n      }\n    };\n    fetchChantiers();\n  }, []);\n\n  // Charger les plannings et les événements lorsqu\'un agent, une semaine ou une année est sélectionné\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    const fetchData = async () => {\n      setIsLoading(true);\n      try {\n        // Attendre que les chantiers soient chargés avant de charger le planning\n        if (selectedAgentId && selectedWeek && selectedYear && chantiers.length > 0) {\n          // Récupérer le planning\n          const scheduleResponse = await axios__WEBPACK_IMPORTED_MODULE_9__["default"].get(`/api/get_schedule/?agent=${selectedAgentId}&week=${selectedWeek}&year=${selectedYear}`);\n\n          // Initialiser scheduleData avec toutes les heures et jours par défaut\n          const scheduleData = {};\n          hours.forEach(hour => {\n            scheduleData[hour] = {};\n            daysOfWeek.forEach(day => {\n              scheduleData[hour][day] = "";\n            });\n          });\n\n          // Remplir scheduleData avec les données de l\'API\n          scheduleResponse.data.forEach((item, index) => {\n            let formattedHour;\n\n            // Adapter le formatage selon le type d\'agent\n            if (isAgentJournalier) {\n              // Pour les agents journaliers, item.hour est déjà "Matin" ou "Après-midi"\n              formattedHour = item.hour;\n            } else {\n              // Pour les agents horaires, formater l\'heure au format "H:mm"\n              // Essayer plusieurs formats pour être compatible avec différents formats d\'heure\n              let parsedHour = dayjs__WEBPACK_IMPORTED_MODULE_0___default()(item.hour, "H:mm"); // Format "8:00"\n              if (!parsedHour.isValid()) {\n                parsedHour = dayjs__WEBPACK_IMPORTED_MODULE_0___default()(item.hour, "HH:mm"); // Format "08:00"\n              }\n              if (!parsedHour.isValid()) {\n                parsedHour = dayjs__WEBPACK_IMPORTED_MODULE_0___default()(item.hour, "HH:mm:ss"); // Format "08:00:00"\n              }\n              if (parsedHour.isValid()) {\n                formattedHour = parsedHour.format("H:mm");\n              } else {\n                // Si aucun format ne marche, utiliser directement la valeur\n                console.warn(`Impossible de parser l\'heure "${item.hour}", utilisation directe`);\n                formattedHour = item.hour;\n              }\n            }\n            if (scheduleData[formattedHour] && daysOfWeek.includes(item.day)) {\n              scheduleData[formattedHour][item.day] = item.chantier_id ? {\n                chantierName: getChantierName(item.chantier_id),\n                isSav: item.is_sav || false\n              } : "";\n            }\n          });\n\n          // Récupérer les événements de la semaine\n          const startOfWeek = dayjs__WEBPACK_IMPORTED_MODULE_0___default()().year(selectedYear).isoWeek(selectedWeek).startOf("isoWeek");\n          const endOfWeek = startOfWeek.add(6, "day").endOf("day");\n          const eventsResponse = await axios__WEBPACK_IMPORTED_MODULE_9__["default"].get("/api/events/", {\n            params: {\n              agent_id: selectedAgentId,\n              start_date: startOfWeek.format("YYYY-MM-DD"),\n              end_date: endOfWeek.format("YYYY-MM-DD")\n            }\n          });\n\n          // Remplacer le filtrage des événements par :\n          const eventsData = eventsResponse.data.filter(event => event.event_type === "absence" || event.event_type === "conge");\n\n          // Identifier les jours avec événements A ou C pour cet agent spécifique\n          const joursAvecEvents = eventsData.map(event => dayjs__WEBPACK_IMPORTED_MODULE_0___default()(event.start_date).format("DD/MM/YYYY"));\n\n          // Supprimer les assignations pour les jours avec événements A ou C\n          // SEULEMENT pour l\'agent sélectionné qui a ces événements\n          if (joursAvecEvents.length > 0) {\n            joursAvecEvents.forEach(date => {\n              daysOfWeek.forEach((day, index) => {\n                const dateOfDay = startOfWeek.add(index, "day").format("DD/MM/YYYY");\n                if (dateOfDay === date) {\n                  hours.forEach(hour => {\n                    scheduleData[hour][day] = ""; // Supprimer l\'assignation\n                  });\n                }\n              });\n            });\n          } else {}\n\n          // Mettre à jour le planning\n          setSchedule(prevSchedule => ({\n            ...prevSchedule,\n            [selectedAgentId]: {\n              ...scheduleData\n            }\n          }));\n\n          // Mettre à jour les événements\n          setEvents(eventsData);\n        }\n      } catch (error) {\n        console.error("Erreur lors de la récupération des données :", error);\n        alert("Erreur lors de la récupération du planning ou des événements. Consultez la console pour plus de détails.");\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchData();\n  }, [selectedAgentId, selectedWeek, selectedYear, chantiers]);\n\n  // Fonction pour générer les dates de la semaine\n  const getDatesOfWeek = weekNumber => {\n    const startOfWeek = dayjs__WEBPACK_IMPORTED_MODULE_0___default()().year(selectedYear).isoWeek(weekNumber).startOf("isoWeek");\n    return daysOfWeek.map((_, index) => startOfWeek.add(index, "day").format("DD/MM/YYYY"));\n  };\n\n  // Fonction pour calculer une plage de cellules\n  const getCellRange = (startCell, endCell) => {\n    if (!startCell || !endCell) {\n      return [];\n    }\n    const startHourIndex = hours.indexOf(startCell.hour);\n    const endHourIndex = hours.indexOf(endCell.hour);\n    const startDayIndex = daysOfWeek.indexOf(startCell.day);\n    const endDayIndex = daysOfWeek.indexOf(endCell.day);\n\n    // Vérification que les indices sont valides\n    if (startHourIndex === -1 || endHourIndex === -1 || startDayIndex === -1 || endDayIndex === -1) {\n      return [endCell]; // Retourner au moins la cellule de fin\n    }\n    const minHour = Math.min(startHourIndex, endHourIndex);\n    const maxHour = Math.max(startHourIndex, endHourIndex);\n    const minDay = Math.min(startDayIndex, endDayIndex);\n    const maxDay = Math.max(startDayIndex, endDayIndex);\n    const range = [];\n    for (let h = minHour; h <= maxHour; h++) {\n      for (let d = minDay; d <= maxDay; d++) {\n        if (hours[h] && daysOfWeek[d]) {\n          range.push({\n            hour: hours[h],\n            day: daysOfWeek[d]\n          });\n        }\n      }\n    }\n    return range;\n  };\n\n  // Double-clic pour ouvrir directement le modal\n  const handleCellDoubleClick = (hour, day, event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    const newCell = {\n      hour,\n      day\n    };\n    setSelectedCells([newCell]);\n    setLastSelectedCell(newCell);\n    openChantierModal();\n  };\n\n  // Gestionnaire pour onMouseDown pour capturer les modificateurs plus tôt\n  const handleCellMouseDown = (hour, day, event) => {\n    // Empêcher la sélection de texte\n    event.preventDefault();\n    event.stopPropagation();\n\n    // Stocker les informations pour le mouseup\n    const cellInfo = {\n      hour,\n      day,\n      ctrlKey: event.ctrlKey,\n      metaKey: event.metaKey,\n      shiftKey: event.shiftKey,\n      button: event.button\n    };\n\n    // Stocker dans une ref ou variable temporaire\n    window.tempCellInfo = cellInfo;\n  };\n\n  // Gestionnaire pour onMouseUp pour traiter la sélection\n  const handleCellMouseUp = (hour, day, event) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    // Récupérer les informations stockées\n    const cellInfo = window.tempCellInfo;\n    if (!cellInfo || cellInfo.hour !== hour || cellInfo.day !== day) {\n      return; // Pas le même élément\n    }\n\n    // Nettoyer\n    delete window.tempCellInfo;\n    const newCell = {\n      hour,\n      day\n    };\n    if (cellInfo.ctrlKey || cellInfo.metaKey) {\n      // Ctrl/Cmd + clic : ajouter/supprimer de la sélection\n\n      setSelectedCells(prev => {\n        const exists = prev.some(cell => cell.hour === newCell.hour && cell.day === newCell.day);\n        if (exists) {\n          // Supprimer la cellule de la sélection\n\n          return prev.filter(cell => !(cell.hour === newCell.hour && cell.day === newCell.day));\n        } else {\n          // Ajouter la cellule à la sélection\n\n          setLastSelectedCell(newCell);\n          return [...prev, newCell];\n        }\n      });\n    } else if (cellInfo.shiftKey && lastSelectedCell) {\n      // Shift + clic : sélection de plage depuis la dernière cellule sélectionnée\n      const range = getCellRange(lastSelectedCell, newCell);\n      setSelectedCells(range);\n      // Ne pas changer lastSelectedCell pour permettre des extensions de sélection\n    } else if (cellInfo.shiftKey && !lastSelectedCell) {\n      // Shift sans cellule de référence - traiter comme un clic simple\n\n      setSelectedCells([newCell]);\n      setLastSelectedCell(newCell);\n    } else {\n      // Clic simple : nouvelle sélection\n\n      setSelectedCells([newCell]);\n      setLastSelectedCell(newCell);\n    }\n  };\n\n  // Fonction pour valider la sélection et ouvrir le modal\n  const validateSelection = () => {\n    openChantierModal();\n  };\n\n  // Fonctions pour gérer le modal des chantiers\n  const openChantierModal = () => {\n    setIsChantierModalOpen(true);\n  };\n  const closeChantierModal = () => {\n    setIsChantierModalOpen(false);\n    setSelectedChantier(null);\n    setSelectedCells([]); // Réinitialiser la sélection des cellules\n    setLastSelectedCell(null); // Réinitialiser la dernière cellule sélectionnée\n    setIsSav(false); // Réinitialiser la checkbox SAV\n  };\n\n  // Fonction pour gérer le changement d\'agent\n  const handleAgentChange = event => {\n    const agentId = Number(event.target.value);\n    onSelectionChange(agentId, selectedWeek, selectedYear); // Appel de la fonction pour mettre à jour le parent\n  };\n\n  // Fonction pour gérer le changement de semaine\n  const handleWeekChange = event => {\n    const week = Number(event.target.value);\n    onSelectionChange(selectedAgentId, week, selectedYear); // Appel de la fonction pour mettre à jour le parent\n  };\n\n  // Fonction pour gérer le changement d\'année\n  const handleYearChange = event => {\n    const year = Number(event.target.value);\n    onSelectionChange(selectedAgentId, selectedWeek, year); // Appel de la fonction pour mettre à jour le parent\n  };\n\n  // Fonction pour gérer le changement d\'agent cible\n  const handleTargetAgentChange = e => {\n    setTargetAgentId(Number(e.target.value));\n  };\n\n  // Fonction pour ouvrir le modal de copie\n  const openCopyModal = () => {\n    setTargetAgentId(null); // Réinitialiser l\'agent cible\n    setTargetWeek(selectedWeek);\n    setTargetYear(selectedYear);\n    setIsCopyModalOpen(true);\n  };\n\n  // Fonction pour fermer le modal de copie\n  const closeCopyModal = () => {\n    setIsCopyModalOpen(false);\n    setTargetAgentId(null);\n  };\n\n  // Fonction pour copier le planning\n  const copySchedule = async () => {\n    if (!targetAgentId) {\n      alert("Veuillez sélectionner un agent cible.");\n      return;\n    }\n    setIsCopying(true);\n    try {\n      await axios__WEBPACK_IMPORTED_MODULE_9__["default"].post("/api/copy_schedule/", {\n        sourceAgentId: selectedAgentId,\n        targetAgentId: targetAgentId,\n        sourceWeek: selectedWeek,\n        targetWeek: targetWeek,\n        sourceYear: selectedYear,\n        targetYear: targetYear\n      });\n      alert("Planning copié avec succès!");\n      closeCopyModal();\n    } catch (error) {\n      console.error("Erreur lors de la copie du planning:", error);\n      alert("Erreur lors de la copie du planning. Consultez la console pour plus de détails.");\n    } finally {\n      setIsCopying(false);\n    }\n  };\n\n  // Fonction pour assigner un chantier aux cellules sélectionnées\n  const assignChantier = async () => {\n    if (selectedCells.length === 0) {\n      alert("Veuillez sélectionner au moins une cellule.");\n      return;\n    }\n    if (!selectedChantier) {\n      alert("Veuillez sélectionner un chantier.");\n      return;\n    }\n    try {\n      // Filtrer les cellules pour exclure les heures de pause\n      const validCells = selectedCells.filter(cell => !isPauseHour(cell.hour));\n      const excludedPauseCells = selectedCells.filter(cell => isPauseHour(cell.hour));\n      if (validCells.length === 0) {\n        alert("Aucune cellule valide sélectionnée (les heures de pause sont automatiquement exclues).");\n        return;\n      }\n\n      // Afficher un message informatif si des heures de pause ont été exclues\n      if (excludedPauseCells.length > 0) {\n        console.log(`ℹ️ ${excludedPauseCells.length} heure(s) de pause exclue(s) de l\'assignation`);\n      }\n      const updates = validCells.map(cell => {\n        // Calculer la date réelle du créneau\n        const startOfWeek = dayjs__WEBPACK_IMPORTED_MODULE_0___default()().year(selectedYear).isoWeek(selectedWeek).startOf("isoWeek");\n        const dayIndex = daysOfWeek.indexOf(cell.day);\n        const date = startOfWeek.add(dayIndex, "day");\n        const weekISO = date.isoWeek();\n        const yearISO = date.isoWeekYear();\n        const update = {\n          agentId: selectedAgentId,\n          week: weekISO,\n          year: yearISO,\n          day: cell.day,\n          hour: cell.hour,\n          chantierId: selectedChantier.id,\n          isSav: isSav // Ajouter le paramètre SAV\n        };\n        return update;\n      });\n      const response = await axios__WEBPACK_IMPORTED_MODULE_9__["default"].post("/api/assign_chantier/", updates);\n\n      // Mettre à jour le state schedule localement\n      setSchedule(prevSchedule => {\n        const newSchedule = {\n          ...prevSchedule\n        };\n        if (!newSchedule[selectedAgentId]) {\n          newSchedule[selectedAgentId] = {};\n        }\n        selectedCells.forEach(cell => {\n          if (!newSchedule[selectedAgentId][cell.hour]) {\n            newSchedule[selectedAgentId][cell.hour] = {};\n          }\n          newSchedule[selectedAgentId][cell.hour][cell.day] = {\n            chantierName: selectedChantier.chantier_name,\n            isSav: isSav\n          };\n        });\n        return newSchedule;\n      });\n\n      // Réinitialiser la sélection\n      setSelectedCells([]);\n      setLastSelectedCell(null);\n      closeChantierModal();\n\n      // Recalculer les coûts de main d\'œuvre pour tout le mois (nouveau endpoint)\n      const {\n        month,\n        year\n      } = getCurrentMonthYear();\n      await axios__WEBPACK_IMPORTED_MODULE_9__["default"].post("/api/recalculate_labor_costs_month/", {\n        year,\n        month\n      });\n    } catch (error) {\n      var _error$response;\n      console.error("Erreur lors de l\'assignation du chantier :", error);\n      const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 || (_error$response = _error$response.data) === null || _error$response === void 0 ? void 0 : _error$response.error) || error.message || "Erreur inconnue";\n      alert(`Erreur lors de l\'assignation du chantier: ${errorMessage}`);\n    }\n  };\n\n  // Nouvelle fonction de suppression\n  const deleteChantierAssignment = async () => {\n    if (selectedCells.length === 0) {\n      alert("Aucune cellule sélectionnée pour la suppression.");\n      return;\n    }\n    const confirmation = window.confirm(`Êtes-vous sûr de vouloir supprimer les assignations de ${selectedCells.length} cellule(s) sélectionnée(s) ?`);\n    if (!confirmation) return;\n\n    // Préparer les données à envoyer\n    const deletions = selectedCells.map(cell => {\n      // Calculer la date réelle du créneau\n      const startOfWeek = dayjs__WEBPACK_IMPORTED_MODULE_0___default()().year(selectedYear).isoWeek(selectedWeek).startOf("isoWeek");\n      const dayIndex = daysOfWeek.indexOf(cell.day);\n      const date = startOfWeek.add(dayIndex, "day");\n      const weekISO = date.isoWeek();\n      const yearISO = date.isoWeekYear();\n      const deletion = {\n        agentId: selectedAgentId,\n        week: weekISO,\n        year: yearISO,\n        day: cell.day,\n        hour: cell.hour\n      };\n      return deletion;\n    });\n    try {\n      const deleteResponse = await axios__WEBPACK_IMPORTED_MODULE_9__["default"].post("/api/delete_schedule/", deletions);\n\n      // Recalculer les coûts de main d\'œuvre pour tout le mois (nouveau endpoint)\n      const {\n        month,\n        year\n      } = getCurrentMonthYear();\n      await axios__WEBPACK_IMPORTED_MODULE_9__["default"].post("/api/recalculate_labor_costs_month/", {\n        year,\n        month\n      });\n\n      // Mettre à jour le state schedule localement\n      setSchedule(prevSchedule => {\n        const newSchedule = {\n          ...prevSchedule\n        };\n        if (!newSchedule[selectedAgentId]) {\n          newSchedule[selectedAgentId] = {};\n        }\n        selectedCells.forEach(cell => {\n          if (!newSchedule[selectedAgentId][cell.hour]) {\n            newSchedule[selectedAgentId][cell.hour] = {};\n          }\n          newSchedule[selectedAgentId][cell.hour][cell.day] = ""; // Vider l\'assignation\n        });\n        return newSchedule;\n      });\n\n      // Réinitialiser la sélection\n      setSelectedCells([]);\n      setLastSelectedCell(null);\n      closeChantierModal();\n      alert(`${selectedCells.length} assignation(s) supprimée(s) avec succès !`);\n    } catch (error) {\n      var _error$response2;\n      console.error("Erreur lors de la suppression des assignations :", error);\n      const errorMessage = ((_error$response2 = error.response) === null || _error$response2 === void 0 || (_error$response2 = _error$response2.data) === null || _error$response2 === void 0 ? void 0 : _error$response2.error) || error.message || "Erreur inconnue";\n      alert(`Erreur lors de la suppression des assignations: ${errorMessage}`);\n    }\n  };\n\n  // Fonction utilitaire pour générer une couleur unique par chantier\n  function getColorForChantier(chantierId) {\n    // Palette de couleurs (ajustable)\n    const palette = ["#1b78bc", "#e57373", "#81c784", "#ffd54f", "#ba68c8", "#4dd0e1", "#ff8a65", "#a1887f", "#90a4ae", "#f06292", "#7986cb", "#dce775", "#9575cd", "#ffb74d", "#aed581", "#64b5f6", "#fff176", "#4db6ac", "#f44336", "#8d6e63"];\n    if (!chantierId) return "#bdbdbd";\n    // Simple hash pour indexer la palette\n    let hash = 0;\n    const str = chantierId.toString();\n    for (let i = 0; i < str.length; i++) {\n      hash = str.charCodeAt(i) + ((hash << 5) - hash);\n    }\n    const idx = Math.abs(hash) % palette.length;\n    return palette[idx];\n  }\n\n  // Fonction pour déterminer le style des cellules\n  const getCellStyle = (hour, day, scheduleData) => {\n    // Vérifier si c\'est une heure de pause\n    if (isPauseHour(hour)) {\n      return "#e8e8e8"; // Gris clair doux pour les heures de pause\n    }\n\n    // Convertir le format de date pour la comparaison\n    const startOfWeek = dayjs__WEBPACK_IMPORTED_MODULE_0___default()().year(selectedYear).isoWeek(selectedWeek).startOf("isoWeek");\n    const dayIndex = daysOfWeek.indexOf(day) + 1; // Lundi = 1\n    const currentDate = startOfWeek.add(dayIndex - 1, "day").format("YYYY-MM-DD");\n\n    // Vérifier si un événement absence ou congé existe pour cette date\n    const hasEvent = events.find(event => {\n      const eventDate = dayjs__WEBPACK_IMPORTED_MODULE_0___default()(event.start_date).format("YYYY-MM-DD");\n      return eventDate === currentDate && (event.event_type === "absence" || event.event_type === "conge") && event.agent === selectedAgentId;\n    });\n    if (hasEvent) {\n      // Couleur selon le sous-type\n      if (hasEvent.event_type === "absence") {\n        if (hasEvent.subtype === "justifiee") return "#fbc02d"; // jaune\n        if (hasEvent.subtype === "injustifiee") return "#d32f2f"; // rouge foncé\n        if (hasEvent.subtype === "maladie") return "#1976d2"; // bleu\n        if (hasEvent.subtype === "rtt") return "#7b1fa2"; // violet\n        return "red";\n      }\n      if (hasEvent.event_type === "conge") {\n        if (hasEvent.subtype === "paye") return "#388e3c"; // vert foncé\n        if (hasEvent.subtype === "sans_solde") return "#ffa000"; // orange\n        if (hasEvent.subtype === "parental") return "#0288d1"; // bleu clair\n        if (hasEvent.subtype === "maternite" || hasEvent.subtype === "paternite") return "#f06292"; // rose\n        return "purple";\n      }\n    }\n\n    // Style existant pour les cellules sélectionnées et assignées\n    if (selectedCells.some(cell => cell.hour === hour && cell.day === day)) {\n      return "lightblue";\n    }\n\n    // Couleur par chantier si assigné\n    if (scheduleData && scheduleData[hour] && scheduleData[hour][day]) {\n      const cellData = scheduleData[hour][day];\n      let chantierName;\n\n      // Gérer le nouveau format d\'objet et l\'ancien format de chaîne\n      if (typeof cellData === "object") {\n        chantierName = cellData.chantierName;\n      } else {\n        chantierName = cellData;\n      }\n      const chantier = chantiers.find(c => c.chantier_name === chantierName);\n      return getColorForChantier(chantier ? chantier.id : chantierName);\n    }\n    return "white";\n  };\n\n  // Fonction utilitaire pour obtenir les initiales de l\'événement\n  const getEventInitials = event => {\n    if (!event) return "";\n    if (event.event_type === "absence") {\n      if (event.subtype === "justifiee") return "AJ";\n      if (event.subtype === "injustifiee") return "AI";\n      if (event.subtype === "maladie") return "MA";\n      if (event.subtype === "rtt") return "RTT";\n      return "A";\n    }\n    if (event.event_type === "conge") {\n      if (event.subtype === "paye") return "CP";\n      if (event.subtype === "sans_solde") return "CSS";\n      if (event.subtype === "parental") return "CPR";\n      if (event.subtype === "maternite") return "CM";\n      if (event.subtype === "paternite") return "CPAT";\n      return "C";\n    }\n    return "";\n  };\n\n  // Ajouter cette fonction après les autres fonctions utilitaires\n  const fetchSchedule = async (agentId, week, year) => {\n    setIsLoading(true);\n    try {\n      // Récupérer le planning\n      const response = await axios__WEBPACK_IMPORTED_MODULE_9__["default"].get(`/api/get_schedule/?agent=${agentId}&week=${week}&year=${year}`);\n      setSchedule(prevSchedule => ({\n        ...prevSchedule,\n        [agentId]: response.data\n      }));\n    } catch (error) {\n      console.error("Erreur lors de la récupération du planning :", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  // Fonction pour générer le PDF de tous les agents pour la semaine sélectionnée et le stocker dans le Drive\n  const handleGeneratePDF = async () => {\n    try {\n      // Utiliser le nouveau système universel\n      await (0,_utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_4__.generatePDFDrive)("planning_hebdo", {\n        week: selectedWeek,\n        year: selectedYear\n      }, {\n        onSuccess: response => {},\n        onError: error => {\n          alert(`❌ Erreur lors de la génération du planning hebdomadaire: ${error.message}`);\n        }\n      });\n    } catch (error) {\n      alert(`❌ Erreur lors de la génération du PDF: ${error.message}`);\n    }\n  };\n\n  // Ajout des fonctions de navigation de semaine\n  const handlePrevWeek = () => {\n    let week = selectedWeek - 1;\n    let year = selectedYear;\n    if (week < 1) {\n      week = 52; // ou 53 selon ton calendrier\n      year = selectedYear - 1;\n    }\n    if (typeof onSelectionChange === "function") {\n      onSelectionChange(selectedAgentId, week, year);\n    }\n  };\n  const handleNextWeek = () => {\n    let week = selectedWeek + 1;\n    let year = selectedYear;\n    if (week > 52) {\n      week = 1;\n      year = selectedYear + 1;\n    }\n    if (typeof onSelectionChange === "function") {\n      onSelectionChange(selectedAgentId, week, year);\n    }\n  };\n  const getCurrentMonthYear = () => {\n    // Trouve le mois et l\'année correspondant à la semaine sélectionnée\n    const startOfWeek = dayjs__WEBPACK_IMPORTED_MODULE_0___default()().year(selectedYear).isoWeek(selectedWeek).startOf("isoWeek");\n    return {\n      month: startOfWeek.month() + 1,\n      year: startOfWeek.year()\n    };\n  };\n\n  // Nettoyer les informations temporaires si la souris sort du tableau\n  const handleTableMouseLeave = () => {\n    if (window.tempCellInfo) {\n      delete window.tempCellInfo;\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {\n    onMouseLeave: handleTableMouseLeave\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {\n    style: {\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "space-between",\n      marginBottom: 20,\n      marginRight: 200\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("h1", {\n    style: {\n      margin: 0\n    }\n  }, "Planning Hebdomadaire des Agents")), showCostsSummary && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(_LaborCostsSummary__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    key: `${selectedWeek}-${selectedYear}-${selectedAgentId}-${JSON.stringify(schedule)}`,\n    week: selectedWeek,\n    year: selectedYear,\n    agentId: selectedAgentId\n  }), isLoading ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("p", null, "Chargement...") : selectedAgentId && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {\n    style: {\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "space-between",\n      marginBottom: 10,\n      marginRight: 200\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("h2", {\n    style: {\n      margin: 0\n    }\n  }, (_agents$find = agents.find(agent => agent.id === selectedAgentId)) === null || _agents$find === void 0 ? void 0 : _agents$find.name, " - Semaine ", selectedWeek, " ", selectedYear), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {\n    style: {\n      display: "flex",\n      alignItems: "center",\n      gap: 8,\n      marginBottom: 10\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    onClick: handlePrevWeek,\n    variant: "contained",\n    color: "primary",\n    disabled: isFirstWeek,\n    sx: {\n      minWidth: 180\n    }\n  }, "< Semaine précédente"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    onClick: handleNextWeek,\n    variant: "contained",\n    color: "primary",\n    disabled: isLastWeek,\n    sx: {\n      minWidth: 180\n    }\n  }, "Semaine suivante >")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    variant: "contained",\n    color: "primary",\n    onClick: handleGeneratePDF\n  }, "T\\xE9l\\xE9charger le planning hebdomadaire")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {\n    style: {\n      display: "flex",\n      alignItems: "center",\n      gap: "12px",\n      marginBottom: "15px",\n      padding: "10px 0"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("span", {\n    className: "selection-info"\n  }, "Cellules s\\xE9lectionn\\xE9es: ", selectedCells.length, lastSelectedCell && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("span", {\n    style: {\n      marginLeft: "10px",\n      fontSize: "12px",\n      color: "#666"\n    }\n  }, "(Derni\\xE8re: ", lastSelectedCell.hour, " - ", lastSelectedCell.day, ")")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    title: "Assigner un chantier aux cellules s\\xE9lectionn\\xE9es",\n    arrow: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    onClick: validateSelection,\n    disabled: selectedCells.length === 0,\n    sx: {\n      backgroundColor: "#1976d2",\n      color: "white",\n      "&:hover": {\n        backgroundColor: "#1565c0",\n        transform: "scale(1.05)"\n      },\n      "&:disabled": {\n        backgroundColor: "#1976d2",\n        color: "white",\n        opacity: 0.5\n      },\n      transition: "all 0.2s ease",\n      width: "36px",\n      height: "36px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(_mui_icons_material_Assignment__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    fontSize: "small"\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    title: "Supprimer les assignations s\\xE9lectionn\\xE9es",\n    arrow: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    onClick: deleteChantierAssignment,\n    disabled: selectedCells.length === 0,\n    sx: {\n      backgroundColor: "#f44336",\n      color: "white",\n      "&:hover": {\n        backgroundColor: "#d32f2f",\n        transform: "scale(1.05)"\n      },\n      "&:disabled": {\n        backgroundColor: "#f44336",\n        color: "white",\n        opacity: 0.5\n      },\n      transition: "all 0.2s ease",\n      width: "36px",\n      height: "36px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(_mui_icons_material_Delete__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    fontSize: "small"\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    title: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {\n      style: {\n        fontSize: "13px",\n        lineHeight: "1.4"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {\n      style: {\n        fontWeight: "bold",\n        marginBottom: "8px"\n      }\n    }, "\\uD83C\\uDFAF Raccourcis de s\\xE9lection :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", null, "\\u2022 ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("strong", null, "Clic simple"), " : S\\xE9lectionner une cellule"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", null, "\\u2022 ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("strong", null, "Ctrl + clic"), " : Ajouter/supprimer de la s\\xE9lection"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", null, "\\u2022 ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("strong", null, "Shift + clic"), " : S\\xE9lectionner une plage"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", null, "\\u2022 ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("strong", null, "Double-clic"), " : S\\xE9lection rapide + modal")),\n    arrow: true,\n    placement: "top"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    size: "small",\n    sx: {\n      color: "#1976d2",\n      "&:hover": {\n        backgroundColor: "rgba(25, 118, 210, 0.1)"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(_mui_icons_material_InfoOutlined__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    fontSize: "small"\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("table", {\n    className: `planning-table ${isLoading ? "loading" : ""}`\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("thead", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("tr", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("th", {\n    className: "hours-header"\n  }, "Heures"), getDatesOfWeek(selectedWeek).map((date, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("th", {\n    key: index,\n    className: "date-header"\n  }, daysOfWeek[index], /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("br", null), date)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("tbody", null, hours.map(hour => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("tr", {\n    key: hour\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("td", {\n    className: "hour-cell"\n  }, formatHourDisplay(hour)), daysOfWeek.map(day => {\n    // Détermination de l\'événement pour la cellule\n    const startOfWeek = dayjs__WEBPACK_IMPORTED_MODULE_0___default()().year(selectedYear).isoWeek(selectedWeek).startOf("isoWeek");\n    const dayIndex = daysOfWeek.indexOf(day) + 1;\n    const currentDate = startOfWeek.add(dayIndex - 1, "day").format("YYYY-MM-DD");\n    const cellEvent = events.find(event => {\n      const eventDate = dayjs__WEBPACK_IMPORTED_MODULE_0___default()(event.start_date).format("YYYY-MM-DD");\n      return eventDate === currentDate && (event.event_type === "absence" || event.event_type === "conge") && event.agent === selectedAgentId;\n    });\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("td", {\n      key: `${hour}-${day}`,\n      onMouseDown: e => handleCellMouseDown(hour, day, e),\n      onMouseUp: e => handleCellMouseUp(hour, day, e),\n      onDoubleClick: e => handleCellDoubleClick(hour, day, e),\n      className: `schedule-cell ${selectedCells.some(cell => cell.hour === hour && cell.day === day) ? "selected" : ""}`,\n      style: {\n        backgroundColor: getCellStyle(hour, day, schedule[selectedAgentId]),\n        fontWeight: cellEvent ? "bold" : "normal",\n        color: cellEvent ? "#222" : undefined,\n        textAlign: "center",\n        border: selectedCells.some(cell => cell.hour === hour && cell.day === day) ? "3px solid #1976d2" : "1px solid #ddd",\n        boxShadow: selectedCells.some(cell => cell.hour === hour && cell.day === day) ? "0 0 8px rgba(25, 118, 210, 0.5)" : "none",\n        cursor: "pointer"\n      }\n    }, cellEvent ? getEventInitials(cellEvent) : (_schedule$selectedAge => {\n      // Ne pas afficher le nom du chantier dans les heures de pause\n      if (isPauseHour(hour)) {\n        return "";\n      }\n      const cellData = (_schedule$selectedAge = schedule[selectedAgentId]) === null || _schedule$selectedAge === void 0 || (_schedule$selectedAge = _schedule$selectedAge[hour]) === null || _schedule$selectedAge === void 0 ? void 0 : _schedule$selectedAge[day];\n      if (!cellData) return "";\n\n      // Si c\'est un objet (nouveau format)\n      if (typeof cellData === "object") {\n        // Vérifier que les chantiers sont chargés avant d\'afficher le nom\n        if (!chantiers || chantiers.length === 0) {\n          return "Chargement...";\n        }\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("span", null, cellData.chantierName, cellData.isSav && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("span", {\n          style: {\n            marginLeft: "4px",\n            fontSize: "12px",\n            color: "#ff5722",\n            fontWeight: "bold"\n          }\n        }, "\\u26A0\\uFE0F"));\n      }\n\n      // Si c\'est une chaîne (ancien format pour compatibilité)\n      return cellData;\n    })());\n  })))))), isChantierModalOpen && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {\n    className: "modal"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {\n    className: "modal-content"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("h2", null, "S\\xE9lectionner un chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("select", {\n    value: selectedChantier ? selectedChantier.id : "",\n    onChange: e => {\n      const selectedId = Number(e.target.value);\n      const chantier = chantiers.find(c => c.id === selectedId);\n      setSelectedChantier(chantier);\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("option", {\n    value: ""\n  }, "--S\\xE9lectionner un chantier--"), chantiers.map(chantier => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("option", {\n    key: chantier.id,\n    value: chantier.id\n  }, chantier.chantier_name))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {\n    style: {\n      marginTop: "20px",\n      marginBottom: "20px",\n      padding: "16px",\n      backgroundColor: isSav ? "#fff3e0" : "#f8f9fa",\n      borderRadius: "12px",\n      border: `2px solid ${isSav ? "#ff9800" : "#e0e0e0"}`,\n      transition: "all 0.3s ease",\n      cursor: "pointer"\n    },\n    onClick: () => setIsSav(!isSav)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {\n    style: {\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "space-between"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {\n    style: {\n      display: "flex",\n      alignItems: "center",\n      gap: "12px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {\n    style: {\n      width: "20px",\n      height: "20px",\n      borderRadius: "4px",\n      border: `2px solid ${isSav ? "#ff9800" : "#ccc"}`,\n      backgroundColor: isSav ? "#ff9800" : "transparent",\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "center",\n      transition: "all 0.2s ease",\n      cursor: "pointer"\n    }\n  }, isSav && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("span", {\n    style: {\n      color: "white",\n      fontSize: "12px",\n      fontWeight: "bold"\n    }\n  }, "\\u2713")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {\n    style: {\n      fontSize: "16px",\n      fontWeight: "600",\n      color: isSav ? "#e65100" : "#333",\n      display: "flex",\n      alignItems: "center",\n      gap: "8px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("span", {\n    style: {\n      fontSize: "18px"\n    }\n  }, "\\u26A0\\uFE0F"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("span", null, "SAV (Service Apr\\xE8s-Vente)")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {\n    style: {\n      fontSize: "13px",\n      color: isSav ? "#bf360c" : "#666",\n      marginTop: "2px",\n      marginLeft: "26px"\n    }\n  }, "Marquer cette intervention comme du service apr\\xE8s-vente"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {\n    style: {\n      padding: "4px 8px",\n      borderRadius: "12px",\n      fontSize: "11px",\n      fontWeight: "600",\n      backgroundColor: isSav ? "#ff9800" : "#e0e0e0",\n      color: isSav ? "white" : "#666",\n      transition: "all 0.2s ease"\n    }\n  }, isSav ? "ACTIVÉ" : "DÉSACTIVÉ"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("div", {\n    style: {\n      marginTop: "10px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(StyledButton, {\n    variant: "contained",\n    onClick: assignChantier,\n    disabled: !selectedChantier,\n    sx: {\n      backgroundColor: "rgba(27, 120, 188, 1)",\n      "&:hover": {\n        backgroundColor: "rgba(27, 120, 188, 0.8)"\n      }\n    }\n  }, "Assigner"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement(StyledButton, {\n    variant: "contained",\n    onClick: closeChantierModal,\n    sx: {\n      backgroundColor: "#ccc",\n      color: "black",\n      "&:hover": {\n        backgroundColor: "#999"\n      }\n    }\n  }, "Annuler")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3__.createElement("style", {\n    jsx: true\n  }, `\n        .modal {\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          background-color: rgba(0, 0, 0, 0.5);\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          z-index: 1000;\n        }\n\n        .modal-content {\n          background-color: #fff;\n          padding: 20px;\n          border-radius: 5px;\n          width: 300px;\n          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\n        }\n\n        .modal-content h2 {\n          margin-top: 0;\n        }\n\n        .modal-content select {\n          width: 100%;\n          padding: 8px;\n          margin-top: 10px;\n        }\n\n        .modal-content button {\n          padding: 8px 12px;\n        }\n\n        .controls-container {\n          margin: 20px 0;\n          display: flex;\n          gap: 10px;\n        }\n\n        .btn-calculate,\n        .btn-toggle-summary {\n          padding: 8px 16px;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          font-weight: 500;\n          transition: background-color 0.3s;\n        }\n\n        .btn-calculate {\n          background-color: #4caf50;\n          color: white;\n        }\n\n        .btn-toggle-summary {\n          background-color: #2196f3;\n          color: white;\n        }\n\n        .btn-calculate:disabled {\n          background-color: #cccccc;\n          cursor: not-allowed;\n        }\n\n        .btn-calculate:hover:not(:disabled),\n        .btn-toggle-summary:hover {\n          opacity: 0.9;\n        }\n      `));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PlanningHebdoAgent);\n\n//# sourceURL=webpack://frontend/./src/components/PlanningHebdoAgent.js?')},"./src/components/ProduitSelectionTable.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputAdornment/InputAdornment.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableContainer/TableContainer.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableCell/TableCell.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Checkbox/Checkbox.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fi__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react-icons/fi */ "./node_modules/react-icons/fi/index.mjs");\n/* harmony import */ var _services_bonCommandeService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/bonCommandeService */ "./src/services/bonCommandeService.js");\n/* harmony import */ var _services_chantierService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/chantierService */ "./src/services/chantierService.js");\n/* harmony import */ var _utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/universalDriveGenerator */ "./src/utils/universalDriveGenerator.js");\n/* harmony import */ var _NewProductForm__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./NewProductForm */ "./src/components/NewProductForm.js");\n\n\n\n\n\n\n\n\nfunction ProduitSelectionTable({\n  open,\n  onClose,\n  fournisseur,\n  onValidate,\n  numeroBC,\n  selectedData\n}) {\n  const [products, setProducts] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [selectedProducts, setSelectedProducts] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [quantities, setQuantities] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [isPreviewed, setIsPreviewed] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [searchTerm, setSearchTerm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [codeRangeFilter, setCodeRangeFilter] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""); // Nouveau filtre par plage de codes\n  const [openNewProductModal, setOpenNewProductModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [editingCell, setEditingCell] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    productId: null,\n    field: null\n  });\n  const [editedProducts, setEditedProducts] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [chantierInfo, setChantierInfo] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const handleOpenNewProductModal = () => setOpenNewProductModal(true);\n  const handleCloseNewProductModal = () => setOpenNewProductModal(false);\n\n  // Récupérer les informations du chantier\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (selectedData !== null && selectedData !== void 0 && selectedData.chantier) {\n      axios__WEBPACK_IMPORTED_MODULE_5__["default"].get(`/api/chantier/${selectedData.chantier}/`).then(response => {\n        setChantierInfo(response.data);\n      }).catch(error => {\n        console.error("Erreur lors de la récupération des informations du chantier:", error);\n      });\n    }\n  }, [selectedData === null || selectedData === void 0 ? void 0 : selectedData.chantier]);\n  const handleCheckboxChange = productId => {\n    setIsPreviewed(false);\n    setSelectedProducts(prev => ({\n      ...prev,\n      [productId]: !prev[productId]\n    }));\n    setTimeout(() => {\n      const quantityInput = document.getElementById(`quantity-${productId}`);\n      if (quantityInput && !selectedProducts[productId]) {\n        quantityInput.focus();\n      }\n    }, 0);\n  };\n  const handleQuantityChange = (productId, value) => {\n    setIsPreviewed(false);\n    const quantity = parseInt(value) || 0;\n    setQuantities(prev => ({\n      ...prev,\n      [productId]: quantity\n    }));\n  };\n  const handleCellDoubleClick = (productId, field) => {\n    setEditingCell({\n      productId,\n      field\n    });\n  };\n  const handleEditChange = (productId, field, value) => {\n    setEditedProducts(prev => ({\n      ...prev,\n      [productId]: {\n        ...prev[productId],\n        [field]: field === "prix_unitaire" ? parseFloat(value) : value\n      }\n    }));\n  };\n  const handleEditBlur = async (productId, field) => {\n    setEditingCell({\n      productId: null,\n      field: null\n    });\n    const edited = editedProducts[productId];\n    if (edited && ["code_produit", "designation", "prix_unitaire"].includes(field)) {\n      try {\n        await axios__WEBPACK_IMPORTED_MODULE_5__["default"].patch(`/api/stock/${productId}/`, {\n          [field]: edited[field]\n        });\n        loadProducts();\n      } catch (error) {\n        console.error("Erreur lors de la mise à jour du produit:", error);\n      }\n    }\n  };\n  const handleEditKeyDown = (e, productId, field) => {\n    if (e.key === "Enter") {\n      handleEditBlur(productId, field);\n    }\n  };\n  const handleValidate = () => {\n    const selectedItems = products.filter(product => selectedProducts[product.id]).map(product => ({\n      produit: product.id,\n      designation: product.designation,\n      quantite: quantities[product.id] || 0,\n      prix_unitaire: product.prix_unitaire,\n      total: (quantities[product.id] || 0) * product.prix_unitaire\n    })).filter(item => item.quantite > 0);\n    onValidate(selectedItems);\n    setIsPreviewed(true);\n  };\n  const handleSave = async () => {\n    try {\n      if (!selectedData.emetteur) {\n        throw new Error("Veuillez sélectionner un émetteur");\n      }\n      if (!products || products.length === 0) {\n        throw new Error("Aucun produit n\'est disponible");\n      }\n      const selectedItems = products.filter(product => selectedProducts[product.id]).map(product => ({\n        produit: product.id,\n        designation: product.designation,\n        quantite: parseInt(quantities[product.id]) || 0,\n        prix_unitaire: parseFloat(product.prix_unitaire),\n        total: parseFloat((quantities[product.id] || 0) * product.prix_unitaire)\n      })).filter(item => item.quantite > 0);\n      if (selectedItems.length === 0) {\n        throw new Error("Veuillez sélectionner au moins un produit avec une quantité");\n      }\n      const bonCommandeData = {\n        numero: numeroBC,\n        fournisseur: fournisseur,\n        chantier: selectedData.chantier,\n        emetteur: selectedData.emetteur,\n        statut: selectedData.statut,\n        // Ajout du statut\n        date_commande: selectedData.date_commande,\n        date_creation_personnalisee: selectedData.date_creation_personnalisee,\n        contact_type: selectedData.contact_type,\n        contact_agent: selectedData.contact_agent,\n        contact_sous_traitant: selectedData.contact_sous_traitant,\n        lignes: selectedItems,\n        montant_total: parseFloat(selectedItems.reduce((acc, curr) => acc + curr.total, 0).toFixed(2))\n      };\n      console.log("Données envoyées:", bonCommandeData);\n\n      // Créer le bon de commande\n      const bonCommande = await _services_bonCommandeService__WEBPACK_IMPORTED_MODULE_1__.bonCommandeService.createBonCommande(bonCommandeData);\n\n      // Téléchargement automatique vers le Drive après création\n      // Attendre un délai pour s\'assurer que le bon de commande est bien enregistré en DB\n      setTimeout(async () => {\n        try {\n          var _chantierInfo$societe, _chantierInfo$societe2;\n          console.log("🚀 Lancement du téléchargement automatique du bon de commande vers le Drive...");\n          const driveData = {\n            bonCommandeId: bonCommande.id,\n            chantierId: selectedData.chantier,\n            chantierName: (chantierInfo === null || chantierInfo === void 0 ? void 0 : chantierInfo.chantier_name) || (chantierInfo === null || chantierInfo === void 0 ? void 0 : chantierInfo.nom) || "Chantier",\n            societeName: (chantierInfo === null || chantierInfo === void 0 || (_chantierInfo$societe = chantierInfo.societe) === null || _chantierInfo$societe === void 0 ? void 0 : _chantierInfo$societe.nom_societe) || (chantierInfo === null || chantierInfo === void 0 || (_chantierInfo$societe2 = chantierInfo.societe) === null || _chantierInfo$societe2 === void 0 ? void 0 : _chantierInfo$societe2.nom) || "Société",\n            numeroBonCommande: bonCommande.numero,\n            fournisseurName: selectedData.fournisseurName\n          };\n          console.log("🔍 DEBUG ProduitSelectionTable - driveData:", driveData);\n          await (0,_utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_3__.generatePDFDrive)("bon_commande", driveData);\n          console.log("✅ Bon de commande téléchargé avec succès vers le Drive");\n        } catch (driveError) {\n          console.error("❌ Erreur lors du téléchargement automatique du bon de commande:", driveError);\n          // Ne pas bloquer la création du bon de commande si le téléchargement échoue\n        }\n      }, 2000); // Délai de 2 secondes\n\n      // Attendre que la création soit terminée avant de mettre à jour le coût\n      await (0,_services_chantierService__WEBPACK_IMPORTED_MODULE_2__.updateChantierMaterialCost)(selectedData.chantier);\n\n      // Fermer le modal mais ne pas recharger la page pour pouvoir analyser les logs\n      onClose();\n      if (onValidate && typeof onValidate === "function") {\n        onValidate(bonCommande);\n      }\n\n      // Commenté temporairement pour analyser les logs\n      // window.location.reload();\n    } catch (error) {\n      console.error("Erreur lors de la création du bon de commande:", error);\n      throw error;\n    }\n  };\n  const calculateTotal = (product, edited = {}) => {\n    var _edited$prix_unitaire;\n    const price = (_edited$prix_unitaire = edited.prix_unitaire) !== null && _edited$prix_unitaire !== void 0 ? _edited$prix_unitaire : product.prix_unitaire;\n    const quantity = edited.quantite !== undefined ? parseInt(edited.quantite) : quantities[product.id] || 0;\n    return (quantity * price).toFixed(2);\n  };\n\n  // Fonction pour calculer le total général\n  const calculateGrandTotal = () => {\n    return products.filter(product => selectedProducts[product.id]).reduce((total, product) => {\n      const quantity = quantities[product.id] || 0;\n      return total + quantity * product.prix_unitaire;\n    }, 0);\n  };\n\n  // Filtrer les produits en fonction du terme de recherche\n  const filteredProducts = products.filter(product => {\n    var _product$code_produit, _product$designation, _product$unite, _product$prix_unitair;\n    const searchTermLower = searchTerm.toLowerCase();\n    return ((_product$code_produit = product.code_produit) === null || _product$code_produit === void 0 ? void 0 : _product$code_produit.toLowerCase().includes(searchTermLower)) || ((_product$designation = product.designation) === null || _product$designation === void 0 ? void 0 : _product$designation.toLowerCase().includes(searchTermLower)) || ((_product$unite = product.unite) === null || _product$unite === void 0 ? void 0 : _product$unite.toLowerCase().includes(searchTermLower)) || ((_product$prix_unitair = product.prix_unitaire) === null || _product$prix_unitair === void 0 ? void 0 : _product$prix_unitair.toString().includes(searchTermLower));\n  });\n\n  // On extrait la fonction de chargement pour la réutiliser après ajout\n  const loadProducts = async () => {\n    try {\n      const data = await _services_bonCommandeService__WEBPACK_IMPORTED_MODULE_1__.bonCommandeService.getProductsByFournisseur(fournisseur, codeRangeFilter || null);\n      setProducts(data);\n    } catch (error) {\n      console.error("Erreur lors du chargement des produits:", error);\n    }\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    loadProducts();\n  }, [fournisseur, codeRangeFilter]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    open: open,\n    onClose: onClose,\n    maxWidth: "lg",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "center",\n      pb: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    variant: "h6"\n  }, "S\\xE9lection des produits"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      gap: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    size: "small",\n    variant: "outlined",\n    placeholder: "Rechercher...",\n    value: searchTerm,\n    onChange: e => setSearchTerm(e.target.value),\n    InputProps: {\n      startAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n        position: "start"\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fi__WEBPACK_IMPORTED_MODULE_12__.FiSearch, {\n        style: {\n          fontSize: "1.2rem"\n        }\n      }))\n    },\n    sx: {\n      width: "250px"\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    select: true,\n    size: "small",\n    label: "Plage de codes",\n    variant: "outlined",\n    value: codeRangeFilter,\n    onChange: e => setCodeRangeFilter(e.target.value),\n    sx: {\n      width: "150px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    value: ""\n  }, "Tous les codes"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    value: "0-99"\n  }, "0-99"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    value: "100-199"\n  }, "100-199"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    value: "200-299"\n  }, "200-299"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    value: "300-399"\n  }, "300-399"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    value: "400-499"\n  }, "400-499"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    value: "500+"\n  }, "500+"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    value: "non-numeric"\n  }, "Non-num\\xE9rique")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    variant: "outlined",\n    color: "primary",\n    onClick: handleOpenNewProductModal\n  }, "Nouveau Produit"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    sx: {\n      maxHeight: 440\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    stickyHeader: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    padding: "checkbox"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, "Code"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, "D\\xE9signation"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, "Prix unitaire"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, "Unit\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, "Quantit\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, "Total"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], null, filteredProducts.map((product, idx) => {\n    var _edited$code_produit, _edited$code_produit2, _edited$designation, _edited$designation2, _edited$prix_unitaire2, _edited$prix_unitaire3;\n    const isSelected = selectedProducts[product.id];\n    const edited = editedProducts[product.id] || {};\n    const rowColor = idx % 2 === 0 ? "#fafafa" : "#fff";\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n      key: product.id,\n      hover: true,\n      selected: isSelected,\n      sx: {\n        backgroundColor: rowColor\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n      padding: "checkbox"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n      checked: isSelected || false,\n      onChange: () => handleCheckboxChange(product.id)\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n      onDoubleClick: () => handleCellDoubleClick(product.id, "code_produit"),\n      sx: {\n        cursor: "pointer"\n      }\n    }, editingCell.productId === product.id && editingCell.field === "code_produit" ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n      value: (_edited$code_produit = edited.code_produit) !== null && _edited$code_produit !== void 0 ? _edited$code_produit : product.code_produit,\n      onChange: e => handleEditChange(product.id, "code_produit", e.target.value),\n      onBlur: () => handleEditBlur(product.id, "code_produit"),\n      onKeyDown: e => handleEditKeyDown(e, product.id, "code_produit"),\n      size: "small",\n      autoFocus: true\n    }) : (_edited$code_produit2 = edited.code_produit) !== null && _edited$code_produit2 !== void 0 ? _edited$code_produit2 : product.code_produit), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n      onDoubleClick: () => handleCellDoubleClick(product.id, "designation"),\n      sx: {\n        cursor: "pointer"\n      }\n    }, editingCell.productId === product.id && editingCell.field === "designation" ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n      value: (_edited$designation = edited.designation) !== null && _edited$designation !== void 0 ? _edited$designation : product.designation,\n      onChange: e => handleEditChange(product.id, "designation", e.target.value),\n      onBlur: () => handleEditBlur(product.id, "designation"),\n      onKeyDown: e => handleEditKeyDown(e, product.id, "designation"),\n      size: "small",\n      autoFocus: true\n    }) : (_edited$designation2 = edited.designation) !== null && _edited$designation2 !== void 0 ? _edited$designation2 : product.designation), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n      onDoubleClick: () => handleCellDoubleClick(product.id, "prix_unitaire"),\n      sx: {\n        cursor: "pointer"\n      }\n    }, editingCell.productId === product.id && editingCell.field === "prix_unitaire" ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n      type: "number",\n      value: (_edited$prix_unitaire2 = edited.prix_unitaire) !== null && _edited$prix_unitaire2 !== void 0 ? _edited$prix_unitaire2 : product.prix_unitaire,\n      onChange: e => handleEditChange(product.id, "prix_unitaire", e.target.value),\n      onBlur: () => handleEditBlur(product.id, "prix_unitaire"),\n      onKeyDown: e => handleEditKeyDown(e, product.id, "prix_unitaire"),\n      size: "small",\n      autoFocus: true,\n      inputProps: {\n        min: 0,\n        step: "0.01"\n      }\n    }) : ((_edited$prix_unitaire3 = edited.prix_unitaire) !== null && _edited$prix_unitaire3 !== void 0 ? _edited$prix_unitaire3 : product.prix_unitaire).toFixed(2) + " €"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, product.unite), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n      id: `quantity-${product.id}`,\n      type: "number",\n      size: "small",\n      value: quantities[product.id] || "",\n      onChange: e => handleQuantityChange(product.id, e.target.value),\n      disabled: !isSelected,\n      InputProps: {\n        inputProps: {\n          min: 0\n        }\n      },\n      sx: {\n        width: "100px"\n      }\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, calculateTotal(product, edited), " \\u20AC"));\n  }))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], {\n    sx: {\n      justifyContent: "space-between",\n      px: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      typography: "h6",\n      color: "primary.main"\n    }\n  }, "Total: ", calculateGrandTotal().toFixed(2), " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    sx: {\n      display: "flex",\n      gap: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    onClick: onClose\n  }, "Annuler"), isPreviewed ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    onClick: handleSave,\n    variant: "contained",\n    color: "success",\n    disabled: Object.keys(selectedProducts).length === 0\n  }, "Enregistrer le bon de commande") : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    onClick: handleValidate,\n    variant: "contained",\n    disabled: Object.keys(selectedProducts).length === 0\n  }, "Valider la s\\xE9lection"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_NewProductForm__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    open: openNewProductModal,\n    handleClose: handleCloseNewProductModal,\n    onAddProduct: () => {\n      handleCloseNewProductModal();\n      loadProducts();\n    },\n    fournisseur: selectedData === null || selectedData === void 0 ? void 0 : selectedData.fournisseur\n  }));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ProduitSelectionTable);\n\n//# sourceURL=webpack://frontend/./src/components/ProduitSelectionTable.js?')},"./src/components/SelectSocieteModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputLabel/InputLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _utils_axiosConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/axiosConfig */ "./src/utils/axiosConfig.js");\n\n\n\nconst SelectSocieteModal = ({\n  open,\n  onClose,\n  onSocieteSelect\n}) => {\n  const [societes, setSocietes] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [selectedSociete, setSelectedSociete] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const fetchSocietes = async () => {\n      try {\n        const response = await _utils_axiosConfig__WEBPACK_IMPORTED_MODULE_1__["default"].get("/api/societe/");\n        setSocietes(response.data);\n      } catch (error) {\n        console.error("Erreur lors de la récupération des sociétés:", error);\n      }\n    };\n    if (open) {\n      fetchSocietes();\n    }\n  }, [open]);\n  const handleSubmit = () => {\n    onSocieteSelect(selectedSociete);\n    onClose();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: open,\n    onClose: onClose,\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "S\\xE9lectionner une Soci\\xE9t\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, "Soci\\xE9t\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: selectedSociete,\n    onChange: e => setSelectedSociete(e.target.value),\n    label: "Soci\\xE9t\\xE9"\n  }, societes.map(societe => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    key: societe.id,\n    value: societe.id\n  }, societe.nom_societe)))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    onClick: handleSubmit,\n    variant: "contained",\n    disabled: !selectedSociete\n  }, "S\\xE9lectionner")));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SelectSocieteModal);\n\n//# sourceURL=webpack://frontend/./src/components/SelectSocieteModal.js?')},"./src/components/SelectionFournisseurModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputLabel/InputLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _Founisseur_NewFournisseurForm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Founisseur/NewFournisseurForm */ "./src/components/Founisseur/NewFournisseurForm.js");\n\n\n\nfunction SelectionFournisseurModal({\n  open,\n  onClose,\n  onSubmit,\n  numeroBC\n}) {\n  const [fournisseurs, setFournisseurs] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [chantiers, setChantiers] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [selectedData, setSelectedData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    fournisseur: "",\n    chantier: "",\n    agent: "",\n    statut: "en_attente" // Statut par défaut\n  });\n  const [dateCommande, setDateCommande] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Date().toISOString().split("T")[0]);\n  const [dateCreation, setDateCreation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Date().toISOString().split("T")[0]);\n  const [contactType, setContactType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [contactAgent, setContactAgent] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [contactSousTraitant, setContactSousTraitant] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [numeroBonCommande, setNumeroBonCommande] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(numeroBC);\n  const [openFournisseurModal, setOpenFournisseurModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [sousTraitants, setSousTraitants] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n\n  // Liste dynamique des émetteurs (chargée depuis l\'API)\n  const [emetteurs, setEmetteurs] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n\n  // Liste dynamique des agents pour la réception (depuis API)\n  const [agentsReceptionnaires, setAgentsReceptionnaires] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n\n  // Options de statut pour les bons de commande\n  const statutOptions = [{\n    value: "en_attente",\n    label: "En attente Livraison"\n  }, {\n    value: "livre_chantier",\n    label: "Livré Chantier"\n  }, {\n    value: "retrait_magasin",\n    label: "Retrait Magasin"\n  }];\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    // Charger la liste des fournisseurs\n    fetch("/api/fournisseurs/").then(response => response.json()).then(data => setFournisseurs(data)).catch(error => console.error("Erreur:", error));\n\n    // Charger la liste des chantiers\n    fetch("/api/chantier/").then(response => response.json()).then(data => setChantiers(data)).catch(error => console.error("Erreur:", error));\n\n    // Charger la liste des sous-traitants\n    fetch("/api/sous-traitants/").then(response => response.json()).then(data => setSousTraitants(data)).catch(error => console.error("Erreur:", error));\n\n    // Charger la liste des agents réceptionnaires depuis l\'API\n    fetch("/api/agent/").then(response => response.json()).then(data => setAgentsReceptionnaires(data)).catch(error => console.error("Erreur:", error));\n\n    // Charger la liste des émetteurs depuis l\'API\n    fetch("/api/emetteurs/").then(response => response.json()).then(data => setEmetteurs(data)).catch(error => console.error("Erreur:", error));\n  }, []);\n  const handleChange = event => {\n    setSelectedData({\n      ...selectedData,\n      [event.target.name]: event.target.value\n    });\n  };\n  const handleSubmit = () => {\n    const selectedFournisseur = fournisseurs.find(f => f.id === selectedData.fournisseur);\n    onSubmit({\n      fournisseur: selectedData.fournisseur,\n      fournisseurName: selectedFournisseur ? selectedFournisseur.name : "",\n      chantier: selectedData.chantier,\n      emetteur: selectedData.emetteur,\n      statut: selectedData.statut,\n      // Ajout du statut\n      date_commande: dateCommande,\n      date_creation_personnalisee: dateCreation,\n      numero_bon_commande: numeroBonCommande,\n      contact_type: contactType,\n      contact_agent: contactType === "agent" ? contactAgent : null,\n      contact_sous_traitant: contactType === "sous_traitant" ? contactSousTraitant : null\n    });\n    onClose();\n  };\n  const isFormValid = selectedData.fournisseur && selectedData.chantier && selectedData.emetteur;\n  const handleOpenFournisseurModal = () => setOpenFournisseurModal(true);\n  const handleCloseFournisseurModal = () => setOpenFournisseurModal(false);\n  const handleAddFournisseur = () => {\n    // Rafraîchir la liste des fournisseurs après création\n    fetch("/api/fournisseurs/").then(response => response.json()).then(data => setFournisseurs(data));\n    handleCloseFournisseurModal();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: open,\n    onClose: onClose,\n    maxWidth: "sm",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "Nouveau Bon de Commande"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    component: "form",\n    sx: {\n      display: "flex",\n      flexDirection: "column",\n      gap: 2\n    },\n    onSubmit: handleSubmit\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, "Fournisseur"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    name: "fournisseur",\n    value: selectedData.fournisseur,\n    onChange: e => setSelectedData({\n      ...selectedData,\n      fournisseur: e.target.value\n    }),\n    label: "Fournisseur"\n  }, fournisseurs.map(fournisseur => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    key: fournisseur.id,\n    value: fournisseur.id\n  }, fournisseur.name || fournisseur.Fournisseur_mail)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, "Chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    name: "chantier",\n    value: selectedData.chantier,\n    onChange: e => setSelectedData({\n      ...selectedData,\n      chantier: e.target.value\n    }),\n    label: "Chantier"\n  }, chantiers.map(chantier => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    key: chantier.id,\n    value: chantier.id\n  }, chantier.chantier_name)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, "\\xC9metteur"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    name: "emetteur",\n    value: selectedData.emetteur,\n    onChange: e => setSelectedData({\n      ...selectedData,\n      emetteur: e.target.value\n    }),\n    label: "\\xC9metteur",\n    renderValue: selected => {\n      const emetteur = emetteurs.find(e => e.id === selected);\n      return emetteur ? `${emetteur.name} ${emetteur.surname}` : "";\n    }\n  }, emetteurs.map(emetteur => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    key: emetteur.id,\n    value: emetteur.id\n  }, emetteur.surname, " ", emetteur.name)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, "Statut de Livraison"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: selectedData.statut,\n    onChange: e => setSelectedData({\n      ...selectedData,\n      statut: e.target.value\n    }),\n    label: "Statut de Livraison"\n  }, statutOptions.map(option => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    key: option.value,\n    value: option.value\n  }, option.label)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      display: "flex",\n      gap: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    label: "Date de Commande",\n    type: "date",\n    value: dateCommande,\n    onChange: e => setDateCommande(e.target.value),\n    InputLabelProps: {\n      shrink: true\n    },\n    fullWidth: true,\n    required: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    label: "Date de Cr\\xE9ation du Document",\n    type: "date",\n    value: dateCreation,\n    onChange: e => setDateCreation(e.target.value),\n    InputLabelProps: {\n      shrink: true\n    },\n    helperText: "Date qui appara\\xEEtra sur le document (pour antidater)",\n    fullWidth: true,\n    required: true\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, "Type de Contact R\\xE9ceptionnaire"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: contactType,\n    onChange: e => setContactType(e.target.value),\n    label: "Type de Contact R\\xE9ceptionnaire"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: "agent"\n  }, "Agent"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: "sous_traitant"\n  }, "Sous-traitant"))), contactType === "agent" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, "Agent R\\xE9ceptionnaire"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: contactAgent,\n    onChange: e => setContactAgent(e.target.value),\n    label: "Agent R\\xE9ceptionnaire",\n    renderValue: selected => {\n      const agent = agentsReceptionnaires.find(a => a.id === selected);\n      return agent ? `${agent.name} ${agent.surname}` : "";\n    }\n  }, agentsReceptionnaires.map(agent => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    key: agent.id,\n    value: agent.id\n  }, agent.surname, " ", agent.name)))), contactType === "sous_traitant" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, "Sous-traitant R\\xE9ceptionnaire"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: contactSousTraitant,\n    onChange: e => setContactSousTraitant(e.target.value),\n    label: "Sous-traitant R\\xE9ceptionnaire"\n  }, sousTraitants.map(sousTraitant => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    key: sousTraitant.id,\n    value: sousTraitant.id\n  }, sousTraitant.representant, " - ", sousTraitant.entreprise)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    label: "Num\\xE9ro de Bon de Commande",\n    value: numeroBonCommande,\n    onChange: e => setNumeroBonCommande(e.target.value),\n    required: true\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      width: "100%",\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    onClick: handleOpenFournisseurModal,\n    color: "secondary",\n    variant: "outlined"\n  }, "Nouveau Fournisseur"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    onClick: handleSubmit,\n    variant: "contained",\n    disabled: !isFormValid,\n    sx: {\n      ml: 1\n    }\n  }, "Suivant"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Founisseur_NewFournisseurForm__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: openFournisseurModal,\n    handleClose: handleCloseFournisseurModal,\n    onAddFournisseur: handleAddFournisseur\n  })));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SelectionFournisseurModal);\n\n//# sourceURL=webpack://frontend/./src/components/SelectionFournisseurModal.js?')},"./src/components/SlideBar.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_gi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-icons/gi */ "./node_modules/react-icons/gi/index.mjs");\n/* harmony import */ var react_icons_io5__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-icons/io5 */ "./node_modules/react-icons/io5/index.mjs");\n/* harmony import */ var react_icons_md__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-icons/md */ "./node_modules/react-icons/md/index.mjs");\n/* harmony import */ var react_icons_si__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-icons/si */ "./node_modules/react-icons/si/index.mjs");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/dist/index.js");\n/* harmony import */ var _img_logo_png__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../img/logo.png */ "./src/img/logo.png");\n/* harmony import */ var _static_css_slideBar_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../static/css/slideBar.css */ "./static/css/slideBar.css");\n\n\n\n\n\n\n\n\nconst SlideBar = ({\n  toggleSidebar,\n  isSidebarVisible\n}) => {\n  const location = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_3__.useLocation)();\n  const [expandedCategories, setExpandedCategories] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const menu = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => [{\n    key: "chantier",\n    label: "Chantiers",\n    icon: react_icons_md__WEBPACK_IMPORTED_MODULE_4__.MdConstruction,\n    children: [{\n      label: "Dashboard",\n      to: "/"\n    }, {\n      label: "Récap Chantier",\n      to: "/ChantierDetail/1"\n    }, {\n      label: "Tableau Facturation",\n      to: "/TableauFacturation"\n    }, {\n      label: "Appel d\'Offres",\n      to: "/GestionAppelsOffres"\n    }, {\n      label: "Agence",\n      to: "/AgencyExpenses"\n    }]\n  }, {\n    key: "agent_planning",\n    label: "Agent et planning",\n    icon: react_icons_md__WEBPACK_IMPORTED_MODULE_4__.MdEventAvailable,\n    children: [{\n      label: "Gestion Agent",\n      to: "/CalendrierAgentContainer"\n    }, {\n      label: "Planning Hebdo",\n      to: "/PlanningContainer"\n    }]\n  }, {\n    key: "document",\n    label: "Documents",\n    icon: react_icons_md__WEBPACK_IMPORTED_MODULE_4__.MdFolderOpen,\n    children: [{\n      label: "Liste document",\n      children: [{\n        label: "Liste Devis",\n        to: "/ListeDevis"\n      }, {\n        label: "Liste Situation",\n        to: "/ListeSituation"\n      }, {\n        label: "Liste facture",\n        to: "/ListeFactures"\n      }, {\n        label: "Liste BC",\n        to: "/ListeBonCommande"\n      }]\n    }, {\n      label: "Créer document",\n      children: [{\n        label: "Devis",\n        to: "/CreationDevis"\n      }, {\n        label: "Bon de commande",\n        to: "/BonCommande"\n      }],\n      icon: react_icons_md__WEBPACK_IMPORTED_MODULE_4__.MdCreateNewFolder\n    }]\n  }, {\n    key: "drive",\n    label: "Drive",\n    icon: react_icons_si__WEBPACK_IMPORTED_MODULE_5__.SiGoogledrive,\n    href: "https://myp3000app.com/drive",\n    external: true\n  }], []);\n  const isPathActive = to => {\n    if (!to) return false;\n    if (to === "/") return location.pathname === "/";\n    return location.pathname.startsWith(to);\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    // Ouvrir automatiquement la catégorie qui contient la route active (gère sous-groupes + racine "/")\n    const currentPath = location.pathname;\n    const containingCategory = menu.find(category => {\n      const children = category.children || [];\n      return children.some(child => {\n        if (child.to) return isPathActive(child.to);\n        const grandChildren = child.children || [];\n        return grandChildren.some(gc => isPathActive(gc.to));\n      });\n    });\n    if (containingCategory) {\n      setExpandedCategories(prev => ({\n        ...prev,\n        [containingCategory.key]: true\n      }));\n    }\n  }, [location.pathname, menu]);\n  const handleToggleCategory = key => {\n    setExpandedCategories(prev => ({\n      ...prev,\n      [key]: !prev[key]\n    }));\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, !isSidebarVisible && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    className: "burger-button",\n    onClick: toggleSidebar\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_gi__WEBPACK_IMPORTED_MODULE_6__.GiHamburgerMenu, null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: `slide-bar ${isSidebarVisible ? "" : "hidden"}`\n  }, isSidebarVisible && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    className: "close-button",\n    onClick: toggleSidebar\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_io5__WEBPACK_IMPORTED_MODULE_7__.IoClose, null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "logo-container"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("img", {\n    src: _img_logo_png__WEBPACK_IMPORTED_MODULE_1__["default"],\n    alt: "logo",\n    className: "logo"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "link-container"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul", null, menu.map(item => {\n    const Icon = item.icon;\n    const hasChildren = Array.isArray(item.children) && item.children.length > 0;\n    if (!hasChildren) {\n      // Lien simple (interne ou externe)\n      if (item.external) {\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", {\n          key: item.key\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("a", {\n          href: item.href,\n          target: "_blank",\n          rel: "noopener noreferrer"\n        }, Icon && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(Icon, null), " ", item.label));\n      }\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", {\n        key: item.key\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_8__.NavLink, {\n        to: item.to,\n        className: ({\n          isActive\n        }) => isActive ? "active" : ""\n      }, Icon && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(Icon, null), " ", item.label));\n    }\n\n    // Catégorie avec sous-menu (accordéon)\n    const isExpanded = Boolean(expandedCategories[item.key]);\n    const isActiveCategory = hasChildren && (item.children || []).some(child => child.to ? isPathActive(child.to) : (child.children || []).some(gc => isPathActive(gc.to)));\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", {\n      key: item.key\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n      type: "button",\n      className: `category-button ${isActiveCategory ? "active" : ""}`,\n      onClick: () => handleToggleCategory(item.key)\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n      className: "category-left"\n    }, Icon && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(Icon, null), " ", item.label)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul", {\n      className: `submenu ${isExpanded ? "expanded" : "collapsed"}`,\n      style: {\n        display: isExpanded ? "block" : "none"\n      }\n    }, item.children.map(child => {\n      if (child.children && child.children.length > 0) {\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", {\n          key: `${item.key}-${child.label}`,\n          className: "submenu-group"\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n          className: "submenu-group-label"\n        }, child.label), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul", {\n          className: "submenu-group-links"\n        }, child.children.map(link => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", {\n          key: `${item.key}-${child.label}-${link.to}`\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_8__.NavLink, {\n          to: link.to,\n          className: ({\n            isActive\n          }) => isActive ? "active" : ""\n        }, link.label)))));\n      }\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("li", {\n        key: `${item.key}-${child.to}`\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_8__.NavLink, {\n        to: child.to,\n        className: ({\n          isActive\n        }) => isActive ? "active" : ""\n      }, child.label));\n    })));\n  })))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SlideBar);\n\n//# sourceURL=webpack://frontend/./src/components/SlideBar.js?')},"./src/components/SocieteInfoModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\nconst SocieteInfoModal = ({\n  open,\n  onClose,\n  onSubmit\n}) => {\n  const [formData, setFormData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    nom_societe: "",\n    ville_societe: "",\n    rue_societe: "",\n    codepostal_societe: ""\n  });\n  const handleChange = e => {\n    setFormData(prev => ({\n      ...prev,\n      [e.target.name]: e.target.value\n    }));\n  };\n  const handleSubmit = () => {\n    onSubmit(formData);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: open,\n    onClose: onClose,\n    fullWidth: true,\n    maxWidth: "sm"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Informations Soci\\xE9t\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    fullWidth: true,\n    margin: "normal",\n    name: "nom_societe",\n    label: "Nom de la soci\\xE9t\\xE9",\n    value: formData.nom_societe,\n    onChange: handleChange,\n    required: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    fullWidth: true,\n    margin: "normal",\n    name: "ville_societe",\n    label: "Ville",\n    value: formData.ville_societe,\n    onChange: handleChange,\n    required: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    fullWidth: true,\n    margin: "normal",\n    name: "rue_societe",\n    label: "Rue",\n    value: formData.rue_societe,\n    onChange: handleChange,\n    required: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    fullWidth: true,\n    margin: "normal",\n    name: "codepostal_societe",\n    label: "Code postal",\n    value: formData.codepostal_societe,\n    onChange: handleChange,\n    required: true\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    onClick: onClose\n  }, "Retour"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    onClick: handleSubmit,\n    variant: "contained",\n    color: "primary"\n  }, "Valider")));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SocieteInfoModal);\n\n//# sourceURL=webpack://frontend/./src/components/SocieteInfoModal.js?')},"./src/components/SousTraitance/AvenantForm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableContainer/TableContainer.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableCell/TableCell.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Grid/Grid.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_x_date_pickers_AdapterDateFns__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/x-date-pickers/AdapterDateFns */ "./node_modules/@mui/x-date-pickers/AdapterDateFns/index.js");\n/* harmony import */ var _mui_x_date_pickers_DatePicker__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/x-date-pickers/DatePicker */ "./node_modules/@mui/x-date-pickers/DatePicker/DatePicker.js");\n/* harmony import */ var _mui_x_date_pickers_LocalizationProvider__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/x-date-pickers/LocalizationProvider */ "./node_modules/@mui/x-date-pickers/LocalizationProvider/LocalizationProvider.js");\n/* harmony import */ var date_fns_locale_fr__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! date-fns/locale/fr */ "./node_modules/date-fns/esm/locale/fr/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/universalDriveGenerator */ "./src/utils/universalDriveGenerator.js");\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\n\n\n\n\n\n\n\nconst AvenantForm = ({\n  open,\n  onClose,\n  contrat,\n  chantier,\n  onSave\n}) => {\n  const [formData, setFormData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    description: "",\n    montant: "",\n    type_travaux: "LOT PEINTURE",\n    date_creation: new Date()\n  });\n  const [avenants, setAvenants] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (contrat) {\n      fetchAvenants();\n    }\n  }, [contrat]);\n  const fetchAvenants = async () => {\n    try {\n      const response = await fetch(`/api/contrats-sous-traitance/${contrat.id}/avenants/`);\n      const data = await response.json();\n      setAvenants(data);\n    } catch (error) {\n      console.error("Erreur lors de la récupération des avenants:", error);\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleDateCreationChange = date => {\n    setFormData(prev => ({\n      ...prev,\n      date_creation: date\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      console.log("Création d\'un avenant pour le contrat:", contrat);\n      console.log("Données du formulaire:", formData);\n      const response = await fetch(`/api/contrats-sous-traitance/${contrat.id}/avenants/`, {\n        method: "POST",\n        headers: {\n          "Content-Type": "application/json"\n        },\n        body: JSON.stringify({\n          ...formData,\n          numero: avenants.length + 1,\n          contrat: contrat.id,\n          date_creation: formData.date_creation.toISOString().split("T")[0]\n        })\n      });\n      if (response.ok) {\n        const data = await response.json();\n        console.log("Avenant créé avec succès:", data);\n\n        // Téléchargement automatique vers le Drive après création de l\'avenant\n        try {\n          var _chantier$societe, _chantier$societe2, _contrat$sous_traitan;\n          console.log("🚀 Lancement du téléchargement automatique de l\'avenant vers le Drive...");\n          const driveData = {\n            avenantId: data.id,\n            contratId: contrat.id,\n            chantierId: contrat.chantier,\n            chantierName: (chantier === null || chantier === void 0 ? void 0 : chantier.chantier_name) || (chantier === null || chantier === void 0 ? void 0 : chantier.nom) || contrat.nom_operation || "Chantier",\n            societeName: (chantier === null || chantier === void 0 || (_chantier$societe = chantier.societe) === null || _chantier$societe === void 0 ? void 0 : _chantier$societe.nom_societe) || (chantier === null || chantier === void 0 || (_chantier$societe2 = chantier.societe) === null || _chantier$societe2 === void 0 ? void 0 : _chantier$societe2.nom) || "Société",\n            sousTraitantName: ((_contrat$sous_traitan = contrat.sous_traitant_details) === null || _contrat$sous_traitan === void 0 ? void 0 : _contrat$sous_traitan.entreprise) || "Sous-traitant",\n            numeroAvenant: data.numero\n          };\n          console.log("🔍 DEBUG AvenantForm - driveData:", driveData);\n          await (0,_utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_1__.generatePDFDrive)("avenant_sous_traitance", driveData);\n          console.log("✅ Avenant téléchargé avec succès vers le Drive");\n        } catch (driveError) {\n          console.error("❌ Erreur lors du téléchargement vers le Drive:", driveError);\n          // Ne pas bloquer la création de l\'avenant si le Drive échoue\n        }\n        onSave(data);\n        onClose();\n      } else {\n        const errorText = await response.text();\n        console.error("Erreur lors de la création de l\'avenant:", errorText);\n        alert("Erreur lors de la création de l\'avenant. Vérifiez la console pour plus de détails.");\n      }\n    } catch (error) {\n      console.error("Erreur complète:", error);\n      alert("Une erreur est survenue lors de la création de l\'avenant.");\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: open,\n    onClose: onClose,\n    maxWidth: "md",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "Nouvel avenant"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, avenants.length > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, "Historique des avenants"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_7__["default"],\n    sx: {\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, "Num\\xE9ro"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, "Date"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, "Description"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, "Montant"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, "Type de Travaux"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, avenants.map(avenant => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    key: avenant.id\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, avenant.numero), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, new Date(avenant.date_creation).toLocaleDateString()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, avenant.description), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, avenant.montant, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, avenant.type_travaux))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("form", {\n    onSubmit: handleSubmit\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    container: true,\n    spacing: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    item: true,\n    xs: 12\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    fullWidth: true,\n    label: "Description",\n    name: "description",\n    multiline: true,\n    rows: 4,\n    value: formData.description,\n    onChange: handleChange,\n    required: true\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    item: true,\n    xs: 12\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    fullWidth: true,\n    label: "Montant",\n    name: "montant",\n    type: "number",\n    value: formData.montant,\n    onChange: handleChange,\n    required: true\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    fullWidth: true,\n    label: "Type de Travaux",\n    name: "type_travaux",\n    value: formData.type_travaux,\n    onChange: handleChange,\n    required: true\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_x_date_pickers_LocalizationProvider__WEBPACK_IMPORTED_MODULE_15__.LocalizationProvider, {\n    dateAdapter: _mui_x_date_pickers_AdapterDateFns__WEBPACK_IMPORTED_MODULE_16__.AdapterDateFns,\n    adapterLocale: date_fns_locale_fr__WEBPACK_IMPORTED_MODULE_17__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_x_date_pickers_DatePicker__WEBPACK_IMPORTED_MODULE_18__.DatePicker, {\n    label: "Date de cr\\xE9ation de l\'avenant",\n    value: formData.date_creation,\n    onChange: handleDateCreationChange,\n    renderInput: params => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], _extends({}, params, {\n      fullWidth: true,\n      required: true\n    }))\n  })))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    onClick: handleSubmit,\n    variant: "contained",\n    color: "primary"\n  }, "Cr\\xE9er")));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AvenantForm);\n\n//# sourceURL=webpack://frontend/./src/components/SousTraitance/AvenantForm.js?')},"./src/components/SousTraitance/ContratForm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputLabel/InputLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Grid/Grid.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputAdornment/InputAdornment.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_x_date_pickers_AdapterDateFns__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/x-date-pickers/AdapterDateFns */ "./node_modules/@mui/x-date-pickers/AdapterDateFns/index.js");\n/* harmony import */ var _mui_x_date_pickers_DatePicker__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/x-date-pickers/DatePicker */ "./node_modules/@mui/x-date-pickers/DatePicker/DatePicker.js");\n/* harmony import */ var _mui_x_date_pickers_LocalizationProvider__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/x-date-pickers/LocalizationProvider */ "./node_modules/@mui/x-date-pickers/LocalizationProvider/LocalizationProvider.js");\n/* harmony import */ var date_fns_locale_fr__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! date-fns/locale/fr */ "./node_modules/date-fns/esm/locale/fr/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/universalDriveGenerator */ "./src/utils/universalDriveGenerator.js");\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\n\n\n\n\n\n\n\nconst ContratForm = ({\n  open,\n  onClose,\n  sousTraitant,\n  chantier,\n  onSave\n}) => {\n  const [formData, setFormData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    description_prestation: "",\n    date_debut: new Date(),\n    date_creation: new Date(),\n    duree: "Jusqu\'à livraison du chantier",\n    adresse_prestation: "",\n    nom_operation: "",\n    montant_operation: "",\n    type_contrat: "NETTOYAGE",\n    nom_maitre_ouvrage: "",\n    nom_maitre_oeuvre: ""\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (chantier) {\n      // Construction de l\'adresse complète du chantier\n      const adresseComplete = [chantier.rue || "", chantier.code_postal || "", chantier.ville || ""].filter(part => part.trim() !== "").join(", ");\n      setFormData(prev => ({\n        ...prev,\n        adresse_prestation: adresseComplete,\n        nom_operation: chantier.chantier_name || ""\n      }));\n    }\n  }, [chantier]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleDateChange = date => {\n    setFormData(prev => ({\n      ...prev,\n      date_debut: date\n    }));\n  };\n  const handleDateCreationChange = date => {\n    setFormData(prev => ({\n      ...prev,\n      date_creation: date\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // Vérification des données requises\n    if (!(sousTraitant !== null && sousTraitant !== void 0 && sousTraitant.id)) {\n      alert("Erreur: Sous-traitant non sélectionné");\n      return;\n    }\n    if (!(chantier !== null && chantier !== void 0 && chantier.id)) {\n      alert("Erreur: Chantier non sélectionné");\n      return;\n    }\n    if (!formData.montant_operation) {\n      alert("Erreur: Le montant de l\'opération est requis");\n      return;\n    }\n    if (!formData.nom_maitre_ouvrage) {\n      alert("Erreur: Le nom du maître d\'ouvrage est requis");\n      return;\n    }\n    if (!formData.nom_maitre_oeuvre) {\n      alert("Erreur: Le nom du maître d\'œuvre est requis");\n      return;\n    }\n    try {\n      const contratData = {\n        ...formData,\n        sous_traitant: sousTraitant.id,\n        chantier: chantier.id,\n        date_debut: formData.date_debut.toISOString().split("T")[0],\n        date_creation: formData.date_creation.toISOString().split("T")[0],\n        montant_operation: parseFloat(formData.montant_operation).toFixed(2),\n        description_prestation: formData.description_prestation.trim(),\n        adresse_prestation: formData.adresse_prestation.trim(),\n        nom_operation: formData.nom_operation.trim(),\n        duree: formData.duree.trim(),\n        nom_maitre_ouvrage: formData.nom_maitre_ouvrage.trim(),\n        nom_maitre_oeuvre: formData.nom_maitre_oeuvre.trim()\n      };\n      console.log("Données envoyées:", contratData);\n      const response = await fetch("/api/contrats-sous-traitance/", {\n        method: "POST",\n        headers: {\n          "Content-Type": "application/json",\n          Accept: "application/json"\n        },\n        body: JSON.stringify(contratData)\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error("Réponse du serveur:", errorText);\n        throw new Error(`Erreur ${response.status}: ${errorText}`);\n      }\n      const responseData = await response.json();\n\n      // Téléchargement automatique vers le Drive après création du contrat\n      try {\n        var _chantier$societe, _chantier$societe2;\n        console.log("🚀 Lancement du téléchargement automatique du contrat vers le Drive...");\n        const driveData = {\n          contratId: responseData.id,\n          chantierId: chantier.id,\n          chantierName: chantier.chantier_name || chantier.nom,\n          societeName: ((_chantier$societe = chantier.societe) === null || _chantier$societe === void 0 ? void 0 : _chantier$societe.nom_societe) || ((_chantier$societe2 = chantier.societe) === null || _chantier$societe2 === void 0 ? void 0 : _chantier$societe2.nom) || "Société",\n          sousTraitantName: sousTraitant.entreprise\n        };\n        await (0,_utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_1__.generatePDFDrive)("contrat_sous_traitance", driveData);\n        console.log("✅ Contrat téléchargé avec succès vers le Drive");\n      } catch (driveError) {\n        console.error("❌ Erreur lors du téléchargement vers le Drive:", driveError);\n        // Ne pas bloquer la création du contrat si le Drive échoue\n      }\n      onSave(responseData);\n      onClose();\n    } catch (error) {\n      console.error("Erreur complète:", error);\n      alert(`Une erreur est survenue lors de la création du contrat: ${error.message}`);\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: open,\n    onClose: onClose,\n    maxWidth: "md",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("form", {\n    onSubmit: handleSubmit\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "Nouveau contrat de sous-traitance"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      display: "flex",\n      flexDirection: "column",\n      gap: 2,\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, "Type de contrat"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: formData.type_contrat,\n    onChange: handleChange,\n    name: "type_contrat",\n    label: "Type de contrat"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: "BTP"\n  }, "BTP"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: "NETTOYAGE"\n  }, "Nettoyage"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    name: "description_prestation",\n    label: "Description de la prestation",\n    multiline: true,\n    rows: 4,\n    value: formData.description_prestation,\n    onChange: handleChange,\n    fullWidth: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    name: "nom_maitre_ouvrage",\n    label: "Nom du ma\\xEEtre d\'ouvrage",\n    value: formData.nom_maitre_ouvrage,\n    onChange: handleChange,\n    fullWidth: true,\n    required: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    name: "nom_maitre_oeuvre",\n    label: "Nom du ma\\xEEtre d\'\\u0153uvre",\n    value: formData.nom_maitre_oeuvre,\n    onChange: handleChange,\n    fullWidth: true,\n    required: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_x_date_pickers_LocalizationProvider__WEBPACK_IMPORTED_MODULE_12__.LocalizationProvider, {\n    dateAdapter: _mui_x_date_pickers_AdapterDateFns__WEBPACK_IMPORTED_MODULE_13__.AdapterDateFns,\n    adapterLocale: date_fns_locale_fr__WEBPACK_IMPORTED_MODULE_14__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_x_date_pickers_DatePicker__WEBPACK_IMPORTED_MODULE_15__.DatePicker, {\n    label: "Date de d\\xE9but",\n    value: formData.date_debut,\n    onChange: handleDateChange,\n    renderInput: params => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], _extends({}, params, {\n      fullWidth: true,\n      required: true\n    }))\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_x_date_pickers_LocalizationProvider__WEBPACK_IMPORTED_MODULE_12__.LocalizationProvider, {\n    dateAdapter: _mui_x_date_pickers_AdapterDateFns__WEBPACK_IMPORTED_MODULE_13__.AdapterDateFns,\n    adapterLocale: date_fns_locale_fr__WEBPACK_IMPORTED_MODULE_14__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_x_date_pickers_DatePicker__WEBPACK_IMPORTED_MODULE_15__.DatePicker, {\n    label: "Date de cr\\xE9ation du contrat",\n    value: formData.date_creation,\n    onChange: handleDateCreationChange,\n    renderInput: params => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], _extends({}, params, {\n      fullWidth: true,\n      required: true\n    }))\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    fullWidth: true,\n    label: "Dur\\xE9e",\n    name: "duree",\n    value: formData.duree,\n    onChange: handleChange,\n    required: true\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    fullWidth: true,\n    label: "Adresse de la prestation",\n    name: "adresse_prestation",\n    value: formData.adresse_prestation,\n    onChange: handleChange,\n    required: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    fullWidth: true,\n    label: "Nom de l\'op\\xE9ration",\n    name: "nom_operation",\n    value: formData.nom_operation,\n    onChange: handleChange,\n    required: true\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    fullWidth: true,\n    label: "Montant de l\'op\\xE9ration",\n    name: "montant_operation",\n    type: "number",\n    value: formData.montant_operation,\n    onChange: handleChange,\n    required: true,\n    InputProps: {\n      endAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n        position: "end"\n      }, "\\u20AC")\n    }\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    type: "submit",\n    variant: "contained",\n    color: "primary"\n  }, "Cr\\xE9er"))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ContratForm);\n\n//# sourceURL=webpack://frontend/./src/components/SousTraitance/ContratForm.js?')},"./src/components/SousTraitance/SousTraitanceModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputLabel/InputLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Accordion/Accordion.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/AccordionSummary/AccordionSummary.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Tooltip/Tooltip.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/AccordionDetails/AccordionDetails.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableContainer/TableContainer.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableCell/TableCell.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fa__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-icons/fa */ "./node_modules/react-icons/fa/index.mjs");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");\n/* harmony import */ var _AvenantForm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AvenantForm */ "./src/components/SousTraitance/AvenantForm.js");\n/* harmony import */ var _ContratForm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ContratForm */ "./src/components/SousTraitance/ContratForm.js");\n/* harmony import */ var _SousTraitantForm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./SousTraitantForm */ "./src/components/SousTraitance/SousTraitantForm.js");\n\n\n\n\n\n\n\nconst SousTraitanceModal = ({\n  open,\n  onClose,\n  chantierId,\n  onUpdate\n}) => {\n  const [sousTraitants, setSousTraitants] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [selectedSousTraitant, setSelectedSousTraitant] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [showSousTraitantForm, setShowSousTraitantForm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showContratForm, setShowContratForm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showAvenantForm, setShowAvenantForm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [chantier, setChantier] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [typeFilter, setTypeFilter] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [hasChanges, setHasChanges] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useNavigate)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (open) {\n      fetchChantier();\n      fetchSousTraitants();\n    }\n  }, [open, chantierId]);\n  const fetchChantier = async () => {\n    try {\n      const response = await fetch(`/api/chantier/${chantierId}/`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      setChantier(data);\n    } catch (error) {\n      console.error("Erreur lors de la récupération du chantier:", error);\n    }\n  };\n  const fetchSousTraitants = async () => {\n    try {\n      // Récupérer tous les sous-traitants\n      const response = await fetch(`/api/sous-traitants/`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const sousTraitantsData = await response.json();\n\n      // Récupérer uniquement les contrats du chantier sélectionné avec leurs avenants\n      const contratsResponse = await fetch(`/api/contrats-sous-traitance/?chantier_id=${chantierId}`);\n      if (!contratsResponse.ok) {\n        throw new Error(`HTTP error! status: ${contratsResponse.status}`);\n      }\n      const contratsData = await contratsResponse.json();\n\n      // Associer uniquement les contrats spécifiques au chantier\n      const sousTraitantsWithContrats = sousTraitantsData.map(sousTraitant => {\n        const contrat = contratsData.find(c => c.sous_traitant === sousTraitant.id);\n        return {\n          ...sousTraitant,\n          contrat: contrat || null\n        };\n      });\n      setSousTraitants(sousTraitantsWithContrats);\n    } catch (error) {\n      console.error("Erreur lors de la récupération des sous-traitants:", error);\n    }\n  };\n  const handleCreateSousTraitant = () => {\n    setSelectedSousTraitant(null);\n    setShowSousTraitantForm(true);\n  };\n  const handleEditSousTraitant = sousTraitant => {\n    setSelectedSousTraitant(sousTraitant);\n    setShowSousTraitantForm(true);\n  };\n  const handleCreateContrat = sousTraitant => {\n    setSelectedSousTraitant(sousTraitant);\n    setShowContratForm(true);\n  };\n  const handleCreateAvenant = sousTraitant => {\n    setSelectedSousTraitant(sousTraitant);\n    setShowAvenantForm(true);\n  };\n  const handleSousTraitantSave = () => {\n    setShowSousTraitantForm(false);\n    setHasChanges(true);\n    fetchSousTraitants();\n  };\n  const handleContratSave = async contratData => {\n    try {\n      setShowContratForm(false);\n      setHasChanges(true);\n      // Rafraîchir après un court délai pour s\'assurer que la base de données est mise à jour\n      setTimeout(() => {\n        fetchSousTraitants();\n      }, 500);\n    } catch (error) {\n      console.error("Erreur lors de la sauvegarde du contrat:", error);\n    }\n  };\n  const handleAvenantSave = async avenantData => {\n    try {\n      setShowAvenantForm(false);\n      setHasChanges(true);\n      // Rafraîchir après un court délai pour s\'assurer que la base de données est mise à jour\n      setTimeout(() => {\n        fetchSousTraitants();\n      }, 500);\n    } catch (error) {\n      console.error("Erreur lors de la sauvegarde de l\'avenant:", error);\n    }\n  };\n  const handleDeleteContrat = async contratId => {\n    try {\n      // Confirmation avant suppression\n      if (!window.confirm("Êtes-vous sûr de vouloir supprimer ce contrat ? Tous les avenants associés seront également supprimés.")) {\n        return;\n      }\n      const response = await fetch(`/api/contrats-sous-traitance/${contratId}/`, {\n        method: "DELETE"\n      });\n      if (response.ok) {\n        setHasChanges(true);\n        fetchSousTraitants(); // Rafraîchir la liste\n      } else {\n        console.error("Erreur lors de la suppression du contrat");\n      }\n    } catch (error) {\n      console.error("Erreur lors de la suppression du contrat:", error);\n    }\n  };\n  const handleDeleteAvenant = async avenantId => {\n    try {\n      // Confirmation avant suppression\n      if (!window.confirm("Êtes-vous sûr de vouloir supprimer cet avenant ?")) {\n        return;\n      }\n      const response = await fetch(`/api/avenants-sous-traitance/${avenantId}/`, {\n        method: "DELETE"\n      });\n      if (response.ok) {\n        setHasChanges(true);\n        fetchSousTraitants(); // Rafraîchir la liste\n      } else {\n        console.error("Erreur lors de la suppression de l\'avenant");\n      }\n    } catch (error) {\n      console.error("Erreur lors de la suppression de l\'avenant:", error);\n    }\n  };\n  const handlePreviewContrat = contratId => {\n    const previewUrl = `/api/preview-contrat/${contratId}/`;\n    window.open(previewUrl, "_blank");\n  };\n  const handlePreviewAvenant = avenantId => {\n    const previewUrl = `/api/preview-avenant/${avenantId}/`;\n    window.open(previewUrl, "_blank");\n  };\n  const handleModalClose = () => {\n    // Si des modifications ont été faites, déclencher onUpdate\n    if (hasChanges && onUpdate) {\n      onUpdate();\n    }\n    // Réinitialiser l\'état des modifications\n    setHasChanges(false);\n    // Fermer le modal\n    onClose();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    open: open,\n    onClose: handleModalClose,\n    maxWidth: "md",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    display: "flex",\n    justifyContent: "space-between",\n    alignItems: "center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    variant: "h6"\n  }, "Gestion des sous-traitants"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_10__.FaPlus, null),\n    variant: "contained",\n    color: "primary",\n    onClick: handleCreateSousTraitant\n  }, "Nouveau sous-traitant"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, "Filtrer par type"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    value: typeFilter,\n    onChange: e => setTypeFilter(e.target.value),\n    label: "Filtrer par type"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    value: ""\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("em", null, "Tous les types")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    value: "NETTOYAGE"\n  }, "Nettoyage"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    value: "BTP"\n  }, "BTP"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    value: "TCE"\n  }, "TCE"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    value: "AUTRE"\n  }, "Autre")))), sousTraitants.filter(sousTraitant => !typeFilter || sousTraitant.type === typeFilter).map(sousTraitant => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    key: sousTraitant.id\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    expandIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_10__.FaChevronDown, null),\n    "aria-controls": `panel${sousTraitant.id}-content`,\n    id: `panel${sousTraitant.id}-header`\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    display: "flex",\n    justifyContent: "space-between",\n    alignItems: "center",\n    width: "100%"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, sousTraitant.entreprise, " - ", sousTraitant.numero_rcs), sousTraitant.type && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    variant: "caption",\n    sx: {\n      color: "text.secondary"\n    }\n  }, "Type: ", sousTraitant.type)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    title: "Modifier le sous-traitant",\n    arrow: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    edge: "end",\n    onClick: e => {\n      e.stopPropagation();\n      handleEditSousTraitant(sousTraitant);\n    },\n    sx: {\n      mr: 2.5,\n      color: "#2e7d32",\n      "&:hover": {\n        backgroundColor: "rgba(46, 125, 50, 0.1)"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_10__.FaEdit, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    title: "Afficher le tableau de paiements",\n    arrow: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    edge: "end",\n    onClick: e => {\n      e.stopPropagation();\n      window.open(`/paiements-sous-traitant/${chantier.id}/${sousTraitant.id}`, "_blank");\n    },\n    sx: {\n      mr: 2.5,\n      color: "#9c27b0",\n      "&:hover": {\n        backgroundColor: "rgba(156, 39, 176, 0.1)"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_10__.FaTable, null))), sousTraitant.contrat ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    title: "Cr\\xE9er un avenant",\n    arrow: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    edge: "end",\n    onClick: e => {\n      e.stopPropagation();\n      handleCreateAvenant(sousTraitant);\n    },\n    sx: {\n      mr: 2.5,\n      color: "#1976d2",\n      "&:hover": {\n        backgroundColor: "rgba(25, 118, 210, 0.1)"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_10__.FaPlusCircle, null))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    title: "Cr\\xE9er un contrat",\n    arrow: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    edge: "end",\n    onClick: e => {\n      e.stopPropagation();\n      handleCreateContrat(sousTraitant);\n    },\n    sx: {\n      mr: 2.5,\n      color: "#1976d2",\n      "&:hover": {\n        backgroundColor: "rgba(25, 118, 210, 0.1)"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_10__.FaPlus, null)))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, sousTraitant.contrat ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, "Contrat de sous-traitance"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_22__["default"],\n    sx: {\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    width: "15%"\n  }, "Type"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    width: "30%"\n  }, "Description"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    width: "15%"\n  }, "Cat\\xE9gorie"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    width: "15%"\n  }, "Date"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    width: "15%",\n    align: "right",\n    sx: {\n      whiteSpace: "nowrap"\n    }\n  }, "Montant"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    width: "10%",\n    align: "center"\n  }, "Actions"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    onClick: () => handlePreviewContrat(sousTraitant.contrat.id),\n    sx: {\n      cursor: "pointer",\n      color: "primary.main",\n      fontWeight: "bold",\n      "&:hover": {\n        textDecoration: "underline"\n      }\n    }\n  }, "Contrat initial"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], null, sousTraitant.contrat.description_prestation), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], null, sousTraitant.contrat.type_contrat), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], null, new Date(sousTraitant.contrat.date_debut).toLocaleDateString()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    align: "right",\n    sx: {\n      whiteSpace: "nowrap"\n    }\n  }, sousTraitant.contrat.montant_operation.toLocaleString("fr-FR"), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    align: "center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    title: "Supprimer le contrat et tous ses avenants",\n    arrow: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    size: "small",\n    onClick: () => handleDeleteContrat(sousTraitant.contrat.id),\n    sx: {\n      color: "#d32f2f",\n      "&:hover": {\n        backgroundColor: "rgba(211, 47, 47, 0.1)"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_10__.FaTrash, null))))), sousTraitant.contrat.avenants && sousTraitant.contrat.avenants.sort((a, b) => a.numero - b.numero).map(avenant => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    key: avenant.id\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    onClick: () => handlePreviewAvenant(avenant.id),\n    sx: {\n      cursor: "pointer",\n      color: "primary.main",\n      "&:hover": {\n        textDecoration: "underline"\n      }\n    }\n  }, "Avenant n\\xB0", avenant.numero), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], null, avenant.description), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], null, sousTraitant.contrat.type_contrat), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], null, new Date(avenant.date_creation).toLocaleDateString()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    align: "right",\n    sx: {\n      whiteSpace: "nowrap"\n    }\n  }, avenant.montant.toLocaleString("fr-FR"), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    align: "center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    title: "Supprimer l\'avenant",\n    arrow: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    size: "small",\n    onClick: () => handleDeleteAvenant(avenant.id),\n    sx: {\n      color: "#d32f2f",\n      "&:hover": {\n        backgroundColor: "rgba(211, 47, 47, 0.1)"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_10__.FaTrash, null)))))))))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    color: "text.secondary"\n  }, "Aucun contrat de sous-traitance pour ce sous-traitant"))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_28__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    onClick: handleModalClose\n  }, "Fermer"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SousTraitantForm__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    open: showSousTraitantForm,\n    onClose: () => setShowSousTraitantForm(false),\n    sousTraitant: selectedSousTraitant,\n    onSave: handleSousTraitantSave\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ContratForm__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: showContratForm,\n    onClose: () => setShowContratForm(false),\n    sousTraitant: selectedSousTraitant,\n    chantier: chantier,\n    onSave: handleContratSave\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_AvenantForm__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: showAvenantForm,\n    onClose: () => setShowAvenantForm(false),\n    contrat: (selectedSousTraitant === null || selectedSousTraitant === void 0 ? void 0 : selectedSousTraitant.contrat) || null,\n    chantier: chantier,\n    onSave: handleAvenantSave\n  }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SousTraitanceModal);\n\n//# sourceURL=webpack://frontend/./src/components/SousTraitance/SousTraitanceModal.js?')},"./src/components/SousTraitance/SousTraitantForm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Grid/Grid.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputLabel/InputLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\nconst SousTraitantForm = ({\n  open,\n  onClose,\n  sousTraitant,\n  onSave\n}) => {\n  const [formData, setFormData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    entreprise: "",\n    capital: "",\n    adresse: "",\n    code_postal: "",\n    ville: "",\n    numero_rcs: "",\n    representant: "",\n    forme_juridique: "",\n    email: "",\n    type: ""\n  });\n  const [errors, setErrors] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (sousTraitant) {\n      setFormData({\n        ...sousTraitant,\n        capital: sousTraitant.capital.toString()\n      });\n    } else {\n      setFormData({\n        entreprise: "",\n        capital: "",\n        adresse: "",\n        code_postal: "",\n        ville: "",\n        numero_rcs: "",\n        representant: "",\n        forme_juridique: "",\n        email: "",\n        type: ""\n      });\n    }\n    setErrors({});\n  }, [sousTraitant]);\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.entreprise) newErrors.entreprise = "L\'entreprise est requise";\n    if (!formData.adresse) newErrors.adresse = "L\'adresse est requise";\n    if (!formData.code_postal) newErrors.code_postal = "Le code postal est requis";\n    if (!formData.ville) newErrors.ville = "La ville est requise";\n    if (!formData.numero_rcs) newErrors.numero_rcs = "Le numéro RCS est requis";\n    if (!formData.representant) newErrors.representant = "Le représentant est requis";\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    // Effacer l\'erreur du champ modifié\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: undefined\n      }));\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!validateForm()) return;\n    try {\n      const url = sousTraitant ? `/api/sous-traitants/${sousTraitant.id}/` : "/api/sous-traitants/";\n      const method = sousTraitant ? "PUT" : "POST";\n      const response = await fetch(url, {\n        method,\n        headers: {\n          "Content-Type": "application/json"\n        },\n        body: JSON.stringify({\n          ...formData,\n          capital: parseFloat(formData.capital) || 0\n        })\n      });\n      if (response.ok) {\n        const data = await response.json();\n        onSave(data);\n        onClose();\n      } else {\n        const errorData = await response.json();\n        setErrors(errorData);\n        console.error("Erreur lors de la sauvegarde du sous-traitant:", errorData);\n      }\n    } catch (error) {\n      console.error("Erreur:", error);\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: open,\n    onClose: onClose,\n    maxWidth: "md",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, sousTraitant ? "Modifier le sous-traitant" : "Nouveau sous-traitant"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    container: true,\n    spacing: 2,\n    sx: {\n      mt: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    fullWidth: true,\n    label: "Entreprise",\n    name: "entreprise",\n    value: formData.entreprise,\n    onChange: handleChange,\n    error: !!errors.entreprise,\n    helperText: errors.entreprise\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    fullWidth: true,\n    label: "Capital",\n    name: "capital",\n    type: "number",\n    value: formData.capital,\n    onChange: handleChange,\n    error: !!errors.capital,\n    helperText: errors.capital\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    fullWidth: true,\n    label: "Adresse",\n    name: "adresse",\n    value: formData.adresse,\n    onChange: handleChange,\n    error: !!errors.adresse,\n    helperText: errors.adresse\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    fullWidth: true,\n    label: "Code postal",\n    name: "code_postal",\n    value: formData.code_postal,\n    onChange: handleChange,\n    error: !!errors.code_postal,\n    helperText: errors.code_postal\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    fullWidth: true,\n    label: "Ville",\n    name: "ville",\n    value: formData.ville,\n    onChange: handleChange,\n    error: !!errors.ville,\n    helperText: errors.ville\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    fullWidth: true,\n    label: "Num\\xE9ro RCS",\n    name: "numero_rcs",\n    value: formData.numero_rcs,\n    onChange: handleChange,\n    error: !!errors.numero_rcs,\n    helperText: errors.numero_rcs\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    fullWidth: true,\n    label: "Repr\\xE9sentant",\n    name: "representant",\n    value: formData.representant,\n    onChange: handleChange,\n    error: !!errors.representant,\n    helperText: errors.representant\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    fullWidth: true,\n    label: "Forme Juridique",\n    name: "forme_juridique",\n    value: formData.forme_juridique,\n    onChange: handleChange,\n    error: !!errors.forme_juridique,\n    helperText: errors.forme_juridique\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    fullWidth: true,\n    label: "Adresse Email",\n    name: "email",\n    type: "email",\n    value: formData.email,\n    onChange: handleChange,\n    error: !!errors.email,\n    helperText: errors.email\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, "Type d\'activit\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    name: "type",\n    value: formData.type,\n    onChange: handleChange,\n    label: "Type d\'activit\\xE9"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: ""\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("em", null, "S\\xE9lectionner un type")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: "NETTOYAGE"\n  }, "Nettoyage"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: "BTP"\n  }, "BTP"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: "TCE"\n  }, "TCE"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: "AUTRE"\n  }, "Autre")))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    onClick: handleSubmit,\n    variant: "contained",\n    color: "primary"\n  }, sousTraitant ? "Modifier" : "Créer")));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SousTraitantForm);\n\n//# sourceURL=webpack://frontend/./src/components/SousTraitance/SousTraitantForm.js?')},"./src/components/SpecialLineModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormLabel/FormLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/RadioGroup/RadioGroup.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControlLabel/FormControlLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Radio/Radio.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Checkbox/Checkbox.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\nconst SpecialLineModal = ({\n  open,\n  onClose,\n  onSave\n}) => {\n  const [description, setDescription] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [value, setValue] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [isHighlighted, setIsHighlighted] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [valueType, setValueType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("percentage"); // \'percentage\' ou \'fixed\'\n  const [type, setType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("reduction"); // \'reduction\' ou \'addition\'\n\n  // Nouvelle fonction pour valider l\'entrée\n  const handleValueChange = e => {\n    const input = e.target.value;\n    // Autoriser uniquement les chiffres, le point décimal et le champ vide\n    if (input === "" || /^\\d*\\.?\\d*$/.test(input)) {\n      setValue(input);\n    }\n  };\n  const handleSave = () => {\n    // Vérifier si la valeur est valide avant de sauvegarder\n    if (!value || isNaN(parseFloat(value))) {\n      alert("Veuillez entrer une valeur numérique valide");\n      return;\n    }\n    onSave({\n      description,\n      value: parseFloat(value),\n      isHighlighted,\n      valueType,\n      type\n    });\n    // Réinitialiser les champs\n    setDescription("");\n    setValue("");\n    setIsHighlighted(false);\n    setValueType("percentage");\n    setType("reduction");\n    onClose();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: open,\n    onClose: onClose,\n    maxWidth: "sm",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Ajouter une ligne sp\\xE9ciale"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    autoFocus: true,\n    margin: "dense",\n    label: "Description",\n    fullWidth: true,\n    value: description,\n    onChange: e => setDescription(e.target.value)\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    component: "fieldset",\n    sx: {\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    component: "legend"\n  }, "Type de valeur"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    row: true,\n    value: valueType,\n    onChange: e => setValueType(e.target.value)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: "percentage",\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null),\n    label: "Pourcentage (%)"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: "fixed",\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null),\n    label: "Montant fixe (\\u20AC)"\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    component: "fieldset",\n    sx: {\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    component: "legend"\n  }, "Type d\'op\\xE9ration"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    row: true,\n    value: type,\n    onChange: e => setType(e.target.value)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: "reduction",\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null),\n    label: "R\\xE9duction"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: "addition",\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null),\n    label: "Addition"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: "display",\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null),\n    label: "Affichage uniquement"\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    type: "text" // Changé de "number" à "text" pour un meilleur contrôle\n    ,\n    label: valueType === "percentage" ? "Valeur (%)" : "Montant (€)",\n    value: value,\n    onChange: handleValueChange,\n    fullWidth: true,\n    margin: "dense",\n    inputProps: {\n      inputMode: "decimal",\n      pattern: "[0-9]*\\\\.?[0-9]*"\n    },\n    error: value !== "" && isNaN(parseFloat(value)),\n    helperText: value !== "" && isNaN(parseFloat(value)) ? "Veuillez entrer un nombre valide" : ""\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n      checked: isHighlighted,\n      onChange: e => setIsHighlighted(e.target.checked)\n    }),\n    label: "Mettre en \\xE9vidence"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    onClick: handleSave,\n    color: "primary",\n    disabled: !value || isNaN(parseFloat(value))\n  }, "Sauvegarder")));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SpecialLineModal);\n\n//# sourceURL=webpack://frontend/./src/components/SpecialLineModal.js?')},"./src/components/SpecialLinesOverview.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Card/Card.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/CardContent/CardContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Tooltip/Tooltip.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_md__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-icons/md */ "./node_modules/react-icons/md/index.mjs");\n\n\n\nconst SpecialLinesOverview = ({\n  specialLines,\n  onDelete\n}) => {\n  const formatValue = line => {\n    const value = line.value;\n    if (value === null || value === undefined || value === "") {\n      return line.valueType === "percentage" ? "0.00%" : "0.00€";\n    }\n    const numValue = parseFloat(value);\n    if (isNaN(numValue)) {\n      return line.valueType === "percentage" ? "0.00%" : "0.00€";\n    }\n    if (line.valueType === "percentage") {\n      return `${numValue.toFixed(2)}%`;\n    }\n    return `${numValue.toFixed(2)}€`;\n  };\n  const renderSpecialLineGroup = (lines, title, groupId = null) => {\n    if (!lines || Array.isArray(lines) && lines.length === 0) return null;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n      sx: {\n        mb: 2,\n        backgroundColor: "#f5f5f5"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n      variant: "h6",\n      sx: {\n        mb: 2,\n        color: "primary.main"\n      }\n    }, title), lines.map((line, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n      key: index,\n      sx: {\n        display: "flex",\n        justifyContent: "space-between",\n        alignItems: "center",\n        p: 1,\n        mb: 1,\n        backgroundColor: line.isHighlighted ? "#fff3e0" : "white",\n        borderRadius: 1,\n        border: "1px solid",\n        borderColor: line.isHighlighted ? "warning.main" : "grey.300"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n      variant: "body1",\n      sx: {\n        fontWeight: 500\n      }\n    }, line.description || line.type), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n      variant: "body2",\n      color: "text.secondary"\n    }, "Type: ", line.type, " | Valeur: ", formatValue(line))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n      title: "Supprimer"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n      size: "small",\n      color: "error",\n      onClick: () => onDelete(groupId, index)\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_md__WEBPACK_IMPORTED_MODULE_7__.MdDelete, null)))))));\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    variant: "h5",\n    sx: {\n      mb: 3\n    }\n  }, "Ajout et retrait", " "), renderSpecialLineGroup(specialLines.global, "Lignes spéciales globales", "global"), Object.entries(specialLines.parties || {}).map(([partieId, lines]) => renderSpecialLineGroup(lines, `Lignes spéciales - Partie ${partieId}`, `parties-${partieId}`)), Object.entries(specialLines.sousParties || {}).map(([sousPartieId, lines]) => renderSpecialLineGroup(lines, `Lignes spéciales - Sous-partie ${sousPartieId}`, `sousParties-${sousPartieId}`)));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SpecialLinesOverview);\n\n//# sourceURL=webpack://frontend/./src/components/SpecialLinesOverview.js?')},"./src/components/StatusChangeModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/RadioGroup/RadioGroup.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControlLabel/FormControlLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Radio/Radio.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\nconst StatusChangeModal = ({\n  open,\n  onClose,\n  currentStatus,\n  onStatusChange,\n  statusOptions,\n  title,\n  type = "devis"\n}) => {\n  const [selectedStatus, setSelectedStatus] = react__WEBPACK_IMPORTED_MODULE_0__.useState(currentStatus);\n  const getStatusOptions = () => {\n    if (type === "facture") {\n      return ["En cours", "Attente paiement", "Payée"];\n    }\n    return ["En attente", "Validé", "Refusé"];\n  };\n  const handleSubmit = () => {\n    onStatusChange(selectedStatus);\n    onClose();\n  };\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    setSelectedStatus(currentStatus);\n  }, [currentStatus, open]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: open,\n    onClose: onClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, title || (type === "facture" ? "Modifier l\'état de la facture" : "Modifier l\'état du devis")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    value: selectedStatus,\n    onChange: e => setSelectedStatus(e.target.value)\n  }, (statusOptions || getStatusOptions()).map(status => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    key: status,\n    value: status,\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null),\n    label: status\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    onClick: handleSubmit,\n    variant: "contained",\n    color: "primary"\n  }, "Confirmer")));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (StatusChangeModal);\n\n//# sourceURL=webpack://frontend/./src/components/StatusChangeModal.js?')},"./src/components/StockForm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-icons/fi */ "./node_modules/react-icons/fi/index.mjs");\n/* harmony import */ var _Founisseur_NewFournisseurForm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Founisseur/NewFournisseurForm */ "./src/components/Founisseur/NewFournisseurForm.js");\n/* harmony import */ var _ListeStock__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ListeStock */ "./src/components/ListeStock.js");\n/* harmony import */ var _NewProductForm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./NewProductForm */ "./src/components/NewProductForm.js");\n\n\n\n\n\n\n\n// Dans votre composant parent\nfunction StockForm() {\n  const [openModal, setOpenModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [openFournisseurModal, setOpenFournisseurModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [refreshKey, setRefreshKey] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const handleOpenModal = () => setOpenModal(true);\n  const handleCloseModal = () => setOpenModal(false);\n  const handleOpenFournisseurModal = () => setOpenFournisseurModal(true);\n  const handleCloseFournisseurModal = () => setOpenFournisseurModal(false);\n  const handleAddProduct = () => {\n    setRefreshKey(oldKey => oldKey + 1);\n    handleCloseModal();\n  };\n  const handleAddFournisseur = () => {\n    setRefreshKey(oldKey => oldKey + 1);\n    handleCloseFournisseurModal();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      maxWidth: "1430px",\n      margin: "0 auto",\n      padding: "20px",\n      display: "flex",\n      flexDirection: "column",\n      gap: "20px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ListeStock__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    key: refreshKey\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      display: "flex",\n      gap: 2,\n      justifyContent: "flex-end"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "contained",\n    onClick: handleOpenFournisseurModal,\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiPlusCircle, null),\n    sx: {\n      backgroundColor: "#1976d2"\n    }\n  }, "Nouveau Fournisseur"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "contained",\n    onClick: handleOpenModal,\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiPlusCircle, null),\n    sx: {\n      backgroundColor: "rgba(27, 120, 188, 1)"\n    }\n  }, "Nouveau Produit")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Founisseur_NewFournisseurForm__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: openFournisseurModal,\n    handleClose: handleCloseFournisseurModal,\n    onAddFournisseur: handleAddFournisseur\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_NewProductForm__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    open: openModal,\n    handleClose: handleCloseModal,\n    onAddProduct: handleAddProduct,\n    refreshKey: refreshKey\n  }));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (StockForm);\n\n//# sourceURL=webpack://frontend/./src/components/StockForm.js?')},"./src/components/TableauPaiementSousTraitant.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_icons_material_Add__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @mui/icons-material/Add */ "./node_modules/@mui/icons-material/Add.js");\n/* harmony import */ var _mui_icons_material_Delete__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/icons-material/Delete */ "./node_modules/@mui/icons-material/Delete.js");\n/* harmony import */ var _mui_icons_material_Payment__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/icons-material/Payment */ "./node_modules/@mui/icons-material/Payment.js");\n/* harmony import */ var _mui_icons_material_RemoveCircleOutline__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/icons-material/RemoveCircleOutline */ "./node_modules/@mui/icons-material/RemoveCircleOutline.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableContainer/TableContainer.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableCell/TableCell.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Tooltip/Tooltip.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\n\n\n\n\n\nconst DateEnvoiModal = ({\n  open,\n  onClose,\n  paiement,\n  onSubmit\n}) => {\n  const [dateEnvoi, setDateEnvoi] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [delaiPaiement, setDelaiPaiement] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(45);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (paiement) {\n      setDateEnvoi(paiement.date_envoi_facture || "");\n      setDelaiPaiement(paiement.delai_paiement || 45);\n    }\n  }, [paiement]);\n  const handleSubmit = () => {\n    onSubmit(paiement.id, {\n      dateEnvoi,\n      delaiPaiement\n    });\n    onClose();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: open,\n    onClose: onClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Date d\'envoi et d\\xE9lai de paiement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    type: "date",\n    label: "Date d\'envoi",\n    value: dateEnvoi,\n    onChange: e => setDateEnvoi(e.target.value),\n    fullWidth: true,\n    sx: {\n      mb: 2\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    select: true,\n    label: "D\\xE9lai de paiement",\n    value: delaiPaiement,\n    onChange: e => setDelaiPaiement(e.target.value),\n    fullWidth: true,\n    SelectProps: {\n      native: true\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    value: 45\n  }, "45 jours"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    value: 60\n  }, "60 jours")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: handleSubmit,\n    variant: "contained"\n  }, "Valider")));\n};\nconst PaiementModal = ({\n  open,\n  onClose,\n  paiement,\n  onSubmit\n}) => {\n  const [montantPaye, setMontantPaye] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [datePaiementReel, setDatePaiementReel] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (paiement) {\n      setMontantPaye(paiement.montant_paye_ht || "");\n      setDatePaiementReel(paiement.date_paiement_reel || "");\n    }\n  }, [paiement]);\n  const handleSubmit = () => {\n    onSubmit(paiement.id, {\n      montantPaye,\n      datePaiementReel\n    });\n    onClose();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: open,\n    onClose: onClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Montant pay\\xE9 et date de paiement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    type: "number",\n    label: "Montant pay\\xE9 HT",\n    value: montantPaye,\n    onChange: e => setMontantPaye(e.target.value),\n    fullWidth: true,\n    sx: {\n      mb: 2\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    type: "date",\n    label: "Date de paiement r\\xE9elle",\n    value: datePaiementReel,\n    onChange: e => setDatePaiementReel(e.target.value),\n    fullWidth: true\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: handleSubmit,\n    variant: "contained"\n  }, "Valider")));\n};\nconst MontantFactureModal = ({\n  open,\n  onClose,\n  paiement,\n  onSubmit\n}) => {\n  const [montantFacture, setMontantFacture] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (paiement) {\n      setMontantFacture(paiement.montant_facture_ht || "");\n    }\n  }, [paiement]);\n  const handleSubmit = () => {\n    onSubmit(paiement.id, {\n      montantFacture\n    });\n    onClose();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: open,\n    onClose: onClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Montant factur\\xE9 du mois"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    type: "number",\n    label: "Montant factur\\xE9 HT",\n    value: montantFacture,\n    onChange: e => setMontantFacture(e.target.value),\n    fullWidth: true\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: handleSubmit,\n    variant: "contained"\n  }, "Valider")));\n};\nconst AjouterPaiementModal = ({\n  open,\n  onClose,\n  mois,\n  annee,\n  contratId,\n  chantierId,\n  sousTraitantId,\n  avenantId,\n  type,\n  onSubmit\n}) => {\n  const [montantFacture, setMontantFacture] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [dateEnvoi, setDateEnvoi] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [delaiPaiement, setDelaiPaiement] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(45);\n  const handleSubmit = () => {\n    onSubmit({\n      mois,\n      annee,\n      contrat: contratId,\n      chantier: chantierId,\n      sous_traitant: sousTraitantId,\n      avenantId: avenantId,\n      montant_facture_ht: montantFacture,\n      date_envoi_facture: dateEnvoi,\n      delai_paiement: delaiPaiement\n    });\n    onClose();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: open,\n    onClose: onClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Ajouter paiement pour ", type || "CONTRAT", " -", " ", String(mois).padStart(2, "0"), "/", annee), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    type: "number",\n    label: "Montant factur\\xE9 HT",\n    value: montantFacture,\n    onChange: e => setMontantFacture(e.target.value),\n    fullWidth: true,\n    sx: {\n      mb: 2\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    type: "date",\n    label: "Date d\'envoi",\n    value: dateEnvoi,\n    onChange: e => setDateEnvoi(e.target.value),\n    fullWidth: true,\n    sx: {\n      mb: 2\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    select: true,\n    label: "D\\xE9lai de paiement",\n    value: delaiPaiement,\n    onChange: e => setDelaiPaiement(e.target.value),\n    fullWidth: true,\n    SelectProps: {\n      native: true\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    value: 45\n  }, "45 jours"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    value: 60\n  }, "60 jours")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: handleSubmit,\n    variant: "contained"\n  }, "Valider")));\n};\nconst FactureModal = ({\n  open,\n  onClose,\n  onSubmit,\n  chantierId,\n  sousTraitantId,\n  factures = [] // Ajouter les factures existantes pour calculer le prochain numéro\n}) => {\n  const [mois, setMois] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Date().getMonth() + 1);\n  const [annee, setAnnee] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Date().getFullYear());\n  const [numeroFacture, setNumeroFacture] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [montantFacture, setMontantFacture] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [dateReception, setDateReception] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Date().toISOString().split("T")[0]);\n  const [delaiPaiement, setDelaiPaiement] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(45);\n\n  // Calculer le prochain numéro de facture et réinitialiser la date\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (open) {\n      // Réinitialiser la date de réception à la date du jour\n      setDateReception(new Date().toISOString().split("T")[0]);\n      if (factures.length > 0) {\n        const facturesDuMois = factures.filter(f => f.mois === mois && f.annee === annee);\n        const prochainNumero = facturesDuMois.length + 1;\n        setNumeroFacture(prochainNumero.toString());\n      } else {\n        setNumeroFacture("1");\n      }\n    }\n  }, [open, mois, annee, factures]);\n  const handleSubmit = () => {\n    onSubmit({\n      mois,\n      annee,\n      numeroFacture: numeroFacture || "1",\n      // Auto-généré côté backend si vide\n      montantFacture,\n      dateReception,\n      delaiPaiement\n    });\n    onClose();\n    // Reset form\n    setNumeroFacture("");\n    setMontantFacture("");\n    setDateReception("");\n  };\n  const moisOptions = ["Janvier", "Février", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"];\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: open,\n    onClose: onClose,\n    maxWidth: "sm",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Nouvelle facture sous-traitant"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      display: "flex",\n      gap: 2,\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    select: true,\n    label: "Mois",\n    value: mois,\n    onChange: e => setMois(parseInt(e.target.value)),\n    SelectProps: {\n      native: true\n    },\n    sx: {\n      flex: 1\n    }\n  }, moisOptions.map((nom, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    key: index + 1,\n    value: index + 1\n  }, nom))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    type: "number",\n    label: "Ann\\xE9e",\n    value: annee,\n    onChange: e => setAnnee(parseInt(e.target.value)),\n    sx: {\n      flex: 1\n    },\n    inputProps: {\n      min: 2020,\n      max: 2030\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Num\\xE9ro de facture",\n    value: numeroFacture,\n    onChange: e => setNumeroFacture(e.target.value),\n    fullWidth: true,\n    sx: {\n      mb: 2\n    },\n    placeholder: "Laissez vide pour auto-g\\xE9n\\xE9ration"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    type: "number",\n    label: "Montant factur\\xE9 HT",\n    value: montantFacture,\n    onChange: e => setMontantFacture(e.target.value),\n    fullWidth: true,\n    sx: {\n      mb: 2\n    },\n    required: true,\n    inputProps: {\n      step: "0.01",\n      min: "0"\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    type: "date",\n    label: "Date de r\\xE9ception",\n    value: dateReception,\n    onChange: e => setDateReception(e.target.value),\n    fullWidth: true,\n    sx: {\n      mb: 2\n    },\n    required: true,\n    InputLabelProps: {\n      shrink: true\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    select: true,\n    label: "D\\xE9lai de paiement",\n    value: delaiPaiement,\n    onChange: e => setDelaiPaiement(parseInt(e.target.value)),\n    fullWidth: true,\n    SelectProps: {\n      native: true\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    value: 45\n  }, "45 jours"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    value: 60\n  }, "60 jours")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: handleSubmit,\n    variant: "contained",\n    disabled: !montantFacture || !dateReception\n  }, "Cr\\xE9er la facture")));\n};\nconst PaiementFactureModal = ({\n  open,\n  onClose,\n  facture,\n  onSubmit\n}) => {\n  const [montantPaye, setMontantPaye] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [datePaiementReel, setDatePaiementReel] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Date().toISOString().split("T")[0]);\n  const [commentaire, setCommentaire] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n\n  // Calculer l\'écart (montant restant à payer)\n  const calculerEcartFacture = facture => {\n    var _facture$paiements;\n    if (!facture) return 0;\n    const montantFacture = parseFloat(facture.montant_facture_ht) || 0;\n    const montantTotalPaye = ((_facture$paiements = facture.paiements) === null || _facture$paiements === void 0 ? void 0 : _facture$paiements.reduce((sum, p) => sum + (parseFloat(p.montant_paye) || 0), 0)) || 0;\n    return montantFacture - montantTotalPaye; // Montant restant à payer\n  };\n  const ecartFacture = calculerEcartFacture(facture);\n  const isPremierPaiement = !(facture !== null && facture !== void 0 && facture.paiements) || facture.paiements.length === 0;\n\n  // Réinitialiser la date de paiement et préremplir le montant à chaque ouverture du modal\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (open && facture) {\n      setDatePaiementReel(new Date().toISOString().split("T")[0]);\n\n      // Préremplir le montant payé avec le montant restant à payer\n      const montantRestant = Math.abs(ecartFacture);\n      if (montantRestant > 0) {\n        setMontantPaye(montantRestant.toString());\n      }\n    }\n  }, [open, facture, ecartFacture]);\n  const handleSubmit = () => {\n    if (facture) {\n      onSubmit({\n        factureId: facture.id,\n        montantPaye,\n        datePaiementReel,\n        commentaire\n      });\n      onClose();\n      // Reset form\n      setMontantPaye("");\n      setCommentaire("");\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: open,\n    onClose: onClose,\n    maxWidth: "sm",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Nouveau paiement - Facture ", facture === null || facture === void 0 ? void 0 : facture.numero_facture), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      p: 2\n    }\n  }, facture && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      mb: 2,\n      p: 2,\n      bgcolor: "grey.100",\n      borderRadius: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    variant: "body2",\n    sx: {\n      mb: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("strong", null, "Facture n\\xB0 ", facture.numero_facture), " -", " ", facture.mois_annee), isPremierPaiement ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    variant: "body2",\n    sx: {\n      mb: 1\n    }\n  }, "Montant factur\\xE9 :", " ", parseFloat(facture.montant_facture_ht).toLocaleString("fr-FR", {\n    minimumFractionDigits: 2\n  }), " ", "\\u20AC") : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    variant: "body2",\n    sx: {\n      mb: 1,\n      color: "warning.main",\n      fontWeight: 600\n    }\n  }, "Montant restant \\xE0 payer :", " ", Math.abs(ecartFacture).toLocaleString("fr-FR", {\n    minimumFractionDigits: 2\n  }), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    variant: "body2"\n  }, "Date de paiement pr\\xE9vue :", " ", formatDateFR2(facture.date_paiement_prevue))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    type: "number",\n    label: "Montant pay\\xE9 HT",\n    value: montantPaye,\n    onChange: e => setMontantPaye(e.target.value),\n    fullWidth: true,\n    sx: {\n      mb: 2\n    },\n    required: true,\n    inputProps: {\n      step: "0.01",\n      min: "0"\n    },\n    placeholder: ecartFacture > 0 ? `Montant restant: ${Math.abs(ecartFacture).toLocaleString("fr-FR", {\n      minimumFractionDigits: 2\n    })} €` : "",\n    helperText: ecartFacture > 0 ? "Montant prérempli avec le montant restant à payer" : ""\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    type: "date",\n    label: "Date de paiement r\\xE9elle",\n    value: datePaiementReel,\n    onChange: e => setDatePaiementReel(e.target.value),\n    fullWidth: true,\n    sx: {\n      mb: 2\n    },\n    required: true,\n    InputLabelProps: {\n      shrink: true\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    label: "Commentaire (optionnel)",\n    value: commentaire,\n    onChange: e => setCommentaire(e.target.value),\n    fullWidth: true,\n    multiline: true,\n    rows: 3\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: handleSubmit,\n    variant: "contained",\n    disabled: !montantPaye || !datePaiementReel\n  }, "Enregistrer le paiement")));\n};\nconst TableauRecapContratAvenants = ({\n  contrats,\n  chantierId,\n  sousTraitantId\n}) => {\n  // Filtrer les contrats pour ne garder que ceux du bon chantier et sous-traitant\n  const contratsFiltres = contrats.filter(c => String(c.chantier) === String(chantierId) && String(c.sous_traitant) === String(sousTraitantId));\n  let types = ["CONTRAT", ...Array.from({\n    length: 15\n  }, (_, i) => `AVENANT ${String(i + 1).padStart(2, "0")}`)];\n  let montants = Array(16).fill(0);\n  if (contratsFiltres.length > 0) {\n    // Contrat initial\n    montants[0] = Number(contratsFiltres[0].montant_operation);\n\n    // Avenants\n    if (contratsFiltres[0].avenants && contratsFiltres[0].avenants.length > 0) {\n      contratsFiltres[0].avenants.forEach(avenant => {\n        if (avenant.numero && Number(avenant.numero) <= 15) {\n          montants[Number(avenant.numero)] = Number(avenant.montant);\n        }\n      });\n    }\n  }\n  const blocs = [types.slice(0, 6).map((type, i) => ({\n    type,\n    montant: montants[i]\n  })), types.slice(6, 12).map((type, i) => ({\n    type,\n    montant: montants[i + 6]\n  })), types.slice(12, 18).map((type, i) => ({\n    type,\n    montant: montants[i + 12]\n  }))];\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      display: "flex",\n      gap: 0,\n      mb: 4\n    }\n  }, blocs.map((bloc, idx) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_10__["default"],\n    key: idx,\n    sx: {\n      flex: 1,\n      boxShadow: "none",\n      borderRadius: 0,\n      borderLeft: idx === 0 ? "none" : "1px solid rgba(224, 224, 224, 1)"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    size: "small"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    sx: {\n      backgroundColor: "rgba(27, 120, 188, 1)"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      color: "white",\n      width: "0px",\n      whiteSpace: "nowrap"\n    }\n  }, "N\\xB0"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      color: "white",\n      width: "0px",\n      whiteSpace: "nowrap",\n      textAlign: "right"\n    }\n  }, "MONTANT HT"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, bloc.map((ligne, i) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    key: i\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      borderRight: "1px solid rgba(224, 224, 224, 1)"\n    }\n  }, ligne.type), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      borderRight: "2px solid rgba(224, 224, 224, 1)",\n      textAlign: "right",\n      color: ligne.montant !== 0 ? "rgba(27, 120, 188, 1)" : "inherit",\n      fontWeight: ligne.montant !== 0 ? 700 : 400\n    }\n  }, ligne.montant.toLocaleString("fr-FR", {\n    minimumFractionDigits: 2\n  }), " ", "\\u20AC"))))))));\n};\n\n// Fonction utilitaire pour formater une date en JJ/MM/AA\nconst formatDateFR2 = dateStr => {\n  if (!dateStr) return "-";\n  const d = new Date(dateStr);\n  if (isNaN(d.getTime())) return "-";\n  const jour = String(d.getDate()).padStart(2, "0");\n  const mois = String(d.getMonth() + 1).padStart(2, "0");\n  const annee = String(d.getFullYear()).slice(-2);\n  return `${jour}/${mois}/${annee}`;\n};\nconst TableauPaiementSousTraitant = ({\n  chantierId,\n  sousTraitantId\n}) => {\n  var _contratsFiltres$0$so;\n  const [contrats, setContrats] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [factures, setFactures] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n  const [selectedFacture, setSelectedFacture] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [selectedPaiement, setSelectedPaiement] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [chantierNom, setChantierNom] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [openFactureModal, setOpenFactureModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [openPaiementModal, setOpenPaiementModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [openModifierPaiementModal, setOpenModifierPaiementModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [montantRestant, setMontantRestant] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n\n  // Chargement contrats et factures (Promise.all)\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (chantierId && sousTraitantId) {\n      setLoading(true);\n      Promise.all([axios__WEBPACK_IMPORTED_MODULE_16__["default"].get(`/api/contrats-sous-traitance/?chantier_id=${chantierId}&sous_traitant=${sousTraitantId}`), axios__WEBPACK_IMPORTED_MODULE_16__["default"].get(`/api/factures-sous-traitant/?chantier=${chantierId}&sous_traitant=${sousTraitantId}`)]).then(([contratsRes, facturesRes]) => {\n        setContrats(contratsRes.data);\n        setFactures(facturesRes.data);\n        setLoading(false);\n      }).catch(error => {\n        console.error("Erreur lors du chargement des données:", error);\n        setContrats([]);\n        setFactures([]);\n        setLoading(false);\n      });\n    }\n  }, [chantierId, sousTraitantId]);\n\n  // Trier les factures par année, mois, puis numéro de facture\n  const facturesTries = factures.sort((a, b) => {\n    if (a.annee !== b.annee) return b.annee - a.annee;\n    if (a.mois !== b.mois) return b.mois - a.mois;\n    return parseInt(a.numero_facture) - parseInt(b.numero_facture);\n  });\n\n  // Handler création facture (POST)\n  const handleAjouterFacture = async data => {\n    try {\n      const payload = {\n        chantier: chantierId,\n        sous_traitant: sousTraitantId,\n        mois: data.mois,\n        annee: data.annee,\n        numero_facture: data.numeroFacture,\n        montant_facture_ht: data.montantFacture,\n        date_reception: data.dateReception,\n        delai_paiement: data.delaiPaiement\n      };\n      const res = await axios__WEBPACK_IMPORTED_MODULE_16__["default"].post(`/api/factures-sous-traitant/`, payload);\n      setFactures(prev => [...prev, res.data]);\n    } catch (error) {\n      alert("Erreur lors de la création de la facture.");\n      if (error.response) {\n        console.error("Erreur backend:", error.response.data);\n      }\n    }\n  };\n\n  // Handler ajout paiement pour une facture\n  const handleAjouterPaiement = async data => {\n    try {\n      const payload = {\n        facture: data.factureId,\n        montant_paye: data.montantPaye,\n        date_paiement_reel: data.datePaiementReel,\n        commentaire: data.commentaire\n      };\n      const res = await axios__WEBPACK_IMPORTED_MODULE_16__["default"].post(`/api/paiements-facture-sous-traitant/`, payload);\n\n      // Mettre à jour la facture avec le nouveau paiement\n      setFactures(prev => prev.map(f => f.id === data.factureId ? {\n        ...f,\n        paiements: [...(f.paiements || []), res.data]\n      } : f));\n    } catch (error) {\n      alert("Erreur lors de l\'ajout du paiement.");\n      if (error.response) {\n        console.error("Erreur backend:", error.response.data);\n      }\n    }\n  };\n\n  // Handler suppression facture\n  const handleSupprimerFacture = async factureId => {\n    if (window.confirm("Êtes-vous sûr de vouloir supprimer cette facture ?")) {\n      try {\n        await axios__WEBPACK_IMPORTED_MODULE_16__["default"].delete(`/api/factures-sous-traitant/${factureId}/`);\n        setFactures(prev => prev.filter(f => f.id !== factureId));\n      } catch (error) {\n        alert("Erreur lors de la suppression de la facture.");\n      }\n    }\n  };\n\n  // Handler suppression paiement\n  const handleSupprimerPaiement = async (paiementId, factureId) => {\n    if (window.confirm("Êtes-vous sûr de vouloir supprimer ce paiement ?")) {\n      try {\n        await axios__WEBPACK_IMPORTED_MODULE_16__["default"].delete(`/api/paiements-facture-sous-traitant/${paiementId}/`);\n\n        // Mettre à jour la facture en retirant le paiement\n        setFactures(prev => prev.map(f => f.id === factureId ? {\n          ...f,\n          paiements: f.paiements.filter(p => p.id !== paiementId)\n        } : f));\n      } catch (error) {\n        alert("Erreur lors de la suppression du paiement.");\n      }\n    }\n  };\n\n  // Fonctions utilitaires pour les calculs\n  const calculerEcartFacture = facture => {\n    var _facture$paiements2;\n    const montantFacture = parseFloat(facture.montant_facture_ht) || 0;\n    const montantTotalPaye = ((_facture$paiements2 = facture.paiements) === null || _facture$paiements2 === void 0 ? void 0 : _facture$paiements2.reduce((sum, p) => sum + (parseFloat(p.montant_paye) || 0), 0)) || 0;\n    return montantTotalPaye - montantFacture;\n  };\n  const calculerJoursRetard = (datePrevue, dateReelle) => {\n    if (!datePrevue || !dateReelle) return 0;\n    try {\n      const dPrevue = new Date(datePrevue);\n      const dReelle = new Date(dateReelle);\n      const diff = Math.round((dReelle - dPrevue) / (1000 * 60 * 60 * 24));\n      return isNaN(diff) ? 0 : diff;\n    } catch {\n      return 0;\n    }\n  };\n  const formaterJoursRetard = jours => {\n    if (jours === 0) return "0 jour";\n    if (jours > 0) return `${jours} jour${jours > 1 ? "s" : ""} de retard`;\n    return `${Math.abs(jours)} jour${Math.abs(jours) > 1 ? "s" : ""} d\'avance`;\n  };\n  const formaterEcart = ecart => {\n    if (Math.abs(ecart) < 0.01) return "0,00 €";\n    return `${ecart >= 0 ? "+" : ""}${ecart.toLocaleString("fr-FR", {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    })} €`;\n  };\n  const getNomMois = mois => {\n    const moisNoms = ["Janvier", "Février", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"];\n    return moisNoms[mois - 1] || mois;\n  };\n\n  // Filtrage des contrats pour le chantier et sous-traitant courant\n  const contratsFiltres = contrats.filter(c => String(c.chantier) === String(chantierId) && String(c.sous_traitant) === String(sousTraitantId));\n\n  // Récupérer le nom du chantier si besoin\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!chantierId) return;\n    // Si on a déjà le nom, ne refais pas la requête\n    if (chantierNom) return;\n    // Cherche dans les contrats filtrés si on a déjà le nom\n    const contrat = contratsFiltres[0];\n    if (contrat) {\n      var _contrat$chantier_det;\n      const chantierObj = contrat.chantier;\n      if (typeof chantierObj === "object" && chantierObj.chantier_name) {\n        setChantierNom(chantierObj.chantier_name);\n        return;\n      }\n      if ((_contrat$chantier_det = contrat.chantier_details) !== null && _contrat$chantier_det !== void 0 && _contrat$chantier_det.chantier_name) {\n        setChantierNom(contrat.chantier_details.chantier_name);\n        return;\n      }\n      if (contrat.chantier) {\n        axios__WEBPACK_IMPORTED_MODULE_16__["default"].get(`/api/chantier/${contrat.chantier}/`).then(res => {\n          setChantierNom(res.data.chantier_name);\n        }).catch(() => setChantierNom(contrat.chantier));\n      }\n    }\n  }, [chantierId, chantierNom, contratsFiltres]);\n\n  // Calculs pour le récapitulatif\n  const montantContrat = contratsFiltres.length > 0 ? parseFloat(contratsFiltres[0].montant_operation) || 0 : 0;\n  const montantAvenants = contratsFiltres.length > 0 && contratsFiltres[0].avenants ? contratsFiltres[0].avenants.reduce((sum, av) => sum + (parseFloat(av.montant) || 0), 0) : 0;\n  const montantTotalMarche = montantContrat + montantAvenants;\n\n  // Calculer le montant total payé à partir des factures\n  const montantTotalPaye = factures.reduce((sum, facture) => {\n    var _facture$paiements3;\n    const montantFacturePaye = ((_facture$paiements3 = facture.paiements) === null || _facture$paiements3 === void 0 ? void 0 : _facture$paiements3.reduce((sumPaiements, paiement) => sumPaiements + (parseFloat(paiement.montant_paye) || 0), 0)) || 0;\n    return sum + montantFacturePaye;\n  }, 0);\n  const montantRestantCalcul = montantTotalMarche - montantTotalPaye;\n\n  // Calculer le total des montants facturés\n  const totalMontantFacture = factures.reduce((sum, facture) => {\n    return sum + (parseFloat(facture.montant_facture_ht) || 0);\n  }, 0);\n\n  // Créer les lignes à afficher dans le tableau (factures + paiements)\n  const lignesTableau = [];\n  facturesTries.forEach(facture => {\n    const ecart = calculerEcartFacture(facture);\n    const paiements = facture.paiements || [];\n    if (paiements.length === 0) {\n      // Facture sans paiement\n      lignesTableau.push({\n        type: "facture",\n        facture: facture,\n        paiement: null,\n        ecart: ecart,\n        joursRetard: null,\n        isFirstForFacture: true,\n        isLastForFacture: true\n      });\n    } else {\n      // Facture avec paiements\n      paiements.forEach((paiement, index) => {\n        const jours = calculerJoursRetard(facture.date_paiement_prevue, paiement.date_paiement_reel);\n        lignesTableau.push({\n          type: "facture",\n          facture: facture,\n          paiement: paiement,\n          ecart: index === paiements.length - 1 ? ecart : null,\n          // Afficher l\'écart seulement sur la dernière ligne\n          joursRetard: jours,\n          isFirstForFacture: index === 0,\n          isLastForFacture: index === paiements.length - 1\n        });\n      });\n    }\n  });\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      width: "100%",\n      p: 2\n    }\n  }, contratsFiltres.length > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      mb: 1\n    }\n  }, chantierNom && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    variant: "subtitle1",\n    sx: {\n      color: "white",\n      fontWeight: 700,\n      fontSize: "1.1rem"\n    }\n  }, chantierNom), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    variant: "subtitle1",\n    sx: {\n      color: "white",\n      fontWeight: 700,\n      fontSize: "1.1rem"\n    }\n  }, " ", ((_contratsFiltres$0$so = contratsFiltres[0].sous_traitant_details) === null || _contratsFiltres$0$so === void 0 ? void 0 : _contratsFiltres$0$so.entreprise) || contratsFiltres[0].sous_traitant)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "center",\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    variant: "h6"\n  }, "Tableau Paiement Sous-Traitant")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(TableauRecapContratAvenants, {\n    contrats: contrats,\n    chantierId: chantierId,\n    sousTraitantId: sousTraitantId\n  }), loading ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, "Chargement...") : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_10__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    size: "small"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    sx: {\n      backgroundColor: "rgba(27, 120, 188, 1)"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      color: "white"\n    }\n  }, "Mois"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      color: "white"\n    },\n    align: "center"\n  }, "Facture n\\xB0"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      color: "white"\n    }\n  }, "Montant factur\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      color: "white"\n    }\n  }, "Date de r\\xE9ception"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      color: "white"\n    }\n  }, "Date de paiement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      color: "white"\n    }\n  }, "Montant pay\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      color: "white"\n    }\n  }, "Date paiement r\\xE9el"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      color: "white"\n    }\n  }, "\\xC9cart mois"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      color: "white"\n    }\n  }, "Jours de retard"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      color: "white"\n    }\n  }, "Actions"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, lignesTableau.map((ligne, index) => {\n    var _ligne$paiement;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n      key: `${ligne.facture.id}-${((_ligne$paiement = ligne.paiement) === null || _ligne$paiement === void 0 ? void 0 : _ligne$paiement.id) || "no-payment"}`\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, ligne.isFirstForFacture ? `${getNomMois(ligne.facture.mois)} ${ligne.facture.annee}` : ""), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n      align: "center"\n    }, ligne.isFirstForFacture ? ligne.facture.numero_facture : ""), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, ligne.isFirstForFacture ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n      sx: {\n        color: "rgba(27, 120, 188, 1)",\n        fontWeight: 600\n      }\n    }, parseFloat(ligne.facture.montant_facture_ht).toLocaleString("fr-FR", {\n      minimumFractionDigits: 2\n    }), " ", "\\u20AC") : ""), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, ligne.isFirstForFacture ? formatDateFR2(ligne.facture.date_reception) : ""), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, ligne.isFirstForFacture ? formatDateFR2(ligne.facture.date_paiement_prevue) : ""), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, ligne.paiement ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n      sx: {\n        color: "rgb(0, 168, 42)",\n        fontWeight: 600\n      }\n    }, parseFloat(ligne.paiement.montant_paye).toLocaleString("fr-FR", {\n      minimumFractionDigits: 2\n    }), " ", "\\u20AC") : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n      title: "Ajouter un paiement"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      size: "small",\n      color: "primary",\n      onClick: () => {\n        setSelectedFacture(ligne.facture);\n        setOpenPaiementModal(true);\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material_Payment__WEBPACK_IMPORTED_MODULE_19__["default"], null)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, ligne.paiement ? formatDateFR2(ligne.paiement.date_paiement_reel) : "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, ligne.ecart !== null ? Math.abs(ligne.ecart) > 0.01 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n      title: "Cliquer pour ajouter un paiement"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n      sx: {\n        color: ligne.ecart > 0 ? "rgb(0, 168, 42)" : "error.main",\n        fontWeight: 600,\n        cursor: "pointer",\n        "&:hover": {\n          textDecoration: "underline"\n        }\n      },\n      onClick: () => {\n        setSelectedFacture(ligne.facture);\n        setOpenPaiementModal(true);\n      }\n    }, formaterEcart(ligne.ecart))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n      sx: {\n        color: "inherit",\n        fontWeight: 400\n      }\n    }, formaterEcart(ligne.ecart)) : ""), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, ligne.joursRetard !== null ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n      sx: {\n        color: ligne.joursRetard === 0 ? "inherit" : ligne.joursRetard > 0 ? "error.main" : "rgb(0, 168, 42)",\n        fontWeight: ligne.joursRetard !== 0 ? 600 : 400\n      }\n    }, formaterJoursRetard(ligne.joursRetard)) : "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n      sx: {\n        display: "flex",\n        gap: 0.5,\n        alignItems: "center"\n      }\n    }, ligne.isFirstForFacture && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n      title: "Supprimer la facture"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      size: "small",\n      color: "error",\n      onClick: () => handleSupprimerFacture(ligne.facture.id)\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material_Delete__WEBPACK_IMPORTED_MODULE_20__["default"], {\n      fontSize: "small"\n    }))), ligne.paiement && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n      title: "Supprimer ce paiement"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      size: "small",\n      color: "warning",\n      onClick: () => handleSupprimerPaiement(ligne.paiement.id, ligne.facture.id)\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material_RemoveCircleOutline__WEBPACK_IMPORTED_MODULE_21__["default"], {\n      fontSize: "small"\n    }))))));\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    sx: {\n      backgroundColor: "rgba(27, 120, 188, 0.1)",\n      fontWeight: "bold",\n      "& td": {\n        fontWeight: "bold",\n        color: "rgba(27, 120, 188, 1)"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      textAlign: "center",\n      color: "black",\n      fontSize: "0.8rem",\n      fontWeight: "bold"\n    }\n  }, "Total Factur\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      textAlign: "center",\n      fontWeight: "bold"\n    }\n  }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      textAlign: "right",\n      fontWeight: "bold"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    sx: {\n      color: "rgba(27, 120, 188, 1)",\n      fontWeight: 700,\n      fontSize: "0.9rem"\n    }\n  }, totalMontantFacture.toLocaleString("fr-FR", {\n    minimumFractionDigits: 2\n  }), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      textAlign: "center",\n      fontWeight: "bold"\n    }\n  }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      textAlign: "center",\n      fontWeight: "bold"\n    }\n  }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      textAlign: "center",\n      fontWeight: "bold"\n    }\n  }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      textAlign: "center",\n      fontWeight: "bold"\n    }\n  }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      textAlign: "center",\n      fontWeight: "bold"\n    }\n  }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      textAlign: "center",\n      fontWeight: "bold"\n    }\n  }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    sx: {\n      textAlign: "center",\n      fontWeight: "bold"\n    }\n  }, "-")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    colSpan: 10,\n    align: "center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    variant: "outlined",\n    color: "primary",\n    onClick: () => setOpenFactureModal(true),\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material_Add__WEBPACK_IMPORTED_MODULE_22__["default"], null),\n    sx: {\n      mt: 1,\n      mb: 1\n    }\n  }, "Ajouter une facture")))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "center",\n      backgroundColor: "rgba(27, 120, 188, 0.08)",\n      borderRadius: 1,\n      p: 2,\n      mb: 2,\n      mt: "20px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    sx: {\n      fontWeight: 700,\n      color: "rgba(27, 120, 188, 1)"\n    }\n  }, "Montant total du march\\xE9 :", " ", montantTotalMarche.toLocaleString("fr-FR", {\n    minimumFractionDigits: 2\n  }), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    sx: {\n      fontWeight: 700,\n      color: "rgb(0, 168, 42)"\n    }\n  }, "Montant total pay\\xE9 :", " ", montantTotalPaye.toLocaleString("fr-FR", {\n    minimumFractionDigits: 2\n  }), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    sx: {\n      fontWeight: 700,\n      color: montantRestantCalcul < 0 ? "error.main" : "rgba(27, 120, 188, 1)"\n    }\n  }, "Montant restant du march\\xE9 :", " ", montantRestantCalcul.toLocaleString("fr-FR", {\n    minimumFractionDigits: 2\n  }), " ", "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    sx: {\n      fontWeight: 700,\n      color: "rgb(0, 168, 42)",\n      mt: 1\n    }\n  }, "Pourcentage d\'avancement :", " ", montantTotalMarche > 0 ? (montantTotalPaye / montantTotalMarche * 100).toFixed(2) : 0, "%"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(FactureModal, {\n    open: openFactureModal,\n    onClose: () => setOpenFactureModal(false),\n    onSubmit: handleAjouterFacture,\n    chantierId: chantierId,\n    sousTraitantId: sousTraitantId,\n    factures: factures\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(PaiementFactureModal, {\n    open: openPaiementModal,\n    onClose: () => setOpenPaiementModal(false),\n    facture: selectedFacture,\n    onSubmit: handleAjouterPaiement\n  }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TableauPaiementSousTraitant);\n\n//# sourceURL=webpack://frontend/./src/components/TableauPaiementSousTraitant.js?')},"./src/components/TableauSuivi.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableContainer/TableContainer.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableCell/TableCell.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableFooter/TableFooter.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _hooks_useSituationsManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../hooks/useSituationsManager */ "./src/hooks/useSituationsManager.js");\n\n\n\n\nconst DateEnvoiModal = ({\n  open,\n  onClose,\n  situation,\n  onSubmit\n}) => {\n  const [dateEnvoi, setDateEnvoi] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [delaiPaiement, setDelaiPaiement] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(45);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (situation) {\n      // Si la situation n\'a pas de date d\'envoi, préremplir avec la date du jour\n      const dateAujourdhui = new Date().toISOString().split("T")[0];\n      setDateEnvoi(situation.date_envoi || dateAujourdhui);\n      setDelaiPaiement(situation.delai_paiement || 45);\n    }\n  }, [situation]);\n  const handleSubmit = () => {\n    onSubmit(situation.id, {\n      dateEnvoi,\n      delaiPaiement\n    });\n    onClose();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: open,\n    onClose: onClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "Date d\'envoi et d\\xE9lai de paiement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    type: "date",\n    label: "Date d\'envoi",\n    value: dateEnvoi,\n    onChange: e => setDateEnvoi(e.target.value),\n    fullWidth: true,\n    sx: {\n      mb: 2\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    value: delaiPaiement,\n    onChange: e => setDelaiPaiement(e.target.value),\n    fullWidth: true,\n    label: "D\\xE9lai de paiement"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: 45\n  }, "45 jours"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    value: 60\n  }, "60 jours")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: handleSubmit,\n    variant: "contained"\n  }, "Valider")));\n};\nconst PaiementModal = ({\n  open,\n  onClose,\n  situation,\n  onSubmit\n}) => {\n  const [montantRecu, setMontantRecu] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [datePaiementReel, setDatePaiementReel] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (situation) {\n      // Si la situation n\'a pas de date de paiement réelle, préremplir avec la date du jour\n      const dateAujourdhui = new Date().toISOString().split("T")[0];\n      setMontantRecu(situation.montant_reel_ht || "");\n      setDatePaiementReel(situation.date_paiement_reel || dateAujourdhui);\n    }\n  }, [situation]);\n  const handleSubmit = () => {\n    onSubmit(situation.id, {\n      montantRecu,\n      datePaiementReel\n    });\n    onClose();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: open,\n    onClose: onClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "Montant re\\xE7u et date de paiement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    type: "number",\n    label: "Montant re\\xE7u HT",\n    value: montantRecu,\n    onChange: e => setMontantRecu(e.target.value),\n    fullWidth: true,\n    sx: {\n      mb: 2\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    type: "date",\n    label: "Date de paiement r\\xE9elle",\n    value: datePaiementReel,\n    onChange: e => setDatePaiementReel(e.target.value),\n    fullWidth: true\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: handleSubmit,\n    variant: "contained"\n  }, "Valider")));\n};\nconst TableauSuivi = () => {\n  const [chantiers, setChantiers] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [selectedChantierId, setSelectedChantierId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [chantier, setChantier] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [devis, setDevis] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [avenants, setAvenants] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n  const [openDateModal, setOpenDateModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedSituation, setSelectedSituation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [openPaiementModal, setOpenPaiementModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // Utiliser le hook pour gérer les situations\n  const {\n    situations,\n    updateDateEnvoi,\n    updatePaiement\n  } = (0,_hooks_useSituationsManager__WEBPACK_IMPORTED_MODULE_1__.useSituationsManager)(selectedChantierId);\n  const commonBodyCellStyle = {\n    maxWidth: "100px",\n    padding: "6px 8px",\n    whiteSpace: "normal",\n    wordWrap: "break-word",\n    textAlign: "center",\n    verticalAlign: "middle"\n  };\n  const formatNumberWithColor = (value, compareValue) => {\n    const number = parseFloat(value) || 0;\n    const compare = parseFloat(compareValue) || 0;\n    const isDifferent = Math.abs(number - compare) > 0.01;\n    let color = "text.primary"; // noir par défaut\n    if (number === 0) {\n      color = "text.primary";\n    } else if (compareValue === undefined || compareValue === null) {\n      color = "rgba(27, 120, 188, 1)";\n    } else if (isDifferent) {\n      color = "error.main";\n    } else {\n      color = "rgba(27, 120, 188, 1)";\n    }\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      sx: {\n        color: color,\n        fontWeight: 500,\n        fontSize: "0.75rem",\n        fontFamily: "Roboto, Arial, sans-serif",\n        whiteSpace: "nowrap"\n      }\n    }, number.toFixed(2), " \\u20AC");\n  };\n  const formatDate = dateString => {\n    if (!dateString) return "";\n    const date = new Date(dateString);\n    const year = date.getFullYear().toString().slice(-2); // 2 derniers chiffres\n    return date.toLocaleDateString("fr-FR", {\n      day: "2-digit",\n      month: "2-digit",\n      year: undefined\n    }) + "/" + year;\n  };\n\n  // Pour l\'affichage mois/année (ex: 04/25)\n  const formatMoisAnnee = (mois, annee) => {\n    const moisStr = mois.toString().padStart(2, "0");\n    const anneeStr = annee.toString().slice(-2);\n    return `${moisStr}/${anneeStr}`;\n  };\n\n  // Charger la liste des chantiers\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const fetchChantiers = async () => {\n      try {\n        const response = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get("/api/chantier/");\n        setChantiers(response.data);\n\n        // Vérifier s\'il y a un chantier_id dans l\'URL\n        const params = new URLSearchParams(window.location.search);\n        const chantierIdFromUrl = params.get("chantier_id");\n        if (chantierIdFromUrl && response.data.length > 0) {\n          // Vérifier si le chantier existe dans la liste\n          const chantierExists = response.data.find(c => c.id.toString() === chantierIdFromUrl);\n          if (chantierExists) {\n            setSelectedChantierId(parseInt(chantierIdFromUrl));\n          } else {\n            setSelectedChantierId(response.data[0].id); // Fallback au premier chantier\n          }\n        } else if (response.data.length > 0) {\n          setSelectedChantierId(response.data[0].id); // Sélectionner le premier chantier par défaut\n        }\n      } catch (error) {\n        console.error("Erreur lors du chargement des chantiers:", error);\n      }\n    };\n    fetchChantiers();\n  }, []);\n\n  // Charger les données du chantier sélectionné\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (selectedChantierId) {\n      setLoading(true);\n      const loadChantierData = async () => {\n        try {\n          // D\'abord récupérer le chantier et ses devis\n          const [chantierRes, devisRes, avenantsRes] = await Promise.all([axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/chantier/${selectedChantierId}/`), axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/devisa/?chantier=${selectedChantierId}`), axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/avenant_chantier/${selectedChantierId}/avenants/`)]);\n          setChantier(chantierRes.data);\n\n          // Si il y a des devis, récupérer la structure du premier devis\n          if (devisRes.data && devisRes.data.length > 0) {\n            const premierDevis = devisRes.data[0];\n            setDevis(premierDevis);\n\n            // Récupérer la structure du devis\n            try {\n              const structureRes = await axios__WEBPACK_IMPORTED_MODULE_12__["default"].get(`/api/devis-structure/${premierDevis.id}/structure/`);\n              // Mettre à jour le devis avec la structure\n              setDevis({\n                ...premierDevis,\n                structure: structureRes.data\n              });\n            } catch (structureError) {\n              console.warn("Erreur lors du chargement de la structure du devis:", structureError);\n              // Continuer même si la structure ne se charge pas\n            }\n          } else {\n            setDevis(null);\n          }\n          if (avenantsRes.data.success) {\n            setAvenants(avenantsRes.data.avenants);\n          }\n          setLoading(false);\n        } catch (error) {\n          console.error("Erreur lors du chargement des données:", error);\n          setLoading(false);\n        }\n      };\n      loadChantierData();\n    }\n  }, [selectedChantierId]);\n  const renderTableauRappel = () => {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n      component: _mui_material__WEBPACK_IMPORTED_MODULE_14__["default"],\n      sx: {\n        mb: 4\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n      size: "small"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n      sx: {\n        backgroundColor: "rgba(27, 120, 188, 1)",\n        color: "white",\n        Width: "0px",\n        maxWidth: "0px"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        color: "white",\n        width: "0px",\n        overflow: "hidden",\n        textOverflow: "ellipsis",\n        whiteSpace: "nowrap",\n        borderRight: "1px solid rgba(224, 224, 224, 1)"\n      }\n    }, "N\\xB0"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        color: "white",\n        width: "0px",\n        overflow: "hidden",\n        textOverflow: "ellipsis",\n        whiteSpace: "nowrap",\n        borderRight: "2px solid rgba(224, 224, 224, 1)"\n      }\n    }, "MONTANT HT"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        color: "white",\n        width: "0px",\n        overflow: "hidden",\n        textOverflow: "ellipsis",\n        whiteSpace: "nowrap",\n        borderRight: "1px solid rgba(224, 224, 224, 1)"\n      }\n    }, "N\\xB0"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        color: "white",\n        width: "0px",\n        overflow: "hidden",\n        textOverflow: "ellipsis",\n        whiteSpace: "nowrap",\n        borderRight: "2px solid rgba(224, 224, 224, 1)"\n      }\n    }, "MONTANT HT"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        color: "white",\n        width: "0px",\n        overflow: "hidden",\n        textOverflow: "ellipsis",\n        whiteSpace: "nowrap",\n        borderRight: "1px solid rgba(224, 224, 224, 1)"\n      }\n    }, "N\\xB0"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        color: "white",\n        width: "0px",\n        overflow: "hidden",\n        textOverflow: "ellipsis",\n        whiteSpace: "nowrap"\n      }\n    }, "MONTANT HT"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], null, [...Array(6)].map((_, rowIndex) => {\n      var _situations$, _avenants, _situations, _avenants2, _situations2, _avenants3, _situations3;\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        key: rowIndex\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n        sx: {\n          borderRight: "1px solid rgba(224, 224, 224, 1)"\n        }\n      }, rowIndex === 0 ? "MARCHÉ" : `AVENANT ${String(rowIndex).padStart(2, "0")}`), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n        sx: {\n          borderRight: "2px solid rgba(224, 224, 224, 1)"\n        }\n      }, rowIndex === 0 ? formatNumberWithColor(chantier === null || chantier === void 0 ? void 0 : chantier.montant_ht, (_situations$ = situations[0]) === null || _situations$ === void 0 ? void 0 : _situations$.montant_reel_ht) : formatNumberWithColor(((_avenants = avenants[rowIndex - 1]) === null || _avenants === void 0 ? void 0 : _avenants.montant_total) || 0, (_situations = situations[rowIndex - 1]) === null || _situations === void 0 ? void 0 : _situations.montant_reel_ht)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n        sx: {\n          borderRight: "1px solid rgba(224, 224, 224, 1)"\n        }\n      }, `AVENANT ${String(rowIndex + 5).padStart(2, "0")}`), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n        sx: {\n          borderRight: "2px solid rgba(224, 224, 224, 1)"\n        }\n      }, formatNumberWithColor(((_avenants2 = avenants[rowIndex + 4]) === null || _avenants2 === void 0 ? void 0 : _avenants2.montant_total) || 0, (_situations2 = situations[rowIndex + 4]) === null || _situations2 === void 0 ? void 0 : _situations2.montant_reel_ht)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n        sx: {\n          borderRight: "1px solid rgba(224, 224, 224, 1)"\n        }\n      }, `AVENANT ${String(rowIndex + 10).padStart(2, "0")}`), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, formatNumberWithColor(((_avenants3 = avenants[rowIndex + 9]) === null || _avenants3 === void 0 ? void 0 : _avenants3.montant_total) || 0, (_situations3 = situations[rowIndex + 9]) === null || _situations3 === void 0 ? void 0 : _situations3.montant_reel_ht)));\n    }))));\n  };\n  const renderTableauFacturation = () => {\n    // Fonction helper pour extraire le numéro de situation\n    const extractSituationNumber = numeroSituation => {\n      if (!numeroSituation) return "-";\n      const match = numeroSituation.match(/n°(\\d+)/);\n      return match ? parseInt(match[1]) : numeroSituation;\n    };\n\n    // Trier les situations par numéro\n    const situationsTriees = [...situations].sort((a, b) => {\n      const numA = extractSituationNumber(a.numero_situation);\n      const numB = extractSituationNumber(b.numero_situation);\n      return numA - numB;\n    });\n\n    // Fonction helper pour formater les montants avec la couleur\n    const formatMontant = (montant, forceNegative = false, type = null) => {\n      const valeur = parseFloat(montant) || 0;\n      const isNegatif = forceNegative || valeur < 0 || type === "deduction";\n      const couleur = isNegatif ? "error.main" : "rgb(0, 168, 42)";\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n        sx: {\n          color: couleur,\n          fontFamily: "Roboto, Arial, sans-serif",\n          fontWeight: 500,\n          fontSize: "0.75rem",\n          whiteSpace: "nowrap"\n        }\n      }, isNegatif ? "-" : "", Math.abs(valeur).toFixed(2), " \\u20AC");\n    };\n    const commonCellStyle = {\n      color: "white",\n      maxWidth: "100px",\n      padding: "6px 8px",\n      // Permettre le retour à la ligne\n      whiteSpace: "normal",\n      wordWrap: "break-word",\n      // Centrer le texte\n      textAlign: "center",\n      // Hauteur minimale pour assurer la lisibilité\n      minHeight: "60px",\n      verticalAlign: "middle"\n    };\n    const calculerEcartMois = situation => {\n      const montantHTSituation = parseFloat(situation.montant_apres_retenues) || 0;\n      const montantRecuHT = parseFloat(situation.montant_reel_ht) || 0;\n      const ecart = montantRecuHT - montantHTSituation;\n      if (ecart === 0 || isNaN(ecart)) return "-";\n      return formatMontant(ecart);\n    };\n    const calculerCumulSituationHT = (situations, indexCourant) => {\n      return situations.slice(0, indexCourant + 1).reduce((sum, situation) => {\n        // Utiliser le montant après retenues (montant_apres_retenues)\n        const montantHT = parseFloat(situation.montant_apres_retenues) || 0;\n        return sum + montantHT;\n      }, 0);\n    };\n    const calculerCumulMontantRecu = (situations, indexCourant) => {\n      return situations.slice(0, indexCourant + 1).reduce((sum, situation) => {\n        const montantRecu = parseFloat(situation.montant_reel_ht) || 0;\n        return sum + montantRecu;\n      }, 0);\n    };\n    const calculerTotaux = () => {\n      return situations.reduce((totaux, situation) => {\n        return {\n          montantHTSituation: totaux.montantHTSituation + (parseFloat(situation.montant_apres_retenues) || 0),\n          rg: totaux.rg + (parseFloat(situation.retenue_garantie) || 0),\n          netAPayer: totaux.netAPayer + ((parseFloat(situation.montant_apres_retenues) || 0) + (parseFloat(situation.tva) || 0)),\n          montantRecuHT: totaux.montantRecuHT + (parseFloat(situation.montant_reel_ht) || 0),\n          ecartMois: totaux.ecartMois + (parseFloat(situation.montant_reel_ht || 0) - parseFloat(situation.montant_apres_retenues || 0))\n        };\n      }, {\n        montantHTSituation: 0,\n        rg: 0,\n        netAPayer: 0,\n        montantRecuHT: 0,\n        ecartMois: 0\n      });\n    };\n    const calculerResteAPayer = () => {\n      // Calculer le montant total cumulé avec montant_apres_retenues\n      const montantTotalCumulHT = calculerCumulSituationHT(situationsTriees, situationsTriees.length - 1);\n      const totalMontantRecuHT = calculerTotaux().montantRecuHT;\n      return montantTotalCumulHT - totalMontantRecuHT;\n    };\n    const calculerPourcentageAvancement = () => {\n      const montantTotalMarche = calculerMontantTotalMarche();\n      if (montantTotalMarche === 0) return 0;\n\n      // Calculer le montant total cumulé avec montant_apres_retenues\n      const montantTotalCumulHT = calculerCumulSituationHT(situationsTriees, situationsTriees.length - 1);\n      return montantTotalCumulHT / montantTotalMarche * 100;\n    };\n\n    // Fonction pour obtenir toutes les lignes supplémentaires uniques\n    const getAllLignesSupplementaires = () => {\n      const allLignes = new Map();\n      situations.forEach(situation => {\n        var _situation$lignes_sup;\n        (_situation$lignes_sup = situation.lignes_supplementaires) === null || _situation$lignes_sup === void 0 || _situation$lignes_sup.forEach(ligne => {\n          if (!allLignes.has(ligne.description)) {\n            allLignes.set(ligne.description, ligne);\n          }\n        });\n      });\n      return Array.from(allLignes.values());\n    };\n    const lignesSupplementairesUniques = getAllLignesSupplementaires();\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n      component: _mui_material__WEBPACK_IMPORTED_MODULE_14__["default"],\n      sx: {\n        maxWidth: "100%",\n        overflowX: "auto"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n      size: "small",\n      sx: {\n        tableLayout: "fixed"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n      sx: {\n        backgroundColor: "rgba(27, 120, 188, 1)",\n        color: "white"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        ...commonCellStyle\n      }\n    }, "Mois"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        ...commonCellStyle\n      }\n    }, "N\\xB0 Situation"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        ...commonCellStyle\n      }\n    }, "Montant HT Situation"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        ...commonCellStyle\n      }\n    }, "RG"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        ...commonCellStyle\n      }\n    }, "Prorata"), lignesSupplementairesUniques.map(ligne => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        ...commonCellStyle\n      },\n      key: ligne.description\n    }, ligne.description.length > 20 ? ligne.description.substring(0, 20) + "..." : ligne.description)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        ...commonCellStyle\n      }\n    }, "Net \\xE0 payer"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        ...commonCellStyle\n      }\n    }, "Situation Cumul HT"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        ...commonCellStyle\n      }\n    }, "Date d\'envoi"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        ...commonCellStyle\n      }\n    }, "Date de paiement pr\\xE9vue"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        ...commonCellStyle\n      }\n    }, "Montant re\\xE7u HT"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        ...commonCellStyle\n      }\n    }, "Date de paiement r\\xE9elle"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        ...commonCellStyle\n      }\n    }, "Jours de retard"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        ...commonCellStyle\n      }\n    }, "\\xC9cart Mois"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        ...commonCellStyle\n      }\n    }, "Montant cumul HT"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], null, situationsTriees.map((situation, index) => {\n      const cumulHT = situationsTriees.slice(0, index + 1).reduce((sum, s) => sum + (parseFloat(s.montant_total) || 0), 0);\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        key: situation.id,\n        sx: {\n          "&:nth-of-type(odd)": {\n            backgroundColor: "#f5f5f5"\n          },\n          "&:nth-of-type(even)": {\n            backgroundColor: "#ffffff"\n          },\n          "&:hover": {\n            backgroundColor: "#f5f5f5"\n          }\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n        sx: commonBodyCellStyle\n      }, formatMoisAnnee(situation.mois, situation.annee)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n        size: "small",\n        onClick: () => {\n          const previewUrl = `/api/preview-situation/${situation.id}/`;\n          window.open(previewUrl, "_blank");\n        },\n        sx: {\n          color: "rgba(27, 120, 188, 1)",\n          fontWeight: "bold",\n          fontSize: "0.75rem",\n          textTransform: "none",\n          minWidth: "auto",\n          padding: "2px 8px",\n          "&:hover": {\n            backgroundColor: "rgba(27, 120, 188, 0.1)"\n          }\n        }\n      }, extractSituationNumber(situation.numero_situation))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, formatMontant(parseFloat(situation.montant_apres_retenues) || 0)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, formatMontant(situation.retenue_garantie, true)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, formatMontant(situation.montant_prorata, true)), lignesSupplementairesUniques.map(ligneUnique => {\n        var _situation$lignes_sup2;\n        const ligneSituation = (_situation$lignes_sup2 = situation.lignes_supplementaires) === null || _situation$lignes_sup2 === void 0 ? void 0 : _situation$lignes_sup2.find(l => l.description === ligneUnique.description);\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n          key: ligneUnique.description\n        }, ligneSituation ? formatMontant(ligneSituation.montant, false, ligneSituation.type) : formatMontant(0, false));\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, formatMontant((parseFloat(situation.montant_apres_retenues) || 0) + (parseFloat(situation.tva) || 0))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n        sx: {\n          color: "rgba(27, 120, 188, 1)"\n        }\n      }, formatNumberWithColor(calculerCumulSituationHT(situationsTriees, index), calculerCumulSituationHT(situationsTriees, index))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n        size: "small",\n        onClick: () => {\n          setSelectedSituation(situation);\n          setOpenDateModal(true);\n        }\n      }, situation.date_envoi ? formatDate(situation.date_envoi) : "Définir date")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, calculateDatePaiement(situation.date_envoi, situation.delai_paiement)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n        size: "small",\n        onClick: () => {\n          setSelectedSituation(situation);\n          setOpenPaiementModal(true);\n        }\n      }, situation.montant_reel_ht ? formatNumberWithColor(situation.montant_reel_ht, situation.montant_apres_retenues) : "Définir paiement")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, situation.date_paiement_reel ? formatDate(situation.date_paiement_reel) : "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, calculateRetard(calculateDatePaiement(situation.date_envoi, situation.delai_paiement), situation.date_paiement_reel)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, calculerEcartMois(situation)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, formatNumberWithColor(calculerCumulMontantRecu(situationsTriees, index), calculerCumulSituationHT(situationsTriees, index))));\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n      sx: {\n        backgroundColor: "rgba(27, 120, 188, 0.1)",\n        fontWeight: "bold",\n        "& td": {\n          fontWeight: "bold",\n          color: "rgba(27, 120, 188, 1)"\n        }\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      sx: {\n        textAlign: "center",\n        color: "black",\n        fontSize: "0.8rem"\n      }\n    }, "Total"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, formatMontant(calculerTotaux().montantHTSituation)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, formatMontant(calculerTotaux().rg, true)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, formatMontant(situations.reduce((sum, s) => sum + (parseFloat(s.montant_prorata) || 0), 0), true)), lignesSupplementairesUniques.map(ligneUnique => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n      key: ligneUnique.description\n    }, formatMontant(situations.reduce((sum, s) => {\n      var _s$lignes_supplementa;\n      const ligneSup = (_s$lignes_supplementa = s.lignes_supplementaires) === null || _s$lignes_supplementa === void 0 ? void 0 : _s$lignes_supplementa.find(l => l.description === ligneUnique.description);\n      const montant = parseFloat((ligneSup === null || ligneSup === void 0 ? void 0 : ligneSup.montant) || 0);\n      return sum + ((ligneSup === null || ligneSup === void 0 ? void 0 : ligneSup.type) === "deduction" ? -montant : montant);\n    }, 0), false, ligneUnique.type))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, formatMontant(calculerTotaux().netAPayer)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, formatMontant(calculerTotaux().montantRecuHT)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, formatMontant(calculerTotaux().ecartMois)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, "-"))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n      sx: {\n        mt: 2,\n        p: 2,\n        backgroundColor: "rgba(27, 120, 188, 0.1)",\n        borderRadius: 1,\n        display: "flex",\n        justifyContent: "space-between",\n        alignItems: "center"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      sx: {\n        fontFamily: "Roboto, Arial, sans-serif",\n        fontWeight: 700,\n        fontSize: "1rem",\n        color: "rgba(27, 120, 188, 1)",\n        mb: 1\n      }\n    }, "Montant total du march\\xE9 :", " ", formatMontant(calculerMontantTotalMarche())), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      sx: {\n        fontFamily: "Roboto, Arial, sans-serif",\n        fontWeight: 700,\n        fontSize: "1rem",\n        color: "error.main"\n      }\n    }, "Pourcentage d\'avancement :", " ", calculerPourcentageAvancement().toFixed(2), "%")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n      sx: {\n        display: "flex",\n        alignItems: "center"\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      sx: {\n        fontFamily: "Roboto, Arial, sans-serif",\n        fontWeight: 700,\n        fontSize: "1rem",\n        color: "rgba(27, 120, 188, 1)",\n        mr: 2\n      }\n    }, "Reste \\xE0 payer HT :"), formatMontant(calculerResteAPayer()))));\n  };\n\n  // Ajout des fonctions utilitaires\n  const calculateDatePaiement = (dateEnvoi, delai) => {\n    if (!dateEnvoi || !delai) return "-";\n    try {\n      const date = new Date(dateEnvoi);\n      if (isNaN(date.getTime())) return "-";\n      date.setDate(date.getDate() + parseInt(delai));\n      return formatDate(date);\n    } catch (error) {\n      console.error("Erreur dans le calcul de la date de paiement:", error);\n      return "-";\n    }\n  };\n  const calculateRetard = (datePrevue, dateReelle) => {\n    if (!datePrevue || !dateReelle || datePrevue === "-") {\n      return "-";\n    }\n    try {\n      // Convertir les dates en objets Date\n      let datePrevueObj, dateReelleObj;\n\n      // Traiter la date prévue (format DD/MM/YY)\n      if (datePrevue.includes("/")) {\n        const [jour, mois, annee] = datePrevue.split("/");\n        const anneeComplete = annee.length === 2 ? `20${annee}` : annee;\n        datePrevueObj = new Date(anneeComplete, mois - 1, jour);\n      } else {\n        datePrevueObj = new Date(datePrevue);\n      }\n\n      // Traiter la date réelle (format YYYY-MM-DD)\n      dateReelleObj = new Date(dateReelle);\n\n      // Vérifier que les dates sont valides\n      if (isNaN(datePrevueObj.getTime()) || isNaN(dateReelleObj.getTime())) {\n        return "-";\n      }\n\n      // Calculer la différence en millisecondes\n      const differenceMs = dateReelleObj.getTime() - datePrevueObj.getTime();\n\n      // Convertir en jours\n      const differenceJours = Math.ceil(differenceMs / (1000 * 60 * 60 * 24));\n      if (differenceJours > 0) {\n        return `${differenceJours} jours de retard`;\n      } else if (differenceJours < 0) {\n        return `${Math.abs(differenceJours)} jours d\'avance`;\n      } else {\n        return "À jour";\n      }\n    } catch (error) {\n      console.error("Erreur dans le calcul du retard:", error);\n      return "-";\n    }\n  };\n\n  // Handlers pour les mises à jour\n  const handleDateEnvoiChange = async (situationId, value) => {\n    try {\n      await updateDateEnvoi(situationId, value, undefined);\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour de la date d\'envoi:", error);\n    }\n  };\n  const handleDelaiPaiementChange = async (situationId, value) => {\n    try {\n      await updateDateEnvoi(situationId, undefined, value);\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour du délai de paiement:", error);\n    }\n  };\n  const handleMontantReelChange = async (situationId, value) => {\n    try {\n      await updatePaiement(situationId, value, undefined);\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour du montant réel:", error);\n    }\n  };\n  const handleDatePaiementReelChange = async (situationId, value) => {\n    try {\n      await updatePaiement(situationId, undefined, value);\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour de la date de paiement réelle:", error);\n    }\n  };\n\n  // Vérifier si le montant reçu est différent\n  const isMontantDifferent = (situationId, montantRecu) => {\n    const situation = situations.find(s => s.id === situationId);\n    if (!situation || !montantRecu) return false;\n    // Comparer avec le montant après retenues (ce qui est facturé)\n    return Math.abs(parseFloat(situation.montant_apres_retenues) - parseFloat(montantRecu)) > 0.01;\n  };\n  const handleDateModalSubmit = async (situationId, {\n    dateEnvoi,\n    delaiPaiement\n  }) => {\n    try {\n      await updateDateEnvoi(situationId, dateEnvoi, delaiPaiement);\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour:", error);\n      alert("Erreur lors de la mise à jour des données");\n    }\n  };\n  const handlePaiementModalSubmit = async (situationId, {\n    montantRecu,\n    datePaiementReel\n  }) => {\n    try {\n      await updatePaiement(situationId, montantRecu, datePaiementReel);\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour:", error);\n      alert("Erreur lors de la mise à jour des données");\n    }\n  };\n  const calculerMontantTotalMarche = () => {\n    // Montant HT du devis initial (marché)\n    const montantDevis = parseFloat(chantier === null || chantier === void 0 ? void 0 : chantier.montant_ht) || 0;\n\n    // Somme des montants HT des avenants\n    const montantAvenants = avenants.reduce((sum, avenant) => {\n      return sum + (parseFloat(avenant.montant_total) || 0);\n    }, 0);\n    return montantDevis + montantAvenants;\n  };\n\n  // Ajouter le sélecteur de chantier en haut du composant\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      width: "100%",\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    variant: "h5",\n    gutterBottom: true,\n    sx: {\n      fontFamily: "Merriweather, serif",\n      color: "white"\n    }\n  }, "Tableau de suivi"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    value: selectedChantierId,\n    onChange: e => setSelectedChantierId(e.target.value),\n    variant: "standard",\n    sx: {\n      minWidth: 200,\n      color: "rgba(27, 120, 188, 1)",\n      backgroundColor: "white"\n    }\n  }, chantiers.map(chantier => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    key: chantier.id,\n    value: chantier.id\n  }, chantier.chantier_name)))), loading ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, "Chargement...") : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, renderTableauRappel(), renderTableauFacturation()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(DateEnvoiModal, {\n    open: openDateModal,\n    onClose: () => setOpenDateModal(false),\n    situation: selectedSituation,\n    onSubmit: handleDateModalSubmit\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(PaiementModal, {\n    open: openPaiementModal,\n    onClose: () => setOpenPaiementModal(false),\n    situation: selectedSituation,\n    onSubmit: handlePaiementModalSubmit\n  }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TableauSuivi);\n\n//# sourceURL=webpack://frontend/./src/components/TableauSuivi.js?')},"./src/components/Test.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ TestPie)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _nivo_pie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nivo/pie */ "./node_modules/@nivo/pie/dist/nivo-pie.mjs");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\n\nfunction TestPie() {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    sx: {\n      height: 300,\n      width: 400\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_nivo_pie__WEBPACK_IMPORTED_MODULE_0__.ResponsivePie, {\n    data: [{\n      id: "A",\n      label: "A",\n      value: 10\n    }, {\n      id: "B",\n      label: "B",\n      value: 20\n    }],\n    margin: {\n      top: 20,\n      right: 20,\n      bottom: 20,\n      left: 20\n    },\n    innerRadius: 0.5,\n    padAngle: 0.7,\n    cornerRadius: 3,\n    activeOuterRadiusOffset: 8,\n    colors: {\n      scheme: "nivo"\n    },\n    borderWidth: 1,\n    borderColor: {\n      from: "color",\n      modifiers: [["darker", 0.2]]\n    },\n    arcLinkLabelsSkipAngle: 10,\n    arcLinkLabelsTextColor: "#333333",\n    arcLinkLabelsThickness: 2,\n    arcLinkLabelsColor: {\n      from: "color"\n    },\n    arcLabelsSkipAngle: 10,\n    arcLabelsTextColor: {\n      from: "color",\n      modifiers: [["darker", 2]]\n    }\n  }));\n}\n\n//# sourceURL=webpack://frontend/./src/components/Test.js?')},"./src/components/TransformationCIEModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Modal/Modal.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputLabel/InputLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\n\nconst TransformationCIEModal = ({\n  open,\n  onClose,\n  devis,\n  chantier\n}) => {\n  const [designation, setDesignation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [mois, setMois] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [annee, setAnnee] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Date().getFullYear());\n  const handleSubmit = async () => {\n    try {\n      const cieData = {\n        devis_id: devis.id,\n        chantier_id: chantier.id,\n        numero_ts: designation,\n        mois_situation: parseInt(mois),\n        annee_situation: parseInt(annee)\n      };\n      console.log("Données envoyées:", cieData);\n      const response = await axios__WEBPACK_IMPORTED_MODULE_1__["default"].post("/api/create-facture-cie/", cieData);\n      console.log("Réponse reçue:", response.data);\n      alert(`La facture CIE a été créée avec succès.`);\n      if (response.data.preview_url) {\n        window.open(response.data.preview_url, "_blank");\n      }\n      onClose();\n    } catch (error) {\n      var _error$response, _error$response2;\n      console.error("Erreur complète:", error);\n      console.error("Response data:", (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n      if ((_error$response2 = error.response) !== null && _error$response2 !== void 0 && (_error$response2 = _error$response2.data) !== null && _error$response2 !== void 0 && _error$response2.error) {\n        // Vérifier si c\'est une erreur de contrainte unique\n        if (error.response.data.error.includes("UNIQUE constraint failed")) {\n          const numeroFacture = `${devis.numero}${designation ? ` / ${designation}` : ""}`;\n          alert(`Une facture avec le numéro "${numeroFacture}" existe déjà. Veuillez choisir une autre désignation.`);\n        } else {\n          alert(`Erreur : ${error.response.data.error}`);\n        }\n      } else {\n        alert("Une erreur inattendue s\'est produite. Veuillez réessayer.");\n      }\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: open,\n    onClose: onClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      position: "absolute",\n      top: "50%",\n      left: "50%",\n      transform: "translate(-50%, -50%)",\n      width: 400,\n      bgcolor: "background.paper",\n      boxShadow: 24,\n      p: 4,\n      borderRadius: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "h6",\n    gutterBottom: true\n  }, "Transformer en Facture CIE"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    fullWidth: true,\n    margin: "normal"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, "Mois de situation"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    value: mois,\n    onChange: e => setMois(e.target.value),\n    required: true\n  }, Array.from({\n    length: 12\n  }, (_, i) => i + 1).map(m => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    key: m,\n    value: m\n  }, m.toString().padStart(2, "0"))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    fullWidth: true,\n    type: "number",\n    label: "Ann\\xE9e",\n    value: annee,\n    onChange: e => setAnnee(e.target.value),\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    fullWidth: true,\n    label: "D\\xE9signation",\n    value: designation,\n    onChange: e => setDesignation(e.target.value),\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      mt: 3,\n      display: "flex",\n      justifyContent: "flex-end",\n      gap: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    variant: "contained",\n    onClick: handleSubmit,\n    disabled: !mois || !annee\n  }, "Transformer"))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TransformationCIEModal);\n\n//# sourceURL=webpack://frontend/./src/components/TransformationCIEModal.js?')},"./src/components/TransformationTSModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Modal/Modal.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControlLabel/FormControlLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Checkbox/Checkbox.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputLabel/InputLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\n\nconst TransformationTSModal = ({\n  open,\n  onClose,\n  devis,\n  chantier\n}) => {\n  // États pour gérer les données du formulaire\n  const [designation, setDesignation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [selectedAvenant, setSelectedAvenant] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [createNewAvenant, setCreateNewAvenant] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [avenants, setAvenants] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n\n  // Reset form when modal opens/closes\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!open) {\n      setDesignation("");\n      setSelectedAvenant("");\n      setCreateNewAvenant(false);\n    }\n  }, [open]);\n\n  // Charger les avenants existants\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (open && chantier !== null && chantier !== void 0 && chantier.id) {\n      fetchAvenants();\n    }\n  }, [open, chantier]);\n\n  // Récupérer les avenants existants pour ce chantier\n  const fetchAvenants = async () => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_1__["default"].get(`/api/avenant_chantier/${chantier.id}/avenants/`);\n      if (response.data.success && Array.isArray(response.data.avenants)) {\n        setAvenants(response.data.avenants);\n      } else {\n        setAvenants([]);\n      }\n    } catch (error) {\n      console.error("Erreur lors de la récupération des avenants:", error);\n      setAvenants([]);\n    }\n  };\n  const handleSubmit = async () => {\n    try {\n      const tsData = {\n        devis_id: devis.id,\n        chantier_id: chantier.id,\n        create_new_avenant: createNewAvenant,\n        ...(createNewAvenant ? {} : {\n          avenant_id: parseInt(selectedAvenant)\n        }),\n        designation: designation\n      };\n      console.log("Données envoyées:", tsData);\n      const response = await axios__WEBPACK_IMPORTED_MODULE_1__["default"].post("/api/create-facture-ts/", tsData);\n      alert(`La facture TS a été créée avec succès.`);\n      fetchAvenants(); // Rafraîchir la liste des avenants\n      onClose();\n    } catch (error) {\n      var _error$response, _error$response2;\n      console.error("Erreur complète:", error);\n      console.error("Response data:", (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n      if ((_error$response2 = error.response) !== null && _error$response2 !== void 0 && (_error$response2 = _error$response2.data) !== null && _error$response2 !== void 0 && _error$response2.error) {\n        if (error.response.data.error.includes("UNIQUE constraint failed")) {\n          alert(`Une facture TS avec cette désignation existe déjà. Veuillez choisir une autre désignation.`);\n        } else {\n          alert(`Erreur : ${error.response.data.error}`);\n        }\n      } else {\n        alert("Une erreur inattendue s\'est produite. Veuillez réessayer.");\n      }\n    }\n  };\n\n  // Ne pas rendre le modal si les données essentielles sont manquantes\n  if (!open || !devis || !chantier) {\n    return null;\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: open,\n    onClose: onClose,\n    "aria-labelledby": "ts-modal-title"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      position: "absolute",\n      top: "50%",\n      left: "50%",\n      transform: "translate(-50%, -50%)",\n      width: 400,\n      bgcolor: "background.paper",\n      boxShadow: 24,\n      p: 4,\n      borderRadius: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    id: "ts-modal-title",\n    variant: "h6",\n    component: "h2",\n    gutterBottom: true\n  }, "Transformer en Facture TS"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n      checked: createNewAvenant,\n      onChange: e => setCreateNewAvenant(e.target.checked)\n    }),\n    label: "Cr\\xE9er un nouvel avenant"\n  }), !createNewAvenant && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    fullWidth: true,\n    margin: "normal"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, "S\\xE9lectionner un avenant existant"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: selectedAvenant,\n    onChange: e => setSelectedAvenant(e.target.value),\n    required: true\n  }, avenants.map(avenant => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    key: avenant.id,\n    value: avenant.id\n  }, "Avenant n\\xB0", avenant.numero, "(", avenant.nombre_ts, " TS - Total:", " ", avenant.montant_total, "\\u20AC)")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    fullWidth: true,\n    label: "D\\xE9signation",\n    value: designation,\n    onChange: e => setDesignation(e.target.value),\n    margin: "normal"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      mt: 3,\n      display: "flex",\n      justifyContent: "flex-end",\n      gap: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "contained",\n    onClick: handleSubmit,\n    disabled: !createNewAvenant && !selectedAvenant\n  }, "Transformer"))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TransformationTSModal);\n\n//# sourceURL=webpack://frontend/./src/components/TransformationTSModal.js?')},"./src/components/UpdateTauxFixeModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Alert/Alert.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/CircularProgress/CircularProgress.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\n\nconst UpdateTauxFixeModal = ({\n  open,\n  handleClose,\n  onTauxFixeUpdated\n}) => {\n  const [nouveauTaux, setNouveauTaux] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [success, setSuccess] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [updateInfo, setUpdateInfo] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const handleSubmit = async () => {\n    try {\n      // Validation basique\n      const tauxNumber = parseFloat(nouveauTaux);\n      if (isNaN(tauxNumber) || tauxNumber <= 0) {\n        setError("Veuillez entrer un taux valide (nombre positif)");\n        return;\n      }\n      setLoading(true);\n      setError("");\n\n      // Appel API\n      const response = await axios__WEBPACK_IMPORTED_MODULE_1__["default"].post("/api/update-taux-fixe/", {\n        taux_fixe: tauxNumber\n      });\n      setSuccess(true);\n      setUpdateInfo(response.data);\n\n      // Callback pour informer le parent\n      if (onTauxFixeUpdated) {\n        onTauxFixeUpdated(tauxNumber, response.data.lignes_mises_a_jour);\n      }\n\n      // Fermer après 3 secondes pour laisser le temps de lire les infos\n      setTimeout(() => {\n        handleClose();\n        setNouveauTaux("");\n        setSuccess(false);\n        setUpdateInfo(null);\n        setLoading(false);\n      }, 3000);\n    } catch (error) {\n      var _error$response;\n      setError(((_error$response = error.response) === null || _error$response === void 0 || (_error$response = _error$response.data) === null || _error$response === void 0 ? void 0 : _error$response.error) || "Erreur lors de la mise à jour du taux fixe");\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: open,\n    onClose: handleClose,\n    maxWidth: "md",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, "Mise \\xE0 jour du taux fixe"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null, error && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    severity: "error",\n    sx: {\n      mb: 2\n    }\n  }, error), success && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    severity: "success",\n    sx: {\n      mb: 2\n    }\n  }, "Taux fixe mis \\xE0 jour avec succ\\xE8s !"), !success && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    autoFocus: true,\n    margin: "dense",\n    label: "Nouveau taux fixe (%)",\n    type: "number",\n    fullWidth: true,\n    value: nouveauTaux,\n    onChange: e => setNouveauTaux(e.target.value),\n    inputProps: {\n      step: "0.01"\n    },\n    sx: {\n      mt: 2\n    },\n    disabled: loading\n  }), loading && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      gap: 2,\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    size: 20\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, "Mise \\xE0 jour en cours...")), updateInfo && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    variant: "h6",\n    sx: {\n      mb: 1\n    }\n  }, "R\\xE9sum\\xE9 de la mise \\xE0 jour"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    variant: "body2",\n    sx: {\n      mb: 2\n    }\n  }, "\\u2705 Taux fixe mis \\xE0 jour : ", updateInfo.valeur, "%"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    variant: "body2",\n    sx: {\n      mb: 2\n    }\n  }, "\\uD83D\\uDCCA ", updateInfo.nombre_lignes_mises_a_jour, " lignes de d\\xE9tail ont \\xE9t\\xE9 mises \\xE0 jour"), updateInfo.lignes_mises_a_jour && updateInfo.lignes_mises_a_jour.length > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      mt: 2,\n      maxHeight: 200,\n      overflow: "auto"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    variant: "subtitle2",\n    sx: {\n      mb: 1\n    }\n  }, "Exemples de lignes mises \\xE0 jour :"), updateInfo.lignes_mises_a_jour.slice(0, 5).map((ligne, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    key: ligne.id,\n    sx: {\n      p: 1,\n      mb: 1,\n      border: "1px solid #e0e0e0",\n      borderRadius: 1,\n      backgroundColor: "#f9f9f9"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    variant: "body2",\n    sx: {\n      fontWeight: "bold"\n    }\n  }, ligne.description), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    variant: "caption",\n    sx: {\n      color: "text.secondary"\n    }\n  }, "Nouveau prix : ", ligne.prix.toFixed(2), "\\u20AC (taux fixe :", " ", ligne.taux_fixe, "%)"))), updateInfo.lignes_mises_a_jour.length > 5 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    variant: "caption",\n    sx: {\n      color: "text.secondary"\n    }\n  }, "... et ", updateInfo.lignes_mises_a_jour.length - 5, " autres lignes")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    onClick: handleClose,\n    disabled: loading\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    onClick: handleSubmit,\n    variant: "contained",\n    color: "primary",\n    disabled: loading || !nouveauTaux.trim()\n  }, loading ? "Mise à jour..." : "Mettre à jour")));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UpdateTauxFixeModal);\n\n//# sourceURL=webpack://frontend/./src/components/UpdateTauxFixeModal.js?')},"./src/components/chantier/ChantierCommandesTab.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _ChantierListeBonCommande__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ChantierListeBonCommande */ "./src/components/chantier/ChantierListeBonCommande.js");\n\n\n\n\nconst ChantierCommandesTab = ({\n  chantierData\n}) => {\n  const [savedFilters, setSavedFilters] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    numero: "",\n    fournisseur: "",\n    date_creation: "",\n    montant_total: "",\n    statut: "",\n    statut_paiement: "",\n    montant_paye: "",\n    reste_a_payer: ""\n  });\n  const hasLoaded = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n  const [bonsCommande, setBonsCommande] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [isLoaded, setIsLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!(chantierData !== null && chantierData !== void 0 && chantierData.id)) return;\n    if (!hasLoaded.current) {\n      // fetchData(); // Décommente et adapte si tu as une fonction de chargement\n      hasLoaded.current = true;\n    }\n  }, [chantierData === null || chantierData === void 0 ? void 0 : chantierData.id]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!isLoaded && chantierData !== null && chantierData !== void 0 && chantierData.id) {\n      axios__WEBPACK_IMPORTED_MODULE_2__["default"].get("/api/bons-commande/").then(response => {\n        setBonsCommande(response.data.filter(bc => bc.chantier === chantierData.id));\n        setIsLoaded(true);\n      });\n    }\n  }, [chantierData === null || chantierData === void 0 ? void 0 : chantierData.id, isLoaded]);\n  if (!(chantierData !== null && chantierData !== void 0 && chantierData.id)) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n      sx: {\n        display: "flex",\n        justifyContent: "center",\n        p: 4\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n      color: "error"\n    }, "Aucun chantier s\\xE9lectionn\\xE9."));\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ChantierListeBonCommande__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    chantierId: chantierData.id,\n    bonsCommande: bonsCommande,\n    setBonsCommande: setBonsCommande,\n    initialFilters: savedFilters,\n    onSaveFilters: setSavedFilters\n  });\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChantierCommandesTab);\n\n//# sourceURL=webpack://frontend/./src/components/chantier/ChantierCommandesTab.js?')},"./src/components/chantier/ChantierDocumentsTab.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/AppBar/AppBar.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Tabs/Tabs.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Tab/Tab.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _hooks_useSituationsManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hooks/useSituationsManager */ "./src/hooks/useSituationsManager.js");\n/* harmony import */ var _ChantierListeDevis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ChantierListeDevis */ "./src/components/chantier/ChantierListeDevis.js");\n/* harmony import */ var _ChantierListeFactures__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ChantierListeFactures */ "./src/components/chantier/ChantierListeFactures.js");\n/* harmony import */ var _ChantierListeSituation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ChantierListeSituation */ "./src/components/chantier/ChantierListeSituation.js");\n\n\n\n\n\n\nconst ChantierDocumentsTab = ({\n  chantierData,\n  state,\n  setState\n}) => {\n  // Centralisation des états pour chaque sous-liste et filtres\n  const [selectedTab, setSelectedTab] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(state.selectedTab || 0);\n\n  // Utiliser le hook centralisé pour les situations\n  const {\n    situations,\n    loading: loadingSituations\n  } = (0,_hooks_useSituationsManager__WEBPACK_IMPORTED_MODULE_1__.useSituationsManager)(chantierData === null || chantierData === void 0 ? void 0 : chantierData.id);\n\n  // Filtres pour les situations\n  const [filtersSituations, setFiltersSituations] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(state.filtersSituations || {\n    numero_situation: "",\n    mois: "",\n    pourcentage_avancement: "",\n    montant_apres_retenues: "",\n    statut: "Tous"\n  });\n  const [isLoadedSituations, setIsLoadedSituations] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // Devis\n  const [devis, setDevis] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [filtersDevis, setFiltersDevis] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(state.filtersDevis || {\n    numero: "",\n    client_name: "",\n    date_creation: "",\n    price_ttc: "",\n    status: "Tous"\n  });\n  const [isLoadedDevis, setIsLoadedDevis] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // Factures\n  const [factures, setFactures] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [filtersFactures, setFiltersFactures] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(state.filtersFactures || {\n    numero_facture: "",\n    date_creation: "",\n    montant: "",\n    state_facture: "Tous",\n    type_facture: "Tous"\n  });\n  const [isLoadedFactures, setIsLoadedFactures] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // Gestion du changement d\'onglet\n  const handleTabChange = (event, newValue) => {\n    setSelectedTab(newValue);\n    setState({\n      ...state,\n      selectedTab: newValue,\n      filtersSituations,\n      filtersDevis,\n      filtersFactures\n    });\n  };\n\n  // Callbacks de sauvegarde différée pour chaque filtre\n  const saveFiltersSituations = filters => {\n    setFiltersSituations(filters);\n    setState(prev => ({\n      ...prev,\n      filtersSituations: filters\n    }));\n  };\n  const saveFiltersDevis = filters => {\n    setFiltersDevis(filters);\n    setState(prev => ({\n      ...prev,\n      filtersDevis: filters\n    }));\n  };\n  const saveFiltersFactures = filters => {\n    setFiltersFactures(filters);\n    setState(prev => ({\n      ...prev,\n      filtersFactures: filters\n    }));\n  };\n  const hasLoaded = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!(chantierData !== null && chantierData !== void 0 && chantierData.id)) return;\n    if (!hasLoaded.current) {\n      // fetchData(); // Décommente et adapte si tu as une fonction de chargement\n      hasLoaded.current = true;\n    }\n  }, [chantierData === null || chantierData === void 0 ? void 0 : chantierData.id]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      mb: 3,\n      background: "none"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    position: "static",\n    color: "default",\n    elevation: 0,\n    sx: {\n      borderRadius: "10px",\n      background: "#f5f5f5",\n      pt: 2,\n      pb: 2,\n      color: "black"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    value: selectedTab,\n    onChange: handleTabChange,\n    variant: "fullWidth",\n    textColor: "inherit",\n    TabIndicatorProps: {\n      style: {\n        background: "#1976d2"\n      }\n    },\n    sx: {\n      color: "black",\n      gap: "32px",\n      "& .MuiTab-root": {\n        color: "black",\n        minWidth: 120,\n        fontWeight: 500,\n        fontSize: "1.1rem",\n        textTransform: "none"\n      },\n      "& .Mui-selected": {\n        color: "primary.main",\n        fontWeight: 700\n      },\n      "& .MuiTabs-flexContainer": {\n        gap: "32px"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    label: "Situations"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    label: "Devis"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    label: "Factures"\n  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    elevation: 0,\n    sx: {\n      borderRadius: "10px",\n      p: 2,\n      background: "#fff"\n    }\n  }, selectedTab === 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ChantierListeSituation__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    chantierData: chantierData,\n    situations: situations,\n    setSituations: () => {} // Fonction vide car géré par le hook\n    ,\n    filters: filtersSituations,\n    setFilters: setFiltersSituations,\n    isLoaded: !loadingSituations,\n    setIsLoaded: setIsLoadedSituations,\n    onSaveFilters: saveFiltersSituations\n  }), selectedTab === 1 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ChantierListeDevis__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    chantierData: chantierData,\n    devis: devis,\n    setDevis: setDevis,\n    filters: filtersDevis,\n    setFilters: setFiltersDevis,\n    isLoaded: isLoadedDevis,\n    setIsLoaded: setIsLoadedDevis,\n    onSaveFilters: saveFiltersDevis\n  }), selectedTab === 2 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ChantierListeFactures__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    chantierData: chantierData,\n    factures: factures,\n    setFactures: setFactures,\n    filters: filtersFactures,\n    setFilters: setFiltersFactures,\n    isLoaded: isLoadedFactures,\n    setIsLoaded: setIsLoadedFactures,\n    onSaveFilters: saveFiltersFactures\n  }))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChantierDocumentsTab);\n\n//# sourceURL=webpack://frontend/./src/components/chantier/ChantierDocumentsTab.js?')},"./src/components/chantier/ChantierInfoTab.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Tooltip/Tooltip.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Card/Card.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/CardContent/CardContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Grid/Grid.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/LinearProgress/LinearProgress.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Accordion/Accordion.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/AccordionSummary/AccordionSummary.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/AccordionDetails/AccordionDetails.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputLabel/InputLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Alert/Alert.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dayjs */ "./node_modules/dayjs/dayjs.min.js");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fa__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react-icons/fa */ "./node_modules/react-icons/fa/index.mjs");\n/* harmony import */ var _hooks_useSituationsManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hooks/useSituationsManager */ "./src/hooks/useSituationsManager.js");\n/* harmony import */ var _utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/universalDriveGenerator */ "./src/utils/universalDriveGenerator.js");\n/* harmony import */ var _CreationDocument_SituationCreationModal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../CreationDocument/SituationCreationModal */ "./src/components/CreationDocument/SituationCreationModal.js");\n/* harmony import */ var _SousTraitance_SousTraitanceModal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../SousTraitance/SousTraitanceModal */ "./src/components/SousTraitance/SousTraitanceModal.js");\n\n\n\n\n\n\n\n\n\nconst ChantierInfoTab = ({\n  chantierData,\n  onUpdate,\n  state,\n  setState\n}) => {\n  var _chantierData$stats_d, _chantierData$societe2, _chantierData$societe3, _chantierData$societe4, _chantierData$dates;\n  const {\n    openSousTraitance = false,\n    openSituationModal = false,\n    filters = {},\n    openAccordions = {}\n  } = state;\n  const setOpenSousTraitance = val => setState({\n    ...state,\n    openSousTraitance: val\n  });\n  const setOpenSituationModal = val => setState({\n    ...state,\n    openSituationModal: val\n  });\n  const setFilters = newFilters => setState({\n    ...state,\n    filters: newFilters\n  });\n  const setOpenAccordions = newOpen => setState({\n    ...state,\n    openAccordions: newOpen\n  });\n\n  // Utiliser le hook pour gérer les situations\n  const {\n    situations,\n    updateDateEnvoi,\n    updatePaiement,\n    loadSituations\n  } = (0,_hooks_useSituationsManager__WEBPACK_IMPORTED_MODULE_2__.useSituationsManager)(chantierData === null || chantierData === void 0 ? void 0 : chantierData.id);\n\n  // État pour stocker les informations complètes du chantier\n  const [fullChantierData, setFullChantierData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n\n  // Récupérer les informations complètes du chantier\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (chantierData !== null && chantierData !== void 0 && chantierData.id) {\n      console.log("🔍 DEBUG ChantierInfoTab - Récupération des détails du chantier ID:", chantierData.id);\n      axios__WEBPACK_IMPORTED_MODULE_6__["default"].get(`/api/chantier/${chantierData.id}/details/`).then(response => {\n        console.log("✅ DEBUG ChantierInfoTab - Détails du chantier récupérés:", response.data);\n        setFullChantierData(response.data);\n      }).catch(error => {\n        console.error("❌ DEBUG ChantierInfoTab - Erreur lors de la récupération des informations du chantier:", error);\n        console.log("❌ DEBUG ChantierInfoTab - ID utilisé:", chantierData.id);\n        console.log("❌ DEBUG ChantierInfoTab - URL appelée:", `/api/chantier/${chantierData.id}/details/`);\n      });\n    }\n  }, [chantierData === null || chantierData === void 0 ? void 0 : chantierData.id]);\n\n  // State local pour tout ce qui n\'a pas besoin d\'être global\n  const [tauxFacturationData, setTauxFacturationData] = react__WEBPACK_IMPORTED_MODULE_1__.useState(null);\n  const [loadingTaux, setLoadingTaux] = react__WEBPACK_IMPORTED_MODULE_1__.useState(false);\n  const [openModal, setOpenModal] = react__WEBPACK_IMPORTED_MODULE_1__.useState(false);\n  const [selectedSituation, setSelectedSituation] = react__WEBPACK_IMPORTED_MODULE_1__.useState(null);\n  const [dateEnvoi, setDateEnvoi] = react__WEBPACK_IMPORTED_MODULE_1__.useState(null);\n  const [delaiPaiement, setDelaiPaiement] = react__WEBPACK_IMPORTED_MODULE_1__.useState("");\n  const [devisChantier, setDevisChantier] = react__WEBPACK_IMPORTED_MODULE_1__.useState(null);\n  const [loadingDevis, setLoadingDevis] = react__WEBPACK_IMPORTED_MODULE_1__.useState(false);\n  const [openPaiementModal, setOpenPaiementModal] = react__WEBPACK_IMPORTED_MODULE_1__.useState(false);\n  const [selectedSituationPaiement, setSelectedSituationPaiement] = react__WEBPACK_IMPORTED_MODULE_1__.useState(null);\n  const [montantRecu, setMontantRecu] = react__WEBPACK_IMPORTED_MODULE_1__.useState("");\n  const [datePaiementReel, setDatePaiementReel] = react__WEBPACK_IMPORTED_MODULE_1__.useState("");\n  const [mainOeuvreReelle, setMainOeuvreReelle] = react__WEBPACK_IMPORTED_MODULE_1__.useState(0);\n  const [loadingMainOeuvre, setLoadingMainOeuvre] = react__WEBPACK_IMPORTED_MODULE_1__.useState(false);\n  const [completeChantierData, setCompleteChantierData] = react__WEBPACK_IMPORTED_MODULE_1__.useState(null);\n  const [loadingCompleteData, setLoadingCompleteData] = react__WEBPACK_IMPORTED_MODULE_1__.useState(false);\n\n  // États pour la modification du chantier\n  const [openEditModal, setOpenEditModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [openDeleteModal, setOpenDeleteModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [openStatusModal, setOpenStatusModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [loadingEdit, setLoadingEdit] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [loadingDelete, setLoadingDelete] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [loadingStatus, setLoadingStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [canDelete, setCanDelete] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n\n  // Données de modification\n  const [editData, setEditData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n    chantier: {\n      nom: "",\n      statut: ""\n    },\n    societe: {\n      nom: "",\n      ville: "",\n      rue: "",\n      code_postal: ""\n    },\n    chantier_adresse: {\n      ville: "",\n      rue: "",\n      code_postal: ""\n    },\n    client: {\n      nom: "",\n      prenom: "",\n      email: "",\n      telephone: ""\n    }\n  });\n  const hasLoadedTaux = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!(chantierData !== null && chantierData !== void 0 && chantierData.id)) return;\n    if (!hasLoadedTaux.current) {\n      setLoadingTaux(true);\n      axios__WEBPACK_IMPORTED_MODULE_6__["default"].get(`/api/chantier/${chantierData.id}/taux-facturation/`).then(res => setTauxFacturationData(res.data)).finally(() => setLoadingTaux(false));\n      hasLoadedTaux.current = true;\n    }\n  }, [chantierData === null || chantierData === void 0 ? void 0 : chantierData.id]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (chantierData !== null && chantierData !== void 0 && chantierData.id) {\n      setLoadingDevis(true);\n      axios__WEBPACK_IMPORTED_MODULE_6__["default"].get("/api/devisa/", {\n        params: {\n          chantier: chantierData.id,\n          devis_chantier: true\n        }\n      }).then(res => {\n        setDevisChantier(res.data && res.data.length > 0 ? res.data[0] : null);\n      }).catch(() => setDevisChantier(null)).finally(() => setLoadingDevis(false));\n    }\n  }, [chantierData === null || chantierData === void 0 ? void 0 : chantierData.id]);\n\n  // Récupérer la main d\'œuvre réelle depuis l\'API recap-financier\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const fetchMainOeuvreReelle = async () => {\n      if (!(chantierData !== null && chantierData !== void 0 && chantierData.id)) {\n        setMainOeuvreReelle(0);\n        return;\n      }\n      setLoadingMainOeuvre(true);\n      try {\n        var _res$data$sorties;\n        // Récupérer les données depuis l\'API recap-financier (global)\n        const res = await axios__WEBPACK_IMPORTED_MODULE_6__["default"].get(`/api/chantier/${chantierData.id}/recap-financier/`);\n\n        // Extraire la main d\'œuvre des données recap-financier\n        const mainOeuvre = ((_res$data$sorties = res.data.sorties) === null || _res$data$sorties === void 0 || (_res$data$sorties = _res$data$sorties.paye) === null || _res$data$sorties === void 0 ? void 0 : _res$data$sorties.main_oeuvre) || {\n          total: 0\n        };\n        setMainOeuvreReelle(mainOeuvre.total || 0);\n      } catch (error) {\n        console.error("Erreur lors du chargement de la main d\'œuvre réelle:", error);\n        setMainOeuvreReelle(0);\n      } finally {\n        setLoadingMainOeuvre(false);\n      }\n    };\n    fetchMainOeuvreReelle();\n  }, [chantierData === null || chantierData === void 0 ? void 0 : chantierData.id]);\n  const handleSousTraitanceUpdate = () => {\n    if (onUpdate) {\n      onUpdate();\n    }\n  };\n  const formatDate = dateString => {\n    return new Date(dateString).toLocaleDateString("fr-FR", {\n      year: "numeric",\n      month: "long",\n      day: "numeric"\n    });\n  };\n  const formatMontant = montant => {\n    return new Intl.NumberFormat("fr-FR", {\n      style: "currency",\n      currency: "EUR"\n    }).format(montant || 0);\n  };\n\n  // Données factices pour l\'exemple, à remplacer par les vraies données du backend\n  const tauxFacturation = (chantierData === null || chantierData === void 0 ? void 0 : chantierData.taux_facturation) || 50; // en %\n  const nombreDevis = (chantierData === null || chantierData === void 0 || (_chantierData$stats_d = chantierData.stats_devis) === null || _chantierData$stats_d === void 0 ? void 0 : _chantierData$stats_d.envoyes) || 11;\n  const statsDevis = (chantierData === null || chantierData === void 0 ? void 0 : chantierData.stats_devis) || {\n    termines: 6,\n    en_cours: 2,\n    attente_signature: 3,\n    refuses: 1\n  };\n  const MultiColorProgressBar = ({\n    pourcentages,\n    montants\n  }) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      display: "flex",\n      height: 16,\n      borderRadius: 8,\n      overflow: "hidden",\n      mb: 1\n    }\n  }, (pourcentages === null || pourcentages === void 0 ? void 0 : pourcentages.non_envoye) > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    title: `Non envoyées : ${montants.non_envoye.toLocaleString("fr-FR", {\n      style: "currency",\n      currency: "EUR"\n    })}`\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      width: `${pourcentages.non_envoye}%`,\n      background: "#ff9800"\n    }\n  })), (pourcentages === null || pourcentages === void 0 ? void 0 : pourcentages.en_attente) > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    title: `En attente paiement : ${montants.en_attente.toLocaleString("fr-FR", {\n      style: "currency",\n      currency: "EUR"\n    })}`\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      width: `${pourcentages.en_attente}%`,\n      background: "#1976d2"\n    }\n  })), (pourcentages === null || pourcentages === void 0 ? void 0 : pourcentages.retard) > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    title: `Retard de paiement : ${montants.retard.toLocaleString("fr-FR", {\n      style: "currency",\n      currency: "EUR"\n    })}`\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      width: `${pourcentages.retard}%`,\n      background: "#d32f2f"\n    }\n  })), (pourcentages === null || pourcentages === void 0 ? void 0 : pourcentages.paye) > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    title: `Payées : ${montants.paye.toLocaleString("fr-FR", {\n      style: "currency",\n      currency: "EUR"\n    })}`\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      width: `${pourcentages.paye}%`,\n      background: "#2e7d32"\n    }\n  })));\n  const handleOpenModal = situation => {\n    setSelectedSituation(situation);\n    setDateEnvoi(situation.date_envoi ? dayjs__WEBPACK_IMPORTED_MODULE_0___default()(situation.date_envoi) : null);\n    setDelaiPaiement(situation.delai_paiement || "");\n    setOpenModal(true);\n  };\n  const handleCloseModal = () => {\n    setOpenModal(false);\n    setSelectedSituation(null);\n    setDateEnvoi(null);\n    setDelaiPaiement("");\n  };\n  const handleSaveDates = async () => {\n    if (!dateEnvoi || !delaiPaiement) return;\n    try {\n      await updateDateEnvoi(selectedSituation.id, dateEnvoi, Number(delaiPaiement));\n      setOpenModal(false);\n      setSelectedSituation(null);\n      setDateEnvoi(null);\n      setDelaiPaiement("");\n      // Recharge les données\n      axios__WEBPACK_IMPORTED_MODULE_6__["default"].get(`/api/chantier/${chantierData.id}/taux-facturation/`).then(res => setTauxFacturationData(res.data));\n    } catch (error) {\n      alert("Erreur lors de la mise à jour des dates.");\n    }\n  };\n  const isRetardPaiement = situation => {\n    if (situation.date_envoi && !situation.date_paiement_reel && situation.delai_paiement) {\n      const dateLimite = new Date(new Date(situation.date_envoi).getTime() + situation.delai_paiement * 24 * 60 * 60 * 1000);\n      return new Date() > dateLimite;\n    }\n    return false;\n  };\n  const {\n    montants,\n    pourcentages\n  } = tauxFacturationData || {};\n  const getCategorieColor = categorie => {\n    switch (categorie) {\n      case "non_envoye":\n        return "#ff9800";\n      // orange\n      case "en_attente":\n        return "#1976d2";\n      // bleu\n      case "retard":\n        return "#d32f2f";\n      // rouge\n      case "paye":\n        return "#2e7d32";\n      // vert\n      default:\n        return "inherit";\n    }\n  };\n\n  // Fonction pour déterminer la catégorie d\'une situation\n  const getSituationCategorie = situation => {\n    if (situation.date_paiement_reel) {\n      return "paye"; // Payée\n    } else if (!situation.date_envoi) {\n      return "non_envoye"; // Non envoyée\n    } else if (isRetardPaiement(situation)) {\n      return "retard"; // Retard de paiement\n    } else {\n      return "en_attente"; // En attente de paiement\n    }\n  };\n  const handleOpenPaiementModal = situation => {\n    setSelectedSituationPaiement(situation);\n    setMontantRecu(situation.montant_recu || "");\n    setDatePaiementReel(situation.date_paiement_reel || "");\n    setOpenPaiementModal(true);\n  };\n\n  // Fonction pour récupérer les données complètes du chantier\n  const fetchCompleteChantierData = async () => {\n    if (!(chantierData !== null && chantierData !== void 0 && chantierData.id)) return null;\n    setLoadingCompleteData(true);\n    try {\n      var _completeData$societe;\n      // Essayer d\'abord l\'endpoint détaillé\n      let response;\n      try {\n        response = await axios__WEBPACK_IMPORTED_MODULE_6__["default"].get(`/api/chantier/${chantierData.id}/details/`);\n      } catch {\n        // Fallback vers l\'endpoint standard\n        response = await axios__WEBPACK_IMPORTED_MODULE_6__["default"].get(`/api/chantier/${chantierData.id}/`);\n      }\n      const completeData = response.data;\n\n      // Si les données de société ne sont pas complètes, récupérer la société séparément\n      if ((_completeData$societe = completeData.societe) !== null && _completeData$societe !== void 0 && _completeData$societe.id) {\n        try {\n          const societeResponse = await axios__WEBPACK_IMPORTED_MODULE_6__["default"].get(`/api/societe/${completeData.societe.id}/`);\n          completeData.societe_complete = societeResponse.data;\n\n          // Récupérer les données du client si nécessaire\n          if (societeResponse.data.client_name) {\n            try {\n              const clientResponse = await axios__WEBPACK_IMPORTED_MODULE_6__["default"].get(`/api/client/${societeResponse.data.client_name}/`);\n              completeData.societe_complete.client_data = clientResponse.data;\n            } catch (clientError) {\n              console.warn("Erreur lors de la récupération du client:", clientError);\n            }\n          }\n        } catch (societeError) {\n          console.warn("Erreur lors de la récupération de la société:", societeError);\n        }\n      }\n      setCompleteChantierData(completeData);\n      return completeData;\n    } catch (error) {\n      console.error("Erreur lors de la récupération des données complètes:", error);\n      return null;\n    } finally {\n      setLoadingCompleteData(false);\n    }\n  };\n\n  // Fonction pour ouvrir le modal d\'édition\n  const handleOpenEditModal = async () => {\n    var _chantierData$societe, _dataToUse$adresse, _dataToUse$adresse2, _dataToUse$adresse3, _clientData$phone_Num;\n    // Debug: afficher la structure des données\n    console.log("Structure chantierData:", chantierData);\n    console.log("Société:", chantierData === null || chantierData === void 0 ? void 0 : chantierData.societe);\n    console.log("Client:", chantierData === null || chantierData === void 0 || (_chantierData$societe = chantierData.societe) === null || _chantierData$societe === void 0 ? void 0 : _chantierData$societe.client);\n\n    // Récupérer les données complètes\n    const completeData = await fetchCompleteChantierData();\n    const dataToUse = completeData || chantierData;\n    console.log("Données complètes récupérées:", completeData);\n\n    // Récupérer les données du client depuis les données complètes\n    const societeData = (dataToUse === null || dataToUse === void 0 ? void 0 : dataToUse.societe_complete) || (dataToUse === null || dataToUse === void 0 ? void 0 : dataToUse.societe) || {};\n    const clientData = (societeData === null || societeData === void 0 ? void 0 : societeData.client_data) || (societeData === null || societeData === void 0 ? void 0 : societeData.client_name) || (societeData === null || societeData === void 0 ? void 0 : societeData.client) || {};\n    const clientNom = clientData.name || "";\n    const clientPrenom = clientData.surname || "";\n\n    // Charger les données actuelles dans le formulaire\n    setEditData({\n      chantier: {\n        nom: (dataToUse === null || dataToUse === void 0 ? void 0 : dataToUse.nom) || (dataToUse === null || dataToUse === void 0 ? void 0 : dataToUse.chantier_name) || "",\n        statut: (dataToUse === null || dataToUse === void 0 ? void 0 : dataToUse.statut) || (dataToUse === null || dataToUse === void 0 ? void 0 : dataToUse.state_chantier) || ""\n      },\n      societe: {\n        nom: (societeData === null || societeData === void 0 ? void 0 : societeData.nom_societe) || "",\n        ville: (societeData === null || societeData === void 0 ? void 0 : societeData.ville_societe) || "",\n        rue: (societeData === null || societeData === void 0 ? void 0 : societeData.rue_societe) || "",\n        code_postal: (societeData === null || societeData === void 0 ? void 0 : societeData.codepostal_societe) || ""\n      },\n      chantier_adresse: {\n        ville: (dataToUse === null || dataToUse === void 0 || (_dataToUse$adresse = dataToUse.adresse) === null || _dataToUse$adresse === void 0 ? void 0 : _dataToUse$adresse.ville) || (dataToUse === null || dataToUse === void 0 ? void 0 : dataToUse.ville) || "",\n        rue: (dataToUse === null || dataToUse === void 0 || (_dataToUse$adresse2 = dataToUse.adresse) === null || _dataToUse$adresse2 === void 0 ? void 0 : _dataToUse$adresse2.rue) || (dataToUse === null || dataToUse === void 0 ? void 0 : dataToUse.rue) || "",\n        code_postal: (dataToUse === null || dataToUse === void 0 || (_dataToUse$adresse3 = dataToUse.adresse) === null || _dataToUse$adresse3 === void 0 ? void 0 : _dataToUse$adresse3.code_postal) || (dataToUse === null || dataToUse === void 0 ? void 0 : dataToUse.code_postal) || ""\n      },\n      client: {\n        nom: clientNom,\n        prenom: clientPrenom,\n        email: clientData.client_mail || "",\n        telephone: ((_clientData$phone_Num = clientData.phone_Number) === null || _clientData$phone_Num === void 0 ? void 0 : _clientData$phone_Num.toString()) || ""\n      }\n    });\n    setOpenEditModal(true);\n  };\n\n  // Fonction pour sauvegarder les modifications\n  const handleSaveEdit = async () => {\n    setLoadingEdit(true);\n    try {\n      var _societeForSave$clien, _societeForSave$clien2, _societeForSave$clien3;\n      // Mettre à jour le client - seulement si les valeurs ont changé\n      const dataForSave = completeChantierData || chantierData;\n      const societeForSave = (dataForSave === null || dataForSave === void 0 ? void 0 : dataForSave.societe_complete) || (dataForSave === null || dataForSave === void 0 ? void 0 : dataForSave.societe) || {};\n      const clientId = (societeForSave === null || societeForSave === void 0 || (_societeForSave$clien = societeForSave.client_data) === null || _societeForSave$clien === void 0 ? void 0 : _societeForSave$clien.id) || (societeForSave === null || societeForSave === void 0 || (_societeForSave$clien2 = societeForSave.client_name) === null || _societeForSave$clien2 === void 0 ? void 0 : _societeForSave$clien2.id) || (societeForSave === null || societeForSave === void 0 || (_societeForSave$clien3 = societeForSave.client) === null || _societeForSave$clien3 === void 0 ? void 0 : _societeForSave$clien3.id);\n      if (clientId) {\n        var _currentClient$phone_;\n        const currentClient = societeForSave.client_data || societeForSave.client_name || societeForSave.client;\n        const clientData = {};\n\n        // Récupérer les données actuelles du client\n        const currentNom = currentClient.name || "";\n        const currentPrenom = currentClient.surname || "";\n        const currentEmail = currentClient.client_mail || "";\n        const currentTelephone = ((_currentClient$phone_ = currentClient.phone_Number) === null || _currentClient$phone_ === void 0 ? void 0 : _currentClient$phone_.toString()) || "";\n        console.log("=== COMPARAISON CLIENT ===");\n        console.log("Actuel:", {\n          nom: currentNom,\n          prenom: currentPrenom,\n          email: currentEmail,\n          telephone: currentTelephone\n        });\n        console.log("Nouveau:", {\n          nom: editData.client.nom,\n          prenom: editData.client.prenom,\n          email: editData.client.email,\n          telephone: editData.client.telephone\n        });\n\n        // Vérifier les changements et construire les données à envoyer\n        if (editData.client.nom && editData.client.nom.trim() !== currentNom) {\n          console.log("Nom client modifié:", editData.client.nom);\n          clientData.name = editData.client.nom;\n        }\n        if (editData.client.prenom && editData.client.prenom.trim() !== currentPrenom) {\n          console.log("Prénom client modifié:", editData.client.prenom);\n          clientData.surname = editData.client.prenom;\n        }\n        if (editData.client.email && editData.client.email.trim() !== currentEmail) {\n          console.log("Email client modifié:", editData.client.email);\n          clientData.client_mail = editData.client.email;\n        }\n        if (editData.client.telephone && editData.client.telephone.trim() !== currentTelephone) {\n          console.log("Téléphone client modifié:", editData.client.telephone);\n          clientData.phone_Number = parseInt(editData.client.telephone) || 0;\n        }\n\n        // Envoyer la requête seulement s\'il y a des changements\n        if (Object.keys(clientData).length > 0) {\n          console.log("Envoi des données client:", clientData);\n          await axios__WEBPACK_IMPORTED_MODULE_6__["default"].patch(`/api/client/${clientId}/`, clientData);\n        }\n      }\n\n      // Mettre à jour la société - seulement si les valeurs ont changé\n      if (societeForSave !== null && societeForSave !== void 0 && societeForSave.id) {\n        const currentSociete = societeForSave;\n        const societeData = {};\n\n        // Comparer avec les valeurs actuelles (adresse de la société)\n        const currentNom = currentSociete.nom_societe || "";\n        const currentVille = currentSociete.ville_societe || "";\n        const currentRue = currentSociete.rue_societe || "";\n        const currentCodePostal = currentSociete.codepostal_societe || "";\n        console.log("=== COMPARAISON SOCIÉTÉ ===");\n        console.log("Actuel:", {\n          nom: currentNom,\n          ville: currentVille,\n          rue: currentRue,\n          code_postal: currentCodePostal\n        });\n        console.log("Nouveau:", {\n          nom: editData.societe.nom,\n          ville: editData.societe.ville,\n          rue: editData.societe.rue,\n          code_postal: editData.societe.code_postal\n        });\n        if (editData.societe.nom && editData.societe.nom.trim() !== currentNom) {\n          console.log("Nom société modifié:", editData.societe.nom);\n          societeData.nom_societe = editData.societe.nom;\n        }\n        if (editData.societe.ville && editData.societe.ville.trim() !== currentVille) {\n          console.log("Ville société modifiée:", editData.societe.ville);\n          societeData.ville_societe = editData.societe.ville;\n        }\n        if (editData.societe.rue && editData.societe.rue.trim() !== currentRue) {\n          console.log("Rue société modifiée:", editData.societe.rue);\n          societeData.rue_societe = editData.societe.rue;\n        }\n        if (editData.societe.code_postal && editData.societe.code_postal.trim() !== currentCodePostal) {\n          console.log("Code postal société modifié:", editData.societe.code_postal);\n          societeData.codepostal_societe = editData.societe.code_postal;\n        }\n\n        // Envoyer la requête seulement s\'il y a des changements\n        if (Object.keys(societeData).length > 0) {\n          console.log("Envoi des données société:", societeData);\n          await axios__WEBPACK_IMPORTED_MODULE_6__["default"].patch(`/api/societe/${societeForSave.id}/`, societeData);\n        } else {\n          console.log("Aucune modification détectée pour la société");\n        }\n      }\n\n      // Mettre à jour le chantier - seulement si les valeurs ont changé\n      if (chantierData !== null && chantierData !== void 0 && chantierData.id) {\n        var _chantierData$adresse, _chantierData$adresse2, _chantierData$adresse3;\n        const chantierDataToUpdate = {};\n\n        // Debug: afficher les valeurs pour comparaison\n        console.log("Valeurs actuelles:", {\n          nom: chantierData.nom,\n          statut: chantierData.state_chantier\n        });\n        console.log("Nouvelles valeurs:", {\n          nom: editData.chantier.nom,\n          statut: editData.chantier.statut\n        });\n\n        // Comparer avec les valeurs actuelles\n        if (editData.chantier.nom && editData.chantier.nom.trim() !== (chantierData.nom || "")) {\n          console.log("Nom du chantier modifié:", editData.chantier.nom);\n          chantierDataToUpdate.chantier_name = editData.chantier.nom;\n        }\n        if (editData.chantier.statut && editData.chantier.statut.trim() !== (chantierData.state_chantier || "")) {\n          console.log("Statut du chantier modifié:", editData.chantier.statut);\n          chantierDataToUpdate.state_chantier = editData.chantier.statut;\n        }\n\n        // Gérer l\'adresse du chantier\n        if (editData.chantier_adresse.ville && editData.chantier_adresse.ville.trim() !== (((_chantierData$adresse = chantierData.adresse) === null || _chantierData$adresse === void 0 ? void 0 : _chantierData$adresse.ville) || "")) {\n          console.log("Ville chantier modifiée:", editData.chantier_adresse.ville);\n          chantierDataToUpdate.ville = editData.chantier_adresse.ville;\n        }\n        if (editData.chantier_adresse.rue && editData.chantier_adresse.rue.trim() !== (((_chantierData$adresse2 = chantierData.adresse) === null || _chantierData$adresse2 === void 0 ? void 0 : _chantierData$adresse2.rue) || "")) {\n          console.log("Rue chantier modifiée:", editData.chantier_adresse.rue);\n          chantierDataToUpdate.rue = editData.chantier_adresse.rue;\n        }\n        if (editData.chantier_adresse.code_postal && editData.chantier_adresse.code_postal.trim() !== (((_chantierData$adresse3 = chantierData.adresse) === null || _chantierData$adresse3 === void 0 ? void 0 : _chantierData$adresse3.code_postal) || "")) {\n          console.log("Code postal chantier modifié:", editData.chantier_adresse.code_postal);\n          chantierDataToUpdate.code_postal = editData.chantier_adresse.code_postal;\n        }\n        console.log("Données à mettre à jour:", chantierDataToUpdate);\n\n        // Envoyer la requête seulement s\'il y a des changements\n        if (Object.keys(chantierDataToUpdate).length > 0) {\n          console.log("Envoi de la requête de mise à jour du chantier");\n          await axios__WEBPACK_IMPORTED_MODULE_6__["default"].patch(`/api/chantier/${chantierData.id}/`, chantierDataToUpdate);\n        } else {\n          console.log("Aucune modification détectée pour le chantier");\n        }\n      }\n      setOpenEditModal(false);\n      // Recharger les données du chantier\n      if (onUpdate) {\n        onUpdate();\n      }\n    } catch (error) {\n      var _error$response;\n      console.error("Erreur lors de la modification:", error);\n      if ((_error$response = error.response) !== null && _error$response !== void 0 && _error$response.data) {\n        // Afficher les erreurs spécifiques de validation\n        const errorMessages = Object.values(error.response.data).flat().join("\\n");\n        alert(`Erreur de validation:\\n${errorMessages}`);\n      } else {\n        alert("Erreur lors de la modification des données");\n      }\n    } finally {\n      setLoadingEdit(false);\n    }\n  };\n\n  // Fonction pour supprimer le chantier\n  const handleDeleteChantier = async () => {\n    setLoadingDelete(true);\n    try {\n      await axios__WEBPACK_IMPORTED_MODULE_6__["default"].delete(`/api/chantier/${chantierData.id}/`);\n      setOpenDeleteModal(false);\n      // Rediriger vers la liste des chantiers\n      window.location.href = "/chantiers";\n    } catch (error) {\n      console.error("Erreur lors de la suppression:", error);\n      alert("Erreur lors de la suppression du chantier");\n    } finally {\n      setLoadingDelete(false);\n    }\n  };\n\n  // Fonction pour modifier le statut\n  const handleStatusChange = async newStatus => {\n    setLoadingStatus(true);\n    try {\n      await axios__WEBPACK_IMPORTED_MODULE_6__["default"].put(`/api/chantier/${chantierData.id}/`, {\n        state_chantier: newStatus\n      });\n      setOpenStatusModal(false);\n      // Recharger les données du chantier\n      if (onUpdate) {\n        onUpdate();\n      }\n    } catch (error) {\n      var _error$response2;\n      console.error("Erreur lors de la modification du statut:", error);\n      if ((_error$response2 = error.response) !== null && _error$response2 !== void 0 && _error$response2.data) {\n        const errorMessages = Object.values(error.response.data).flat().join("\\n");\n        alert(`Erreur de validation:\\n${errorMessages}`);\n      } else {\n        alert("Erreur lors de la modification du statut");\n      }\n    } finally {\n      setLoadingStatus(false);\n    }\n  };\n\n  // Fonction pour ouvrir le Drive du chantier\n  const handleOpenDrive = () => {\n    var _chantierInfo$societe;\n    // Utiliser les données complètes du chantier si disponibles, sinon les données de base\n    const chantierInfo = fullChantierData || chantierData;\n    console.log("🔍 DEBUG handleOpenDrive - chantierInfo:", chantierInfo);\n    console.log("🔍 DEBUG handleOpenDrive - societe:", chantierInfo === null || chantierInfo === void 0 ? void 0 : chantierInfo.societe);\n    console.log("🔍 DEBUG handleOpenDrive - nom:", chantierInfo === null || chantierInfo === void 0 ? void 0 : chantierInfo.nom);\n    if (!(chantierInfo !== null && chantierInfo !== void 0 && (_chantierInfo$societe = chantierInfo.societe) !== null && _chantierInfo$societe !== void 0 && _chantierInfo$societe.nom) || !(chantierInfo !== null && chantierInfo !== void 0 && chantierInfo.nom)) {\n      var _chantierInfo$societe2;\n      console.error("❌ DEBUG handleOpenDrive - Données manquantes:");\n      console.error("  - societe?.nom:", chantierInfo === null || chantierInfo === void 0 || (_chantierInfo$societe2 = chantierInfo.societe) === null || _chantierInfo$societe2 === void 0 ? void 0 : _chantierInfo$societe2.nom);\n      console.error("  - nom:", chantierInfo === null || chantierInfo === void 0 ? void 0 : chantierInfo.nom);\n      alert("Impossible d\'ouvrir le Drive : informations du chantier manquantes");\n      return;\n    }\n\n    // Construire le chemin du Drive en utilisant customSlugify\n    const societeSlug = _utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_3__["default"].customSlugify(chantierInfo.societe.nom);\n    const chantierSlug = _utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_3__["default"].customSlugify(chantierInfo.nom);\n    const drivePath = `Chantiers/${societeSlug}/${chantierSlug}`;\n    console.log("🔍 DEBUG handleOpenDrive - drivePath:", drivePath);\n\n    // Ouvrir le Drive dans une nouvelle fenêtre\n    const driveUrl = `/drive?path=${encodeURIComponent(drivePath)}&sidebar=closed`;\n    console.log("🔍 DEBUG handleOpenDrive - driveUrl:", driveUrl);\n    window.open(driveUrl, "_blank", "width=1200,height=800");\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    sx: {\n      mb: 3,\n      borderRadius: "10px",\n      backgroundColor: "white",\n      boxShadow: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onDoubleClick: handleOpenEditModal,\n    sx: {\n      cursor: "pointer",\n      "&:hover": {\n        backgroundColor: "rgba(0, 0, 0, 0.02)"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    container: true,\n    spacing: 4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6,\n    md: 2.4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "subtitle2",\n    sx: {\n      fontWeight: 600,\n      color: "#6e6e6e",\n      mb: 1,\n      fontFamily: "Roboto Slab, serif"\n    }\n  }, "Nom du chantier :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "h6",\n    sx: {\n      fontFamily: "Roboto, Arial, sans-serif",\n      fontWeight: 700,\n      fontSize: "1.1rem",\n      color: "text.primary"\n    }\n  }, (chantierData === null || chantierData === void 0 ? void 0 : chantierData.nom) || "Non défini")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6,\n    md: 2.4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "subtitle2",\n    sx: {\n      fontWeight: 600,\n      color: "#6e6e6e",\n      mb: 1,\n      fontFamily: "Roboto Slab, serif"\n    }\n  }, "Nom client :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "h6",\n    sx: {\n      fontFamily: "Roboto, Arial, sans-serif",\n      fontWeight: 700,\n      fontSize: "1.1rem",\n      color: "text.primary"\n    }\n  }, (chantierData === null || chantierData === void 0 || (_chantierData$societe2 = chantierData.societe) === null || _chantierData$societe2 === void 0 || (_chantierData$societe2 = _chantierData$societe2.client) === null || _chantierData$societe2 === void 0 ? void 0 : _chantierData$societe2.nom) || "Non défini")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6,\n    md: 2.4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "subtitle2",\n    sx: {\n      fontWeight: 600,\n      color: "#6e6e6e",\n      mb: 1,\n      fontFamily: "Roboto Slab, serif"\n    }\n  }, "Soci\\xE9t\\xE9 :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "h6",\n    sx: {\n      fontFamily: "Roboto, Arial, sans-serif",\n      fontWeight: 700,\n      fontSize: "1.1rem",\n      color: "text.primary"\n    }\n  }, (chantierData === null || chantierData === void 0 || (_chantierData$societe3 = chantierData.societe) === null || _chantierData$societe3 === void 0 ? void 0 : _chantierData$societe3.nom) || (chantierData === null || chantierData === void 0 || (_chantierData$societe4 = chantierData.societe) === null || _chantierData$societe4 === void 0 ? void 0 : _chantierData$societe4.nom_societe) || "Non défini")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6,\n    md: 2.4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "subtitle2",\n    sx: {\n      fontWeight: 600,\n      color: "#6e6e6e",\n      mb: 1,\n      fontFamily: "Roboto Slab, serif"\n    }\n  }, "Date de cr\\xE9ation :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "h6",\n    sx: {\n      fontFamily: "Roboto, Arial, sans-serif",\n      fontWeight: 700,\n      fontSize: "1.1rem",\n      color: "text.primary"\n    }\n  }, formatDate(chantierData === null || chantierData === void 0 || (_chantierData$dates = chantierData.dates) === null || _chantierData$dates === void 0 ? void 0 : _chantierData$dates.debut))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6,\n    md: 2.4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "subtitle2",\n    sx: {\n      fontWeight: 600,\n      color: "#6e6e6e",\n      mb: 1,\n      fontFamily: "Roboto Slab, serif"\n    }\n  }, "Statut :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "h6",\n    sx: {\n      fontFamily: "Roboto, Arial, sans-serif",\n      fontWeight: 700,\n      fontSize: "1.1rem",\n      color: "text.primary",\n      display: "inline-block"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    onClick: () => setOpenStatusModal(true),\n    sx: {\n      backgroundColor: (chantierData === null || chantierData === void 0 ? void 0 : chantierData.statut) === "En Cours" ? "rgba(46, 125, 50, 0.1)" : (chantierData === null || chantierData === void 0 ? void 0 : chantierData.statut) === "Terminé" ? "rgba(211, 47, 47, 0.1)" : "#e0e0e0",\n      color: (chantierData === null || chantierData === void 0 ? void 0 : chantierData.statut) === "En Cours" ? "#2e7d32" : (chantierData === null || chantierData === void 0 ? void 0 : chantierData.statut) === "Terminé" ? "#d32f2f" : "#757575",\n      borderRadius: 8,\n      padding: "2px 12px",\n      fontWeight: 700,\n      fontSize: "1.1rem",\n      cursor: "pointer",\n      transition: "all 0.2s ease",\n      "&:hover": {\n        opacity: 0.8,\n        transform: "scale(1.02)"\n      },\n      display: "inline-block"\n    }\n  }, (chantierData === null || chantierData === void 0 ? void 0 : chantierData.statut) || "Non défini")))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      mb: 3,\n      display: "flex",\n      gap: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    variant: "contained",\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_14__.FaHandshake, null),\n    onClick: () => setOpenSousTraitance(true),\n    sx: {\n      backgroundColor: "#1976d2",\n      boxShadow: 3,\n      "&:hover": {\n        backgroundColor: "#1565c0",\n        boxShadow: 5\n      }\n    }\n  }, "G\\xE9rer les sous-traitants"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    variant: "contained",\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_14__.FaClipboardList, null),\n    color: "success",\n    onClick: () => setOpenSituationModal(true),\n    sx: {\n      backgroundColor: "#388e3c",\n      boxShadow: 3,\n      "&:hover": {\n        backgroundColor: "#2e7d32",\n        boxShadow: 5\n      }\n    }\n  }, "G\\xE9rer les situations"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    variant: "contained",\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_14__.FaFileInvoice, null),\n    onClick: () => {\n      window.open(`/CreationDevis?chantier_id=${chantierData === null || chantierData === void 0 ? void 0 : chantierData.id}`, "_blank");\n    },\n    sx: {\n      backgroundColor: "#ff9800",\n      color: "white",\n      boxShadow: 3,\n      "&:hover": {\n        backgroundColor: "#fb8c00",\n        boxShadow: 5\n      }\n    }\n  }, "Cr\\xE9er un nouveau devis"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    variant: "contained",\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_14__.FaTable, null),\n    onClick: () => {\n      window.open(`/TableauSuivi?chantier_id=${chantierData === null || chantierData === void 0 ? void 0 : chantierData.id}`, "_blank");\n    },\n    sx: {\n      backgroundColor: "#424242",\n      color: "white",\n      boxShadow: 3,\n      "&:hover": {\n        backgroundColor: "#212121",\n        boxShadow: 5\n      }\n    }\n  }, "Afficher tableau suivi"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    variant: "contained",\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_14__.FaChartBar, null),\n    onClick: () => {\n      window.open(`/TableauFacturation`, "_blank");\n    },\n    sx: {\n      backgroundColor: "#9c27b0",\n      color: "white",\n      boxShadow: 3,\n      "&:hover": {\n        backgroundColor: "#7b1fa2",\n        boxShadow: 5\n      }\n    }\n  }, "Tableau facturation"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    variant: "contained",\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_14__.FaCloud, null),\n    onClick: handleOpenDrive,\n    sx: {\n      backgroundColor: "#00bcd4",\n      color: "white",\n      boxShadow: 3,\n      "&:hover": {\n        backgroundColor: "#00acc1",\n        boxShadow: 5\n      }\n    }\n  }, "Acc\\xE9der au Drive")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_SousTraitance_SousTraitanceModal__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    open: openSousTraitance,\n    onClose: () => setOpenSousTraitance(false),\n    chantierId: chantierData === null || chantierData === void 0 ? void 0 : chantierData.id,\n    onUpdate: handleSousTraitanceUpdate\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_CreationDocument_SituationCreationModal__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    open: openSituationModal,\n    onClose: () => setOpenSituationModal(false),\n    devis: devisChantier,\n    chantier: chantierData,\n    onCreated: () => {\n      // Recharger les données de taux de facturation\n      axios__WEBPACK_IMPORTED_MODULE_6__["default"].get(`/api/chantier/${chantierData.id}/taux-facturation/`).then(res => setTauxFacturationData(res.data));\n\n      // Recharger la liste des situations (synchronisé avec ChantierDocumentsTab)\n      loadSituations();\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    container: true,\n    spacing: 3\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    md: 4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    container: true,\n    spacing: 3\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      display: "flex",\n      flexDirection: "column",\n      gap: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    sx: {\n      borderRadius: "10px",\n      backgroundColor: "white",\n      boxShadow: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    sx: {\n      pt: 0.5,\n      pb: 0 + " !important"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "subtitle2",\n    sx: {\n      fontWeight: 700,\n      textAlign: "center",\n      fontSize: "1rem",\n      mb: 0,\n      fontFamily: "Roboto Slab, serif"\n    }\n  }, "Pr\\xE9visionnel"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    sx: {\n      borderRadius: "10px",\n      backgroundColor: "white",\n      boxShadow: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    sx: {\n      py: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      display: "flex",\n      flexDirection: "column",\n      gap: 1,\n      alignItems: "center",\n      textAlign: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    sx: {\n      color: "#388e3c",\n      fontWeight: 600,\n      fontSize: "1rem",\n      fontFamily: "Roboto, Arial, sans-serif"\n    }\n  }, "Main d\'\\u0153uvre"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    sx: {\n      fontSize: "0.95rem",\n      fontFamily: "Roboto, Arial, sans-serif"\n    }\n  }, formatMontant(chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_estime_main_oeuvre))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    sx: {\n      color: "#d32f2f",\n      fontWeight: 600,\n      fontSize: "1rem",\n      fontFamily: "Roboto, Arial, sans-serif"\n    }\n  }, "Mat\\xE9riel"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    sx: {\n      fontSize: "0.95rem",\n      fontFamily: "Roboto, Arial, sans-serif"\n    }\n  }, formatMontant(chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_estime_materiel))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    sx: {\n      color: "#1976d2",\n      fontWeight: 600,\n      fontSize: "1rem",\n      fontFamily: "Roboto, Arial, sans-serif"\n    }\n  }, "Sous-traitance"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    sx: {\n      fontSize: "0.95rem",\n      fontFamily: "Roboto, Arial, sans-serif"\n    }\n  }, formatMontant(chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_sous_traitance)))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    sx: {\n      borderRadius: "10px",\n      backgroundColor: "white",\n      boxShadow: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    align: "center",\n    sx: {\n      fontWeight: 700,\n      color: "#1976d2",\n      fontFamily: "Roboto, Arial, sans-serif"\n    }\n  }, "Total:", " ", formatMontant(((chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_estime_main_oeuvre) || 0) + ((chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_estime_materiel) || 0) + ((chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_sous_traitance) || 0))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      display: "flex",\n      flexDirection: "column",\n      gap: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    sx: {\n      borderRadius: "10px",\n      backgroundColor: "white",\n      boxShadow: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    sx: {\n      pt: 0.5,\n      pb: 0 + " !important"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "subtitle2",\n    sx: {\n      fontWeight: 700,\n      textAlign: "center",\n      fontSize: "1rem",\n      mb: 0,\n      fontFamily: "Roboto Slab, serif"\n    }\n  }, "R\\xE9el"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    sx: {\n      borderRadius: "10px",\n      backgroundColor: "white",\n      boxShadow: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    sx: {\n      py: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      display: "flex",\n      flexDirection: "column",\n      gap: 1,\n      alignItems: "center",\n      textAlign: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    sx: {\n      color: "#388e3c",\n      fontWeight: 600,\n      fontSize: "1rem",\n      fontFamily: "Roboto, Arial, sans-serif"\n    }\n  }, "Main d\'\\u0153uvre"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    sx: {\n      fontSize: "0.95rem",\n      fontFamily: "Roboto, Arial, sans-serif"\n    }\n  }, loadingMainOeuvre ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("span", {\n    style: {\n      color: "#1976d2"\n    }\n  }, "Chargement...") : formatMontant(mainOeuvreReelle))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    sx: {\n      color: "#d32f2f",\n      fontWeight: 600,\n      fontSize: "1rem",\n      fontFamily: "Roboto, Arial, sans-serif"\n    }\n  }, "Mat\\xE9riel"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    sx: {\n      fontSize: "0.95rem",\n      fontFamily: "Roboto, Arial, sans-serif"\n    }\n  }, formatMontant(chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_materiel))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    sx: {\n      color: "#1976d2",\n      fontWeight: 600,\n      fontSize: "1rem",\n      fontFamily: "Roboto, Arial, sans-serif"\n    }\n  }, "Sous-traitance"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    sx: {\n      fontSize: "0.95rem",\n      fontFamily: "Roboto, Arial, sans-serif"\n    }\n  }, formatMontant(chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_sous_traitance)))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    sx: {\n      borderRadius: "10px",\n      backgroundColor: "white",\n      boxShadow: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    align: "center",\n    sx: {\n      fontWeight: 700,\n      color: "#1976d2",\n      fontFamily: "Roboto, Arial, sans-serif"\n    }\n  }, "Total:", " ", formatMontant((mainOeuvreReelle || 0) + ((chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_materiel) || 0) + ((chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_sous_traitance) || 0))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    sx: {\n      borderRadius: "10px",\n      backgroundColor: "white",\n      boxShadow: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    align: "center",\n    sx: {\n      fontWeight: 700,\n      fontFamily: "Roboto, Arial, sans-serif",\n      color: ((chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_estime_main_oeuvre) || 0) + ((chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_estime_materiel) || 0) + ((chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_sous_traitance) || 0) - (((chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_main_oeuvre) || 0) + ((chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_materiel) || 0) + ((chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_sous_traitance) || 0)) >= 0 ? "#2e7d32" : "#d32f2f"\n    }\n  }, "Marge:", " ", formatMontant(((chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_estime_main_oeuvre) || 0) + ((chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_estime_materiel) || 0) + ((chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_sous_traitance) || 0) - ((mainOeuvreReelle || 0) + ((chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_materiel) || 0) + ((chantierData === null || chantierData === void 0 ? void 0 : chantierData.cout_sous_traitance) || 0))))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    md: 8\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    sx: {\n      borderRadius: "10px",\n      backgroundColor: "white",\n      height: "100%",\n      display: "flex",\n      flexDirection: "column",\n      justifyContent: "center",\n      mt: 3,\n      boxShadow: 4\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    sx: {\n      pt: 0.5,\n      pb: 0.5\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "center",\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "subtitle1",\n    sx: {\n      fontWeight: 700,\n      fontFamily: "Roboto Slab, serif"\n    }\n  }, "Taux de facturation :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      textAlign: "right"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "body1",\n    sx: {\n      fontWeight: 700,\n      color: "#1976d2",\n      fontFamily: "Roboto, Arial, sans-serif"\n    }\n  }, "Total factur\\xE9 :", " ", formatMontant(tauxFacturationData === null || tauxFacturationData === void 0 ? void 0 : tauxFacturationData.montant_total)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "body2",\n    sx: {\n      fontWeight: 700,\n      color: "#6e6e6e",\n      fontFamily: "Roboto, Arial, sans-serif"\n    }\n  }, "March\\xE9 : ", formatMontant(chantierData === null || chantierData === void 0 ? void 0 : chantierData.montant_ht)))), loadingTaux ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null) : tauxFacturationData ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(MultiColorProgressBar, {\n    pourcentages: pourcentages,\n    montants: montants\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      display: "flex",\n      gap: 2,\n      alignItems: "center",\n      mb: 2,\n      fontWeight: 400,\n      fontSize: "0.65rem"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      width: 16,\n      height: 16,\n      bgcolor: "#ff9800",\n      borderRadius: "50%"\n    }\n  }), " ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    component: "span",\n    sx: {\n      fontSize: "0.85rem"\n    }\n  }, "Non envoy\\xE9es"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      width: 16,\n      height: 16,\n      bgcolor: "#1976d2",\n      borderRadius: "50%"\n    }\n  }), " ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    component: "span",\n    sx: {\n      fontSize: "0.85rem"\n    }\n  }, "En attente paiement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      width: 16,\n      height: 16,\n      bgcolor: "#2e7d32",\n      borderRadius: "50%"\n    }\n  }), " ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    component: "span",\n    sx: {\n      fontSize: "0.85rem"\n    }\n  }, "Pay\\xE9es"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      width: 16,\n      height: 16,\n      bgcolor: "#d32f2f",\n      borderRadius: "50%"\n    }\n  }), " ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    component: "span",\n    sx: {\n      fontSize: "0.85rem"\n    }\n  }, "Retard de paiement")), situations.map(situation => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    key: situation.id\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    expandIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_14__.FaChevronDown, null)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    sx: {\n      fontWeight: 700\n    }\n  }, situation.numero_situation, " \\u2013 ", situation.mois, "/", situation.annee), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    sx: {\n      ml: 2,\n      fontWeight: 700,\n      color: getCategorieColor(getSituationCategorie(situation))\n    }\n  }, formatMontant(situation.montant_apres_retenues))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, !situation.date_envoi ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    color: "warning.main"\n  }, "Date d\'envoi et d\\xE9lai de paiement non d\\xE9finis"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    variant: "outlined",\n    onClick: () => handleOpenModal(situation)\n  }, "D\\xE9finir les dates")) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "Date d\'envoi :", " ", new Date(situation.date_envoi).toLocaleDateString("fr-FR")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "D\\xE9lai de paiement : ", situation.delai_paiement, " ", "jours"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "Date limite de paiement :", " ", situation.date_envoi && situation.delai_paiement ? new Date(new Date(situation.date_envoi).getTime() + situation.delai_paiement * 24 * 60 * 60 * 1000).toLocaleDateString("fr-FR") : "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "Statut de paiement :", " ", situation.date_paiement_reel ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_14__.FaCheckCircle, {\n    color: "#2e7d32",\n    style: {\n      verticalAlign: "middle"\n    }\n  }), " ", "Pay\\xE9e") : isRetardPaiement(situation) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_14__.FaExclamationCircle, {\n    color: "#d32f2f",\n    style: {\n      verticalAlign: "middle"\n    }\n  }), " ", "Retard de paiement") : situation.date_envoi ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_14__.FaHourglassHalf, {\n    color: "#1976d2",\n    style: {\n      verticalAlign: "middle"\n    }\n  }), " ", "En attente") : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_14__.FaExclamationCircle, {\n    color: "#ff9800",\n    style: {\n      verticalAlign: "middle"\n    }\n  }), " ", "Non envoy\\xE9e")), !situation.date_paiement_reel && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    variant: "outlined",\n    color: "success",\n    sx: {\n      mt: 1,\n      mb: 1\n    },\n    onClick: () => handleOpenPaiementModal(situation)\n  }, "D\\xE9finir paiement")))))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    color: "error"\n  }, "Aucune donn\\xE9e de facturation disponible."))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    open: openModal,\n    onClose: handleCloseModal\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, "Date d\'envoi et d\\xE9lai de paiement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    type: "date",\n    label: "Date d\'envoi",\n    value: dateEnvoi ? typeof dateEnvoi === "string" ? dateEnvoi : dayjs__WEBPACK_IMPORTED_MODULE_0___default()(dateEnvoi).format("YYYY-MM-DD") : "",\n    onChange: e => setDateEnvoi(e.target.value),\n    fullWidth: true,\n    sx: {\n      mb: 2\n    },\n    InputLabelProps: {\n      shrink: true\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], {\n    value: delaiPaiement,\n    onChange: e => setDelaiPaiement(e.target.value),\n    fullWidth: true,\n    displayEmpty: true,\n    sx: {\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    value: ""\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("em", null, "Choisir un d\\xE9lai")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    value: 45\n  }, "45 jours"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    value: 60\n  }, "60 jours")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: handleCloseModal\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: handleSaveDates,\n    disabled: !dateEnvoi || !delaiPaiement,\n    variant: "contained"\n  }, "Sauvegarder"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    open: openPaiementModal,\n    onClose: () => setOpenPaiementModal(false)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, "Montant re\\xE7u et date de paiement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    type: "number",\n    label: "Montant re\\xE7u HT",\n    value: montantRecu,\n    onChange: e => setMontantRecu(e.target.value),\n    fullWidth: true,\n    sx: {\n      mb: 2\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    type: "date",\n    label: "Date de paiement r\\xE9elle",\n    value: datePaiementReel,\n    onChange: e => setDatePaiementReel(e.target.value),\n    fullWidth: true\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: () => setOpenPaiementModal(false)\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: async () => {\n      try {\n        await updatePaiement(selectedSituationPaiement.id, montantRecu, datePaiementReel);\n        setOpenPaiementModal(false);\n        setSelectedSituationPaiement(null);\n        setMontantRecu("");\n        setDatePaiementReel("");\n        // Rafraîchir les données\n        axios__WEBPACK_IMPORTED_MODULE_6__["default"].get(`/api/chantier/${chantierData.id}/taux-facturation/`).then(res => setTauxFacturationData(res.data));\n      } catch (error) {\n        alert("Erreur lors de la mise à jour du paiement.");\n      }\n    },\n    variant: "contained",\n    disabled: !montantRecu || !datePaiementReel\n  }, "Valider"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    open: openEditModal,\n    onClose: () => setOpenEditModal(false),\n    maxWidth: "md",\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, "Modifier les informations du chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "h6",\n    sx: {\n      mb: 2,\n      color: "#1976d2"\n    }\n  }, "Informations du chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    container: true,\n    spacing: 2,\n    sx: {\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    fullWidth: true,\n    label: "Nom du chantier",\n    value: editData.chantier.nom,\n    onChange: e => setEditData({\n      ...editData,\n      chantier: {\n        ...editData.chantier,\n        nom: e.target.value\n      }\n    }),\n    sx: {\n      mb: 2\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    fullWidth: true,\n    sx: {\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], null, "Statut"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], {\n    value: editData.chantier.statut,\n    onChange: e => setEditData({\n      ...editData,\n      chantier: {\n        ...editData.chantier,\n        statut: e.target.value\n      }\n    }),\n    label: "Statut"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    value: "En Cours"\n  }, "En Cours"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    value: "Termin\\xE9"\n  }, "Termin\\xE9"))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "h6",\n    sx: {\n      mb: 2,\n      color: "#1976d2"\n    }\n  }, "Informations de la soci\\xE9t\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    container: true,\n    spacing: 2,\n    sx: {\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    fullWidth: true,\n    label: "Nom de la soci\\xE9t\\xE9",\n    value: editData.societe.nom,\n    onChange: e => setEditData({\n      ...editData,\n      societe: {\n        ...editData.societe,\n        nom: e.target.value\n      }\n    }),\n    sx: {\n      mb: 2\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    fullWidth: true,\n    label: "Ville de la soci\\xE9t\\xE9",\n    value: editData.societe.ville,\n    onChange: e => setEditData({\n      ...editData,\n      societe: {\n        ...editData.societe,\n        ville: e.target.value\n      }\n    }),\n    sx: {\n      mb: 2\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    fullWidth: true,\n    label: "Rue de la soci\\xE9t\\xE9",\n    value: editData.societe.rue,\n    onChange: e => setEditData({\n      ...editData,\n      societe: {\n        ...editData.societe,\n        rue: e.target.value\n      }\n    }),\n    sx: {\n      mb: 2\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    fullWidth: true,\n    label: "Code postal de la soci\\xE9t\\xE9",\n    value: editData.societe.code_postal,\n    onChange: e => setEditData({\n      ...editData,\n      societe: {\n        ...editData.societe,\n        code_postal: e.target.value\n      }\n    }),\n    sx: {\n      mb: 2\n    }\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "h6",\n    sx: {\n      mb: 2,\n      color: "#1976d2"\n    }\n  }, "Adresse du chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    container: true,\n    spacing: 2,\n    sx: {\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    fullWidth: true,\n    label: "Ville du chantier",\n    value: editData.chantier_adresse.ville,\n    onChange: e => setEditData({\n      ...editData,\n      chantier_adresse: {\n        ...editData.chantier_adresse,\n        ville: e.target.value\n      }\n    }),\n    sx: {\n      mb: 2\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    fullWidth: true,\n    label: "Rue du chantier",\n    value: editData.chantier_adresse.rue,\n    onChange: e => setEditData({\n      ...editData,\n      chantier_adresse: {\n        ...editData.chantier_adresse,\n        rue: e.target.value\n      }\n    }),\n    sx: {\n      mb: 2\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    fullWidth: true,\n    label: "Code postal du chantier",\n    value: editData.chantier_adresse.code_postal,\n    onChange: e => setEditData({\n      ...editData,\n      chantier_adresse: {\n        ...editData.chantier_adresse,\n        code_postal: e.target.value\n      }\n    }),\n    sx: {\n      mb: 2\n    }\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "h6",\n    sx: {\n      mb: 2,\n      color: "#1976d2"\n    }\n  }, "Informations du client"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    container: true,\n    spacing: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    fullWidth: true,\n    label: "Nom",\n    value: editData.client.nom,\n    onChange: e => setEditData({\n      ...editData,\n      client: {\n        ...editData.client,\n        nom: e.target.value\n      }\n    }),\n    sx: {\n      mb: 2\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    fullWidth: true,\n    label: "Pr\\xE9nom",\n    value: editData.client.prenom,\n    onChange: e => setEditData({\n      ...editData,\n      client: {\n        ...editData.client,\n        prenom: e.target.value\n      }\n    }),\n    sx: {\n      mb: 2\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    fullWidth: true,\n    label: "Email",\n    type: "email",\n    value: editData.client.email,\n    onChange: e => setEditData({\n      ...editData,\n      client: {\n        ...editData.client,\n        email: e.target.value\n      }\n    }),\n    sx: {\n      mb: 2\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    item: true,\n    xs: 12,\n    sm: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    fullWidth: true,\n    label: "T\\xE9l\\xE9phone",\n    type: "tel",\n    value: editData.client.telephone,\n    onChange: e => setEditData({\n      ...editData,\n      client: {\n        ...editData.client,\n        telephone: e.target.value\n      }\n    }),\n    sx: {\n      mb: 2\n    }\n  }))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    sx: {\n      justifyContent: "space-between"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: () => setOpenDeleteModal(true),\n    variant: "outlined",\n    color: "error",\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_14__.FaTrash, null)\n  }, "Supprimer le chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      display: "flex",\n      gap: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: () => setOpenEditModal(false)\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: handleSaveEdit,\n    variant: "contained",\n    disabled: loadingEdit\n  }, loadingEdit ? "Sauvegarde..." : "Sauvegarder")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    open: openDeleteModal,\n    onClose: () => setOpenDeleteModal(false)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, "Confirmer la suppression"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_28__["default"], {\n    severity: "warning",\n    sx: {\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "body1",\n    sx: {\n      fontWeight: 600\n    }\n  }, "Attention ! Cette action est irr\\xE9versible."), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "body2"\n  }, "Vous \\xEAtes sur le point de supprimer d\\xE9finitivement le chantier \\"", chantierData === null || chantierData === void 0 ? void 0 : chantierData.nom, "\\" ainsi que toutes les donn\\xE9es associ\\xE9es (situations, devis, etc.).")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "body2",\n    sx: {\n      color: "text.secondary"\n    }\n  }, "Pour confirmer la suppression, veuillez taper le nom du chantier :", " ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("strong", null, chantierData === null || chantierData === void 0 ? void 0 : chantierData.nom)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    fullWidth: true,\n    label: "Nom du chantier",\n    placeholder: chantierData === null || chantierData === void 0 ? void 0 : chantierData.nom,\n    sx: {\n      mt: 2\n    },\n    onChange: e => {\n      // La suppression ne sera activée que si le nom correspond exactement\n      const canDelete = e.target.value === (chantierData === null || chantierData === void 0 ? void 0 : chantierData.nom);\n      setCanDelete(canDelete);\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: () => setOpenDeleteModal(false)\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: handleDeleteChantier,\n    variant: "contained",\n    color: "error",\n    disabled: loadingDelete || !canDelete\n  }, loadingDelete ? "Suppression..." : "Supprimer définitivement"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    open: openStatusModal,\n    onClose: () => setOpenStatusModal(false)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], null, "Modifier le statut du chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    sx: {\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: "body1",\n    sx: {\n      mb: 2\n    }\n  }, "Statut actuel : ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement("strong", null, chantierData === null || chantierData === void 0 ? void 0 : chantierData.statut)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_26__["default"], {\n    fullWidth: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_27__["default"], null, "Nouveau statut"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], {\n    value: editData.chantier.statut,\n    onChange: e => setEditData({\n      ...editData,\n      chantier: {\n        ...editData.chantier,\n        statut: e.target.value\n      }\n    }),\n    label: "Nouveau statut"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    value: "En Cours"\n  }, "En Cours"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], {\n    value: "Termin\\xE9"\n  }, "Termin\\xE9"))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: () => setOpenStatusModal(false)\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: () => handleStatusChange(editData.chantier.statut),\n    variant: "contained",\n    disabled: loadingStatus || editData.chantier.statut === (chantierData === null || chantierData === void 0 ? void 0 : chantierData.statut)\n  }, loadingStatus ? "Modification..." : "Modifier le statut"))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChantierInfoTab);\n\n//# sourceURL=webpack://frontend/./src/components/chantier/ChantierInfoTab.js?')},"./src/components/chantier/ChantierListeBonCommande.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Menu/Menu.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Autocomplete/Autocomplete.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_x_date_pickers_AdapterDateFns__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/x-date-pickers/AdapterDateFns */ "./node_modules/@mui/x-date-pickers/AdapterDateFns/index.js");\n/* harmony import */ var _mui_x_date_pickers_DatePicker__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/x-date-pickers/DatePicker */ "./node_modules/@mui/x-date-pickers/DatePicker/DatePicker.js");\n/* harmony import */ var _mui_x_date_pickers_LocalizationProvider__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/x-date-pickers/LocalizationProvider */ "./node_modules/@mui/x-date-pickers/LocalizationProvider/LocalizationProvider.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var date_fns_locale_fr__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! date-fns/locale/fr */ "./node_modules/date-fns/esm/locale/fr/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_tfi__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react-icons/tfi */ "./node_modules/react-icons/tfi/index.mjs");\n/* harmony import */ var _styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../styles/tableStyles */ "./src/styles/tableStyles.js");\n/* harmony import */ var _BonCommandeForm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../BonCommandeForm */ "./src/components/BonCommandeForm.js");\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\n\n\n\n\n\n\n\n\n\n\nconst ChantierListeBonCommande = ({\n  chantierId,\n  bonsCommande = [],\n  setBonsCommande = () => {},\n  initialFilters = {},\n  onSaveFilters\n}) => {\n  const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [orderBy, setOrderBy] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("date");\n  const [order, setOrder] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("desc");\n  const [anchorEl, setAnchorEl] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [statusAnchorEl, setStatusAnchorEl] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [selectedBC, setSelectedBC] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [statusModalOpen, setStatusModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedStatus, setSelectedStatus] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [date, setDate] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [magasin, setMagasin] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [magasins, setMagasins] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [inputValue, setInputValue] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [paymentStatusAnchorEl, setPaymentStatusAnchorEl] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [paymentModalOpen, setPaymentModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [paymentAmount, setPaymentAmount] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [openForm, setOpenForm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [filters, setFilters] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialFilters);\n  const [pendingSave, setPendingSave] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const firstMount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true);\n  const prevChantierId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(chantierId);\n  const [openFournisseurModal, setOpenFournisseurModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [fournisseurMap, setFournisseurMap] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (firstMount.current || chantierId !== prevChantierId.current) {\n      setFilters(initialFilters);\n      firstMount.current = false;\n      prevChantierId.current = chantierId;\n    }\n  }, [chantierId]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!pendingSave) return;\n    const handleMouseMove = () => {\n      if (onSaveFilters) onSaveFilters(filters);\n      setPendingSave(false);\n      document.removeEventListener("mousemove", handleMouseMove);\n    };\n    document.addEventListener("mousemove", handleMouseMove);\n    return () => {\n      document.removeEventListener("mousemove", handleMouseMove);\n    };\n  }, [pendingSave, filters, onSaveFilters]);\n  const handleChange = field => e => {\n    setFilters(prev => ({\n      ...prev,\n      [field]: e.target.value\n    }));\n    setPendingSave(true);\n  };\n  const fetchBonsCommande = async () => {\n    if (isLoading) return;\n    try {\n      setIsLoading(true);\n      const response = await axios__WEBPACK_IMPORTED_MODULE_3__["default"].get("/api/bons-commande/");\n      // Filtrer côté front sur le chantier courant\n      const filtered = response.data.filter(bc => bc.chantier === chantierId);\n      setBonsCommande(filtered);\n    } catch (error) {\n      console.error("Erreur lors du chargement des bons de commande:", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleBonCommandeCreated = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    fetchBonsCommande();\n  }, [chantierId]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!bonsCommande.length) {\n      fetchBonsCommande();\n    }\n    // eslint-disable-next-line\n  }, [chantierId]);\n\n  // Charger la liste des fournisseurs pour faire le mapping id -> nom\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    fetch("/api/fournisseurs/").then(res => res.json()).then(data => {\n      const map = {};\n      data.forEach(f => {\n        map[f.id] = f.name;\n      });\n      setFournisseurMap(map);\n    });\n  }, []);\n\n  // Calcul dynamique de la liste filtrée à chaque render\n  const filteredBonsCommande = bonsCommande.filter(bc => {\n    return Object.keys(filters).every(key => {\n      var _bc$numero, _bc$fournisseur, _bc$statut;\n      if (!filters[key]) return true;\n      switch (key) {\n        case "numero":\n          return (_bc$numero = bc.numero) === null || _bc$numero === void 0 ? void 0 : _bc$numero.toLowerCase().includes(filters[key].toLowerCase());\n        case "fournisseur":\n          return (_bc$fournisseur = bc.fournisseur) === null || _bc$fournisseur === void 0 ? void 0 : _bc$fournisseur.toLowerCase().includes(filters[key].toLowerCase());\n        case "date_creation":\n          if (!filters[key]) return true;\n          const bcDate = new Date(bc.date_creation).toISOString().split("T")[0];\n          return bcDate === filters[key];\n        case "montant_total":\n          if (!filters[key]) return true;\n          return parseFloat(bc.montant_total) === parseFloat(filters[key]);\n        case "statut":\n          if (!filters[key]) return true;\n          return (_bc$statut = bc.statut) === null || _bc$statut === void 0 ? void 0 : _bc$statut.toLowerCase().includes(filters[key].toLowerCase());\n        default:\n          return true;\n      }\n    });\n  });\n  const handleSort = property => {\n    const isAsc = orderBy === property && order === "asc";\n    setOrder(isAsc ? "desc" : "asc");\n    setOrderBy(property);\n    const sortedBCs = [...filteredBonsCommande].sort((a, b) => {\n      if (property === "date_creation") {\n        return (isAsc ? 1 : -1) * (new Date(a[property]) - new Date(b[property]));\n      }\n      return (isAsc ? 1 : -1) * (a[property] < b[property] ? -1 : 1);\n    });\n  };\n  const handleMenuOpen = (event, bc) => {\n    setAnchorEl(event.currentTarget);\n    setSelectedBC(bc);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  const handleStatusMenuOpen = () => {\n    handleClose();\n    setStatusAnchorEl(anchorEl);\n    setSelectedBC(selectedBC);\n  };\n  const handleStatusMenuClose = () => {\n    setStatusAnchorEl(null);\n  };\n  const loadMagasins = async fournisseur => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_3__["default"].get(`/api/fournisseur-magasins/?fournisseur=${fournisseur}`);\n      setMagasins(response.data.map(m => m.magasin));\n    } catch (error) {\n      console.error("Erreur lors du chargement des magasins:", error);\n    }\n  };\n  const handleStatusChange = status => {\n    setSelectedStatus(status);\n    if (status === "retrait_magasin" && selectedBC) {\n      loadMagasins(selectedBC.fournisseur);\n    }\n    setStatusModalOpen(true);\n    handleStatusMenuClose();\n  };\n  const handleStatusConfirm = async () => {\n    try {\n      const formattedDate = date ? `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, "0")}-${String(date.getDate()).padStart(2, "0")}` : null;\n      const data = {\n        statut: selectedStatus,\n        date_livraison: formattedDate,\n        magasin_retrait: magasin || ""\n      };\n      await axios__WEBPACK_IMPORTED_MODULE_3__["default"].patch(`/api/update-bon-commande/${selectedBC.id}/`, data);\n      fetchBonsCommande();\n      setStatusModalOpen(false);\n      setDate(null);\n      setMagasin("");\n      setInputValue("");\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour du statut:", error);\n      alert("Erreur lors de la mise à jour du statut");\n    }\n  };\n  const handlePreviewBonCommande = bonCommandeId => {\n    window.open(`/api/preview-saved-bon-commande/${bonCommandeId}/`, "_blank");\n  };\n  const handleModifyBC = () => {\n    if (selectedBC) {\n      window.location.href = `/ModificationBC/${selectedBC.id}`;\n    }\n    handleClose();\n  };\n  const handleDeleteBC = async () => {\n    if (!selectedBC) return;\n    if (window.confirm("Êtes-vous sûr de vouloir supprimer ce bon de commande ?")) {\n      try {\n        await axios__WEBPACK_IMPORTED_MODULE_3__["default"].delete(`/api/delete-bons-commande/${selectedBC.id}/`);\n        await fetchBonsCommande();\n        handleClose();\n      } catch (error) {\n        console.error("Erreur lors de la suppression du bon de commande:", error);\n        alert("Erreur lors de la suppression du bon de commande");\n      }\n    }\n  };\n  const handlePaymentMenuOpen = () => {\n    setPaymentModalOpen(true);\n    handleClose();\n  };\n  const handlePaymentSubmit = async () => {\n    if (!selectedBC) {\n      alert("Veuillez sélectionner un bon de commande");\n      return;\n    }\n    try {\n      const montantPaye = parseFloat(paymentAmount);\n      if (isNaN(montantPaye) || montantPaye <= 0) {\n        alert("Veuillez entrer un montant valide");\n        return;\n      }\n      let nouveauStatut;\n      if (montantPaye >= selectedBC.montant_total) {\n        nouveauStatut = "paye";\n      } else if (montantPaye > 0) {\n        nouveauStatut = "paye_partiel";\n      } else {\n        nouveauStatut = "non_paye";\n      }\n      const data = {\n        montant_paye: montantPaye,\n        statut_paiement: nouveauStatut,\n        date_paiement: new Date().toISOString().split("T")[0]\n      };\n      await axios__WEBPACK_IMPORTED_MODULE_3__["default"].patch(`/api/bons-commande/${selectedBC.id}/`, data);\n      await fetchBonsCommande();\n      setPaymentModalOpen(false);\n      setPaymentAmount("");\n      setSelectedBC(null);\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour du paiement:", error);\n      alert("Erreur lors de la mise à jour du paiement");\n    }\n  };\n  const handleOpenFournisseurModal = () => setOpenFournisseurModal(true);\n  const handleCloseFournisseurModal = () => setOpenFournisseurModal(false);\n  const handleAddFournisseur = () => {\n    handleCloseFournisseurModal();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    style: {\n      backgroundColor: "#ffffff",\n      width: "100%",\n      maxWidth: "1400px",\n      height: "auto",\n      padding: "20px",\n      paddingBottom: "70px",\n      borderRadius: "10px",\n      boxShadow: "6px 7px 20px -6px rgba(33, 33, 33, 1)",\n      margin: "20px auto"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledBox, {\n    sx: {\n      display: "flex",\n      justifyContent: "space-between",\n      alignItems: "center",\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "h5"\n  }, "Bons de Commande du Chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      display: "flex",\n      gap: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_BonCommandeForm__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    onBonCommandeCreated: handleBonCommandeCreated,\n    chantierId: chantierId\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTableContainer, {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_6__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "N\\xB0 BC",\n    variant: "standard",\n    value: filters.numero,\n    onChange: handleChange("numero")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Fournisseur",\n    variant: "standard",\n    value: filters.fournisseur,\n    onChange: handleChange("fournisseur")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTextField, {\n    label: "",\n    variant: "standard",\n    type: "date",\n    value: filters.date_creation,\n    onChange: handleChange("date_creation"),\n    InputLabelProps: {\n      shrink: true\n    },\n    sx: {\n      pt: "15px"\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Montant",\n    variant: "standard",\n    value: filters.montant_total,\n    onChange: handleChange("montant_total")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Statut",\n    variant: "standard",\n    value: filters.statut,\n    onChange: handleChange("statut")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Paiement",\n    variant: "standard",\n    value: filters.statut_paiement,\n    onChange: handleChange("statut_paiement")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Pay\\xE9",\n    variant: "standard",\n    value: filters.montant_paye,\n    onChange: handleChange("montant_paye")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "\\xC0 Payer",\n    variant: "standard",\n    value: filters.reste_a_payer,\n    onChange: handleChange("reste_a_payer")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], null, filteredBonsCommande.map((bc, idx) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    key: bc.id,\n    hover: true,\n    sx: {\n      backgroundColor: idx % 2 === 0 ? "#fafafa" : "#fff"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.DevisNumber, {\n    onClick: () => handlePreviewBonCommande(bc.id),\n    style: {\n      cursor: "pointer",\n      fontWeight: 700\n    }\n  }, bc.numero), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, typeof bc.fournisseur === "object" && bc.fournisseur !== null ? bc.fournisseur.name || bc.fournisseur.Fournisseur_mail || "" : fournisseurMap[bc.fournisseur] || bc.fournisseur), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, new Date(bc.date_creation).toLocaleDateString()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n    sx: {\n      textAlign: "center"\n    }\n  }, parseFloat(bc.montant_total).toFixed(2), " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, bc.statut === "en_attente" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    style: {\n      color: "#FFA500",\n      fontWeight: "bold",\n      fontSize: "14px"\n    }\n  }, "En attente Livraison"), bc.statut === "livre_chantier" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    style: {\n      color: "#4CAF50",\n      fontWeight: "bold",\n      fontSize: "14px"\n    }\n  }, "Livr\\xE9 Chantier"), bc.statut === "retrait_magasin" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    style: {\n      color: "rgba(27, 120, 188, 1)",\n      fontWeight: "bold",\n      fontSize: "14px"\n    }\n  }, "Retrait Magasin")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, bc.statut_paiement === "non_paye" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    style: {\n      color: "#FF0000",\n      fontSize: "14px",\n      whiteSpace: "nowrap",\n      display: "block",\n      textAlign: "center"\n    }\n  }, "Non Pay\\xE9"), bc.statut_paiement === "paye" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    style: {\n      color: "#4CAF50",\n      fontSize: "14px",\n      whiteSpace: "nowrap",\n      display: "block",\n      textAlign: "center"\n    }\n  }, "Pay\\xE9"), bc.statut_paiement === "paye_partiel" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n    style: {\n      color: "#FFA500",\n      fontSize: "14px",\n      whiteSpace: "nowrap",\n      display: "block",\n      textAlign: "center"\n    }\n  }, "Pay\\xE9 Partiellement")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n    sx: {\n      whiteSpace: "nowrap",\n      textAlign: "center"\n    }\n  }, bc.montant_paye, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n    sx: {\n      whiteSpace: "nowrap",\n      textAlign: "center"\n    }\n  }, bc.reste_a_payer, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    onClick: e => handleMenuOpen(e, bc)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_tfi__WEBPACK_IMPORTED_MODULE_12__.TfiMore, null)))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    anchorEl: anchorEl,\n    open: Boolean(anchorEl),\n    onClose: handleClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    onClick: handleModifyBC\n  }, "Modifier BC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    onClick: handleStatusMenuOpen\n  }, "Modifier le statut"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    onClick: handlePaymentMenuOpen\n  }, "G\\xE9rer le paiement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    onClick: handleDeleteBC,\n    sx: {\n      color: "red"\n    }\n  }, "Supprimer BC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    anchorEl: statusAnchorEl,\n    open: Boolean(statusAnchorEl),\n    onClose: handleStatusMenuClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    onClick: () => handleStatusChange("en_attente")\n  }, "En attente Livraison"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    onClick: () => handleStatusChange("livre_chantier")\n  }, "Livr\\xE9 Chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    onClick: () => handleStatusChange("retrait_magasin")\n  }, "Retrait Magasin")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    open: statusModalOpen,\n    onClose: () => setStatusModalOpen(false)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], null, selectedStatus === "en_attente" ? "En attente Livraison" : selectedStatus === "livre_chantier" ? "Livré Chantier" : "Retrait Magasin"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], null, selectedStatus !== "en_attente" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_x_date_pickers_LocalizationProvider__WEBPACK_IMPORTED_MODULE_18__.LocalizationProvider, {\n    dateAdapter: _mui_x_date_pickers_AdapterDateFns__WEBPACK_IMPORTED_MODULE_19__.AdapterDateFns,\n    adapterLocale: date_fns_locale_fr__WEBPACK_IMPORTED_MODULE_20__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_x_date_pickers_DatePicker__WEBPACK_IMPORTED_MODULE_21__.DatePicker, {\n    label: "Date de livraison",\n    value: date,\n    onChange: newDate => setDate(newDate),\n    renderInput: params => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], _extends({}, params, {\n      fullWidth: true,\n      sx: {\n        mt: 2\n      }\n    }))\n  })), selectedStatus === "retrait_magasin" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_23__["default"], {\n    freeSolo: true,\n    value: magasin,\n    onChange: (event, newValue) => {\n      setMagasin(newValue);\n    },\n    inputValue: inputValue,\n    onInputChange: (event, newInputValue) => {\n      setInputValue(newInputValue);\n    },\n    options: magasins,\n    renderInput: params => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], _extends({}, params, {\n      label: "Magasin",\n      fullWidth: true,\n      sx: {\n        mt: 2\n      }\n    }))\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    onClick: () => setStatusModalOpen(false)\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    onClick: handleStatusConfirm,\n    variant: "contained"\n  }, "Confirmer"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    open: paymentModalOpen,\n    onClose: () => {\n      setPaymentModalOpen(false);\n      setSelectedBC(null);\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], null, "G\\xE9rer le paiement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body1",\n    gutterBottom: true\n  }, "Montant total : ", selectedBC === null || selectedBC === void 0 ? void 0 : selectedBC.montant_total, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body1",\n    gutterBottom: true\n  }, "D\\xE9j\\xE0 pay\\xE9 : ", (selectedBC === null || selectedBC === void 0 ? void 0 : selectedBC.montant_paye) || 0, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body1",\n    gutterBottom: true\n  }, "Reste \\xE0 payer : ", selectedBC === null || selectedBC === void 0 ? void 0 : selectedBC.reste_a_payer, " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    label: "Montant du paiement",\n    type: "number",\n    value: paymentAmount,\n    onChange: e => setPaymentAmount(e.target.value),\n    fullWidth: true,\n    margin: "normal"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_24__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    onClick: () => {\n      setPaymentModalOpen(false);\n      setSelectedBC(null);\n    }\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_25__["default"], {\n    onClick: handlePaymentSubmit,\n    variant: "contained",\n    color: "primary"\n  }, "Valider"))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChantierListeBonCommande);\n\n//# sourceURL=webpack://frontend/./src/components/chantier/ChantierListeBonCommande.js?')},"./src/components/chantier/ChantierListeDevis.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableSortLabel/TableSortLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/ButtonGroup/ButtonGroup.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Menu/Menu.js");\n/* harmony import */ var _mui_material_colors__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material/colors */ "./node_modules/@mui/material/colors/green.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_ai__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! react-icons/ai */ "./node_modules/react-icons/ai/index.mjs");\n/* harmony import */ var react_icons_tfi__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! react-icons/tfi */ "./node_modules/react-icons/tfi/index.mjs");\n/* harmony import */ var _styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../styles/tableStyles */ "./src/styles/tableStyles.js");\n/* harmony import */ var _utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/universalDriveGenerator */ "./src/utils/universalDriveGenerator.js");\n/* harmony import */ var _CreationSituation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../CreationSituation */ "./src/components/CreationSituation.js");\n/* harmony import */ var _FactureModal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../FactureModal */ "./src/components/FactureModal.js");\n/* harmony import */ var _StatusChangeModal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../StatusChangeModal */ "./src/components/StatusChangeModal.js");\n/* harmony import */ var _TransformationCIEModal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../TransformationCIEModal */ "./src/components/TransformationCIEModal.js");\n/* harmony import */ var _TransformationTSModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../TransformationTSModal */ "./src/components/TransformationTSModal.js");\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst formatNumber = number => number === null || number === void 0 ? void 0 : number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, " ");\nconst ChantierListeDevis = ({\n  chantierData,\n  devis,\n  setDevis,\n  filters,\n  setFilters,\n  isLoaded,\n  setIsLoaded,\n  onSaveFilters\n}) => {\n  const [filteredDevis, setFilteredDevis] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [orderBy, setOrderBy] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("date");\n  const [order, setOrder] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("desc");\n  const [anchorEl, setAnchorEl] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [selectedDevis, setSelectedDevis] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [showStatusModal, setShowStatusModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [devisToUpdate, setDevisToUpdate] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [factureModalOpen, setFactureModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [tsModalOpen, setTsModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [cieModalOpen, setCieModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedDevisForTS, setSelectedDevisForTS] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [selectedDevisForCIE, setSelectedDevisForCIE] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [selectedChantier, setSelectedChantier] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [situationModalOpen, setSituationModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedDevisForSituation, setSelectedDevisForSituation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const statusOptions = ["En attente", "Validé", "Refusé"];\n  const [pendingSave, setPendingSave] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!isLoaded && chantierData !== null && chantierData !== void 0 && chantierData.id) {\n      fetchDevis();\n    } else {\n      setFilteredDevis(devis);\n    }\n    // eslint-disable-next-line\n  }, [chantierData === null || chantierData === void 0 ? void 0 : chantierData.id, isLoaded, devis]);\n  const fetchDevis = async () => {\n    if (!(chantierData !== null && chantierData !== void 0 && chantierData.id)) return;\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].get("/api/devisa/");\n      // Filtrer les devis du chantier courant\n      const chantierDevis = response.data.filter(d => d.chantier === chantierData.id);\n      setDevis(chantierDevis);\n      setFilteredDevis(chantierDevis);\n      setIsLoaded(true);\n    } catch (error) {\n      setDevis([]);\n      setFilteredDevis([]);\n      setIsLoaded(true);\n    }\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!pendingSave) return;\n    const handleMouseMove = () => {\n      setPendingSave(false);\n      onSaveFilters(filters);\n      document.removeEventListener("mousemove", handleMouseMove);\n    };\n    document.addEventListener("mousemove", handleMouseMove);\n    return () => document.removeEventListener("mousemove", handleMouseMove);\n  }, [pendingSave, filters, onSaveFilters]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    // Recalcule la liste filtrée à chaque changement de filters ou de devis\n    let filtered = devis.filter(devis => {\n      return Object.keys(filters).every(key => {\n        var _devis$numero, _devis$client_name, _devis$price_ttc;\n        if (!filters[key] || filters[key] === "Tous") return true;\n        switch (key) {\n          case "numero":\n            return (_devis$numero = devis.numero) === null || _devis$numero === void 0 ? void 0 : _devis$numero.toLowerCase().includes(filters[key].toLowerCase());\n          case "client_name":\n            return (_devis$client_name = devis.client_name) === null || _devis$client_name === void 0 ? void 0 : _devis$client_name.toLowerCase().includes(filters[key].toLowerCase());\n          case "date_creation":\n            if (!filters[key]) return true;\n            const devisDate = new Date(devis.date_creation).toISOString().split("T")[0];\n            return devisDate === filters[key];\n          case "price_ttc":\n            const devisPrice = ((_devis$price_ttc = devis.price_ttc) === null || _devis$price_ttc === void 0 ? void 0 : _devis$price_ttc.toString()) || "";\n            return devisPrice.includes(filters[key]);\n          case "status":\n            return devis.status === filters[key];\n          default:\n            return true;\n        }\n      });\n    });\n    setFilteredDevis(filtered);\n  }, [filters, devis]);\n  const handleFilterChange = field => event => {\n    const newFilters = {\n      ...filters,\n      [field]: event.target.value\n    };\n    setFilters(newFilters);\n    setPendingSave(true);\n    let filtered = devis.filter(devis => {\n      return Object.keys(newFilters).every(key => {\n        var _devis$numero2, _devis$client_name2, _devis$price_ttc2;\n        if (!newFilters[key] || newFilters[key] === "Tous") return true;\n        switch (key) {\n          case "numero":\n            return (_devis$numero2 = devis.numero) === null || _devis$numero2 === void 0 ? void 0 : _devis$numero2.toLowerCase().includes(newFilters[key].toLowerCase());\n          case "client_name":\n            return (_devis$client_name2 = devis.client_name) === null || _devis$client_name2 === void 0 ? void 0 : _devis$client_name2.toLowerCase().includes(newFilters[key].toLowerCase());\n          case "date_creation":\n            if (!newFilters[key]) return true;\n            const devisDate = new Date(devis.date_creation).toISOString().split("T")[0];\n            return devisDate === newFilters[key];\n          case "price_ttc":\n            const devisPrice = ((_devis$price_ttc2 = devis.price_ttc) === null || _devis$price_ttc2 === void 0 ? void 0 : _devis$price_ttc2.toString()) || "";\n            return devisPrice.includes(newFilters[key]);\n          case "status":\n            return devis.status === newFilters[key];\n          default:\n            return true;\n        }\n      });\n    });\n    setFilteredDevis(filtered);\n  };\n  const handleSort = property => {\n    const isAsc = orderBy === property && order === "asc";\n    setOrder(isAsc ? "desc" : "asc");\n    setOrderBy(property);\n    const sorted = [...filteredDevis].sort((a, b) => {\n      if (property === "date_creation") {\n        return (isAsc ? 1 : -1) * (new Date(a[property]).getTime() - new Date(b[property]).getTime());\n      }\n      if (property === "price_ttc") {\n        return (isAsc ? 1 : -1) * (parseFloat(a[property]) - parseFloat(b[property]));\n      }\n      return (isAsc ? 1 : -1) * (a[property] < b[property] ? -1 : 1);\n    });\n    setFilteredDevis(sorted);\n  };\n  const handlePreviewDevis = devisId => {\n    const previewUrl = `/api/preview-saved-devis/${devisId}/`;\n    window.open(previewUrl, "_blank");\n  };\n  const handleMoreClick = (event, devis) => {\n    setAnchorEl(event.currentTarget);\n    setSelectedDevis(devis);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  // --- Actions modales ---\n  const handleModifyDevis = () => {\n    if (selectedDevis) {\n      window.location.href = `/ModificationDevis/${selectedDevis.id}`;\n    }\n    handleClose();\n  };\n  const handleEditFacture = () => {\n    setFactureModalOpen(true);\n    handleClose();\n  };\n  const handleEditTS = async () => {\n    try {\n      const devisResponse = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].get(`/api/devisa/${selectedDevis.id}/`);\n      setSelectedDevisForTS(devisResponse.data);\n      const chantierResponse = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].get(`/api/chantier/${selectedDevis.chantier}/`);\n      setSelectedChantier(chantierResponse.data);\n      setTsModalOpen(true);\n    } catch (error) {\n      alert("Erreur lors de la récupération des données pour TS");\n    }\n    handleClose();\n  };\n  const handleEditCIE = async () => {\n    try {\n      const devisResponse = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].get(`/api/devisa/${selectedDevis.id}/`);\n      setSelectedDevisForCIE(devisResponse.data);\n      const chantierResponse = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].get(`/api/chantier/${selectedDevis.chantier}/`);\n      setSelectedChantier(chantierResponse.data);\n      setCieModalOpen(true);\n    } catch (error) {\n      alert("Erreur lors de la récupération des données pour CIE");\n    }\n    handleClose();\n  };\n  const handleConvertToBonCommande = async () => {\n    try {\n      // Récupérer le devis complet\n      const devisResponse = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].get(`/api/devisa/${selectedDevis.id}/`);\n      const devisComplet = devisResponse.data;\n\n      // Vérifier que le devis est validé\n      if (devisComplet.status !== "Validé") {\n        alert("Seuls les devis validés peuvent être convertis en bon de commande");\n        return;\n      }\n\n      // Vérifier que le devis a des lignes\n      if (!devisComplet.lignes || devisComplet.lignes.length === 0) {\n        alert("Ce devis n\'a pas de lignes à convertir");\n        return;\n      }\n\n      // Récupérer les informations du chantier\n      const chantierResponse = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].get(`/api/chantier/${devisComplet.chantier}/`);\n      const chantier = chantierResponse.data;\n\n      // Rediriger vers la page de création de bon de commande avec les données pré-remplies\n      const queryParams = new URLSearchParams({\n        from_devis: \'true\',\n        devis_id: selectedDevis.id,\n        chantier_id: devisComplet.chantier\n      });\n      window.location.href = `/BonCommande?${queryParams.toString()}`;\n    } catch (error) {\n      console.error("Erreur lors de la conversion en bon de commande:", error);\n      alert("Erreur lors de la conversion en bon de commande. Veuillez réessayer.");\n    }\n    handleClose();\n  };\n  const handleChangeStatus = () => {\n    setDevisToUpdate(selectedDevis);\n    setShowStatusModal(true);\n    handleClose();\n  };\n  const handleCreateSituation = async () => {\n    try {\n      const devisResponse = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].get(`/api/devisa/${selectedDevis.id}/`);\n      setSelectedDevisForSituation(devisResponse.data);\n      const chantierResponse = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].get(`/api/chantier/${selectedDevis.chantier}/`);\n      setSelectedChantier(chantierResponse.data);\n      setSituationModalOpen(true);\n    } catch (error) {\n      alert("Erreur lors de la récupération des données pour la situation");\n    }\n    handleClose();\n  };\n\n  // --- Handlers pour les modales ---\n  const handleStatusUpdate = async newStatus => {\n    try {\n      if (!devisToUpdate) return;\n      await axios__WEBPACK_IMPORTED_MODULE_8__["default"].put(`/api/list-devis/${devisToUpdate.id}/update_status/`, {\n        status: newStatus\n      });\n      fetchDevis();\n      setShowStatusModal(false);\n      setDevisToUpdate(null);\n    } catch (error) {\n      alert("Erreur lors de la modification du statut");\n    }\n  };\n  const handleFactureSubmit = async factureData => {\n    try {\n      console.log("Données envoyées:", factureData);\n      const response = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].post("/api/facture/", factureData);\n\n      // Message de succès\n      alert(`La facture ${response.data.numero} a été créée avec succès.`);\n\n      // Auto-download de la facture dans le Drive\n      try {\n        console.log("🚀 Lancement de l\'auto-download de la facture vers le Drive");\n\n        // Récupérer les données complètes de la facture créée\n        const factureResponse = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].get(`/api/facture/${response.data.id}/`);\n        const factureComplet = factureResponse.data;\n        console.log("📋 Données de la facture complète:", factureComplet);\n\n        // Récupérer les données de la société depuis le chantier\n        const chantierResponse = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].get(`/api/chantier/${factureComplet.chantier}/`);\n        const chantier = chantierResponse.data;\n\n        // Récupérer les données de la société\n        let societe;\n        if (typeof chantier.societe === "object" && chantier.societe.id) {\n          societe = chantier.societe;\n        } else {\n          const societeResponse = await axios__WEBPACK_IMPORTED_MODULE_8__["default"].get(`/api/societe/${chantier.societe}/`);\n          societe = societeResponse.data;\n        }\n        console.log("🏢 Données de la société:", societe);\n\n        // Utiliser le système universel pour générer le PDF\n        await (0,_utils_universalDriveGenerator__WEBPACK_IMPORTED_MODULE_2__.generatePDFDrive)("facture", {\n          factureId: factureComplet.id,\n          chantierId: factureComplet.chantier,\n          chantierName: factureComplet.chantier_name,\n          societeName: societe.nom_societe,\n          numero: factureComplet.numero\n        }, {\n          onSuccess: response => {\n            console.log("✅ Facture générée avec succès dans le Drive:", response);\n            alert("✅ Facture téléchargée automatiquement dans le Drive !");\n          },\n          onError: error => {\n            console.error("❌ Erreur lors de la génération de la facture:", error);\n            alert(`❌ Erreur lors de la génération automatique: ${error.message}`);\n          }\n        });\n      } catch (autoDownloadError) {\n        console.error("❌ Erreur lors de l\'auto-download:", autoDownloadError);\n        // Ne pas bloquer le processus principal si l\'auto-download échoue\n        alert("⚠️ Facture créée mais erreur lors du téléchargement automatique. Vous pouvez le faire manuellement.");\n      }\n      setFactureModalOpen(false);\n      fetchDevis();\n    } catch (error) {\n      var _error$response;\n      console.error("Erreur lors de la création de la facture:", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error);\n      alert("Erreur lors de la création de la facture. Veuillez vérifier les données.");\n    }\n  };\n\n  // --- Rendu principal ---\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    style: {\n      backgroundColor: "#ffffff",\n      width: "100%",\n      maxWidth: "1400px",\n      height: "auto",\n      padding: "20px",\n      paddingBottom: "30px",\n      borderRadius: "10px",\n      boxShadow: "6px 7px 20px -6px rgba(33, 33, 33, 1)",\n      margin: "20px auto"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledBox, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    variant: "h6",\n    gutterBottom: true,\n    sx: {\n      fontFamily: "Merriweather, serif",\n      position: "relative",\n      marginBottom: "20px"\n    }\n  }, "Devis du chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTableContainer, {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_10__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Num\\xE9ro",\n    variant: "standard",\n    value: filters.numero,\n    onChange: handleFilterChange("numero"),\n    sx: {\n      color: "white"\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.AlignedCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    active: orderBy === "date_creation",\n    direction: orderBy === "date_creation" ? order : "asc",\n    onClick: () => handleSort("date_creation"),\n    sx: {\n      textAlign: "center",\n      color: "white"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTextField, {\n    variant: "standard",\n    type: "date",\n    value: filters.date_creation,\n    onChange: handleFilterChange("date_creation"),\n    InputLabelProps: {\n      shrink: true\n    },\n    sx: {\n      pt: "15px",\n      color: "white"\n    }\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.AlignedCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n    active: orderBy === "price_ttc",\n    direction: orderBy === "price_ttc" ? order : "asc",\n    onClick: () => handleSort("price_ttc"),\n    sx: {\n      textAlign: "center",\n      color: "white"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.PriceTextField, {\n    label: "Prix TTC",\n    variant: "standard",\n    value: filters.price_ttc,\n    onChange: handleFilterChange("price_ttc"),\n    sx: {\n      maxWidth: "60px",\n      minWidth: "40px",\n      "& input": {\n        textAlign: "center",\n        color: "white"\n      }\n    }\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledSelect, {\n    value: filters.status,\n    onChange: handleFilterChange("status"),\n    variant: "standard",\n    sx: {\n      pt: "10px",\n      color: "white"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    value: "Tous"\n  }, "Tous"), statusOptions.map(status => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    key: status,\n    value: status\n  }, status)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], null, filteredDevis.map((devis, idx) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    key: devis.id,\n    hover: true,\n    sx: {\n      backgroundColor: idx % 2 === 0 ? "#fafafa" : "#fff"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.DevisNumber, {\n    onClick: () => handlePreviewDevis(devis.id),\n    style: {\n      cursor: "pointer",\n      fontWeight: 700\n    }\n  }, devis.numero), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, new Date(devis.date_creation).toLocaleDateString()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n    style: {\n      fontWeight: 600,\n      color: _mui_material_colors__WEBPACK_IMPORTED_MODULE_17__["default"][500]\n    }\n  }, formatNumber(devis.price_ttc), " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StatusCell, {\n    status: devis.status\n  }, devis.status), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n    sx: {\n      width: "60px",\n      padding: "0 8px",\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], {\n    variant: "outlined",\n    size: "small",\n    "aria-label": "actions button group",\n    sx: {\n      paddingTop: "10px",\n      "& .MuiButtonGroup-grouped": {\n        minWidth: "35px",\n        padding: "4px",\n        border: "none",\n        "&:hover": {\n          backgroundColor: "rgba(0, 0, 0, 0.04)"\n        }\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    onClick: e => handleMoreClick(e, devis),\n    sx: {\n      backgroundColor: "rgba(0, 0, 0, 0.04)",\n      "&:hover": {\n        backgroundColor: "rgba(0, 0, 0, 0.08)",\n        boxShadow: "0 2px 4px rgba(0,0,0,0.1)"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_tfi__WEBPACK_IMPORTED_MODULE_20__.TfiMore, {\n    size: 16,\n    color: "#666"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], {\n    onClick: () => handlePreviewDevis(devis.id),\n    sx: {\n      color: "primary.main",\n      "&:hover": {\n        backgroundColor: "rgba(25, 118, 210, 0.04)"\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_ai__WEBPACK_IMPORTED_MODULE_21__.AiFillFilePdf, {\n    style: {\n      fontSize: "24px"\n    }\n  })))))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_22__["default"], {\n    anchorEl: anchorEl,\n    open: Boolean(anchorEl),\n    onClose: handleClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    onClick: handleModifyDevis\n  }, "Modifier le devis"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    onClick: handleEditFacture\n  }, "\\xC9diter en facture"), selectedDevis && selectedDevis.devis_chantier !== true && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    onClick: handleEditTS\n  }, "\\xC9diter en avenant"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    onClick: handleEditCIE\n  }, "\\xC9diter en CIE"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    onClick: handleConvertToBonCommande\n  }, "Convertir en bon de commande"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    onClick: handleChangeStatus\n  }, "Modifier l\'\\xE9tat")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StatusChangeModal__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    open: showStatusModal,\n    onClose: () => {\n      setShowStatusModal(false);\n      setDevisToUpdate(null);\n    },\n    currentStatus: devisToUpdate === null || devisToUpdate === void 0 ? void 0 : devisToUpdate.status,\n    onStatusChange: handleStatusUpdate,\n    type: "devis",\n    title: "Modifier l\'\\xE9tat du devis"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_TransformationTSModal__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    open: tsModalOpen,\n    onClose: () => setTsModalOpen(false),\n    devis: selectedDevisForTS,\n    chantier: selectedChantier\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_TransformationCIEModal__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    open: cieModalOpen,\n    onClose: () => setCieModalOpen(false),\n    devis: selectedDevisForCIE,\n    chantier: selectedChantier\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_FactureModal__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    open: factureModalOpen,\n    devis: selectedDevis,\n    onClose: () => setFactureModalOpen(false),\n    onSubmit: handleFactureSubmit\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_CreationSituation__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    open: situationModalOpen,\n    onClose: () => {\n      setSituationModalOpen(false);\n      setSelectedDevisForSituation(null);\n    },\n    devis: selectedDevisForSituation,\n    chantier: selectedChantier\n  }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChantierListeDevis);\n\n//# sourceURL=webpack://frontend/./src/components/chantier/ChantierListeDevis.js?')},"./src/components/chantier/ChantierListeFactures.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableSortLabel/TableSortLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Menu/Menu.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContentText/DialogContentText.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material_colors__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material/colors */ "./node_modules/@mui/material/colors/green.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_tfi__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react-icons/tfi */ "./node_modules/react-icons/tfi/index.mjs");\n/* harmony import */ var _styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../styles/tableStyles */ "./src/styles/tableStyles.js");\n/* harmony import */ var _StatusChangeModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../StatusChangeModal */ "./src/components/StatusChangeModal.js");\n\n\n\n\n\n\n\nconst formatNumber = number => number === null || number === void 0 ? void 0 : number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, " ");\nconst ChantierListeFactures = ({\n  chantierData,\n  factures,\n  setFactures,\n  filters,\n  setFilters,\n  isLoaded,\n  setIsLoaded,\n  onSaveFilters\n}) => {\n  const [filteredFactures, setFilteredFactures] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [orderBy, setOrderBy] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("date");\n  const [order, setOrder] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("desc");\n  const [anchorEl, setAnchorEl] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [selectedFacture, setSelectedFacture] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [deleteDialogOpen, setDeleteDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showStatusModal, setShowStatusModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [factureToUpdate, setFactureToUpdate] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const statusOptions = ["En cours", "Attente paiement", "Payée"];\n  const [pendingSave, setPendingSave] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!isLoaded && chantierData !== null && chantierData !== void 0 && chantierData.id) {\n      fetchFactures();\n    } else {\n      setFilteredFactures(factures);\n    }\n    // eslint-disable-next-line\n  }, [chantierData === null || chantierData === void 0 ? void 0 : chantierData.id, isLoaded, factures]);\n  const fetchFactures = async () => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_3__["default"].get("/api/facture/");\n      const facturesData = response.data.filter(f => f.chantier === chantierData.id);\n      setFactures(facturesData);\n      setFilteredFactures(facturesData);\n      setIsLoaded(true);\n    } catch (error) {\n      setFactures([]);\n      setFilteredFactures([]);\n      setIsLoaded(true);\n    }\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!pendingSave) return;\n    const handleMouseMove = () => {\n      setPendingSave(false);\n      onSaveFilters(filters);\n      document.removeEventListener("mousemove", handleMouseMove);\n    };\n    document.addEventListener("mousemove", handleMouseMove);\n    return () => document.removeEventListener("mousemove", handleMouseMove);\n  }, [pendingSave, filters, onSaveFilters]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    // Recalcule la liste filtrée à chaque changement de filters ou de factures\n    let filtered = factures.filter(facture => {\n      return Object.keys(filters).every(key => {\n        var _facture$numero, _facture$price_ttc;\n        if (!filters[key] || filters[key] === "Tous") return true;\n        switch (key) {\n          case "numero_facture":\n            return (_facture$numero = facture.numero) === null || _facture$numero === void 0 ? void 0 : _facture$numero.toLowerCase().includes(filters[key].toLowerCase());\n          case "date_creation":\n            if (!filters[key]) return true;\n            const factureDate = new Date(facture.date_creation).toISOString().split("T")[0];\n            return factureDate === filters[key];\n          case "montant":\n            const factureMontant = ((_facture$price_ttc = facture.price_ttc) === null || _facture$price_ttc === void 0 ? void 0 : _facture$price_ttc.toString()) || "";\n            return factureMontant.includes(filters[key]);\n          case "state_facture":\n            return facture.state_facture === filters[key];\n          case "type_facture":\n            if (filters[key] === "Tous") return true;\n            if (filters[key] === "ts") {\n              return facture.type_facture !== "cie" && facture.type_facture !== "classique";\n            }\n            return facture.type_facture === filters[key];\n          default:\n            return true;\n        }\n      });\n    });\n    setFilteredFactures(filtered);\n  }, [filters, factures]);\n  const handleFilterChange = field => event => {\n    const newFilters = {\n      ...filters,\n      [field]: event.target.value\n    };\n    setFilters(newFilters);\n    setPendingSave(true);\n  };\n  const handleSort = property => {\n    const isAsc = orderBy === property && order === "asc";\n    setOrder(isAsc ? "desc" : "asc");\n    setOrderBy(property);\n    const sorted = [...filteredFactures].sort((a, b) => {\n      if (property === "date_creation") {\n        return (isAsc ? 1 : -1) * (new Date(a[property]).getTime() - new Date(b[property]).getTime());\n      }\n      if (property === "price_ttc") {\n        return (isAsc ? 1 : -1) * (parseFloat(a[property]) - parseFloat(b[property]));\n      }\n      return (isAsc ? 1 : -1) * (a[property] < b[property] ? -1 : 1);\n    });\n    setFilteredFactures(sorted);\n  };\n  const handlePreviewFacture = factureId => {\n    window.open(`/api/preview-facture/${factureId}/`, "_blank");\n  };\n  const handleMenuClick = (event, facture) => {\n    setAnchorEl(event.currentTarget);\n    setSelectedFacture(facture);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n    setSelectedFacture(null);\n  };\n  const handleDeleteFacture = async () => {\n    if (!selectedFacture) return;\n    try {\n      await axios__WEBPACK_IMPORTED_MODULE_3__["default"].delete(`/api/facture/${selectedFacture.id}/`);\n      fetchFactures();\n      handleClose();\n      setDeleteDialogOpen(false);\n    } catch (error) {\n      alert("Erreur lors de la suppression de la facture.");\n    }\n  };\n  const handleDeleteClick = () => {\n    setDeleteDialogOpen(true);\n    setAnchorEl(null);\n  };\n  const handleChangeStatus = () => {\n    setFactureToUpdate(selectedFacture);\n    setShowStatusModal(true);\n    handleClose();\n  };\n  const handleStatusUpdate = async newStatus => {\n    try {\n      if (!factureToUpdate) return;\n      await axios__WEBPACK_IMPORTED_MODULE_3__["default"].put(`/api/facture/${factureToUpdate.id}/update_status/`, {\n        state_facture: newStatus\n      });\n      fetchFactures();\n      setShowStatusModal(false);\n      setFactureToUpdate(null);\n    } catch (error) {\n      alert("Erreur lors de la modification du statut");\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    style: {\n      backgroundColor: "#ffffff",\n      width: "100%",\n      maxWidth: "1400px",\n      height: "auto",\n      padding: "20px",\n      paddingBottom: "30px",\n      borderRadius: "10px",\n      boxShadow: "6px 7px 20px -6px rgba(33, 33, 33, 1)",\n      margin: "20px auto"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledBox, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "h6",\n    gutterBottom: true,\n    sx: {\n      fontFamily: "Merriweather, serif",\n      position: "relative",\n      marginBottom: "20px"\n    }\n  }, "Factures du chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTableContainer, {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_5__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Num\\xE9ro",\n    variant: "standard",\n    value: filters.numero_facture,\n    onChange: handleFilterChange("numero_facture")\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.AlignedCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    active: orderBy === "date_creation",\n    direction: orderBy === "date_creation" ? order : "asc",\n    onClick: () => handleSort("date_creation"),\n    sx: {\n      textAlign: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTextField, {\n    variant: "standard",\n    type: "date",\n    value: filters.date_creation,\n    onChange: handleFilterChange("date_creation"),\n    InputLabelProps: {\n      shrink: true\n    },\n    sx: {\n      pt: "15px"\n    }\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.AlignedCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    active: orderBy === "price_ttc",\n    direction: orderBy === "price_ttc" ? order : "asc",\n    onClick: () => handleSort("price_ttc"),\n    sx: {\n      textAlign: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.PriceTextField, {\n    label: "Prix TTC",\n    variant: "standard",\n    value: filters.montant,\n    onChange: handleFilterChange("montant")\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledSelect, {\n    value: filters.type_facture || "Tous",\n    onChange: handleFilterChange("type_facture"),\n    variant: "standard",\n    sx: {\n      pt: "10px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "Tous"\n  }, "Tous"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "cie"\n  }, "CIE"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "classique"\n  }, "Classique"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "ts"\n  }, "TS"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledSelect, {\n    value: filters.state_facture,\n    onChange: handleFilterChange("state_facture"),\n    variant: "standard",\n    sx: {\n      pt: "10px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "Tous"\n  }, "Tous"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "En cours"\n  }, "En cours"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "Attente paiement"\n  }, "Attente paiement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: "Pay\\xE9e"\n  }, "Pay\\xE9e"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, filteredFactures.map((facture, idx) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    key: facture.id,\n    hover: true,\n    sx: {\n      backgroundColor: idx % 2 === 0 ? "#fafafa" : "#fff"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.DevisNumber, {\n    onClick: () => handlePreviewFacture(facture.id),\n    sx: {\n      cursor: "pointer",\n      fontWeight: 700\n    }\n  }, facture.numero), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, new Date(facture.date_creation).toLocaleDateString()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n    sx: {\n      fontWeight: 600,\n      color: _mui_material_colors__WEBPACK_IMPORTED_MODULE_12__["default"][500]\n    }\n  }, formatNumber(facture.price_ttc), " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, facture.type_facture === "cie" ? "CIE" : facture.type_facture === "classique" ? "Classique" : "TS"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StatusCell, {\n    sx: {\n      color: facture.state_facture === "Payée" ? "#4caf50" : facture.state_facture === "Attente paiement" ? "#ff9800" : facture.state_facture === "En cours" ? "#f44336" : "#666",\n      fontWeight: 600\n    }\n  }, facture.state_facture), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n    sx: {\n      width: "60px",\n      padding: "0 8px"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    onClick: e => handleMenuClick(e, facture)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_tfi__WEBPACK_IMPORTED_MODULE_14__.TfiMore, {\n    size: 16,\n    color: "#666"\n  }))))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    anchorEl: anchorEl,\n    open: Boolean(anchorEl),\n    onClose: handleClose,\n    PaperProps: {\n      elevation: 3,\n      sx: {\n        borderRadius: 2,\n        minWidth: 150\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: () => handlePreviewFacture(selectedFacture === null || selectedFacture === void 0 ? void 0 : selectedFacture.id)\n  }, "Voir la facture"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: handleChangeStatus\n  }, "Modifier le statut"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    onClick: handleDeleteClick,\n    sx: {\n      color: "error.main",\n      "&:hover": {\n        backgroundColor: "error.light",\n        color: "error.contrastText"\n      }\n    }\n  }, "Supprimer")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    open: deleteDialogOpen,\n    onClose: () => setDeleteDialogOpen(false),\n    PaperProps: {\n      sx: {\n        borderRadius: 2,\n        padding: 1\n      }\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      gap: 1\n    }\n  }, "Confirmation de suppression"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], null, "\\xCAtes-vous s\\xFBr de vouloir supprimer la facture", " ", selectedFacture === null || selectedFacture === void 0 ? void 0 : selectedFacture.numero, " ?", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("br", null), "Cette action est irr\\xE9versible.")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_20__["default"], {\n    sx: {\n      padding: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    onClick: () => setDeleteDialogOpen(false),\n    variant: "outlined",\n    sx: {\n      borderRadius: 2\n    }\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_21__["default"], {\n    onClick: handleDeleteFacture,\n    variant: "contained",\n    color: "error",\n    sx: {\n      borderRadius: 2\n    }\n  }, "Supprimer"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StatusChangeModal__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: showStatusModal,\n    onClose: () => {\n      setShowStatusModal(false);\n      setFactureToUpdate(null);\n    },\n    currentStatus: factureToUpdate === null || factureToUpdate === void 0 ? void 0 : factureToUpdate.state_facture,\n    onStatusChange: handleStatusUpdate,\n    type: "facture",\n    title: "Modifier l\'\\xE9tat de la facture"\n  }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChantierListeFactures);\n\n//# sourceURL=webpack://frontend/./src/components/chantier/ChantierListeFactures.js?')},"./src/components/chantier/ChantierListeSituation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableSortLabel/TableSortLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material_colors__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material/colors */ "./node_modules/@mui/material/colors/green.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../styles/tableStyles */ "./src/styles/tableStyles.js");\n\n\n\n\n\nconst formatNumber = number => number === null || number === void 0 ? void 0 : number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, " ");\nconst getMonthName = monthNumber => {\n  const months = ["Janvier", "Février", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"];\n  return months[monthNumber - 1];\n};\nconst formatYear = year => year.toString().slice(-2);\nconst ChantierListeSituation = ({\n  chantierData,\n  situations,\n  setSituations,\n  filters,\n  setFilters,\n  isLoaded,\n  setIsLoaded,\n  onSaveFilters\n}) => {\n  const [filteredSituations, setFilteredSituations] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [orderBy, setOrderBy] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("date_creation");\n  const [order, setOrder] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("desc");\n  const statusOptions = ["brouillon", "validee", "facturee"];\n  const [pendingSave, setPendingSave] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!isLoaded && chantierData !== null && chantierData !== void 0 && chantierData.id) {\n      fetchSituations();\n    } else {\n      setFilteredSituations(situations);\n    }\n    // eslint-disable-next-line\n  }, [chantierData === null || chantierData === void 0 ? void 0 : chantierData.id, isLoaded, situations]);\n  const fetchSituations = async () => {\n    if (!(chantierData !== null && chantierData !== void 0 && chantierData.id)) return;\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_2__["default"].get(`/api/chantier/${chantierData.id}/situations/`);\n      setSituations(response.data);\n      setFilteredSituations(response.data);\n      setIsLoaded(true);\n    } catch (error) {\n      setSituations([]);\n      setFilteredSituations([]);\n      setIsLoaded(true);\n    }\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!pendingSave) return;\n    const handleMouseMove = () => {\n      setPendingSave(false);\n      onSaveFilters(filters);\n      document.removeEventListener("mousemove", handleMouseMove);\n    };\n    document.addEventListener("mousemove", handleMouseMove);\n    return () => document.removeEventListener("mousemove", handleMouseMove);\n  }, [pendingSave, filters, onSaveFilters]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    // Recalcule la liste filtrée à chaque changement de filters ou de situations\n    let filtered = situations.filter(situation => {\n      return Object.keys(filters).every(key => {\n        var _situation$numero_sit;\n        if (!filters[key] || filters[key] === "Tous") return true;\n        switch (key) {\n          case "numero_situation":\n            return (_situation$numero_sit = situation.numero_situation) === null || _situation$numero_sit === void 0 ? void 0 : _situation$numero_sit.toLowerCase().includes(filters[key].toLowerCase());\n          case "mois":\n            return situation.mois.toString().includes(filters[key]);\n          case "pourcentage_avancement":\n            return situation.pourcentage_avancement.toString().includes(filters[key]);\n          case "montant_apres_retenues":\n            return situation.montant_apres_retenues.toString().includes(filters[key]);\n          case "statut":\n            return situation.statut === filters[key];\n          default:\n            return true;\n        }\n      });\n    });\n    setFilteredSituations(filtered);\n  }, [filters, situations]);\n  const handleFilterChange = field => event => {\n    const newFilters = {\n      ...filters,\n      [field]: event.target.value\n    };\n    setFilters(newFilters);\n    setPendingSave(true);\n    let filtered = situations.filter(situation => {\n      return Object.keys(newFilters).every(key => {\n        var _situation$numero_sit2;\n        if (!newFilters[key] || newFilters[key] === "Tous") return true;\n        switch (key) {\n          case "numero_situation":\n            return (_situation$numero_sit2 = situation.numero_situation) === null || _situation$numero_sit2 === void 0 ? void 0 : _situation$numero_sit2.toLowerCase().includes(newFilters[key].toLowerCase());\n          case "mois":\n            return situation.mois.toString().includes(newFilters[key]);\n          case "pourcentage_avancement":\n            return situation.pourcentage_avancement.toString().includes(newFilters[key]);\n          case "montant_apres_retenues":\n            return situation.montant_apres_retenues.toString().includes(newFilters[key]);\n          case "statut":\n            return situation.statut === newFilters[key];\n          default:\n            return true;\n        }\n      });\n    });\n    setFilteredSituations(filtered);\n  };\n  const handleSort = property => {\n    const isAsc = orderBy === property && order === "asc";\n    setOrder(isAsc ? "desc" : "asc");\n    setOrderBy(property);\n    const sorted = [...filteredSituations].sort((a, b) => {\n      if (property === "montant_apres_retenues") {\n        return (isAsc ? 1 : -1) * (a[property] - b[property]);\n      }\n      if (property === "pourcentage_avancement") {\n        return (isAsc ? 1 : -1) * (a[property] - b[property]);\n      }\n      return (isAsc ? 1 : -1) * (a[property] < b[property] ? -1 : 1);\n    });\n    setFilteredSituations(sorted);\n  };\n  const handlePreviewSituation = situationId => {\n    window.open(`/api/preview-situation/${situationId}/`, "_blank");\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    style: {\n      backgroundColor: "#ffffff",\n      width: "100%",\n      maxWidth: "1400px",\n      height: "auto",\n      padding: "20px",\n      paddingBottom: "30px",\n      borderRadius: "10px",\n      boxShadow: "6px 7px 20px -6px rgba(33, 33, 33, 1)",\n      margin: "20px auto"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledBox, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    variant: "h6",\n    gutterBottom: true,\n    sx: {\n      fontFamily: "Merriweather, serif",\n      position: "relative",\n      marginBottom: "20px"\n    }\n  }, "Situations du chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTableContainer, {\n    component: _mui_material__WEBPACK_IMPORTED_MODULE_4__["default"]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "N\\xB0 Situation",\n    variant: "standard",\n    value: filters.numero_situation,\n    onChange: handleFilterChange("numero_situation"),\n    sx: {\n      "& .MuiInputBase-input": {\n        color: "white",\n        fontWeight: "bold"\n      }\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledTextField, {\n    label: "Mois",\n    variant: "standard",\n    value: filters.mois,\n    onChange: handleFilterChange("mois"),\n    sx: {\n      color: "white"\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.AlignedCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    active: orderBy === "pourcentage_avancement",\n    direction: orderBy === "pourcentage_avancement" ? order : "asc",\n    onClick: () => handleSort("pourcentage_avancement")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.PriceTextField, {\n    label: "% Avancement",\n    variant: "standard",\n    value: filters.pourcentage_avancement,\n    onChange: handleFilterChange("pourcentage_avancement"),\n    sx: {\n      color: "white"\n    }\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.AlignedCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    active: orderBy === "montant_apres_retenues",\n    direction: orderBy === "montant_apres_retenues" ? order : "asc",\n    onClick: () => handleSort("montant_apres_retenues")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.PriceTextField, {\n    label: "Montant Total",\n    variant: "standard",\n    value: filters.montant_apres_retenues,\n    onChange: handleFilterChange("montant_apres_retenues"),\n    sx: {\n      color: "white"\n    }\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.FilterCell, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StyledSelect, {\n    value: filters.statut,\n    onChange: handleFilterChange("statut"),\n    variant: "standard"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    value: "Tous"\n  }, "Tous"), statusOptions.map(status => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("option", {\n    key: status,\n    value: status\n  }, status)))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, filteredSituations.map((situation, idx) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    key: situation.id,\n    hover: true,\n    sx: {\n      backgroundColor: idx % 2 === 0 ? "#fafafa" : "#fff"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.DevisNumber, {\n    onClick: () => handlePreviewSituation(situation.id),\n    style: {\n      cursor: "pointer",\n      fontWeight: "bold"\n    }\n  }, situation.numero_situation), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, `${situation.mois.toString().padStart(2, "0")}/${formatYear(situation.annee)}`), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, null, formatNumber(situation.pourcentage_avancement), "%"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.CenteredTableCell, {\n    style: {\n      fontWeight: 600,\n      color: _mui_material_colors__WEBPACK_IMPORTED_MODULE_10__["default"][500]\n    }\n  }, formatNumber(situation.montant_apres_retenues), " \\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles_tableStyles__WEBPACK_IMPORTED_MODULE_1__.StatusCell, {\n    status: situation.statut\n  }, situation.statut))))))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChantierListeSituation);\n\n//# sourceURL=webpack://frontend/./src/components/chantier/ChantierListeSituation.js?')},"./src/components/chantier/ChantierRecapFinancierTab.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/InputLabel/InputLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/CircularProgress/CircularProgress.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Alert/Alert.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Grid/Grid.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fa__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react-icons/fa */ "./node_modules/react-icons/fa/index.mjs");\n/* harmony import */ var _RecapFinancierContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RecapFinancierContext */ "./src/components/chantier/RecapFinancierContext.js");\n/* harmony import */ var _RecapSection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./RecapSection */ "./src/components/chantier/RecapSection.js");\n/* harmony import */ var _RecapSyntheseSection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./RecapSyntheseSection */ "./src/components/chantier/RecapSyntheseSection.js");\n\n\n\n\n\n\n\nconst CATEGORY_COLORS = {\n  materiel: "#0088FE",\n  main_oeuvre: "#00C49F",\n  sous_traitant: "#FFBB28",\n  situation: "#8884d8",\n  facture: "#FF8042"\n};\nconst ChantierRecapFinancierTab = ({\n  chantierId\n}) => {\n  const {\n    filters,\n    setFilters,\n    openAccordions,\n    setOpenAccordions,\n    periode,\n    setPeriode,\n    global,\n    setGlobal\n  } = (0,_RecapFinancierContext__WEBPACK_IMPORTED_MODULE_1__.useRecapFinancier)();\n\n  // State local pour la donnée API et le statut\n  const [data, setData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n\n  // Main d\'oeuvre Schedule\n  const [mainOeuvreData, setMainOeuvreData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    total: 0,\n    documents: []\n  });\n\n  // Générer les options de mois/année\n  const moisOptions = ["Janvier", "Février", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"];\n  const anneeCourante = new Date().getFullYear();\n  const anneeOptions = Array.from({\n    length: 5\n  }, (_, i) => anneeCourante - 2 + i);\n\n  // Récupérer les données API (autres catégories)\n  const fetchData = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      let url = `/api/chantier/${chantierId}/recap-financier/`;\n      if (!global) {\n        url += `?mois=${periode.mois}&annee=${periode.annee}`;\n      }\n      const res = await axios__WEBPACK_IMPORTED_MODULE_4__["default"].get(url);\n      setData(res.data);\n    } catch (err) {\n      setError("Erreur lors du chargement des données financières.");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Récupérer la main d\'oeuvre depuis l\'API recap-financier\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const fetchMainOeuvre = async () => {\n      if (!chantierId) {\n        setMainOeuvreData({\n          total: 0,\n          documents: []\n        });\n        return;\n      }\n      try {\n        var _res$data$sorties;\n        let url = `/api/chantier/${chantierId}/recap-financier/`;\n        if (!global && periode !== null && periode !== void 0 && periode.mois && periode !== null && periode !== void 0 && periode.annee) {\n          url += `?mois=${periode.mois}&annee=${periode.annee}`;\n        }\n        const res = await axios__WEBPACK_IMPORTED_MODULE_4__["default"].get(url);\n\n        // Extraire la main d\'œuvre des données recap-financier\n        const mainOeuvre = ((_res$data$sorties = res.data.sorties) === null || _res$data$sorties === void 0 || (_res$data$sorties = _res$data$sorties.paye) === null || _res$data$sorties === void 0 ? void 0 : _res$data$sorties.main_oeuvre) || {\n          total: 0,\n          documents: []\n        };\n        setMainOeuvreData(mainOeuvre);\n      } catch (e) {\n        console.error("Erreur lors du chargement de la main d\'oeuvre:", e);\n        setMainOeuvreData({\n          total: 0,\n          documents: []\n        });\n      }\n    };\n    fetchMainOeuvre();\n  }, [chantierId, periode.mois, periode.annee, global]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (chantierId) {\n      fetchData();\n    }\n    // eslint-disable-next-line\n  }, [chantierId, JSON.stringify(periode), global]);\n\n  // Gestion du changement de période\n  const handleMoisChange = e => {\n    setPeriode({\n      ...periode,\n      mois: Number(e.target.value)\n    });\n    setGlobal(false);\n  };\n  const handleAnneeChange = e => {\n    setPeriode({\n      ...periode,\n      annee: Number(e.target.value)\n    });\n    setGlobal(false);\n  };\n  const handleGlobal = () => {\n    setGlobal(!global);\n  };\n\n  // Fusionner la main d\'oeuvre Schedule avec les autres catégories\n  const getDepensesData = () => {\n    var _data$sorties;\n    // On part de la structure existante, mais on remplace main_oeuvre par la version Schedule\n    const depenses = data !== null && data !== void 0 && (_data$sorties = data.sorties) !== null && _data$sorties !== void 0 && _data$sorties.paye ? {\n      ...data.sorties.paye\n    } : {};\n    depenses.main_oeuvre = mainOeuvreData;\n    return depenses;\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_RecapSyntheseSection__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    data: data\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    sx: {\n      p: 2,\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    display: "flex",\n    alignItems: "center",\n    gap: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    variant: "h5",\n    sx: {\n      flex: 1\n    }\n  }, "R\\xE9capitulatif Financier du Chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    sx: {\n      minWidth: 120\n    },\n    size: "small"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, "Mois"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: periode.mois,\n    label: "Mois",\n    onChange: handleMoisChange,\n    disabled: global\n  }, moisOptions.map((mois, idx) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    key: mois,\n    value: idx + 1\n  }, mois)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    sx: {\n      minWidth: 100\n    },\n    size: "small"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, "Ann\\xE9e"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    value: periode.annee,\n    label: "Ann\\xE9e",\n    onChange: handleAnneeChange,\n    disabled: global\n  }, anneeOptions.map(annee => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    key: annee,\n    value: annee\n  }, annee)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    variant: global ? "contained" : "outlined",\n    color: "primary",\n    onClick: handleGlobal,\n    sx: {\n      ml: 2\n    }\n  }, global ? "Désactiver" : "Global"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    onClick: fetchData,\n    color: "primary",\n    sx: {\n      ml: 1\n    },\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_13__.FaSync, null)\n  }, "Actualiser"))), loading ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    display: "flex",\n    justifyContent: "center",\n    alignItems: "center",\n    minHeight: 200\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], null)) : error ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    severity: "error"\n  }, error) : data ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    container: true,\n    spacing: 3\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    item: true,\n    xs: 12,\n    md: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_RecapSection__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    title: `Dépenses`,\n    data: getDepensesData(),\n    colors: CATEGORY_COLORS,\n    chantierId: chantierId,\n    periode: periode,\n    refreshRecap: fetchData\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_RecapSection__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    title: `Dépenses restantes`,\n    data: data.sorties.reste_a_payer,\n    colors: CATEGORY_COLORS,\n    chantierId: chantierId,\n    periode: periode,\n    refreshRecap: fetchData\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n    item: true,\n    xs: 12,\n    md: 6\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_RecapSection__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    title: `Paiements reçus`,\n    data: data.entrees.paye,\n    colors: CATEGORY_COLORS,\n    chantierId: chantierId,\n    periode: periode,\n    refreshRecap: fetchData\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_RecapSection__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    title: `Paiements en attente`,\n    data: data.entrees.reste_a_encaisser,\n    colors: CATEGORY_COLORS,\n    chantierId: chantierId,\n    periode: periode,\n    refreshRecap: fetchData\n  }))) : null);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChantierRecapFinancierTab);\n\n//# sourceURL=webpack://frontend/./src/components/chantier/ChantierRecapFinancierTab.js?')},"./src/components/chantier/RecapCategoryDetails.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Collapse/Collapse.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableContainer/TableContainer.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableCell/TableCell.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_icons_fa__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-icons/fa */ "./node_modules/react-icons/fa/index.mjs");\n\n\n\n\nconst RecapCategoryDetails = ({\n  open,\n  documents,\n  title,\n  onClose,\n  category,\n  chantierId,\n  periode,\n  refreshRecap\n}) => {\n  // Fonction pour définir dynamiquement les colonnes selon la catégorie\n  function getColumnsForCategory(cat) {\n    switch (cat) {\n      case "main_oeuvre":\n        return [{\n          label: "Agent",\n          key: "agent"\n        }, {\n          label: "Mois",\n          key: "mois"\n        }, {\n          label: "Heures",\n          key: "heures"\n        }, {\n          label: "Montant",\n          key: "montant"\n        }];\n      case "materiel":\n        return [{\n          label: "N°",\n          key: "numero"\n        }, {\n          label: "Date",\n          key: "date"\n        }, {\n          label: "Montant",\n          key: "montant"\n        }, {\n          label: "Statut",\n          key: "statut"\n        }, {\n          label: "Fournisseur",\n          key: "fournisseur"\n        }];\n      case "sous_traitant":\n        return [{\n          label: "Sous-traitant",\n          key: "sous_traitant"\n        }, {\n          label: "N°",\n          key: "facture_numero"\n        }, {\n          label: "Date",\n          key: "date"\n        }, {\n          label: "Montant",\n          key: "montant"\n        }];\n      default:\n        return [{\n          label: "N°",\n          key: "numero"\n        }, {\n          label: "Date",\n          key: "date"\n        }, {\n          label: "Montant",\n          key: "montant"\n        }, {\n          label: "Statut",\n          key: "statut"\n        }];\n    }\n  }\n  const columns = getColumnsForCategory(category);\n\n  // Pour main_oeuvre : regrouper par agent et mois\n  let displayDocuments = documents;\n  if (category === "main_oeuvre" && documents && documents.length > 0) {\n    // Regrouper par agent/mois\n    const grouped = {};\n    documents.forEach(doc => {\n      if (!doc.agent) return;\n      // Extraire le mois/année à partir de la date\n      let mois = "-";\n      if (doc.date) {\n        const d = new Date(doc.date);\n        mois = ("0" + (d.getMonth() + 1)).slice(-2) + "/" + d.getFullYear();\n      }\n      const key = doc.agent + "_" + mois;\n      if (!grouped[key]) {\n        grouped[key] = {\n          agent: doc.agent,\n          mois,\n          heures: 0,\n          montant: 0\n        };\n      }\n      grouped[key].heures += doc.heures || 0;\n      grouped[key].montant += doc.montant || 0;\n    });\n    displayDocuments = Object.values(grouped);\n  }\n\n  // Pour sous_traitant : trier par sous-traitant puis par numéro de facture\n  if (category === "sous_traitant" && documents && documents.length > 0) {\n    displayDocuments = [...documents].sort((a, b) => {\n      // D\'abord trier par sous-traitant\n      const sousTraitantA = (a.sous_traitant || "").toLowerCase();\n      const sousTraitantB = (b.sous_traitant || "").toLowerCase();\n      if (sousTraitantA !== sousTraitantB) {\n        return sousTraitantA.localeCompare(sousTraitantB);\n      }\n\n      // Ensuite trier par numéro de facture\n      const numeroA = a.facture_numero || a.numero || "";\n      const numeroB = b.facture_numero || b.numero || "";\n\n      // Essayer de comparer comme des nombres si possible\n      const numA = parseInt(numeroA.toString().replace(/\\D/g, ""), 10);\n      const numB = parseInt(numeroB.toString().replace(/\\D/g, ""), 10);\n      if (!isNaN(numA) && !isNaN(numB)) {\n        return numA - numB;\n      }\n\n      // Sinon comparer comme des chaînes\n      return numeroA.toString().localeCompare(numeroB.toString());\n    });\n  }\n\n  // Ajout pour édition des paiements matériel\n  const [fournisseurs, setFournisseurs] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]);\n  const [paiements, setPaiements] = react__WEBPACK_IMPORTED_MODULE_0__.useState({}); // { fournisseur: montant }\n  const [saving, setSaving] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const [saveError, setSaveError] = react__WEBPACK_IMPORTED_MODULE_0__.useState(null);\n  const [saveSuccess, setSaveSuccess] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (category === "materiel" && open) {\n      // Récupérer tous les fournisseurs depuis le modèle Fournisseur\n      axios__WEBPACK_IMPORTED_MODULE_1__["default"].get("/api/fournisseurs/").then(res => {\n        // On suppose que chaque fournisseur a un champ name_fournisseur\n        const fournisseursList = res.data.map(f => f.name);\n        setFournisseurs(fournisseursList);\n        // Pré-remplir avec les montants existants\n        const paiementsInit = {};\n        documents.forEach(doc => {\n          if (doc.fournisseur) {\n            paiementsInit[doc.fournisseur] = doc.montant;\n          }\n        });\n        setPaiements(paiementsInit);\n      });\n    }\n    // eslint-disable-next-line\n  }, [category, open, documents]);\n  const handleChangeMontant = (fournisseur, value) => {\n    setPaiements(prev => ({\n      ...prev,\n      [fournisseur]: value\n    }));\n  };\n  const handleSave = async () => {\n    setSaving(true);\n    setSaveError(null);\n    setSaveSuccess(false);\n    try {\n      const payload = fournisseurs.filter(f => paiements[f] && !isNaN(Number(paiements[f]))).map(f => ({\n        fournisseur: f,\n        montant: Number(paiements[f]),\n        mois: periode.mois,\n        annee: periode.annee\n      }));\n      await axios__WEBPACK_IMPORTED_MODULE_1__["default"].post(`/api/chantier/${chantierId}/paiements-materiel/`, payload);\n      setSaveSuccess(true);\n      if (refreshRecap) refreshRecap();\n    } catch (e) {\n      setSaveError("Erreur lors de la sauvegarde des paiements matériel.");\n    } finally {\n      setSaving(false);\n      setTimeout(() => setSaveSuccess(false), 2000);\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    in: open,\n    timeout: "auto",\n    unmountOnExit: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    elevation: 3,\n    sx: {\n      mt: 2,\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    display: "flex",\n    alignItems: "center",\n    justifyContent: "space-between",\n    mb: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "h6"\n  }, "D\\xE9tails ", title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    onClick: onClose,\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_icons_fa__WEBPACK_IMPORTED_MODULE_7__.FaTimes, null),\n    color: "error",\n    size: "small"\n  }, "Fermer")), category === "materiel" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    mb: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "subtitle1",\n    sx: {\n      mb: 1\n    }\n  }, "Paiements mat\\xE9riel par fournisseur (mois/ann\\xE9e)"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    size: "small"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "Fournisseur"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, "Montant (\\u20AC)"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, fournisseurs.length === 0 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    colSpan: 2,\n    align: "center"\n  }, "Aucun fournisseur")) : fournisseurs.map(f => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    key: f\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, f), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "number",\n    min: 0,\n    step: 0.01,\n    value: paiements[f] || "",\n    onChange: e => handleChangeMontant(f, e.target.value),\n    style: {\n      width: 100\n    }\n  }))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    mt: 1,\n    display: "flex",\n    alignItems: "center",\n    gap: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    variant: "contained",\n    color: "primary",\n    onClick: handleSave,\n    disabled: saving\n  }, "Sauvegarder"), saveSuccess && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    color: "success.main"\n  }, "Sauvegard\\xE9 !"), saveError && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    color: "error.main"\n  }, saveError))), category !== "materiel" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    size: "small"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, columns.map(col => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    key: col.key\n  }, col.label)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], null, documents && documents.length > 0 ? displayDocuments.map((doc, idx) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    key: doc.id || idx\n  }, columns.map(col => {\n    var _doc$numero;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n      key: col.key\n    }, col.key === "montant" && doc.montant !== undefined ? Number(doc.montant).toLocaleString("fr-FR", {\n      minimumFractionDigits: 2\n    }) + " €" + (doc.retard && doc.retard > 0 ? ` (${doc.retard}j retard)` : doc.retard && doc.retard < 0 ? ` (${Math.abs(doc.retard)}j avance)` : "") : col.key === "heures" && doc.heures !== undefined ? (() => {\n      // Pour les agents journaliers, convertir les heures en jours\n      // On détecte un agent journalier si les heures sont un multiple de 8 et >= 8\n      const heures = Number(doc.heures);\n      if (heures >= 8 && heures % 8 === 0) {\n        const jours = heures / 8;\n        return jours === 1 ? "1j" : `${jours}j`;\n      }\n      // Demi-journées (4h) pour agents journaliers\n      if (heures === 4) {\n        return "0.5j";\n      }\n      // Pour les autres cas (agents horaires)\n      return heures.toLocaleString("fr-FR", {\n        minimumFractionDigits: 2\n      });\n    })() : col.key === "date" && doc.date ? (() => {\n      const d = new Date(doc.date);\n      const day = ("0" + d.getDate()).slice(-2);\n      const month = ("0" + (d.getMonth() + 1)).slice(-2);\n      const year = d.getFullYear().toString().slice(-2);\n      return `${day}/${month}/${year}`;\n    })() : col.key === "facture_numero" ? doc.facture_numero || ((_doc$numero = doc.numero) === null || _doc$numero === void 0 ? void 0 : _doc$numero.split("-").pop()) || "-" : doc[col.key] || "-");\n  }))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    colSpan: columns.length,\n    align: "center"\n  }, "Aucun document")))))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RecapCategoryDetails);\n\n//# sourceURL=webpack://frontend/./src/components/chantier/RecapCategoryDetails.js?')},"./src/components/chantier/RecapFinancierContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RecapFinancierProvider: () => (/* binding */ RecapFinancierProvider),\n/* harmony export */   useRecapFinancier: () => (/* binding */ useRecapFinancier)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\nconst defaultPeriode = {\n  mois: new Date().getMonth() + 1,\n  annee: new Date().getFullYear()\n};\nconst RecapFinancierContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)();\nconst RecapFinancierProvider = ({\n  children\n}) => {\n  const [periode, setPeriode] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(defaultPeriode);\n  const [global, setGlobal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [filters, setFilters] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const [openAccordions, setOpenAccordions] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(RecapFinancierContext.Provider, {\n    value: {\n      periode,\n      setPeriode,\n      global,\n      setGlobal,\n      filters,\n      setFilters,\n      openAccordions,\n      setOpenAccordions\n    }\n  }, children);\n};\nconst useRecapFinancier = () => (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(RecapFinancierContext);\n\n//# sourceURL=webpack://frontend/./src/components/chantier/RecapFinancierContext.js?')},"./src/components/chantier/RecapSection.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_icons_material_Add__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/icons-material/Add */ "./node_modules/@mui/icons-material/Add.js");\n/* harmony import */ var _mui_icons_material_ExpandMore__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/icons-material/ExpandMore */ "./node_modules/@mui/icons-material/ExpandMore.js");\n/* harmony import */ var _mui_icons_material_Remove__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/icons-material/Remove */ "./node_modules/@mui/icons-material/Remove.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/List/List.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/ListItem/ListItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/ListItemText/ListItemText.js");\n/* harmony import */ var _mui_material_Accordion__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material/Accordion */ "./node_modules/@mui/material/Accordion/Accordion.js");\n/* harmony import */ var _mui_material_AccordionDetails__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material/AccordionDetails */ "./node_modules/@mui/material/AccordionDetails/AccordionDetails.js");\n/* harmony import */ var _mui_material_AccordionSummary__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material/AccordionSummary */ "./node_modules/@mui/material/AccordionSummary/AccordionSummary.js");\n/* harmony import */ var _mui_material_IconButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material/IconButton */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var _nivo_pie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nivo/pie */ "./node_modules/@nivo/pie/dist/nivo-pie.mjs");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _RecapCategoryDetails__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./RecapCategoryDetails */ "./src/components/chantier/RecapCategoryDetails.js");\n\n\n\n\n\n\n\n\n\n\n\nconst RecapSection = ({\n  title,\n  data,\n  colors,\n  chantierId,\n  periode,\n  refreshRecap\n}) => {\n  const [openDetails, setOpenDetails] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n  const [detailsMode, setDetailsMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [generalAccordionOpen, setGeneralAccordionOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [hoveredCategory, setHoveredCategory] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const [hiddenCategories, setHiddenCategories] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n\n  // Définir les couleurs fixes pour chaque catégorie\n  const fixedColors = {\n    materiel: "#FF9800",\n    // orange\n    main_oeuvre: "#2196F3",\n    // bleu\n    sous_traitant: "#4CAF50" // vert\n  };\n\n  // Fonction pour masquer/afficher une catégorie\n  const handleToggleCategory = cat => {\n    setHiddenCategories(prev => prev.includes(cat) ? prev.filter(c => c !== cat) : [...prev, cat]);\n  };\n\n  // Préparer les données pour Nivo Pie (en filtrant les catégories masquées)\n  const pieData = Object.keys(data).filter(cat => !hiddenCategories.includes(cat)).map(cat => ({\n    id: cat.replace("_", " ").toUpperCase(),\n    label: cat.replace("_", " ").toUpperCase(),\n    value: data[cat].total || 0,\n    color: fixedColors[cat] || colors[cat] || "#8884d8",\n    key: cat\n  }));\n\n  // Calculer la somme totale (uniquement sur les catégories actives)\n  const totalSum = pieData.reduce((acc, curr) => acc + (curr.value || 0), 0);\n\n  // Déterminer dynamiquement la taille de police en fonction de la longueur du chiffre\n  const getFontSize = value => {\n    const length = String(Math.floor(value)).length;\n    if (length <= 2) return 32;\n    if (length === 3) return 28;\n    if (length === 4) return 24;\n    if (length === 5) return 20;\n    if (length === 6) return 18;\n    return 16;\n  };\n\n  // Gestion de l\'ouverture/fermeture des détails\n  const handleToggleDetails = cat => {\n    setOpenDetails(prev => ({\n      ...prev,\n      [cat]: !prev[cat]\n    }));\n  };\n  const handleToggleDetailsMode = () => {\n    setDetailsMode(prev => {\n      if (prev) setOpenDetails({});\n      if (!generalAccordionOpen) setGeneralAccordionOpen(true);else setGeneralAccordionOpen(false);\n      return !prev;\n    });\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    elevation: 2,\n    sx: {\n      p: 2,\n      mb: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "h6",\n    sx: {\n      mb: 2\n    }\n  }, title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    display: "flex",\n    flexDirection: {\n      xs: "column",\n      md: "row"\n    },\n    alignItems: "flex-start",\n    gap: 4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      width: 220,\n      height: 220,\n      position: "relative"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_nivo_pie__WEBPACK_IMPORTED_MODULE_0__.ResponsivePie, {\n    data: pieData,\n    margin: {\n      top: 20,\n      right: 20,\n      bottom: 40,\n      left: 20\n    },\n    innerRadius: 0.6,\n    padAngle: 1,\n    cornerRadius: 3,\n    colors: {\n      datum: "data.color"\n    },\n    borderWidth: 1,\n    borderColor: {\n      from: "color",\n      modifiers: [["darker", 0.2]]\n    },\n    enableArcLabels: false,\n    enableArcLinkLabels: false,\n    activeInnerRadiusOffset: 8,\n    activeOuterRadiusOffset: 8,\n    activeId: hoveredCategory,\n    tooltip: ({\n      datum\n    }) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n      sx: {\n        p: 1\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n      variant: "body2",\n      fontWeight: 700\n    }, datum.label), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n      variant: "body2"\n    }, Number(datum.value).toLocaleString("fr-FR", {\n      minimumFractionDigits: 2\n    }), " ", "\\u20AC"))\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      position: "absolute",\n      top: 0,\n      left: 0,\n      width: "100%",\n      height: "100%",\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "center",\n      pointerEvents: "none",\n      flexDirection: "column"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    display: "flex",\n    alignItems: "center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "h6",\n    fontWeight: 700,\n    sx: {\n      fontSize: getFontSize(totalSum)\n    }\n  }, Number(totalSum).toLocaleString("fr-FR", {\n    minimumFractionDigits: 2\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "h6",\n    fontWeight: 700,\n    sx: {\n      fontSize: getFontSize(totalSum) * 0.7,\n      ml: 0.5\n    }\n  }, "\\u20AC")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    flex: 1\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, Object.keys(data).map(cat => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    key: cat,\n    disableGutters: true,\n    onClick: () => handleToggleCategory(cat),\n    onMouseEnter: () => setHoveredCategory(cat.replace("_", " ").toUpperCase()),\n    onMouseLeave: () => setHoveredCategory(null),\n    sx: {\n      transition: "background 0.2s",\n      minHeight: 32,\n      py: 0.2,\n      cursor: "pointer",\n      opacity: hiddenCategories.includes(cat) ? 0.4 : 1,\n      textDecoration: hiddenCategories.includes(cat) ? "line-through" : "none"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    primary: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n      display: "flex",\n      alignItems: "center"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n      sx: {\n        width: 14,\n        height: 14,\n        borderRadius: "50%",\n        backgroundColor: fixedColors[cat] || colors[cat] || "primary.main",\n        mr: 1,\n        border: "1px solid #ccc"\n      }\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n      sx: {\n        fontSize: 15,\n        fontWeight: 500,\n        textTransform: "capitalize",\n        color: "text.primary",\n        letterSpacing: 0.2\n      }\n    }, cat.replace("_", " "))),\n    secondary: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n      sx: {\n        fontWeight: 600,\n        fontSize: 13,\n        color: fixedColors[cat] || colors[cat] || "primary.main"\n      }\n    }, Number(data[cat].total).toLocaleString("fr-FR", {\n      minimumFractionDigits: 2\n    }), " ", "\\u20AC")\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material_IconButton__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    size: "small",\n    onClick: e => {\n      e.stopPropagation();\n      handleToggleDetails(cat);\n    },\n    sx: {\n      ml: 1\n    }\n  })))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    display: "flex",\n    justifyContent: "flex-end",\n    mt: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material_IconButton__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    onClick: handleToggleDetailsMode,\n    sx: {\n      backgroundColor: detailsMode ? "#eee" : "#fff",\n      border: "1px solid #ccc",\n      width: 40,\n      height: 40,\n      transition: "background 0.2s"\n    }\n  }, detailsMode ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_icons_material_Remove__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    fontSize: "medium",\n    sx: {\n      color: "#f44336"\n    }\n  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_icons_material_Add__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    fontSize: "medium",\n    sx: {\n      color: "#2196F3"\n    }\n  }))), detailsMode && generalAccordionOpen && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material_Accordion__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    expanded: true,\n    square: true,\n    elevation: 0,\n    sx: {\n      mt: 3,\n      background: "transparent",\n      boxShadow: "none"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material_AccordionSummary__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    expandIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_icons_material_ExpandMore__WEBPACK_IMPORTED_MODULE_14__["default"], null),\n    "aria-controls": "general-details-content",\n    id: "general-details-header",\n    sx: {\n      cursor: "default",\n      minHeight: 0,\n      p: 0\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "subtitle1",\n    fontWeight: 700\n  }, "D\\xE9tails")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material_AccordionDetails__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      p: 0\n    }\n  }, Object.keys(data).map(cat => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material_Accordion__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    key: cat,\n    expanded: !!openDetails[cat],\n    onChange: () => handleToggleDetails(cat),\n    square: true,\n    sx: {\n      mb: 1,\n      background: "white",\n      borderRadius: 1,\n      boxShadow: "none",\n      border: "1px solid #eee"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material_AccordionSummary__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    expandIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_icons_material_ExpandMore__WEBPACK_IMPORTED_MODULE_14__["default"], null),\n    "aria-controls": `panel-${cat}-content`,\n    id: `panel-${cat}-header`,\n    sx: {\n      minHeight: 0,\n      p: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    display: "flex",\n    alignItems: "center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      width: 16,\n      height: 16,\n      borderRadius: "50%",\n      backgroundColor: fixedColors[cat] || colors[cat] || "primary.main",\n      mr: 1.5,\n      border: "1px solid #ccc"\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    variant: "body1",\n    fontWeight: 700\n  }, cat.replace("_", " ").toUpperCase()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      fontWeight: 700,\n      color: fixedColors[cat] || colors[cat] || "primary.main",\n      ml: 2\n    }\n  }, Number(data[cat].total).toLocaleString("fr-FR", {\n    minimumFractionDigits: 2\n  }), " ", "\\u20AC"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material_AccordionDetails__WEBPACK_IMPORTED_MODULE_15__["default"], {\n    sx: {\n      p: 0\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_RecapCategoryDetails__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    open: !!openDetails[cat],\n    documents: data[cat].documents,\n    title: cat.replace("_", " ").toUpperCase(),\n    onClose: () => handleToggleDetails(cat),\n    category: cat,\n    chantierId: chantierId,\n    periode: periode,\n    refreshRecap: refreshRecap\n  })))))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RecapSection);\n\n//# sourceURL=webpack://frontend/./src/components/chantier/RecapSection.js?')},"./src/components/chantier/RecapSyntheseSection.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Grid/Grid.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _nivo_pie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @nivo/pie */ "./node_modules/@nivo/pie/dist/nivo-pie.mjs");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\n\nconst RecapSyntheseSection = ({\n  data\n}) => {\n  var _data$sorties, _data$sorties2, _data$sorties3;\n  if (!data) return null;\n  const montant_ht = Number(data.montant_ht || 0);\n  const taux_fixe = Number(data.taux_fixe || 0);\n  const montant_taux_fixe = Number(data.montant_taux_fixe || 0);\n  const total_materiel = Number(((_data$sorties = data.sorties) === null || _data$sorties === void 0 || (_data$sorties = _data$sorties.paye) === null || _data$sorties === void 0 || (_data$sorties = _data$sorties.materiel) === null || _data$sorties === void 0 ? void 0 : _data$sorties.total) || 0);\n  const total_main_oeuvre = Number(((_data$sorties2 = data.sorties) === null || _data$sorties2 === void 0 || (_data$sorties2 = _data$sorties2.paye) === null || _data$sorties2 === void 0 || (_data$sorties2 = _data$sorties2.main_oeuvre) === null || _data$sorties2 === void 0 ? void 0 : _data$sorties2.total) || 0);\n  const total_sous_traitant = Number(((_data$sorties3 = data.sorties) === null || _data$sorties3 === void 0 || (_data$sorties3 = _data$sorties3.paye) === null || _data$sorties3 === void 0 || (_data$sorties3 = _data$sorties3.sous_traitant) === null || _data$sorties3 === void 0 ? void 0 : _data$sorties3.total) || 0);\n  // Coût chantier = main d\'oeuvre + sous-traitance + matériel\n  const cout_chantier = total_main_oeuvre + total_sous_traitant + total_materiel;\n\n  // Calcul du total des paiements reçus\n  const total_paiements_recus = data.entrees && data.entrees.paye ? Object.values(data.entrees.paye).reduce((acc, cat) => acc + (cat.total || 0), 0) : 0;\n\n  // Nouveau calcul du bénéfice\n  const benefice = total_paiements_recus - montant_taux_fixe - total_materiel - total_main_oeuvre - total_sous_traitant;\n\n  // Préparer les données pour le PieChart (regroupement)\n  const pieData = [{\n    id: "Taux fixe",\n    label: "Taux fixe",\n    value: montant_taux_fixe,\n    color: "#1976d2" // bleu\n  }, {\n    id: "Coût chantier",\n    label: "Coût chantier",\n    value: cout_chantier,\n    color: "#FF7043" // orange foncé\n  }, {\n    id: "Bénéfice",\n    label: "Bénéfice",\n    value: benefice,\n    color: benefice >= 0 ? "#43A047" : "#d32f2f" // vert ou rouge\n  }];\n\n  // Déterminer dynamiquement la taille de police\n  const getFontSize = value => {\n    const length = String(Math.floor(Math.abs(value))).length;\n    if (length <= 2) return 32;\n    if (length === 3) return 28;\n    if (length === 4) return 24;\n    if (length === 5) return 20;\n    if (length === 6) return 18;\n    return 16;\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    sx: {\n      p: 2,\n      mb: 3\n    },\n    elevation: 3\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    variant: "h6",\n    sx: {\n      mb: 2\n    }\n  }, "Synth\\xE8se Financi\\xE8re du Chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    container: true,\n    spacing: 0,\n    alignItems: "stretch"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12,\n    md: 7\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      height: "100%",\n      display: "flex",\n      flexDirection: "column",\n      justifyContent: "center",\n      pl: 2,\n      pr: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    container: true,\n    spacing: 2\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12,\n    md: 4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    color: "text.secondary"\n  }, "Montant march\\xE9"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    variant: "h6"\n  }, montant_ht.toLocaleString("fr-FR", {\n    minimumFractionDigits: 2\n  }), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12,\n    md: 4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    color: "text.secondary"\n  }, "Taux fixe"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    variant: "h6"\n  }, taux_fixe.toLocaleString("fr-FR", {\n    minimumFractionDigits: 2\n  }), " ", "%")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12,\n    md: 4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    color: "text.secondary"\n  }, "Montant taux fixe"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    variant: "h6",\n    sx: {\n      color: "#1976d2",\n      fontWeight: 700\n    }\n  }, montant_taux_fixe.toLocaleString("fr-FR", {\n    minimumFractionDigits: 2\n  }), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12,\n    md: 4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    color: "text.secondary"\n  }, "Paiements re\\xE7us"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    variant: "h6",\n    style: {\n      color: "#43A047",\n      fontWeight: 700\n    }\n  }, total_paiements_recus.toLocaleString("fr-FR", {\n    minimumFractionDigits: 2\n  }), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12,\n    md: 4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    color: "text.secondary"\n  }, "Co\\xFBt chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    variant: "h6",\n    style: {\n      color: "#d32f2f",\n      fontWeight: 700\n    }\n  }, "-", " ", cout_chantier.toLocaleString("fr-FR", {\n    minimumFractionDigits: 2\n  }), " ", "\\u20AC")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12,\n    md: 4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    color: "text.secondary"\n  }, "B\\xE9n\\xE9fice"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    variant: "h6",\n    style: {\n      color: benefice >= 0 ? "#43A047" : "#d32f2f",\n      fontWeight: 700\n    }\n  }, benefice.toLocaleString("fr-FR", {\n    minimumFractionDigits: 2\n  }), " ", "\\u20AC"))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    md: 1,\n    sx: {\n      display: {\n        xs: "none",\n        md: "flex"\n      },\n      justifyContent: "center",\n      alignItems: "center"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      width: "2px",\n      height: "90%",\n      bgcolor: "#BDBDBD",\n      mx: "auto"\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    item: true,\n    xs: 12,\n    md: 4\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      width: 220,\n      height: 220,\n      position: "relative",\n      mx: "auto"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_nivo_pie__WEBPACK_IMPORTED_MODULE_0__.ResponsivePie, {\n    data: pieData,\n    margin: {\n      top: 20,\n      right: 20,\n      bottom: 40,\n      left: 20\n    },\n    innerRadius: 0.6,\n    padAngle: 1,\n    cornerRadius: 3,\n    colors: {\n      datum: "data.color"\n    },\n    borderWidth: 1,\n    borderColor: {\n      from: "color",\n      modifiers: [["darker", 0.2]]\n    },\n    enableArcLabels: false,\n    enableArcLinkLabels: false\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    sx: {\n      position: "absolute",\n      top: 0,\n      left: 0,\n      width: "100%",\n      height: "100%",\n      display: "flex",\n      alignItems: "center",\n      justifyContent: "center",\n      pointerEvents: "none",\n      flexDirection: "column"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    variant: "h6",\n    fontWeight: 700,\n    sx: {\n      fontSize: getFontSize(benefice),\n      color: benefice >= 0 ? "#43A047" : "#d32f2f"\n    }\n  }, Number(benefice).toLocaleString("fr-FR", {\n    minimumFractionDigits: 2\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    variant: "h6",\n    fontWeight: 700,\n    sx: {\n      fontSize: getFontSize(benefice) * 0.7,\n      ml: 0.5,\n      color: benefice >= 0 ? "#43A047" : "#d32f2f"\n    }\n  }, "\\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    variant: "body2",\n    sx: {\n      mt: 1\n    }\n  }, "B\\xE9n\\xE9fice"))))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RecapSyntheseSection);\n\n//# sourceURL=webpack://frontend/./src/components/chantier/RecapSyntheseSection.js?')},"./src/components/chantier/TableauFacturation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableContainer/TableContainer.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Table/Table.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableHead/TableHead.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableRow/TableRow.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableCell/TableCell.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableBody/TableBody.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableFooter/TableFooter.js");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\n\nconst DateEnvoiModal = ({\n  open,\n  onClose,\n  situation,\n  onSubmit\n}) => {\n  const [dateEnvoi, setDateEnvoi] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [delaiPaiement, setDelaiPaiement] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(45);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (situation) {\n      setDateEnvoi(situation.date_envoi || "");\n      setDelaiPaiement(situation.delai_paiement || 45);\n    }\n  }, [situation]);\n  const handleSubmit = () => {\n    onSubmit(situation.id, {\n      dateEnvoi,\n      delaiPaiement\n    });\n    onClose();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: open,\n    onClose: onClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Date d\'envoi et d\\xE9lai de paiement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    type: "date",\n    label: "Date d\'envoi",\n    value: dateEnvoi,\n    onChange: e => setDateEnvoi(e.target.value),\n    fullWidth: true,\n    sx: {\n      mb: 2\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    value: delaiPaiement,\n    onChange: e => setDelaiPaiement(e.target.value),\n    fullWidth: true,\n    label: "D\\xE9lai de paiement"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    value: 45\n  }, "45 jours"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    value: 60\n  }, "60 jours")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    onClick: handleSubmit,\n    variant: "contained"\n  }, "Valider")));\n};\nconst PaiementModal = ({\n  open,\n  onClose,\n  situation,\n  onSubmit\n}) => {\n  const [montantRecu, setMontantRecu] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [datePaiementReel, setDatePaiementReel] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (situation) {\n      setMontantRecu(situation.montant_reel_ht || "");\n      setDatePaiementReel(situation.date_paiement_reel || "");\n    }\n  }, [situation]);\n  const handleSubmit = () => {\n    onSubmit(situation.id, {\n      montantRecu,\n      datePaiementReel\n    });\n    onClose();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: open,\n    onClose: onClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Montant re\\xE7u et date de paiement"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    type: "number",\n    label: "Montant re\\xE7u HT",\n    value: montantRecu,\n    onChange: e => setMontantRecu(e.target.value),\n    fullWidth: true,\n    sx: {\n      mb: 2\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    type: "date",\n    label: "Date de paiement r\\xE9elle",\n    value: datePaiementReel,\n    onChange: e => setDatePaiementReel(e.target.value),\n    fullWidth: true\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    onClick: onClose\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    onClick: handleSubmit,\n    variant: "contained"\n  }, "Valider")));\n};\nconst TableauFacturation = () => {\n  const [chantiers, setChantiers] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [selectedMois, setSelectedMois] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [selectedAnnee, setSelectedAnnee] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [allSituations, setAllSituations] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n  const [openDateModal, setOpenDateModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedSituation, setSelectedSituation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [openPaiementModal, setOpenPaiementModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [vueGlobale, setVueGlobale] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [banques, setBanques] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [openBanqueModal, setOpenBanqueModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedSituationForBanque, setSelectedSituationForBanque] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [openCreateBanqueModal, setOpenCreateBanqueModal] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [newBanqueName, setNewBanqueName] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const commonBodyCellStyle = {\n    maxWidth: "100px",\n    padding: "6px 8px",\n    whiteSpace: "normal",\n    wordWrap: "break-word",\n    textAlign: "center",\n    verticalAlign: "middle"\n  };\n  const formatNumberWithColor = (value, compareValue) => {\n    const number = parseFloat(value) || 0;\n    const compare = parseFloat(compareValue) || 0;\n    const isDifferent = Math.abs(number - compare) > 0.01;\n    let color = "text.primary"; // noir par défaut\n    if (number === 0) {\n      color = "text.primary";\n    } else if (compareValue === undefined || compareValue === null) {\n      color = "rgba(27, 120, 188, 1)";\n    } else if (isDifferent) {\n      color = "error.main";\n    } else {\n      color = "rgba(27, 120, 188, 1)";\n    }\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n      sx: {\n        color: color,\n        fontWeight: 500,\n        fontSize: "0.75rem",\n        fontFamily: "Roboto, Arial, sans-serif",\n        whiteSpace: "nowrap"\n      }\n    }, number.toFixed(2), " \\u20AC");\n  };\n  const formatDate = dateString => {\n    if (!dateString) return "";\n    const date = new Date(dateString);\n    const year = date.getFullYear().toString().slice(-2); // 2 derniers chiffres\n    return date.toLocaleDateString("fr-FR", {\n      day: "2-digit",\n      month: "2-digit",\n      year: undefined\n    }) + "/" + year;\n  };\n\n  // Pour l\'affichage mois/année (ex: 04/25)\n  const formatMoisAnnee = (mois, annee) => {\n    const moisStr = mois.toString().padStart(2, "0");\n    const anneeStr = annee.toString().slice(-2);\n    return `${moisStr}/${anneeStr}`;\n  };\n\n  // Fonction pour obtenir le nom du mois en français\n  const getMoisName = mois => {\n    const moisNames = {\n      1: "Janvier",\n      2: "Février",\n      3: "Mars",\n      4: "Avril",\n      5: "Mai",\n      6: "Juin",\n      7: "Juillet",\n      8: "Août",\n      9: "Septembre",\n      10: "Octobre",\n      11: "Novembre",\n      12: "Décembre"\n    };\n    return moisNames[mois] || mois.toString().padStart(2, "0");\n  };\n\n  // Charger la liste des chantiers et des banques\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const fetchData = async () => {\n      try {\n        const [chantiersResponse, banquesResponse] = await Promise.all([axios__WEBPACK_IMPORTED_MODULE_11__["default"].get("/api/chantier/"), axios__WEBPACK_IMPORTED_MODULE_11__["default"].get("/api/banques/")]);\n        setChantiers(chantiersResponse.data);\n        setBanques(banquesResponse.data);\n      } catch (error) {\n        console.error("Erreur lors du chargement des données:", error);\n      }\n    };\n    fetchData();\n  }, []);\n\n  // Initialiser le mois et l\'année actuels\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const now = new Date();\n    setSelectedMois(now.getMonth() + 1);\n    setSelectedAnnee(now.getFullYear());\n  }, []);\n\n  // Charger toutes les situations pour le mois/année sélectionnés ou vue globale\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (selectedMois && selectedAnnee || vueGlobale) {\n      setLoading(true);\n      const fetchAllSituations = async () => {\n        try {\n          const allSituationsData = [];\n          const allSituationsByChantier = {}; // Pour stocker toutes les situations par chantier\n\n          // Récupérer les situations pour chaque chantier\n          for (const chantier of chantiers) {\n            try {\n              const response = await axios__WEBPACK_IMPORTED_MODULE_11__["default"].get(`/api/chantier/${chantier.id}/situations/`);\n              const situations = response.data;\n\n              // Stocker toutes les situations du chantier pour le calcul du cumul\n              allSituationsByChantier[chantier.id] = situations;\n\n              // Filtrer les situations selon le mode d\'affichage\n              let filteredSituations;\n              if (vueGlobale) {\n                // Vue globale : toutes les situations de l\'année sélectionnée\n                filteredSituations = situations.filter(situation => situation.annee === selectedAnnee);\n              } else {\n                // Vue mensuelle : situations du mois/année sélectionnés\n                filteredSituations = situations.filter(situation => situation.mois === selectedMois && situation.annee === selectedAnnee);\n              }\n\n              // Ajouter le nom du chantier et toutes les situations du chantier à chaque situation\n              const situationsWithChantier = filteredSituations.map(situation => ({\n                ...situation,\n                chantier_name: chantier.chantier_name,\n                chantier_id: chantier.id,\n                allSituationsChantier: situations // Toutes les situations du chantier\n              }));\n              allSituationsData.push(...situationsWithChantier);\n            } catch (error) {\n              console.error(`Erreur lors du chargement des situations pour le chantier ${chantier.id}:`, error);\n            }\n          }\n          setAllSituations(allSituationsData);\n        } catch (error) {\n          console.error("Erreur lors du chargement des situations:", error);\n        } finally {\n          setLoading(false);\n        }\n      };\n      fetchAllSituations();\n    }\n  }, [selectedMois, selectedAnnee, chantiers, vueGlobale]);\n  const renderTableauFacturation = () => {\n    // Fonction helper pour extraire le numéro de situation\n    const extractSituationNumber = numeroSituation => {\n      if (!numeroSituation) return "-";\n      const match = numeroSituation.match(/n°(\\d+)/);\n      return match ? parseInt(match[1]) : numeroSituation;\n    };\n\n    // Trier les situations selon le mode d\'affichage\n    const situationsTriees = [...allSituations].sort((a, b) => {\n      if (vueGlobale) {\n        // Vue globale : trier par chantier, puis par mois, puis par numéro de situation\n        if (a.chantier_name !== b.chantier_name) {\n          return a.chantier_name.localeCompare(b.chantier_name);\n        }\n        if (a.mois !== b.mois) {\n          return a.mois - b.mois;\n        }\n        const numA = extractSituationNumber(a.numero_situation);\n        const numB = extractSituationNumber(b.numero_situation);\n        return numA - numB;\n      } else {\n        // Vue mensuelle : trier par chantier puis par numéro de situation\n        if (a.chantier_name !== b.chantier_name) {\n          return a.chantier_name.localeCompare(b.chantier_name);\n        }\n        const numA = extractSituationNumber(a.numero_situation);\n        const numB = extractSituationNumber(b.numero_situation);\n        return numA - numB;\n      }\n    });\n\n    // Fonction helper pour formater les montants avec la couleur\n    const formatMontant = (montant, forceNegative = false, type = null) => {\n      const valeur = parseFloat(montant) || 0;\n      const isNegatif = forceNegative || valeur < 0 || type === "deduction";\n      const couleur = isNegatif ? "error.main" : "rgb(0, 168, 42)";\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n        sx: {\n          color: couleur,\n          fontFamily: "Roboto, Arial, sans-serif",\n          fontWeight: 500,\n          fontSize: "0.75rem",\n          whiteSpace: "nowrap"\n        }\n      }, isNegatif ? "-" : "", Math.abs(valeur).toFixed(2), " \\u20AC");\n    };\n    const commonCellStyle = {\n      color: "white",\n      maxWidth: "100px",\n      padding: "6px 8px",\n      whiteSpace: "normal",\n      wordWrap: "break-word",\n      textAlign: "center",\n      minHeight: "60px",\n      verticalAlign: "middle"\n    };\n    const calculerEcartMois = situation => {\n      const montantHTSituation = parseFloat(situation.montant_apres_retenues) || 0;\n      const montantRecuHT = parseFloat(situation.montant_reel_ht) || 0;\n      const ecart = montantRecuHT - montantHTSituation;\n      if (ecart === 0 || isNaN(ecart)) return "-";\n      return formatMontant(ecart);\n    };\n    const calculerCumulSituationHT = situation => {\n      // Récupérer toutes les situations du chantier\n      const allSituationsChantier = situation.allSituationsChantier || [];\n\n      // Trier les situations par mois/année puis par numéro\n      const situationsTriees = [...allSituationsChantier].sort((a, b) => {\n        var _a$numero_situation$m, _b$numero_situation$m;\n        // D\'abord par année\n        if (a.annee !== b.annee) {\n          return a.annee - b.annee;\n        }\n        // Puis par mois\n        if (a.mois !== b.mois) {\n          return a.mois - b.mois;\n        }\n        // Puis par numéro de situation\n        const numA = parseInt(((_a$numero_situation$m = a.numero_situation.match(/n°(\\d+)/)) === null || _a$numero_situation$m === void 0 ? void 0 : _a$numero_situation$m[1]) || 0);\n        const numB = parseInt(((_b$numero_situation$m = b.numero_situation.match(/n°(\\d+)/)) === null || _b$numero_situation$m === void 0 ? void 0 : _b$numero_situation$m[1]) || 0);\n        return numA - numB;\n      });\n\n      // Trouver l\'index de la situation actuelle dans la liste triée\n      const currentIndex = situationsTriees.findIndex(s => s.id === situation.id);\n      if (currentIndex === -1) {\n        return parseFloat(situation.montant_apres_retenues) || 0;\n      }\n\n      // Calculer le cumul jusqu\'à la situation actuelle (inclusive)\n      return situationsTriees.slice(0, currentIndex + 1).reduce((sum, s) => {\n        const montantHT = parseFloat(s.montant_apres_retenues) || 0;\n        return sum + montantHT;\n      }, 0);\n    };\n    const calculerTotaux = () => {\n      return allSituations.reduce((totaux, situation) => {\n        return {\n          montantHTSituation: totaux.montantHTSituation + (parseFloat(situation.montant_apres_retenues) || 0),\n          montantRecuHT: totaux.montantRecuHT + (parseFloat(situation.montant_reel_ht) || 0),\n          ecartMois: totaux.ecartMois + (parseFloat(situation.montant_reel_ht || 0) - parseFloat(situation.montant_apres_retenues || 0))\n        };\n      }, {\n        montantHTSituation: 0,\n        montantRecuHT: 0,\n        ecartMois: 0\n      });\n    };\n    if (vueGlobale) {\n      // Vue globale : afficher un seul tableau avec sous-totaux par mois\n      const moisAvecSituations = {};\n\n      // Grouper les situations par mois\n      situationsTriees.forEach(situation => {\n        const mois = situation.mois;\n        if (!moisAvecSituations[mois]) {\n          moisAvecSituations[mois] = [];\n        }\n        moisAvecSituations[mois].push(situation);\n      });\n\n      // Trier les mois\n      const moisTries = Object.keys(moisAvecSituations).sort((a, b) => parseInt(a) - parseInt(b));\n\n      // Créer une liste avec les situations et les sous-totaux\n      const situationsAvecSousTotaux = [];\n      moisTries.forEach(mois => {\n        const situationsDuMois = moisAvecSituations[mois];\n        situationsAvecSousTotaux.push(...situationsDuMois);\n\n        // Ajouter une ligne de sous-total après chaque mois\n        const sousTotalMois = situationsDuMois.reduce((total, situation) => {\n          return total + (parseFloat(situation.montant_apres_retenues) || 0);\n        }, 0);\n        situationsAvecSousTotaux.push({\n          isSousTotal: true,\n          mois: parseInt(mois),\n          sousTotal: sousTotalMois\n        });\n      });\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n        component: _mui_material__WEBPACK_IMPORTED_MODULE_13__["default"],\n        sx: {\n          maxWidth: "100%",\n          overflowX: "auto"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n        size: "small",\n        sx: {\n          tableLayout: "fixed"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n        sx: {\n          backgroundColor: "rgba(27, 120, 188, 1)",\n          color: "white"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Banque"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Mois"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "N\\xB0 Situation"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "N\\xB0 CP"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "N\\xB0 Facture"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Montant HT Situation"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Situation Cumul HT"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Date d\'envoi"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Date de paiement pr\\xE9vue"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Montant re\\xE7u HT"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Date de paiement r\\xE9elle"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Jours de retard"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "\\xC9cart Mois"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, situationsAvecSousTotaux.map((item, index) => {\n        if (item.isSousTotal) {\n          // Ligne de sous-total\n          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n            key: `sous-total-${item.mois}`,\n            sx: {\n              backgroundColor: "rgba(27, 120, 188, 1)",\n              fontWeight: "bold",\n              "& td": {\n                fontWeight: "bold",\n                color: "white"\n              }\n            }\n          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n            colSpan: 14,\n            sx: {\n              ...commonBodyCellStyle,\n              textAlign: "center"\n            }\n          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n            sx: {\n              fontWeight: "bold",\n              color: "white",\n              fontSize: "1.1rem"\n            }\n          }, "Sous-total ", getMoisName(item.mois), " :", " ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", {\n            style: {\n              fontSize: "1rem",\n              fontWeight: "bold",\n              marginLeft: "5px"\n            }\n          }, (parseFloat(item.sousTotal) || 0).toFixed(2), " \\u20AC"))));\n        } else {\n          var _banques$find;\n          // Ligne de situation normale\n          const situation = item;\n          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n            key: `${situation.chantier_id}-${situation.id}`,\n            sx: {\n              "&:nth-of-type(odd)": {\n                backgroundColor: "#f5f5f5"\n              },\n              "&:nth-of-type(even)": {\n                backgroundColor: "#ffffff"\n              },\n              "&:hover": {\n                backgroundColor: "#f5f5f5"\n              }\n            }\n          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n            sx: commonBodyCellStyle\n          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n            sx: {\n              fontWeight: 600,\n              fontSize: "0.8rem",\n              color: situation.banque ? "rgba(27, 120, 188, 1)" : "error.main"\n            }\n          }, situation.chantier_name)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n            sx: commonBodyCellStyle\n          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n            size: "small",\n            onClick: () => {\n              setSelectedSituationForBanque(situation);\n              setOpenBanqueModal(true);\n            },\n            sx: {\n              color: situation.banque ? "rgba(27, 120, 188, 1)" : "rgba(27, 120, 188, 0.6)",\n              fontWeight: "bold",\n              fontSize: "0.75rem",\n              textTransform: "none",\n              minWidth: "auto",\n              padding: "2px 8px",\n              border: situation.banque ? "none" : "1px dashed rgba(27, 120, 188, 0.3)"\n            }\n          }, situation.banque ? ((_banques$find = banques.find(b => b.id === situation.banque)) === null || _banques$find === void 0 ? void 0 : _banques$find.nom_banque) || "Banque inconnue" : "")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n            sx: commonBodyCellStyle\n          }, situation.mois.toString().padStart(2, "0")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n            sx: commonBodyCellStyle\n          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n            size: "small",\n            onClick: () => {\n              const previewUrl = `/preview-situation/${situation.id}/`;\n              window.open(previewUrl, "_blank");\n            },\n            sx: {\n              color: "rgba(27, 120, 188, 1)",\n              fontWeight: "bold",\n              fontSize: "0.75rem",\n              textTransform: "none",\n              minWidth: "auto",\n              padding: "2px 8px",\n              "&:hover": {\n                backgroundColor: "rgba(27, 120, 188, 0.1)"\n              }\n            }\n          }, extractSituationNumber(situation.numero_situation))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n            sx: commonBodyCellStyle\n          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n            size: "small",\n            value: situation.numero_cp || "",\n            onChange: e => handleNumeroCPChange(situation.id, e.target.value),\n            placeholder: "N\\xB0 CP",\n            sx: {\n              "& .MuiInputBase-root": {\n                fontSize: "0.75rem",\n                height: "32px"\n              },\n              "& .MuiInputBase-input": {\n                padding: "4px 8px",\n                textAlign: "center"\n              }\n            }\n          })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n            sx: commonBodyCellStyle\n          }, situation.numero_situation || "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n            sx: commonBodyCellStyle\n          }, formatMontant(parseFloat(situation.montant_apres_retenues) || 0)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n            sx: {\n              ...commonBodyCellStyle,\n              color: "rgba(27, 120, 188, 1)"\n            }\n          }, formatNumberWithColor(calculerCumulSituationHT(situation), calculerCumulSituationHT(situation))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n            sx: commonBodyCellStyle\n          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n            size: "small",\n            onClick: () => {\n              setSelectedSituation(situation);\n              setOpenDateModal(true);\n            }\n          }, situation.date_envoi ? formatDate(situation.date_envoi) : "Définir date")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n            sx: commonBodyCellStyle\n          }, calculateDatePaiement(situation.date_envoi, situation.delai_paiement)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n            sx: commonBodyCellStyle\n          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n            size: "small",\n            onClick: () => {\n              setSelectedSituation(situation);\n              setOpenPaiementModal(true);\n            }\n          }, situation.montant_reel_ht ? formatNumberWithColor(situation.montant_reel_ht, situation.montant_apres_retenues) : "Définir paiement")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n            sx: commonBodyCellStyle\n          }, situation.date_paiement_reel ? formatDate(situation.date_paiement_reel) : "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n            sx: commonBodyCellStyle\n          }, calculateRetard(calculateDatePaiement(situation.date_envoi, situation.delai_paiement), situation.date_paiement_reel)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n            sx: commonBodyCellStyle\n          }, calculerEcartMois(situation)));\n        }\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n        sx: {\n          backgroundColor: "rgba(27, 120, 188, 0.1)",\n          fontWeight: "bold",\n          "& td": {\n            fontWeight: "bold",\n            color: "rgba(27, 120, 188, 1)"\n          }\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          textAlign: "center",\n          color: "black",\n          fontSize: "0.8rem"\n        }\n      }, "Total Global"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, formatMontant(calculerTotaux().montantHTSituation)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, formatMontant(calculerTotaux().montantRecuHT)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, formatMontant(calculerTotaux().ecartMois))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n        sx: {\n          backgroundColor: "rgba(255, 193, 7, 0.1)",\n          fontWeight: "bold",\n          "& td": {\n            fontWeight: "bold",\n            color: "rgba(255, 193, 7, 1)"\n          }\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n        sx: {\n          fontWeight: "bold",\n          color: "rgba(255, 193, 7, 1)",\n          fontSize: "0.9rem"\n        }\n      }, "Reste \\xE0 payer")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, formatMontant(calculerTotaux().montantHTSituation - calculerTotaux().montantRecuHT)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"))))));\n    } else {\n      // Vue mensuelle : afficher un seul tableau\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n        component: _mui_material__WEBPACK_IMPORTED_MODULE_13__["default"],\n        sx: {\n          maxWidth: "100%",\n          overflowX: "auto"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_14__["default"], {\n        size: "small",\n        sx: {\n          tableLayout: "fixed"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_15__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n        sx: {\n          backgroundColor: "rgba(27, 120, 188, 1)",\n          color: "white"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Chantier"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Banque"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "N\\xB0 Situation"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "N\\xB0 CP"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "N\\xB0 Facture"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Montant HT Situation"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Situation Cumul HT"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Date d\'envoi"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Date de paiement pr\\xE9vue"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Montant re\\xE7u HT"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Date de paiement r\\xE9elle"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "Jours de retard"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          ...commonCellStyle\n        }\n      }, "\\xC9cart Mois"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_18__["default"], null, situationsTriees.map((situation, index) => {\n        var _banques$find2;\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n          key: `${situation.chantier_id}-${situation.id}`,\n          sx: {\n            "&:nth-of-type(odd)": {\n              backgroundColor: "#f5f5f5"\n            },\n            "&:nth-of-type(even)": {\n              backgroundColor: "#ffffff"\n            },\n            "&:hover": {\n              backgroundColor: "#f5f5f5"\n            }\n          }\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n          sx: commonBodyCellStyle\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n          sx: {\n            fontWeight: 600,\n            fontSize: "0.8rem",\n            color: situation.banque ? "rgba(27, 120, 188, 1)" : "error.main"\n          }\n        }, situation.chantier_name)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n          sx: commonBodyCellStyle\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n          size: "small",\n          onClick: () => {\n            setSelectedSituationForBanque(situation);\n            setOpenBanqueModal(true);\n          },\n          sx: {\n            color: situation.banque ? "rgba(27, 120, 188, 1)" : "rgba(27, 120, 188, 0.6)",\n            fontWeight: "bold",\n            fontSize: "0.75rem",\n            textTransform: "none",\n            minWidth: "auto",\n            padding: "2px 8px",\n            border: situation.banque ? "none" : "1px dashed rgba(27, 120, 188, 0.3)"\n          }\n        }, situation.banque ? ((_banques$find2 = banques.find(b => b.id === situation.banque)) === null || _banques$find2 === void 0 ? void 0 : _banques$find2.nom_banque) || "Banque inconnue" : "")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n          sx: commonBodyCellStyle\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n          size: "small",\n          onClick: () => {\n            const previewUrl = `/api/preview-situation/${situation.id}/`;\n            window.open(previewUrl, "_blank");\n          },\n          sx: {\n            color: "rgba(27, 120, 188, 1)",\n            fontWeight: "bold",\n            fontSize: "0.75rem",\n            textTransform: "none",\n            minWidth: "auto",\n            padding: "2px 8px",\n            "&:hover": {\n              backgroundColor: "rgba(27, 120, 188, 0.1)"\n            }\n          }\n        }, extractSituationNumber(situation.numero_situation))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n          sx: commonBodyCellStyle\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n          size: "small",\n          value: situation.numero_cp || "",\n          onChange: e => handleNumeroCPChange(situation.id, e.target.value),\n          placeholder: "N\\xB0 CP",\n          sx: {\n            "& .MuiInputBase-root": {\n              fontSize: "0.75rem",\n              height: "32px"\n            },\n            "& .MuiInputBase-input": {\n              padding: "4px 8px",\n              textAlign: "center"\n            }\n          }\n        })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n          sx: commonBodyCellStyle\n        }, situation.numero_situation || "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n          sx: commonBodyCellStyle\n        }, formatMontant(parseFloat(situation.montant_apres_retenues) || 0)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n          sx: {\n            ...commonBodyCellStyle,\n            color: "rgba(27, 120, 188, 1)"\n          }\n        }, formatNumberWithColor(calculerCumulSituationHT(situation), calculerCumulSituationHT(situation))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n          sx: commonBodyCellStyle\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n          size: "small",\n          onClick: () => {\n            setSelectedSituation(situation);\n            setOpenDateModal(true);\n          }\n        }, situation.date_envoi ? formatDate(situation.date_envoi) : "Définir date")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n          sx: commonBodyCellStyle\n        }, calculateDatePaiement(situation.date_envoi, situation.delai_paiement)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n          sx: commonBodyCellStyle\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n          size: "small",\n          onClick: () => {\n            setSelectedSituation(situation);\n            setOpenPaiementModal(true);\n          }\n        }, situation.montant_reel_ht ? formatNumberWithColor(situation.montant_reel_ht, situation.montant_apres_retenues) : "Définir paiement")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n          sx: commonBodyCellStyle\n        }, situation.date_paiement_reel ? formatDate(situation.date_paiement_reel) : "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n          sx: commonBodyCellStyle\n        }, calculateRetard(calculateDatePaiement(situation.date_envoi, situation.delai_paiement), situation.date_paiement_reel)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n          sx: commonBodyCellStyle\n        }, calculerEcartMois(situation)));\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_19__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_16__["default"], {\n        sx: {\n          backgroundColor: "rgba(27, 120, 188, 0.1)",\n          fontWeight: "bold",\n          "& td": {\n            fontWeight: "bold",\n            color: "rgba(27, 120, 188, 1)"\n          }\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: {\n          textAlign: "center",\n          color: "black",\n          fontSize: "0.8rem"\n        }\n      }, "Total"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, formatMontant(calculerTotaux().montantHTSituation)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, formatMontant(calculerTotaux().montantRecuHT)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, "-"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_17__["default"], {\n        sx: commonBodyCellStyle\n      }, formatMontant(calculerTotaux().ecartMois)))))));\n    }\n  };\n\n  // Ajout des fonctions utilitaires\n  const calculateDatePaiement = (dateEnvoi, delai) => {\n    if (!dateEnvoi || !delai) return "-";\n    try {\n      const date = new Date(dateEnvoi);\n      if (isNaN(date.getTime())) return "-";\n      date.setDate(date.getDate() + parseInt(delai));\n      return formatDate(date);\n    } catch (error) {\n      console.error("Erreur dans le calcul de la date de paiement:", error);\n      return "-";\n    }\n  };\n  const calculateRetard = (datePrevue, dateReelle) => {\n    if (!datePrevue || !dateReelle || datePrevue === "-") {\n      return "-";\n    }\n    try {\n      // Convertir les dates en objets Date\n      let datePrevueObj, dateReelleObj;\n\n      // Traiter la date prévue (format DD/MM/YY)\n      if (datePrevue.includes("/")) {\n        const [jour, mois, annee] = datePrevue.split("/");\n        const anneeComplete = annee.length === 2 ? `20${annee}` : annee;\n        datePrevueObj = new Date(anneeComplete, mois - 1, jour);\n      } else {\n        datePrevueObj = new Date(datePrevue);\n      }\n\n      // Traiter la date réelle (format YYYY-MM-DD)\n      dateReelleObj = new Date(dateReelle);\n\n      // Vérifier que les dates sont valides\n      if (isNaN(datePrevueObj.getTime()) || isNaN(dateReelleObj.getTime())) {\n        return "-";\n      }\n\n      // Calculer la différence en millisecondes\n      const differenceMs = dateReelleObj.getTime() - datePrevueObj.getTime();\n\n      // Convertir en jours\n      const differenceJours = Math.ceil(differenceMs / (1000 * 60 * 60 * 24));\n      if (differenceJours > 0) {\n        return `${differenceJours} jours de retard`;\n      } else if (differenceJours < 0) {\n        return `${Math.abs(differenceJours)} jours d\'avance`;\n      } else {\n        return "À jour";\n      }\n    } catch (error) {\n      console.error("Erreur dans le calcul du retard:", error);\n      return "-";\n    }\n  };\n\n  // Handlers pour les mises à jour\n  const handleDateModalSubmit = async (situationId, {\n    dateEnvoi,\n    delaiPaiement\n  }) => {\n    try {\n      // Mettre à jour directement via l\'API\n      await axios__WEBPACK_IMPORTED_MODULE_11__["default"].patch(`/api/situations/${situationId}/update/`, {\n        date_envoi: dateEnvoi,\n        delai_paiement: delaiPaiement\n      });\n\n      // Mettre à jour l\'état local\n      setAllSituations(prev => prev.map(s => s.id === situationId ? {\n        ...s,\n        date_envoi: dateEnvoi,\n        delai_paiement: delaiPaiement\n      } : s));\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour:", error);\n      alert("Erreur lors de la mise à jour des données");\n    }\n  };\n  const handlePaiementModalSubmit = async (situationId, {\n    montantRecu,\n    datePaiementReel\n  }) => {\n    try {\n      // Mettre à jour directement via l\'API\n      await axios__WEBPACK_IMPORTED_MODULE_11__["default"].patch(`/api/situations/${situationId}/update/`, {\n        montant_reel_ht: montantRecu,\n        date_paiement_reel: datePaiementReel\n      });\n\n      // Mettre à jour l\'état local\n      setAllSituations(prev => prev.map(s => s.id === situationId ? {\n        ...s,\n        montant_reel_ht: montantRecu,\n        date_paiement_reel: datePaiementReel\n      } : s));\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour:", error);\n      alert("Erreur lors de la mise à jour des données");\n    }\n  };\n  const handleNumeroCPChange = async (situationId, numeroCP) => {\n    try {\n      // Mettre à jour directement via l\'API\n      await axios__WEBPACK_IMPORTED_MODULE_11__["default"].patch(`/api/situations/${situationId}/update/`, {\n        numero_cp: numeroCP\n      });\n\n      // Mettre à jour l\'état local\n      setAllSituations(prev => prev.map(s => s.id === situationId ? {\n        ...s,\n        numero_cp: numeroCP\n      } : s));\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour du numéro CP:", error);\n      alert("Erreur lors de la mise à jour du numéro CP");\n    }\n  };\n  const handleBanqueChange = async (situationId, banqueId) => {\n    try {\n      // Mettre à jour directement via l\'API\n      await axios__WEBPACK_IMPORTED_MODULE_11__["default"].patch(`/api/situations/${situationId}/update/`, {\n        banque: banqueId\n      });\n\n      // Mettre à jour l\'état local\n      setAllSituations(prev => prev.map(s => s.id === situationId ? {\n        ...s,\n        banque: banqueId\n      } : s));\n      setOpenBanqueModal(false);\n    } catch (error) {\n      console.error("Erreur lors de la mise à jour de la banque:", error);\n      alert("Erreur lors de la mise à jour de la banque");\n    }\n  };\n  const handleCreateBanque = async () => {\n    if (!newBanqueName.trim()) {\n      alert("Le nom de la banque ne peut pas être vide");\n      return;\n    }\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_11__["default"].post("/api/banques/", {\n        nom_banque: newBanqueName.trim()\n      });\n\n      // Ajouter la nouvelle banque à la liste\n      setBanques(prev => [...prev, response.data]);\n\n      // Fermer le modal et réinitialiser le nom\n      setOpenCreateBanqueModal(false);\n      setNewBanqueName("");\n      alert("Banque créée avec succès !");\n    } catch (error) {\n      console.error("Erreur lors de la création de la banque:", error);\n      alert("Erreur lors de la création de la banque");\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      width: "100%",\n      p: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      mb: 3\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    variant: "h5",\n    gutterBottom: true,\n    sx: {\n      fontFamily: "Merriweather, serif",\n      color: "white",\n      fontWeight: "bold"\n    }\n  }, "TABLEAU FACTURATION", " ", vueGlobale ? `Année ${selectedAnnee}` : formatMoisAnnee(selectedMois, selectedAnnee)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      display: "flex",\n      gap: 2,\n      mb: 2,\n      alignItems: "center"\n    }\n  }, !vueGlobale && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    value: selectedMois,\n    onChange: e => setSelectedMois(e.target.value),\n    variant: "standard",\n    sx: {\n      minWidth: 120,\n      color: "rgba(27, 120, 188, 1)",\n      backgroundColor: "white"\n    }\n  }, Array.from({\n    length: 12\n  }, (_, i) => i + 1).map(mois => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    key: mois,\n    value: mois\n  }, mois.toString().padStart(2, "0")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    value: selectedAnnee,\n    onChange: e => setSelectedAnnee(e.target.value),\n    variant: "standard",\n    sx: {\n      minWidth: 120,\n      color: "rgba(27, 120, 188, 1)",\n      backgroundColor: "white"\n    }\n  }, Array.from({\n    length: 5\n  }, (_, i) => new Date().getFullYear() - 2 + i).map(annee => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], {\n    key: annee,\n    value: annee\n  }, annee))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    variant: vueGlobale ? "contained" : "outlined",\n    onClick: () => setVueGlobale(!vueGlobale),\n    sx: {\n      ml: 2,\n      backgroundColor: vueGlobale ? "rgba(27, 120, 188, 1)" : "white",\n      color: vueGlobale ? "white" : "rgba(27, 120, 188, 1)",\n      borderColor: "rgba(27, 120, 188, 1)",\n      border: "1px solid rgba(27, 120, 188, 1)",\n      "&:hover": {\n        backgroundColor: vueGlobale ? "rgba(27, 120, 188, 0.8)" : "rgba(27, 120, 188, 0.1)"\n      }\n    }\n  }, vueGlobale ? "Vue Mensuelle" : "Vue Globale"))), loading ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], null, "Chargement...") : renderTableauFacturation(), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(DateEnvoiModal, {\n    open: openDateModal,\n    onClose: () => setOpenDateModal(false),\n    situation: selectedSituation,\n    onSubmit: handleDateModalSubmit\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(PaiementModal, {\n    open: openPaiementModal,\n    onClose: () => setOpenPaiementModal(false),\n    situation: selectedSituation,\n    onSubmit: handlePaiementModalSubmit\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: openBanqueModal,\n    onClose: () => setOpenBanqueModal(false)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "S\\xE9lectionner une banque"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      p: 2,\n      minWidth: 300\n    }\n  }, banques.map(banque => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    key: banque.id,\n    fullWidth: true,\n    variant: "text",\n    onClick: () => handleBanqueChange(selectedSituationForBanque === null || selectedSituationForBanque === void 0 ? void 0 : selectedSituationForBanque.id, banque.id),\n    sx: {\n      justifyContent: "flex-start",\n      textAlign: "left",\n      mb: 1,\n      p: 2,\n      border: "1px solid #e0e0e0",\n      "&:hover": {\n        backgroundColor: "rgba(27, 120, 188, 0.1)",\n        borderColor: "rgba(27, 120, 188, 1)"\n      }\n    }\n  }, banque.nom_banque)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    variant: "contained",\n    onClick: () => {\n      setOpenBanqueModal(false);\n      setOpenCreateBanqueModal(true);\n    },\n    sx: {\n      mt: 2,\n      p: 1,\n      backgroundColor: "rgba(27, 120, 188, 1)",\n      color: "white",\n      fontSize: "0.8rem",\n      minWidth: "auto",\n      "&:hover": {\n        backgroundColor: "rgba(27, 120, 188, 0.8)"\n      }\n    }\n  }, "+ Ajouter une nouvelle banque"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    onClick: () => setOpenBanqueModal(false)\n  }, "Annuler"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    open: openCreateBanqueModal,\n    onClose: () => setOpenCreateBanqueModal(false)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], null, "Cr\\xE9er une nouvelle banque"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      p: 2,\n      minWidth: 300\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    fullWidth: true,\n    label: "Nom de la banque",\n    value: newBanqueName,\n    onChange: e => setNewBanqueName(e.target.value),\n    sx: {\n      mb: 2\n    },\n    onKeyPress: e => {\n      if (e.key === "Enter") {\n        handleCreateBanque();\n      }\n    }\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    onClick: () => setOpenCreateBanqueModal(false)\n  }, "Annuler"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    onClick: handleCreateBanque,\n    variant: "contained"\n  }, "Cr\\xE9er"))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TableauFacturation);\n\n//# sourceURL=webpack://frontend/./src/components/chantier/TableauFacturation.js?')},"./src/components/pdf_drive_functions.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   downloadPDFFromDrive: () => (/* binding */ downloadPDFFromDrive),\n/* harmony export */   generateDevisMarchePDFDrive: () => (/* binding */ generateDevisMarchePDFDrive),\n/* harmony export */   generateDevisTravauxPDFDrive: () => (/* binding */ generateDevisTravauxPDFDrive),\n/* harmony export */   generateMonthlyAgentsPDFDrive: () => (/* binding */ generateMonthlyAgentsPDFDrive),\n/* harmony export */   generatePlanningHebdoDrive: () => (/* binding */ generatePlanningHebdoDrive)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/**\r\n * Fonctions pour la génération de PDFs avec stockage automatique dans le Drive AWS S3\r\n */\n\n\n\n// Configuration de base\nconst API_BASE_URL = window.location.hostname === "localhost" ? "http://localhost:8000/api" : "/api"; // URL relative pour la production\n\n/**\r\n * Génère le planning hebdomadaire et le stocke dans le Drive\r\n */\nconst generatePlanningHebdoDrive = async (week, year) => {\n  // Afficher l\'indicateur de chargement immédiatement\n  showLoadingNotification(`Génération du planning hebdomadaire semaine ${week}/${year} vers le Drive...`);\n  try {\n    const response = await axios__WEBPACK_IMPORTED_MODULE_0__["default"].get(`${API_BASE_URL}/planning-hebdo-pdf-drive/`, {\n      params: {\n        week,\n        year\n      },\n      withCredentials: true\n    });\n    if (response.data.success) {\n      // Afficher une notification de succès avec bouton de redirection\n      showSuccessNotification(response.data.message, response.data.drive_url);\n      return response.data;\n    } else {\n      throw new Error(response.data.error || "Erreur inconnue");\n    }\n  } catch (error) {\n    // Vérifier si c\'est un conflit de fichier\n    if (error.response && error.response.status === 500 && error.response.data && error.response.data.error && error.response.data.error.includes("Conflit de fichier détecté")) {\n      // Émettre un événement personnalisé pour ouvrir le modal de conflit\n      const conflictId = `planning_${week}_${year}_${Date.now()}`;\n      const conflictEvent = new CustomEvent("openConflictDialog", {\n        detail: {\n          conflictId: conflictId,\n          // Identifiant unique pour ce conflit\n          fileName: `PH S${week} ${String(year).slice(-2)}.pdf`,\n          // Nom correct pour le planning - NE PAS TRANSFORMER\n          existingFilePath: `Agents/Document_Generaux/PlanningHebdo/${year}/`,\n          conflictMessage: "Un fichier avec le même nom existe déjà dans le Drive.",\n          documentType: "planning_hebdo",\n          societeName: "Société par défaut",\n          week: week,\n          year: year,\n          previewUrl: `${window.location.origin}/api/preview-planning-hebdo/?week=${week}&year=${year}`\n        }\n      });\n      window.dispatchEvent(conflictEvent);\n\n      // Masquer la notification de chargement\n      hideLoadingNotification();\n      return {\n        conflict_detected: true,\n        error: "Conflit de fichier détecté"\n      };\n    }\n\n    // Autres erreurs\n    showErrorNotification(`Erreur: ${error.message}`);\n    throw error;\n  }\n};\n\n/**\r\n * Génère le rapport mensuel des agents et le stocke dans le Drive\r\n */\nconst generateMonthlyAgentsPDFDrive = async (month, year) => {\n  // Afficher l\'indicateur de chargement immédiatement\n  showLoadingNotification(`Génération du rapport mensuel agents ${month}/${year} vers le Drive...`);\n  try {\n    const response = await axios__WEBPACK_IMPORTED_MODULE_0__["default"].get(`${API_BASE_URL}/generate-monthly-agents-pdf-drive/`, {\n      params: {\n        month,\n        year\n      },\n      withCredentials: true\n    });\n    if (response.data.success) {\n      // Afficher une notification de succès avec bouton de redirection\n      showSuccessNotification(response.data.message, response.data.drive_url);\n      return response.data;\n    } else {\n      throw new Error(response.data.error || "Erreur inconnue");\n    }\n  } catch (error) {\n    // Vérifier si c\'est un conflit de fichier\n    if (error.response && error.response.status === 500 && error.response.data && error.response.data.error && error.response.data.error.includes("Conflit de fichier détecté")) {\n      // Émettre un événement personnalisé pour ouvrir le modal de conflit\n      const conflictId = `rapport_${month}_${year}_${Date.now()}`;\n      const conflictEvent = new CustomEvent("openConflictDialog", {\n        detail: {\n          conflictId: conflictId,\n          // Identifiant unique pour ce conflit\n          fileName: `RapportComptable Septembre ${String(year).slice(-2)}.pdf`,\n          // Nom correct avec mois en français\n          existingFilePath: "Agents/Document_Generaux/Rapport_mensuel/",\n          conflictMessage: "Un fichier avec le même nom existe déjà dans le Drive.",\n          documentType: "rapport_agents",\n          societeName: "Société par défaut",\n          month: month,\n          year: year,\n          previewUrl: `${window.location.origin}/api/preview-monthly-agents-report/?month=${month}&year=${year}`\n        }\n      });\n      window.dispatchEvent(conflictEvent);\n\n      // Masquer la notification de chargement\n      hideLoadingNotification();\n      return {\n        conflict_detected: true,\n        error: "Conflit de fichier détecté"\n      };\n    }\n\n    // Autres erreurs\n    showErrorNotification(`Erreur: ${error.message}`);\n    throw error;\n  }\n};\n\n/**\r\n * Génère le devis de travaux et le stocke dans le Drive\r\n */\nconst generateDevisTravauxPDFDrive = async (chantierId, chantierName) => {\n  // Afficher l\'indicateur de chargement immédiatement\n  showLoadingNotification(`Génération du devis travaux ${chantierName} vers le Drive...`);\n  try {\n    console.log(`🚀 Génération du devis travaux ${chantierName} vers le Drive...`);\n    const response = await axios__WEBPACK_IMPORTED_MODULE_0__["default"].get(`${API_BASE_URL}/generate-devis-travaux-pdf-drive/`, {\n      params: {\n        chantier_id: chantierId,\n        chantier_name: chantierName\n      },\n      withCredentials: true\n    });\n    if (response.data.success) {\n      console.log("✅ PDF généré et stocké avec succès dans le Drive");\n\n      // Afficher une notification de succès avec bouton de redirection\n      showSuccessNotification(response.data.message, response.data.drive_url);\n      return response.data;\n    } else {\n      throw new Error(response.data.error || "Erreur inconnue");\n    }\n  } catch (error) {\n    console.error("❌ Erreur lors de la génération du devis travaux:", error);\n    showErrorNotification(`Erreur: ${error.message}`);\n    throw error;\n  }\n};\n\n/**\r\n * Génère le devis de marché et le stocke dans le Drive\r\n */\nconst generateDevisMarchePDFDrive = async (devisId, appelOffresId, appelOffresName, societeName, onSuccess, onError) => {\n  // Afficher l\'indicateur de chargement immédiatement\n  showLoadingNotification(`Génération du devis marché ${appelOffresName} vers le Drive...`);\n  try {\n    console.log(`🚀 Génération du devis marché ${appelOffresName} vers le Drive...`);\n\n    // Utiliser l\'endpoint existant pour générer le PDF\n    const response = await axios__WEBPACK_IMPORTED_MODULE_0__["default"].get(`${API_BASE_URL}/generate-devis-marche-pdf-drive/`, {\n      params: {\n        devis_id: devisId,\n        appel_offres_id: appelOffresId,\n        appel_offres_name: appelOffresName,\n        societe_name: societeName\n      },\n      withCredentials: true\n    });\n    if (response.data.success) {\n      console.log("✅ PDF généré et stocké avec succès dans le Drive");\n\n      // Vérifier s\'il y a un conflit détecté\n      if (response.data.conflict_detected) {\n        console.log("⚠️ Conflit de fichier détecté pour l\'appel d\'offres");\n\n        // Émettre un événement personnalisé pour ouvrir le modal de conflit\n        const conflictId = `appel_offres_${appelOffresId}_${Date.now()}`;\n        const conflictEvent = new CustomEvent("openConflictDialog", {\n          detail: {\n            conflictId: conflictId,\n            fileName: response.data.file_name,\n            displayFileName: response.data.file_name,\n            // Nom complet du devis\n            existingFilePath: response.data.file_path.substring(0, response.data.file_path.lastIndexOf("/") + 1),\n            conflictMessage: "Un fichier avec le même nom existe déjà dans le Drive pour cet appel d\'offres.",\n            documentType: "devis_marche",\n            societeName: societeName,\n            appelOffresId: appelOffresId,\n            appelOffresName: appelOffresName,\n            devisId: devisId,\n            previewUrl: `${window.location.origin}/api/preview-saved-devis/${devisId}/`,\n            drive_url: response.data.drive_url,\n            file_path: response.data.file_path\n          }\n        });\n        window.dispatchEvent(conflictEvent);\n\n        // Masquer la notification de chargement\n        hideLoadingNotification();\n        return {\n          conflict_detected: true,\n          error: "Conflit de fichier détecté"\n        };\n      }\n\n      // Afficher une notification de succès avec bouton de redirection (comme le planning hebdo)\n      showSuccessNotification(response.data.message, response.data.drive_url);\n\n      // Appeler le callback de succès si fourni (pour compatibilité)\n      if (onSuccess) {\n        onSuccess(response.data);\n      }\n      return response.data;\n    } else {\n      throw new Error(response.data.error || "Erreur inconnue");\n    }\n  } catch (error) {\n    console.error("❌ Erreur lors de la génération du devis marché:", error);\n\n    // Vérifier si c\'est un conflit de fichier\n    if (error.response && error.response.status === 500 && error.response.data && error.response.data.error && error.response.data.error.includes("Conflit de fichier détecté")) {\n      // Construire le nom correct du fichier (comme le backend le ferait)\n      const devisName = `DEV-${String(devisId).padStart(3, "0")}-25 - ${appelOffresName}`;\n      const fileName = `${devisName}.pdf`;\n\n      // Construire le chemin correct (comme le backend le ferait avec custom_slugify)\n      const customSlugify = text => {\n        if (!text) return "";\n        text = text.replace(/\\s+/g, " ").trim(); // Normalize multiple spaces to single space\n        text = text.replace(/\\s+/g, "-"); // Replace spaces with hyphens\n        text = text.replace(/[^a-zA-Z0-9\\-_.]/g, ""); // Remove special characters\n        text = text.replace(/-+/g, "-"); // Replace multiple hyphens with single\n        text = text.trim("-");\n        if (text) {\n          const parts = text.split("-");\n          const capitalizedParts = [];\n          for (const part of parts) {\n            if (part) {\n              capitalizedParts.push(part[0].toUpperCase() + part.slice(1).toLowerCase());\n            }\n          }\n          text = capitalizedParts.join("-");\n        }\n        return text || "Dossier";\n      };\n      const societeSlug = customSlugify(societeName);\n      const appelOffresSlug = customSlugify(appelOffresName);\n      const existingFilePath = `Appels_Offres/${societeSlug}/${appelOffresSlug}/Devis/Devis_Marche/`;\n      const filePath = `${existingFilePath}${fileName}`;\n\n      // Émettre un événement personnalisé pour ouvrir le modal de conflit\n      const conflictId = `appel_offres_${appelOffresId}_${Date.now()}`;\n      const conflictEvent = new CustomEvent("openConflictDialog", {\n        detail: {\n          conflictId: conflictId,\n          fileName: fileName,\n          // Nom correct du devis\n          displayFileName: fileName,\n          // Nom complet du devis\n          existingFilePath: existingFilePath,\n          conflictMessage: "Un fichier avec le même nom existe déjà dans le Drive pour cet appel d\'offres.",\n          documentType: "devis_marche",\n          societeName: societeName,\n          appelOffresId: appelOffresId,\n          appelOffresName: appelOffresName,\n          devisId: devisId,\n          previewUrl: `${window.location.origin}/api/preview-saved-devis/${devisId}/`,\n          file_path: filePath,\n          // Chemin complet du fichier\n          drive_url: `/drive?path=${filePath}&sidebar=closed&focus=file&_t=${Date.now()}`\n        }\n      });\n      window.dispatchEvent(conflictEvent);\n\n      // Masquer la notification de chargement\n      hideLoadingNotification();\n      return {\n        conflict_detected: true,\n        error: "Conflit de fichier détecté"\n      };\n    }\n\n    // Autres erreurs\n    showErrorNotification(`Erreur: ${error.message}`);\n\n    // Appeler le callback d\'erreur si fourni (pour compatibilité)\n    if (onError) {\n      onError(error);\n    }\n    throw error;\n  }\n};\n\n/**\r\n * Télécharge un PDF depuis le Drive S3\r\n */\nconst downloadPDFFromDrive = async s3Path => {\n  try {\n    console.log(`📥 Téléchargement du PDF depuis le Drive: ${s3Path}`);\n    const response = await axios__WEBPACK_IMPORTED_MODULE_0__["default"].get(`${API_BASE_URL}/download-pdf-from-s3/`, {\n      params: {\n        path: s3Path\n      },\n      responseType: "blob",\n      withCredentials: true\n    });\n\n    // Créer un lien de téléchargement\n    const url = window.URL.createObjectURL(new Blob([response.data]));\n    const link = document.createElement("a");\n    link.href = url;\n    link.setAttribute("download", s3Path.split("/").pop());\n    document.body.appendChild(link);\n    link.click();\n    link.remove();\n    window.URL.revokeObjectURL(url);\n    console.log("✅ PDF téléchargé avec succès");\n  } catch (error) {\n    console.error("❌ Erreur lors du téléchargement:", error);\n    showErrorNotification(`Erreur de téléchargement: ${error.message}`);\n    throw error;\n  }\n};\n\n/**\r\n * Affiche un indicateur de chargement\r\n */\nconst showLoadingNotification = message => {\n  // Supprimer toute notification de chargement existante\n  const existingLoading = document.getElementById("loading-notification");\n  if (existingLoading) {\n    existingLoading.remove();\n  }\n\n  // Créer une notification de chargement\n  const notification = document.createElement("div");\n  notification.id = "loading-notification";\n  notification.style.cssText = `\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background: linear-gradient(135deg, #2196F3, #1976D2);\n    color: white;\n    padding: 20px;\n    border-radius: 12px;\n    box-shadow: 0 8px 25px rgba(0,0,0,0.3);\n    z-index: 10000;\n    font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif;\n    max-width: 400px;\n    animation: slideIn 0.5s ease-out;\n  `;\n  notification.innerHTML = `\n    <div style="display: flex; align-items: center; margin-bottom: 15px;">\n      <div style="\n        width: 24px;\n        height: 24px;\n        border: 3px solid rgba(255,255,255,0.3);\n        border-top: 3px solid white;\n        border-radius: 50%;\n        animation: spin 1s linear infinite;\n        margin-right: 12px;\n      "></div>\n      <h3 style="margin: 0; font-size: 18px; font-weight: 600;">Génération en cours...</h3>\n    </div>\n    <p style="margin: 0; line-height: 1.5; opacity: 0.9;">${message}</p>\n  `;\n\n  // Ajouter les styles CSS pour l\'animation de rotation\n  if (!document.getElementById("loading-styles")) {\n    const style = document.createElement("style");\n    style.id = "loading-styles";\n    style.textContent = `\n      @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n    `;\n    document.head.appendChild(style);\n  }\n\n  // Ajouter la notification au DOM\n  document.body.appendChild(notification);\n  return notification;\n};\n\n/**\r\n * Masque l\'indicateur de chargement\r\n */\nconst hideLoadingNotification = () => {\n  const loadingNotification = document.getElementById("loading-notification");\n  if (loadingNotification) {\n    loadingNotification.style.animation = "slideOut 0.5s ease-in";\n    setTimeout(() => {\n      if (loadingNotification.parentNode) {\n        loadingNotification.parentNode.removeChild(loadingNotification);\n      }\n    }, 500);\n  }\n};\n\n/**\r\n * Vérifie si un fichier existe dans S3 avant de rediriger\r\n */\nconst waitForFileToExist = async (filePath, maxAttempts = 10, delay = 1000) => {\n  console.log(`🔍 Vérification de l\'existence du fichier: ${filePath}`);\n  console.log(`⏰ Début de la vérification à: ${new Date().toLocaleTimeString()}`);\n  for (let attempt = 1; attempt <= maxAttempts; attempt++) {\n    try {\n      console.log(`🔄 Tentative ${attempt}/${maxAttempts} - ${new Date().toLocaleTimeString()}`);\n\n      // Faire une requête HEAD pour vérifier l\'existence du fichier\n      const response = await axios__WEBPACK_IMPORTED_MODULE_0__["default"].head(`${API_BASE_URL}/download-pdf-from-s3/`, {\n        params: {\n          path: filePath\n        },\n        withCredentials: true,\n        timeout: 5000\n      });\n      if (response.status === 200) {\n        console.log(`✅ Fichier trouvé après ${attempt} tentative(s) - ${new Date().toLocaleTimeString()}`);\n        console.log(`📊 Temps total: ${attempt * delay / 1000} secondes`);\n        return true;\n      }\n    } catch (error) {\n      var _error$response, _error$response2;\n      console.log(`⏳ Tentative ${attempt}/${maxAttempts} - Fichier pas encore disponible - ${new Date().toLocaleTimeString()}`);\n      console.log(`❌ Erreur détaillée:`, (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status, (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n    }\n\n    // Attendre avant la prochaine tentative\n    if (attempt < maxAttempts) {\n      console.log(`⏱️ Attente de ${delay}ms avant la prochaine tentative...`);\n      await new Promise(resolve => setTimeout(resolve, delay));\n    }\n  }\n  console.log(`⚠️ Fichier non trouvé après ${maxAttempts} tentatives - ${new Date().toLocaleTimeString()}`);\n  console.log(`📊 Temps total écoulé: ${maxAttempts * delay / 1000} secondes`);\n  return false;\n};\n\n/**\r\n * Affiche une notification de succès avec bouton de redirection\r\n */\nconst showSuccessNotification = (message, driveUrl) => {\n  // Masquer d\'abord l\'indicateur de chargement\n  hideLoadingNotification();\n\n  // Créer une notification personnalisée\n  const notification = document.createElement("div");\n  notification.style.cssText = `\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background: linear-gradient(135deg, #4CAF50, #45a049);\n    color: white;\n    padding: 20px;\n    border-radius: 12px;\n    box-shadow: 0 8px 25px rgba(0,0,0,0.3);\n    z-index: 10000;\n    font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif;\n    max-width: 400px;\n    animation: slideIn 0.5s ease-out;\n  `;\n  notification.innerHTML = `\n    <div style="display: flex; align-items: center; margin-bottom: 15px;">\n      <span style="font-size: 24px; margin-right: 12px;">✅</span>\n      <h3 style="margin: 0; font-size: 18px; font-weight: 600;">PDF Généré avec Succès !</h3>\n    </div>\n    <p style="margin: 0 0 15px 0; line-height: 1.5; opacity: 0.9;">${message}</p>\n    <div style="display: flex; gap: 10px;">\n      <button id="view-in-drive" style="\n        background: rgba(255,255,255,0.2);\n        border: 2px solid rgba(255,255,255,0.3);\n        color: white;\n        padding: 10px 20px;\n        border-radius: 8px;\n        cursor: pointer;\n        font-weight: 600;\n        transition: all 0.3s ease;\n        flex: 1;\n      " onmouseover="this.style.background=\'rgba(255,255,255,0.3)\'" onmouseout="this.style.background=\'rgba(255,255,255,0.2)\'">\n        📁 Voir dans le Drive\n      </button>\n      <button id="close-notification" style="\n        background: rgba(255,255,255,0.1);\n        border: 2px solid rgba(255,255,255,0.2);\n        color: white;\n        padding: 10px 15px;\n        border-radius: 8px;\n        cursor: pointer;\n        font-weight: 600;\n        transition: all 0.3s ease;\n      " onmouseover="this.style.background=\'rgba(255,255,255,0.2)\'" onmouseout="this.style.background=\'rgba(255,255,255,0.1)\'">\n        ✕\n      </button>\n    </div>\n  `;\n\n  // Ajouter les styles CSS pour l\'animation\n  if (!document.getElementById("notification-styles")) {\n    const style = document.createElement("style");\n    style.id = "notification-styles";\n    style.textContent = `\n      @keyframes slideIn {\n        from { transform: translateX(100%); opacity: 0; }\n        to { transform: translateX(0); opacity: 1; }\n      }\n      @keyframes slideOut {\n        from { transform: translateX(0); opacity: 1; }\n        to { transform: translateX(100%); opacity: 0; }\n      }\n    `;\n    document.head.appendChild(style);\n  }\n\n  // Ajouter la notification au DOM\n  document.body.appendChild(notification);\n\n  // DÉSACTIVER le bouton pendant 3 secondes pour forcer l\'attente\n  const viewButton = document.getElementById("view-in-drive");\n  viewButton.disabled = true;\n  viewButton.style.opacity = "0.6";\n  viewButton.innerHTML = "⏳ Synchronisation... (3s)";\n\n  // Compte à rebours visuel\n  let countdown = 3;\n  const countdownInterval = setInterval(() => {\n    countdown--;\n    if (countdown > 0) {\n      viewButton.innerHTML = `⏳ Synchronisation... (${countdown}s)`;\n    } else {\n      // Réactiver le bouton\n      clearInterval(countdownInterval);\n      viewButton.disabled = false;\n      viewButton.style.opacity = "1";\n      viewButton.innerHTML = "📁 Voir dans le Drive";\n      console.log("✅ Bouton réactivé après 3 secondes de synchronisation");\n    }\n  }, 1000);\n\n  // Gérer le clic sur "Voir dans le Drive"\n  viewButton.addEventListener("click", async () => {\n    if (driveUrl) {\n      // Extraire le chemin du fichier depuis l\'URL\n      const urlParams = new URLSearchParams(driveUrl.split("?")[1]);\n      const filePath = urlParams.get("path");\n      if (filePath) {\n        // Le bouton est déjà désactivé pendant 3 secondes, pas besoin de le redésactiver\n        console.log("🔍 Début de la vérification du fichier...");\n        try {\n          // PREMIÈRE REQUÊTE : Vérifier que le fichier existe dans S3\n          console.log("🔍 Première vérification de l\'existence du fichier...");\n          const fileExists = await waitForFileToExist(filePath, 10, 1000); // 10 tentatives, 1 seconde entre chaque\n\n          if (fileExists) {\n            console.log("✅ Fichier confirmé dans S3 après première vérification");\n          } else {\n            console.log("⚠️ Fichier non trouvé après première vérification, attente supplémentaire...");\n            // Attendre 2 secondes supplémentaires pour la synchronisation\n            await new Promise(resolve => setTimeout(resolve, 2000));\n          }\n\n          // DEUXIÈME REQUÊTE : Vérification finale avant redirection\n          console.log("🔍 Deuxième vérification finale...");\n          const finalCheck = await waitForFileToExist(filePath, 5, 500); // 5 tentatives, 0.5 seconde entre chaque\n\n          if (finalCheck) {\n            console.log("✅ Fichier confirmé dans S3 après deuxième vérification");\n          } else {\n            console.log("⚠️ Fichier non trouvé après deuxième vérification, vérification du dossier parent...");\n\n            // Vérifier si le dossier parent existe\n            const parentPath = filePath.substring(0, filePath.lastIndexOf("/"));\n            console.log(`🔍 Vérification du dossier parent: ${parentPath}`);\n            try {\n              // Faire une requête HEAD sur le dossier parent\n              const parentResponse = await axios__WEBPACK_IMPORTED_MODULE_0__["default"].head(`${API_BASE_URL}/download-pdf-from-s3/`, {\n                params: {\n                  path: parentPath\n                },\n                withCredentials: true,\n                timeout: 5000\n              });\n              if (parentResponse.status === 200) {\n                console.log("✅ Dossier parent confirmé, redirection vers le dossier parent");\n                driveUrl = driveUrl.replace(`path=${filePath}`, `path=${parentPath}`);\n              } else {\n                console.log("⚠️ Dossier parent non trouvé, redirection vers le dossier racine");\n                // Rediriger vers le dossier racine des appels d\'offres\n                const rootPath = "Appels_Offres";\n                driveUrl = driveUrl.replace(`path=${filePath}`, `path=${rootPath}`);\n              }\n            } catch (error) {\n              console.log("❌ Erreur lors de la vérification du dossier parent, redirection vers le dossier racine");\n              const rootPath = "Appels_Offres";\n              driveUrl = driveUrl.replace(`path=${filePath}`, `path=${rootPath}`);\n            }\n          }\n        } catch (error) {\n          console.log("⚠️ Erreur lors de la vérification, redirection intelligente...");\n          // En cas d\'erreur, essayer de rediriger vers le dossier parent\n          try {\n            const parentPath = filePath.substring(0, filePath.lastIndexOf("/"));\n            console.log(`🔄 Tentative de redirection vers le dossier parent: ${parentPath}`);\n            driveUrl = driveUrl.replace(`path=${filePath}`, `path=${parentPath}`);\n          } catch (fallbackError) {\n            console.log("❌ Erreur lors de la redirection vers le dossier parent, redirection vers le dossier racine");\n            const rootPath = "Appels_Offres";\n            driveUrl = driveUrl.replace(`path=${filePath}`, `path=${rootPath}`);\n          }\n        }\n\n        // Le bouton reste activé (il a été réactivé après 3 secondes)\n      }\n\n      // Améliorer l\'URL pour pointer exactement vers le fichier\n      let enhancedDriveUrl = driveUrl;\n\n      // Log de l\'URL originale\n      console.log("🔗 URL originale reçue:", driveUrl);\n\n      // Si l\'URL contient un paramètre path, s\'assurer qu\'elle pointe vers le bon dossier\n      if (driveUrl.includes("path=")) {\n        // Vérifier si les paramètres sont déjà présents pour éviter les doublons\n        if (!driveUrl.includes("sidebar=closed")) {\n          enhancedDriveUrl = driveUrl + "&sidebar=closed&focus=file";\n        } else {\n          // Les paramètres sont déjà présents, utiliser l\'URL telle quelle\n          enhancedDriveUrl = driveUrl;\n        }\n      }\n\n      // Log de l\'URL finale\n      console.log("🔗 URL finale pour redirection:", enhancedDriveUrl);\n\n      // SOLUTION : Toujours créer une nouvelle fenêtre pour éviter les problèmes de cache\n      console.log("🆕 Création d\'une nouvelle fenêtre Drive (solution anti-cache)");\n\n      // Fermer la fenêtre existante si elle existe\n      try {\n        const existingWindow = window.open("", "drive_window");\n        if (existingWindow && !existingWindow.closed) {\n          console.log("🗑️ Fermeture de la fenêtre Drive existante");\n          existingWindow.close();\n        }\n      } catch (error) {\n        console.log("⚠️ Impossible de fermer la fenêtre existante:", error);\n      }\n\n      // Attendre un court délai avant de créer la nouvelle fenêtre\n      await new Promise(resolve => setTimeout(resolve, 100));\n\n      // Créer une nouvelle fenêtre avec un nom unique\n      const uniqueWindowName = `drive_window_${Date.now()}`;\n      console.log(`🆕 Création de la fenêtre Drive: ${uniqueWindowName}`);\n\n      // SOLUTION 1: Ajouter plusieurs paramètres cache-busting à l\'URL\n      const timestamp = Date.now();\n      const randomId = Math.random().toString(36).substring(7);\n      const cacheBuster = `&_cb=${timestamp}&_r=${randomId}&_v=${Math.floor(Math.random() * 10000)}`;\n      const urlWithCacheBuster = enhancedDriveUrl.includes("?") ? `${enhancedDriveUrl}${cacheBuster}` : `${enhancedDriveUrl}?${cacheBuster.substring(1)}`;\n      console.log("🔗 URL avec cache-busting multiple:", urlWithCacheBuster);\n\n      // SOLUTION 3: Nettoyer le cache local avant l\'ouverture\n      try {\n        // Nettoyer le sessionStorage et localStorage liés au Drive\n        const keysToRemove = [];\n        for (let i = 0; i < sessionStorage.length; i++) {\n          const key = sessionStorage.key(i);\n          if (key && (key.includes("drive") || key.includes("cache"))) {\n            keysToRemove.push(key);\n          }\n        }\n        keysToRemove.forEach(key => sessionStorage.removeItem(key));\n        console.log("🧹 Cache local nettoyé:", keysToRemove.length, "éléments supprimés");\n      } catch (error) {\n        console.log("⚠️ Impossible de nettoyer le cache local:", error);\n      }\n\n      // SOLUTION ROBUSTE: Créer d\'abord une fenêtre vide, puis naviguer\n      const driveWindow = window.open("about:blank", uniqueWindowName, "width=1400,height=900,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,location=no,status=no");\n      if (driveWindow) {\n        console.log("✅ Fenêtre Drive créée avec succès");\n\n        // Attendre que la fenêtre soit prête, puis naviguer\n        setTimeout(() => {\n          try {\n            console.log("🔄 Navigation vers l\'URL du Drive...");\n\n            // Utiliser location.replace pour forcer la navigation\n            driveWindow.location.replace(enhancedDriveUrl);\n            console.log("✅ Navigation forcée vers:", enhancedDriveUrl);\n            driveWindow.focus();\n\n            // Vérification supplémentaire après 1 seconde\n            setTimeout(() => {\n              try {\n                console.log("🔍 Vérification de l\'URL finale dans la fenêtre:", driveWindow.location.href);\n                if (driveWindow.location.href.includes("about:blank")) {\n                  console.log("⚠️ La fenêtre est toujours sur about:blank, tentative de navigation alternative...");\n                  driveWindow.location.href = enhancedDriveUrl;\n                }\n              } catch (error) {\n                console.log("⚠️ Impossible de vérifier l\'URL de la fenêtre:", error);\n              }\n            }, 1000);\n          } catch (error) {\n            console.log("❌ Erreur lors de la navigation:", error);\n\n            // Fallback: Essayer avec location.href\n            try {\n              console.log("🔄 Tentative de fallback avec location.href...");\n              driveWindow.location.href = enhancedDriveUrl;\n              driveWindow.focus();\n            } catch (fallbackError) {\n              console.log("❌ Échec du fallback:", fallbackError);\n            }\n          }\n        }, 300); // Délai pour s\'assurer que la fenêtre est prête\n      } else {\n        console.log("❌ Échec de la création de la fenêtre Drive");\n\n        // SOLUTION DE FALLBACK: Redirection dans la fenêtre actuelle\n        console.log("🔄 Fallback: Redirection dans la fenêtre actuelle...");\n        try {\n          window.location.href = enhancedDriveUrl;\n        } catch (error) {\n          console.log("❌ Échec de la redirection dans la fenêtre actuelle:", error);\n        }\n      }\n    }\n  });\n\n  // Gérer le clic sur "Fermer"\n  document.getElementById("close-notification").addEventListener("click", () => {\n    notification.style.animation = "slideOut 0.5s ease-in";\n    setTimeout(() => {\n      if (notification.parentNode) {\n        notification.parentNode.removeChild(notification);\n      }\n    }, 500);\n  });\n\n  // Auto-fermeture après 8 secondes\n  setTimeout(() => {\n    if (notification.parentNode) {\n      notification.style.animation = "slideOut 0.5s ease-in";\n      setTimeout(() => {\n        if (notification.parentNode) {\n          notification.parentNode.removeChild(notification);\n        }\n      }, 500);\n    }\n  }, 8000);\n};\n\n/**\r\n * Affiche une notification d\'erreur\r\n */\nconst showErrorNotification = message => {\n  // Masquer d\'abord l\'indicateur de chargement\n  hideLoadingNotification();\n\n  // Créer une notification d\'erreur personnalisée\n  const notification = document.createElement("div");\n  notification.style.cssText = `\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background: linear-gradient(135deg, #f44336, #d32f2f);\n    color: white;\n    padding: 20px;\n    border-radius: 12px;\n    box-shadow: 0 8px 25px rgba(0,0,0,0.3);\n    z-index: 10000;\n    font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif;\n    max-width: 400px;\n    animation: slideIn 0.5s ease-out;\n  `;\n  notification.innerHTML = `\n    <div style="display: flex; align-items: center; margin-bottom: 15px;">\n      <span style="font-size: 24px; margin-right: 12px;">❌</span>\n      <h3 style="margin: 0; font-size: 18px; font-weight: 600;">Erreur de Génération</h3>\n    </div>\n    <p style="margin: 0 0 15px 0; line-height: 1.5; opacity: 0.9;">${message}</p>\n    <button id="close-error-notification" style="\n      background: rgba(255,255,255,0.2);\n      border: 2px solid rgba(255,255,255,0.3);\n      color: white;\n      padding: 10px 20px;\n      border-radius: 8px;\n      cursor: pointer;\n      font-weight: 600;\n      transition: all 0.3s ease;\n      width: 100%;\n    " onmouseover="this.style.background=\'rgba(255,255,255,0.3)\'" onmouseout="this.style.background=\'rgba(255,255,255,0.2)\'">\n      Fermer\n    </button>\n  `;\n\n  // Ajouter la notification au DOM\n  document.body.appendChild(notification);\n\n  // Gérer le clic sur "Fermer"\n  document.getElementById("close-error-notification").addEventListener("click", () => {\n    notification.style.animation = "slideOut 0.5s ease-in";\n    setTimeout(() => {\n      if (notification.parentNode) {\n        notification.parentNode.removeChild(notification);\n      }\n    }, 500);\n  });\n\n  // Auto-fermeture après 6 secondes\n  setTimeout(() => {\n    if (notification.parentNode) {\n      notification.style.animation = "slideOut 0.5s ease-in";\n      setTimeout(() => {\n        if (notification.parentNode) {\n          notification.parentNode.removeChild(notification);\n        }\n      }, 500);\n    }\n  }, 6000);\n};\n\n//# sourceURL=webpack://frontend/./src/components/pdf_drive_functions.js?')},"./src/hooks/useAuth.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAuth: () => (/* binding */ useAuth)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _services_authService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/authService */ "./src/services/authService.js");\n\n\nconst useAuth = () => {\n  const [isAuthenticated, setIsAuthenticated] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n\n  // Vérifier l\'authentification au chargement\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    checkAuth();\n  }, []);\n\n  // Écouter les changements d\'état d\'authentification\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const unsubscribe = _services_authService__WEBPACK_IMPORTED_MODULE_1__["default"].addListener((auth, userData) => {\n      setIsAuthenticated(auth);\n      setUser(userData);\n      setLoading(false);\n    });\n    return unsubscribe;\n  }, []);\n\n  // Vérification périodique de l\'authentification (toutes les 5 minutes)\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const interval = setInterval(() => {\n      if (isAuthenticated) {\n        checkAuth(); // Vérifier côté serveur\n      }\n    }, 5 * 60 * 1000); // 5 minutes\n\n    return () => clearInterval(interval);\n  }, [isAuthenticated]);\n  const checkAuth = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async () => {\n    try {\n      const isAuth = await _services_authService__WEBPACK_IMPORTED_MODULE_1__["default"].checkAuth();\n      setIsAuthenticated(isAuth);\n      if (isAuth) {\n        setUser(_services_authService__WEBPACK_IMPORTED_MODULE_1__["default"].getAuthStatus().user);\n      }\n    } catch (error) {\n      console.error("Erreur vérification auth:", error);\n      // En cas d\'erreur, considérer comme non authentifié\n      setIsAuthenticated(false);\n      setUser(null);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  const login = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async credentials => {\n    setLoading(true);\n    try {\n      const result = await _services_authService__WEBPACK_IMPORTED_MODULE_1__["default"].login(credentials);\n      return result;\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  const logout = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async () => {\n    setLoading(true);\n    try {\n      const result = await _services_authService__WEBPACK_IMPORTED_MODULE_1__["default"].logout();\n      if (result.success) {\n        setIsAuthenticated(false);\n        setUser(null);\n      }\n      return result;\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  return {\n    isAuthenticated,\n    user,\n    loading,\n    login,\n    logout,\n    checkAuth\n  };\n};\n\n//# sourceURL=webpack://frontend/./src/hooks/useAuth.js?')},"./src/hooks/useSituationsManager.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useSituationsManager: () => (/* binding */ useSituationsManager)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\n\nconst useSituationsManager = chantierId => {\n  const [situations, setSituations] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n\n  // Charger les situations\n  const loadSituations = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async () => {\n    if (!chantierId) return;\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_1__["default"].get(`/api/chantier/${chantierId}/situations/`);\n      setSituations(response.data);\n    } catch (err) {\n      setError(err.message);\n      console.error("Erreur lors du chargement des situations:", err);\n    } finally {\n      setLoading(false);\n    }\n  }, [chantierId]);\n\n  // Mettre à jour une situation\n  const updateSituation = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (situationId, updateData) => {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_1__["default"].patch(`/api/situations/${situationId}/`, updateData);\n\n      // Mettre à jour la situation dans l\'état local\n      setSituations(prevSituations => prevSituations.map(situation => situation.id === situationId ? {\n        ...situation,\n        ...response.data\n      } : situation));\n      return response.data;\n    } catch (err) {\n      setError(err.message);\n      console.error("Erreur lors de la mise à jour de la situation:", err);\n      throw err;\n    }\n  }, []);\n\n  // Mettre à jour la date d\'envoi et le délai de paiement\n  const updateDateEnvoi = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (situationId, dateEnvoi, delaiPaiement) => {\n    const updateData = {};\n    if (dateEnvoi !== undefined) updateData.date_envoi = dateEnvoi;\n    if (delaiPaiement !== undefined) updateData.delai_paiement = delaiPaiement;\n    return await updateSituation(situationId, updateData);\n  }, [updateSituation]);\n\n  // Mettre à jour le paiement\n  const updatePaiement = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (situationId, montantRecu, datePaiementReel) => {\n    const updateData = {};\n    if (montantRecu !== undefined) updateData.montant_reel_ht = montantRecu;\n    if (datePaiementReel !== undefined) updateData.date_paiement_reel = datePaiementReel;\n    return await updateSituation(situationId, updateData);\n  }, [updateSituation]);\n\n  // Charger les situations au montage et quand chantierId change\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    loadSituations();\n  }, [loadSituations]);\n  return {\n    situations,\n    loading,\n    error,\n    loadSituations,\n    updateSituation,\n    updateDateEnvoi,\n    updatePaiement\n  };\n};\n\n//# sourceURL=webpack://frontend/./src/hooks/useSituationsManager.js?')},"./src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _components_App_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components/App.js */ "./src/components/App.js");\n\n\n//# sourceURL=webpack://frontend/./src/index.js?')},"./src/services/authService.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/axios */ "./src/utils/axios.js");\n\nclass AuthService {\n  constructor() {\n    this.isAuthenticated = false;\n    this.user = null;\n    this.listeners = [];\n  }\n\n  // Vérifier l\'authentification\n  async checkAuth() {\n    try {\n      // Vérifier d\'abord la version de l\'application\n      const versionResponse = await _utils_axios__WEBPACK_IMPORTED_MODULE_0__["default"].get("/app-version/");\n      const currentVersion = versionResponse.data.version;\n      const storedVersion = localStorage.getItem("app_version");\n\n      // Si la version a changé, forcer la déconnexion\n      if (storedVersion && storedVersion !== currentVersion) {\n        console.log(`Version de l\'application mise à jour: ${storedVersion} → ${currentVersion}`);\n        await this.forceLogout();\n        return false;\n      }\n\n      // Mettre à jour la version stockée\n      localStorage.setItem("app_version", currentVersion);\n      const response = await _utils_axios__WEBPACK_IMPORTED_MODULE_0__["default"].get("/auth/check/");\n      if (response.data.authenticated) {\n        this.isAuthenticated = true;\n        this.user = response.data.user;\n        this.notifyListeners();\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error("Erreur vérification auth:", error);\n      return false;\n    }\n  }\n\n  // Connexion\n  async login(credentials) {\n    try {\n      const response = await _utils_axios__WEBPACK_IMPORTED_MODULE_0__["default"].post("/auth/login/", credentials);\n      if (response.data.success) {\n        this.isAuthenticated = true;\n        this.user = response.data.user;\n        this.notifyListeners();\n\n        // Vérifier si un rechargement est nécessaire après mise à jour\n        const needsReload = localStorage.getItem("needs_reload_after_login");\n        if (needsReload === "true") {\n          console.log("🔄 Rechargement automatique de la page après mise à jour");\n          localStorage.removeItem("needs_reload_after_login");\n\n          // Rechargement automatique immédiat\n          window.location.reload();\n          return {\n            success: true,\n            user: response.data.user,\n            reloading: true\n          };\n        }\n        return {\n          success: true,\n          user: response.data.user\n        };\n      }\n      return {\n        success: false,\n        error: response.data.error\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: "Erreur de connexion"\n      };\n    }\n  }\n\n  // Déconnexion normale\n  async logout() {\n    try {\n      await _utils_axios__WEBPACK_IMPORTED_MODULE_0__["default"].post("/auth/logout/");\n      return await this.cleanupAfterLogout();\n    } catch (error) {\n      console.error("Erreur lors de la déconnexion:", error);\n      return await this.cleanupAfterLogout();\n    }\n  }\n\n  // Déconnexion forcée (pour les mises à jour)\n  async forceLogout() {\n    console.log("Déconnexion forcée suite à une mise à jour de l\'application");\n    const result = await this.cleanupAfterLogout();\n\n    // Marquer qu\'un rechargement est nécessaire après reconnexion\n    localStorage.setItem("needs_reload_after_login", "true");\n    return result;\n  }\n\n  // Nettoyage après déconnexion\n  async cleanupAfterLogout() {\n    // 1. Nettoyer l\'état local\n    this.isAuthenticated = false;\n    this.user = null;\n\n    // 2. Nettoyer le localStorage\n    localStorage.removeItem("user");\n    localStorage.removeItem("chantier_history");\n    localStorage.removeItem("app_version"); // Important pour forcer la reconnexion\n\n    // 3. Demander au serveur de supprimer les cookies HttpOnly\n    try {\n      await _utils_axios__WEBPACK_IMPORTED_MODULE_0__["default"].post("/auth/logout/", {}, {\n        withCredentials: true // Envoyer les cookies au serveur\n      });\n      console.log("✅ Cookies supprimés côté serveur");\n    } catch (error) {\n      console.log("⚠️ Erreur lors du nettoyage serveur:", error);\n    }\n\n    // 4. Nettoyer les cookies non-HttpOnly (comme csrftoken)\n    document.cookie.split(";").forEach(function (c) {\n      const cookieName = c.split("=")[0].trim();\n      // Ne pas essayer de supprimer les cookies HttpOnly (sessionid)\n      if (cookieName && !cookieName.includes("sessionid")) {\n        document.cookie = cookieName + "=;expires=" + new Date().toUTCString() + ";path=/";\n      }\n    });\n    this.notifyListeners();\n    return {\n      success: true\n    };\n  }\n\n  // Gestion des listeners pour les changements d\'état\n  addListener(callback) {\n    this.listeners.push(callback);\n    return () => this.listeners = this.listeners.filter(l => l !== callback);\n  }\n  notifyListeners() {\n    this.listeners.forEach(callback => callback(this.isAuthenticated, this.user));\n  }\n\n  // Getters\n  getAuthStatus() {\n    return {\n      isAuthenticated: this.isAuthenticated,\n      user: this.user\n    };\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new AuthService());\n\n//# sourceURL=webpack://frontend/./src/services/authService.js?')},"./src/services/bonCommandeService.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bonCommandeService: () => (/* binding */ bonCommandeService)\n/* harmony export */ });\nconst BASE_URL = "/api";\nconst bonCommandeService = {\n  getFournisseurs: async () => {\n    const response = await fetch(`${BASE_URL}/get_fournisseurs/`);\n    if (!response.ok) throw new Error("Erreur lors de la récupération des fournisseurs");\n    return response.json();\n  },\n  getProductsByFournisseur: async (fournisseurId, codeRange = null) => {\n    const url = `${BASE_URL}/products-by-fournisseur/?fournisseur=${encodeURIComponent(fournisseurId)}${codeRange ? `&code_range=${codeRange}` : ""}`;\n    const response = await fetch(url);\n    if (!response.ok) throw new Error("Erreur lors de la récupération des produits");\n    return response.json();\n  },\n  generateBonCommandeNumber: async () => {\n    const response = await fetch(`${BASE_URL}/generate-bon-commande-number/`);\n    if (!response.ok) throw new Error("Erreur lors de la génération du numéro");\n    return response.json();\n  },\n  createBonCommande: async bonCommandeData => {\n    const response = await fetch(`${BASE_URL}/bons-commande/`, {\n      method: "POST",\n      headers: {\n        "Content-Type": "application/json"\n      },\n      body: JSON.stringify(bonCommandeData)\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.error || "Erreur lors de la création du bon de commande");\n    }\n    return response.json();\n  }\n};\n\n//# sourceURL=webpack://frontend/./src/services/bonCommandeService.js?')},"./src/services/chantierService.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateChantierMaterialCost: () => (/* binding */ updateChantierMaterialCost)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n\nconst updateChantierMaterialCost = async chantierId => {\n  try {\n    // Récupérer tous les bons de commande du chantier\n    const response = await axios__WEBPACK_IMPORTED_MODULE_0__["default"].get(`/api/chantier/${chantierId}/bons-commande/`);\n\n    // Calculer le total des bons de commande\n    const totalMaterialCost = response.data.reduce((total, bon) => {\n      return total + (parseFloat(bon.montant_total) || 0);\n    }, 0);\n\n    // Mettre à jour le chantier avec le nouveau cout_materiel\n    await axios__WEBPACK_IMPORTED_MODULE_0__["default"].patch(`/api/chantier/${chantierId}/`, {\n      cout_materiel: totalMaterialCost\n    });\n    return totalMaterialCost;\n  } catch (error) {\n    console.error("Erreur lors de la mise à jour du coût matériel:", error);\n    throw error;\n  }\n};\n\n//# sourceURL=webpack://frontend/./src/services/chantierService.js?')},"./src/styles/tableStyles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ActionCell: () => (/* binding */ ActionCell),\n/* harmony export */   AlignedCell: () => (/* binding */ AlignedCell),\n/* harmony export */   BaseTextField: () => (/* binding */ BaseTextField),\n/* harmony export */   CenteredTableCell: () => (/* binding */ CenteredTableCell),\n/* harmony export */   CenteredTextField: () => (/* binding */ CenteredTextField),\n/* harmony export */   ChantierCell: () => (/* binding */ ChantierCell),\n/* harmony export */   DevisNumber: () => (/* binding */ DevisNumber),\n/* harmony export */   FilterCell: () => (/* binding */ FilterCell),\n/* harmony export */   PriceTextField: () => (/* binding */ PriceTextField),\n/* harmony export */   StatusCell: () => (/* binding */ StatusCell),\n/* harmony export */   StyledBox: () => (/* binding */ StyledBox),\n/* harmony export */   StyledSelect: () => (/* binding */ StyledSelect),\n/* harmony export */   StyledTableContainer: () => (/* binding */ StyledTableContainer),\n/* harmony export */   StyledTextField: () => (/* binding */ StyledTextField),\n/* harmony export */   commonStyles: () => (/* binding */ commonStyles),\n/* harmony export */   getStatusStyle: () => (/* binding */ getStatusStyle)\n/* harmony export */ });\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableContainer/TableContainer.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TableCell/TableCell.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Select/Select.js");\n/* harmony import */ var _mui_material_colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @mui/material/colors */ "./node_modules/@mui/material/colors/blue.js");\n/* harmony import */ var _mui_material_styles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material/styles */ "./node_modules/@mui/material/styles/styled.js");\n\n\n\n\n// Styles communs\nconst commonStyles = {\n  box: {\n    width: "100%",\n    padding: "0 20px",\n    boxSizing: "border-box",\n    position: "relative"\n  },\n  tableContainer: {\n    margin: "0 auto",\n    width: "100%",\n    "& .MuiTable-root": {\n      minWidth: "100%"\n    }\n  },\n  filterCell: {\n    backgroundColor: "rgba(27, 120, 188, 1)",\n    "& .MuiTableSortLabel-root": {\n      color: "white"\n    }\n  },\n  alignedCell: {\n    backgroundColor: "rgba(27, 120, 188, 1)",\n    "& .MuiTableSortLabel-root": {\n      width: "100%",\n      justifyContent: "center",\n      color: "white"\n    }\n  },\n  baseTextField: {\n    "& .MuiInputBase-input": {\n      color: "white"\n    },\n    "& .MuiInputLabel-root": {\n      color: "white"\n    },\n    "& .MuiInput-underline:before": {\n      borderBottomColor: "white"\n    }\n  },\n  styledTextField: {\n    "& .MuiInputBase-input": {\n      textAlign: "left"\n    },\n    "& .MuiInputLabel-root": {\n      textAlign: "left"\n    }\n  },\n  centeredTextField: {\n    "& .MuiInputBase-input": {\n      textAlign: "center"\n    },\n    "& .MuiInputLabel-root": {\n      textAlign: "center"\n    }\n  },\n  priceTextField: {\n    "& .MuiInputBase-input": {\n      fontWeight: 600,\n      textAlign: "center"\n    }\n  },\n  devisNumber: {\n    color: "rgba(27, 120, 188, 1)",\n    fontWeight: 700,\n    fontFamily: "Merriweather, serif",\n    "&:hover": {\n      color: _mui_material_colors__WEBPACK_IMPORTED_MODULE_0__["default"][700],\n      textDecoration: "underline"\n    }\n  },\n  chantierCell: {\n    fontWeight: 600,\n    textAlign: "left"\n  },\n  centeredTableCell: {\n    textAlign: "center"\n  },\n  select: {\n    color: "white",\n    marginTop: "3px",\n    "&:before": {\n      borderBottomColor: "white"\n    },\n    "& .MuiSelect-icon": {\n      color: "white"\n    }\n  },\n  actionCell: {\n    width: "50px",\n    padding: "8px",\n    textAlign: "center"\n  }\n};\n\n// Fonction pour le style dynamique du statut\nconst getStatusStyle = status => ({\n  color: status === "En attente" ? "orange" : status === "Refusé" ? "red" : status === "Validé" ? "green" : "inherit",\n  fontWeight: 600\n});\n\n// Container Styles\nconst StyledBox = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_1__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"])(commonStyles.box);\n\n// Table Container\nconst StyledTableContainer = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_1__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"])(commonStyles.tableContainer);\n\n// Header Cells\nconst FilterCell = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_1__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"])(commonStyles.filterCell);\nconst AlignedCell = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_1__["default"])(FilterCell)(commonStyles.alignedCell);\n\n// Custom Text Fields\nconst BaseTextField = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_1__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"])(commonStyles.baseTextField);\nconst StyledTextField = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_1__["default"])(BaseTextField)(commonStyles.styledTextField);\nconst CenteredTextField = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_1__["default"])(BaseTextField)(commonStyles.centeredTextField);\n\n// Specific Field Styles\nconst PriceTextField = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_1__["default"])(CenteredTextField)(commonStyles.priceTextField);\n\n// Body Cells\nconst DevisNumber = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_1__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"])(commonStyles.devisNumber);\nconst ChantierCell = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_1__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"])(commonStyles.chantierCell);\nconst CenteredTableCell = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_1__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"])(commonStyles.centeredTableCell);\nconst StatusCell = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_1__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"])(getStatusStyle);\nconst StyledSelect = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_1__["default"])(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"])(commonStyles.select);\nconst ActionCell = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_1__["default"])(CenteredTableCell)(commonStyles.actionCell);\n\n//# sourceURL=webpack://frontend/./src/styles/tableStyles.js?')},"./src/utils/axios.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n\n\n// Fonction pour obtenir le token CSRF depuis les cookies\nfunction getCSRFToken() {\n  const name = "csrftoken";\n  let cookieValue = null;\n  if (document.cookie && document.cookie !== "") {\n    const cookies = document.cookie.split(";");\n    for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i].trim();\n      if (cookie.substring(0, name.length + 1) === name + "=") {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n  return cookieValue;\n}\n\n// Fonction pour récupérer le token CSRF depuis le serveur\nasync function fetchCSRFToken() {\n  try {\n    // Faire une requête GET vers une URL qui génère un token CSRF\n    await axios__WEBPACK_IMPORTED_MODULE_0__["default"].get("/api/csrf-token/", {\n      withCredentials: true\n    });\n    return getCSRFToken();\n  } catch (error) {\n    console.warn("Impossible de récupérer le token CSRF:", error);\n    return null;\n  }\n}\n\n// Créer une instance Axios avec configuration par défaut\nconst axiosInstance = axios__WEBPACK_IMPORTED_MODULE_0__["default"].create({\n  baseURL: "/api/",\n  withCredentials: true,\n  headers: {\n    "Content-Type": "application/json"\n  }\n});\n\n// Intercepteur pour ajouter automatiquement le token CSRF\naxiosInstance.interceptors.request.use(async config => {\n  let csrfToken = getCSRFToken();\n\n  // Si pas de token CSRF, essayer de le récupérer\n  if (!csrfToken) {\n    csrfToken = await fetchCSRFToken();\n  }\n  if (csrfToken) {\n    config.headers["X-CSRFToken"] = csrfToken;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Intercepteur pour gérer les erreurs\naxiosInstance.interceptors.response.use(response => {\n  return response;\n}, async error => {\n  // Si erreur 403 CSRF, essayer de récupérer un nouveau token et refaire la requête\n  if (error.response && error.response.status === 403 && error.response.data && error.response.data.detail && error.response.data.detail.includes("CSRF")) {\n    console.log("Erreur CSRF détectée, tentative de récupération du token...");\n    try {\n      const newToken = await fetchCSRFToken();\n      if (newToken) {\n        // Refaire la requête avec le nouveau token\n        error.config.headers["X-CSRFToken"] = newToken;\n        return axiosInstance.request(error.config);\n      }\n    } catch (retryError) {\n      console.error("Échec de la récupération du token CSRF:", retryError);\n    }\n  }\n\n  // Gestion des erreurs d\'authentification (401)\n  if (error.response && error.response.status === 401) {\n    console.log("Erreur d\'authentification détectée, redirection vers login...");\n    // Rediriger vers la page de login\n    if (window.location.pathname !== "/login") {\n      window.location.href = "/login";\n    }\n  }\n  console.error("Axios error:", error);\n  return Promise.reject(error);\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (axiosInstance);\n\n//# sourceURL=webpack://frontend/./src/utils/axios.js?')},"./src/utils/axiosConfig.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n\n\n// Récupérer le token CSRF depuis les cookies\nfunction getCookie(name) {\n  let cookieValue = null;\n  if (document.cookie && document.cookie !== "") {\n    const cookies = document.cookie.split(";");\n    for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i].trim();\n      if (cookie.substring(0, name.length + 1) === name + "=") {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n  return cookieValue;\n}\n\n// Configurer Axios avec le token CSRF\naxios__WEBPACK_IMPORTED_MODULE_0__["default"].defaults.headers.common["X-CSRFToken"] = getCookie("csrftoken");\naxios__WEBPACK_IMPORTED_MODULE_0__["default"].defaults.withCredentials = true;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (axios__WEBPACK_IMPORTED_MODULE_0__["default"]);\n\n//# sourceURL=webpack://frontend/./src/utils/axiosConfig.js?')},"./src/utils/universalDriveGenerator.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addDocumentType: () => (/* binding */ addDocumentType),\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   generatePDFDrive: () => (/* binding */ generatePDFDrive),\n/* harmony export */   getSupportedDocumentTypes: () => (/* binding */ getSupportedDocumentTypes),\n/* harmony export */   isDocumentTypeSupported: () => (/* binding */ isDocumentTypeSupported)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ "../node_modules/axios/lib/axios.js");\n/**\r\n * Générateur universel de PDFs pour le Drive AWS S3\r\n * Système extensible pour tous les types de documents\r\n */\n\n\n\n// Configuration de base\nconst API_BASE_URL = window.location.hostname === "localhost" ? "http://localhost:8000/api" : "/api"; // URL relative pour la production\n\n/**\r\n * Configuration des types de documents supportés\r\n * Facilement extensible pour ajouter de nouveaux types\r\n */\nconst DOCUMENT_TYPES = {\n  devis_chantier: {\n    apiEndpoint: "/generate-devis-marche-pdf-drive/",\n    previewUrl: data => `/api/preview-saved-devis/${data.devisId}/`,\n    requiredFields: ["devisId", "appelOffresId", "appelOffresName", "societeName"],\n    displayName: "Devis de Chantier",\n    // Fonction pour construire le nom d\'affichage\n    getDisplayName: data => `Devis ${data.numero || data.devisId}`,\n    // Fonction pour construire le message de chargement\n    getLoadingMessage: data => `Génération du devis ${data.appelOffresName} vers le Drive...`\n  },\n  contrat_sous_traitance: {\n    apiEndpoint: "/generate-contrat-sous-traitance-pdf-drive/",\n    previewUrl: data => `/api/preview-contrat/${data.contratId}/`,\n    requiredFields: ["contratId", "chantierId", "chantierName", "societeName", "sousTraitantName"],\n    displayName: "Contrat Sous-traitance",\n    getDisplayName: data => `Contrat ${data.sousTraitantName}`,\n    getLoadingMessage: data => `Génération du contrat ${data.sousTraitantName} vers le Drive...`\n  },\n  avenant_sous_traitance: {\n    apiEndpoint: "/generate-avenant-sous-traitance-pdf-drive/",\n    previewUrl: data => `/api/preview-avenant/${data.avenantId}/`,\n    requiredFields: ["avenantId", "contratId", "chantierId", "chantierName", "societeName", "sousTraitantName", "numeroAvenant"],\n    displayName: "Avenant Sous-traitance",\n    getDisplayName: data => `Avenant ${data.numeroAvenant} - ${data.sousTraitantName}`,\n    getLoadingMessage: data => `Génération de l\'avenant ${data.numeroAvenant} vers le Drive...`\n  },\n  devis_normal: {\n    apiEndpoint: "/generate-devis-travaux-pdf-drive/",\n    previewUrl: data => `/api/preview-saved-devis/${data.devisId}/`,\n    requiredFields: ["devisId", "chantierId", "chantierName", "societeName"],\n    displayName: "Devis Normal",\n    // Fonction pour construire le nom d\'affichage\n    getDisplayName: data => `Devis ${data.numero || data.devisId}`,\n    // Fonction pour construire le message de chargement\n    getLoadingMessage: data => `Génération du devis ${data.chantierName} vers le Drive...`\n  },\n  situation: {\n    apiEndpoint: "/generate-situation-pdf-drive/",\n    previewUrl: data => `/api/preview-situation/${data.situationId}/`,\n    requiredFields: ["situationId", "chantierId", "chantierName", "societeName", "numeroSituation"],\n    displayName: "Situation",\n    getDisplayName: data => `Situation ${data.numeroSituation}`,\n    getLoadingMessage: data => `Génération de la situation ${data.numeroSituation} vers le Drive...`\n  },\n  bon_commande: {\n    apiEndpoint: "/generate-bon-commande-pdf-drive/",\n    previewUrl: data => `/api/preview-saved-bon-commande/${data.bonCommandeId}/`,\n    requiredFields: ["bonCommandeId", "chantierId", "chantierName", "societeName", "numeroBonCommande", "fournisseurName"],\n    displayName: "Bon de Commande",\n    getDisplayName: data => `Bon de Commande ${data.numeroBonCommande}`,\n    getLoadingMessage: data => `Génération du bon de commande ${data.numeroBonCommande} vers le Drive...`\n  },\n  planning_hebdo: {\n    apiEndpoint: "/planning-hebdo-pdf-drive/",\n    previewUrl: data => `/api/preview-planning-hebdo/?week=${data.week}&year=${data.year}`,\n    requiredFields: ["week", "year"],\n    displayName: "Planning Hebdomadaire",\n    // Fonction pour construire le nom d\'affichage\n    getDisplayName: data => `Planning Semaine ${data.week}/${data.year}`,\n    // Fonction pour construire le message de chargement\n    getLoadingMessage: data => `Génération du planning hebdomadaire semaine ${data.week}/${data.year} vers le Drive...`\n  },\n  rapport_agents: {\n    apiEndpoint: "/generate-monthly-agents-pdf-drive/",\n    previewUrl: data => `/api/preview-monthly-agents-report/?month=${data.month}&year=${data.year}`,\n    requiredFields: ["month", "year"],\n    displayName: "Rapport Mensuel Agents",\n    // Fonction pour construire le nom d\'affichage\n    getDisplayName: data => `Rapport Agents ${data.month}/${data.year}`,\n    // Fonction pour construire le message de chargement\n    getLoadingMessage: data => `Génération du rapport mensuel agents ${data.month}/${data.year} vers le Drive...`\n  },\n  facture: {\n    apiEndpoint: "/generate-facture-pdf-drive/",\n    previewUrl: data => `/api/preview-facture/${data.factureId}/`,\n    requiredFields: ["factureId", "chantierId", "chantierName", "societeName", "numero"],\n    displayName: "Facture",\n    getDisplayName: data => `Facture ${data.numero}`,\n    getLoadingMessage: data => `Génération de la facture ${data.numero} vers le Drive...`\n  }\n  // Autres types à ajouter plus tard :\n  // \'situation\': { ... },\n  // \'rapport\': { ... }\n};\n\n/**\r\n * Fonction principale pour générer un PDF et l\'envoyer dans le Drive\r\n * @param {string} documentType - Type de document (\'devis_chantier\', \'facture\', etc.)\r\n * @param {Object} data - Données du document\r\n * @param {Object} callbacks - Callbacks optionnels { onSuccess, onError }\r\n * @param {boolean} forceReplace - Force le remplacement d\'un fichier existant\r\n * @returns {Promise<Object>} Résultat de la génération\r\n */\nconst generatePDFDrive = async (documentType, data, callbacks = {}, forceReplace = false) => {\n  try {\n    console.log(`🚀 Génération PDF Drive - Type: ${documentType}`, data);\n\n    // 1. Validation du type de document\n    const documentConfig = DOCUMENT_TYPES[documentType];\n    if (!documentConfig) {\n      throw new Error(`Type de document non supporté: ${documentType}`);\n    }\n\n    // 2. Validation des données requises\n    const missingFields = documentConfig.requiredFields.filter(field => !data[field]);\n    if (missingFields.length > 0) {\n      throw new Error(`Champs manquants pour ${documentType}: ${missingFields.join(", ")}`);\n    }\n\n    // 3. Affichage de la notification de chargement\n    const loadingMessage = documentConfig.getLoadingMessage ? documentConfig.getLoadingMessage(data) : `Génération du ${documentConfig.displayName} vers le Drive...`;\n    showLoadingNotification(loadingMessage);\n\n    // 4. Appel à l\'API Django\n    const apiParams = buildApiParams(documentType, data);\n\n    // Ajouter le paramètre force_replace si nécessaire\n    if (forceReplace) {\n      apiParams.force_replace = true;\n    }\n    const response = await axios__WEBPACK_IMPORTED_MODULE_0__["default"].get(`${API_BASE_URL}${documentConfig.apiEndpoint}`, {\n      params: apiParams,\n      withCredentials: true\n    });\n\n    // 5. Traitement de la réponse\n    if (response.data.success) {\n      console.log(`✅ PDF généré et stocké avec succès dans le Drive`);\n\n      // Vérifier s\'il y a un conflit détecté\n      if (response.data.conflict_detected) {\n        console.log(`⚠️ Conflit de fichier détecté pour ${documentType}`);\n        return handleConflict(documentType, data, response.data, callbacks);\n      }\n\n      // Succès - afficher notification et appeler callback\n      showSuccessNotification(response.data.message, response.data.drive_url);\n      if (callbacks.onSuccess) {\n        callbacks.onSuccess(response.data);\n      }\n      return response.data;\n    } else {\n      throw new Error(response.data.error || "Erreur inconnue");\n    }\n  } catch (error) {\n    console.error(`❌ Erreur lors de la génération du ${documentType}:`, error);\n\n    // Vérifier si c\'est un conflit de fichier\n    if (isConflictError(error)) {\n      return handleConflictFromError(documentType, data, error, callbacks);\n    }\n\n    // Autres erreurs\n    showErrorNotification(`Erreur: ${error.message}`);\n    if (callbacks.onError) {\n      callbacks.onError(error);\n    }\n    throw error;\n  }\n};\n\n/**\r\n * Construit les paramètres API selon le type de document\r\n */\nconst buildApiParams = (documentType, data) => {\n  switch (documentType) {\n    case "devis_chantier":\n      return {\n        devis_id: data.devisId,\n        appel_offres_id: data.appelOffresId,\n        appel_offres_name: data.appelOffresName,\n        societe_name: data.societeName\n      };\n    case "devis_normal":\n      return {\n        devis_id: data.devisId,\n        chantier_id: data.chantierId,\n        chantier_name: data.chantierName,\n        societe_name: data.societeName\n      };\n    case "contrat_sous_traitance":\n      return {\n        contrat_id: data.contratId,\n        chantier_id: data.chantierId,\n        chantier_name: data.chantierName,\n        societe_name: data.societeName,\n        sous_traitant_name: data.sousTraitantName\n      };\n    case "avenant_sous_traitance":\n      return {\n        avenant_id: data.avenantId,\n        contrat_id: data.contratId,\n        chantier_id: data.chantierId,\n        chantier_name: data.chantierName,\n        societe_name: data.societeName,\n        sous_traitant_name: data.sousTraitantName,\n        numero_avenant: data.numeroAvenant\n      };\n    case "situation":\n      return {\n        situation_id: data.situationId,\n        chantier_id: data.chantierId,\n        chantier_name: data.chantierName,\n        societe_name: data.societeName,\n        numero_situation: data.numeroSituation\n      };\n    case "bon_commande":\n      return {\n        bon_commande_id: data.bonCommandeId,\n        chantier_id: data.chantierId,\n        chantier_name: data.chantierName,\n        societe_name: data.societeName,\n        numero_bon_commande: data.numeroBonCommande,\n        fournisseur_name: data.fournisseurName\n      };\n    case "planning_hebdo":\n      return {\n        week: data.week,\n        year: data.year\n      };\n    case "rapport_agents":\n      return {\n        month: data.month,\n        year: data.year\n      };\n\n    // Autres types à ajouter ici\n    default:\n      return data;\n  }\n};\n\n/**\r\n * Gère les conflits de fichiers\r\n */\nconst handleConflict = (documentType, data, responseData, callbacks) => {\n  const documentConfig = DOCUMENT_TYPES[documentType];\n\n  // Construire les données du conflit\n  const conflictData = {\n    conflictId: `${documentType}_${data.devisId || data.appelOffresId}_${Date.now()}`,\n    fileName: responseData.file_name,\n    displayFileName: responseData.file_name,\n    existingFilePath: responseData.file_path.substring(0, responseData.file_path.lastIndexOf("/") + 1),\n    conflictMessage: `Un fichier avec le même nom existe déjà dans le Drive.`,\n    documentType: documentType,\n    societeName: data.societeName,\n    previewUrl: documentConfig.previewUrl(data),\n    drive_url: responseData.drive_url,\n    file_path: responseData.file_path,\n    // Données spécifiques au type de document\n    ...getDocumentSpecificData(documentType, data)\n  };\n\n  // Émettre l\'événement pour ouvrir le modal de conflit\n  const conflictEvent = new CustomEvent("openConflictDialog", {\n    detail: conflictData\n  });\n  window.dispatchEvent(conflictEvent);\n  hideLoadingNotification();\n  return {\n    conflict_detected: true,\n    error: "Conflit de fichier détecté"\n  };\n};\n\n/**\r\n * Gère les conflits détectés via les erreurs HTTP\r\n */\nconst handleConflictFromError = (documentType, data, error, callbacks) => {\n  const documentConfig = DOCUMENT_TYPES[documentType];\n\n  // Construire le nom et le chemin du fichier (comme le backend le ferait)\n  const fileName = buildFileName(documentType, data);\n  const filePath = buildFilePath(documentType, data, fileName);\n  const conflictData = {\n    conflictId: `${documentType}_${data.devisId || data.appelOffresId}_${Date.now()}`,\n    fileName: fileName,\n    displayFileName: fileName,\n    existingFilePath: filePath.substring(0, filePath.lastIndexOf("/") + 1),\n    conflictMessage: `Un fichier avec le même nom existe déjà dans le Drive.`,\n    documentType: documentType,\n    societeName: data.societeName,\n    previewUrl: documentConfig.previewUrl(data),\n    file_path: filePath,\n    drive_url: `/drive?path=${filePath}&sidebar=closed&focus=file&_t=${Date.now()}`,\n    // Données spécifiques au type de document\n    ...getDocumentSpecificData(documentType, data)\n  };\n\n  // Émettre l\'événement pour ouvrir le modal de conflit\n  const conflictEvent = new CustomEvent("openConflictDialog", {\n    detail: conflictData\n  });\n  window.dispatchEvent(conflictEvent);\n  hideLoadingNotification();\n  return {\n    conflict_detected: true,\n    error: "Conflit de fichier détecté"\n  };\n};\n\n/**\r\n * Construit le nom de fichier selon le type de document\r\n */\nconst buildFileName = (documentType, data) => {\n  switch (documentType) {\n    case "devis_chantier":\n      // Utiliser le numéro du devis depuis la DB (ex: "DEV-008-25 - Test Appel Offres")\n      return `${data.numero || data.devisId}.pdf`;\n    case "devis_normal":\n      // Utiliser le numéro du devis depuis la DB (ex: "DEV-008-25 - Test Chantier")\n      return `${data.numero || data.devisId}.pdf`;\n    case "contrat_sous_traitance":\n      // Nom du fichier : "Contrat [SousTraitant] - [Chantier].pdf"\n      const contratName = `Contrat ${data.sousTraitantName} - ${data.chantierName}`;\n      return `${contratName}.pdf`;\n    case "avenant_sous_traitance":\n      // Nom du fichier : "Avenant [Numero] [SousTraitant] - [Chantier].pdf"\n      const avenantName = `Avenant ${data.numeroAvenant} ${data.sousTraitantName} - ${data.chantierName}`;\n      return `${avenantName}.pdf`;\n    case "situation":\n      // Nom du fichier : "{numero_situation}.pdf"\n      return `${data.numeroSituation}.pdf`;\n    case "bon_commande":\n      // Nom du fichier : "{numero_bon_commande}.pdf"\n      return `${data.numeroBonCommande}.pdf`;\n    case "planning_hebdo":\n      return `PH S${data.week} ${String(data.year).slice(-2)}.pdf`;\n    case "rapport_agents":\n      const monthNames = ["Janvier", "Février", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"];\n      const monthName = monthNames[data.month - 1] || `Mois_${data.month}`;\n      return `RapportComptable_${monthName}_${String(data.year).slice(-2)}.pdf`;\n\n    // Autres types à ajouter ici\n    default:\n      return `${documentType}_${data.id || Date.now()}.pdf`;\n  }\n};\n\n/**\r\n * Construit le chemin de fichier selon le type de document\r\n */\nconst buildFilePath = (documentType, data, fileName) => {\n  switch (documentType) {\n    case "devis_chantier":\n      const societeSlug = customSlugify(data.societeName);\n      const appelOffresSlug = customSlugify(data.appelOffresName);\n      return `Appels_Offres/${societeSlug}/${appelOffresSlug}/Devis/Devis_Marche/${fileName}`;\n    case "devis_normal":\n      const societeNormalSlug = customSlugify(data.societeName);\n      const chantierSlug = customSlugify(data.chantierName);\n      return `Chantiers/${societeNormalSlug}/${chantierSlug}/Devis/${fileName}`;\n    case "contrat_sous_traitance":\n      const societeContratSlug = customSlugify(data.societeName);\n      const chantierContratSlug = customSlugify(data.chantierName);\n      const entrepriseContratSlug = customSlugify(data.sousTraitantName);\n      return `Chantiers/${societeContratSlug}/${chantierContratSlug}/Sous_Traitant/${entrepriseContratSlug}/${fileName}`;\n    case "avenant_sous_traitance":\n      const societeAvenantSlug = customSlugify(data.societeName);\n      const chantierAvenantSlug = customSlugify(data.chantierName);\n      const entrepriseAvenantSlug = customSlugify(data.sousTraitantName);\n      return `Chantiers/${societeAvenantSlug}/${chantierAvenantSlug}/Sous_Traitant/${entrepriseAvenantSlug}/${fileName}`;\n    case "situation":\n      const societeSituationSlug = customSlugify(data.societeName);\n      const chantierSituationSlug = customSlugify(data.chantierName);\n      return `Chantiers/${societeSituationSlug}/${chantierSituationSlug}/Situation/${fileName}`;\n    case "bon_commande":\n      const societeBonCommandeSlug = customSlugify(data.societeName);\n      const chantierBonCommandeSlug = customSlugify(data.chantierName);\n      const fournisseurSlug = customSlugify(data.fournisseurName);\n      return `Chantiers/${societeBonCommandeSlug}/${chantierBonCommandeSlug}/Bon_Commande/${fournisseurSlug}/${fileName}`;\n    case "planning_hebdo":\n      return `Agents/Document_Generaux/PlanningHebdo/${data.year}/${fileName}`;\n    case "rapport_agents":\n      return `Agents/Document_Generaux/Rapport_mensuel/${data.year}/${fileName}`;\n\n    // Autres types à ajouter ici\n    default:\n      return `Documents/${documentType}/${fileName}`;\n  }\n};\n\n/**\r\n * Retourne les données spécifiques au type de document pour le modal de conflit\r\n */\nconst getDocumentSpecificData = (documentType, data) => {\n  switch (documentType) {\n    case "devis_chantier":\n      return {\n        appelOffresId: data.appelOffresId,\n        appelOffresName: data.appelOffresName,\n        devisId: data.devisId,\n        numero: data.numero\n      };\n    case "devis_normal":\n      return {\n        chantierId: data.chantierId,\n        chantierName: data.chantierName,\n        devisId: data.devisId,\n        numero: data.numero\n      };\n    case "contrat_sous_traitance":\n      return {\n        contratId: data.contratId,\n        chantierId: data.chantierId,\n        chantierName: data.chantierName,\n        societeName: data.societeName,\n        sousTraitantName: data.sousTraitantName\n      };\n    case "avenant_sous_traitance":\n      return {\n        avenantId: data.avenantId,\n        contratId: data.contratId,\n        chantierId: data.chantierId,\n        chantierName: data.chantierName,\n        societeName: data.societeName,\n        sousTraitantName: data.sousTraitantName,\n        numeroAvenant: data.numeroAvenant\n      };\n    case "situation":\n      return {\n        situationId: data.situationId,\n        chantierId: data.chantierId,\n        chantierName: data.chantierName,\n        societeName: data.societeName,\n        numeroSituation: data.numeroSituation\n      };\n    case "bon_commande":\n      return {\n        bonCommandeId: data.bonCommandeId,\n        chantierId: data.chantierId,\n        chantierName: data.chantierName,\n        societeName: data.societeName,\n        numeroBonCommande: data.numeroBonCommande,\n        fournisseurName: data.fournisseurName\n      };\n    case "planning_hebdo":\n      return {\n        week: data.week,\n        year: data.year\n      };\n    case "rapport_agents":\n      return {\n        month: data.month,\n        year: data.year\n      };\n\n    // Autres types à ajouter ici\n    default:\n      return {};\n  }\n};\n\n/**\r\n * Vérifie si une erreur est liée à un conflit de fichier\r\n */\nconst isConflictError = error => {\n  return error.response && error.response.status === 500 && error.response.data && error.response.data.error && error.response.data.error.includes("Conflit de fichier détecté");\n};\n\n/**\r\n * Fonction utilitaire pour slugifier les noms (copiée de pdf_drive_functions.js)\r\n */\nconst customSlugify = text => {\n  if (!text) return "";\n  text = text.replace(/\\s+/g, " ").trim(); // Normalize multiple spaces to single space\n  text = text.replace(/\\s+/g, "-"); // Replace spaces with hyphens\n  text = text.replace(/[^a-zA-Z0-9\\-_.]/g, ""); // Remove special characters\n  text = text.replace(/-+/g, "-"); // Replace multiple hyphens with single\n  text = text.trim("-");\n  if (text) {\n    const parts = text.split("-");\n    const capitalizedParts = [];\n    for (const part of parts) {\n      if (part) {\n        capitalizedParts.push(part[0].toUpperCase() + part.slice(1).toLowerCase());\n      }\n    }\n    text = capitalizedParts.join("-");\n  }\n  return text || "Dossier";\n};\n\n// ============================================================================\n// FONCTIONS DE NOTIFICATION (copiées et adaptées de pdf_drive_functions.js)\n// ============================================================================\n\n/**\r\n * Affiche un indicateur de chargement\r\n */\nconst showLoadingNotification = message => {\n  // Supprimer toute notification de chargement existante\n  const existingLoading = document.getElementById("loading-notification");\n  if (existingLoading) {\n    existingLoading.remove();\n  }\n\n  // Créer une notification de chargement\n  const notification = document.createElement("div");\n  notification.id = "loading-notification";\n  notification.style.cssText = `\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background: linear-gradient(135deg, #2196F3, #1976D2);\n    color: white;\n    padding: 20px;\n    border-radius: 12px;\n    box-shadow: 0 8px 25px rgba(0,0,0,0.3);\n    z-index: 10000;\n    font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif;\n    max-width: 400px;\n    animation: slideIn 0.5s ease-out;\n  `;\n  notification.innerHTML = `\n    <div style="display: flex; align-items: center; margin-bottom: 15px;">\n      <div style="\n        width: 24px;\n        height: 24px;\n        border: 3px solid rgba(255,255,255,0.3);\n        border-top: 3px solid white;\n        border-radius: 50%;\n        animation: spin 1s linear infinite;\n        margin-right: 12px;\n      "></div>\n      <h3 style="margin: 0; font-size: 18px; font-weight: 600;">Génération en cours...</h3>\n    </div>\n    <p style="margin: 0; line-height: 1.5; opacity: 0.9;">${message}</p>\n  `;\n\n  // Ajouter les styles CSS pour l\'animation de rotation\n  if (!document.getElementById("loading-styles")) {\n    const style = document.createElement("style");\n    style.id = "loading-styles";\n    style.textContent = `\n      @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n      @keyframes slideIn {\n        from { transform: translateX(100%); opacity: 0; }\n        to { transform: translateX(0); opacity: 1; }\n      }\n      @keyframes slideOut {\n        from { transform: translateX(0); opacity: 1; }\n        to { transform: translateX(100%); opacity: 0; }\n      }\n    `;\n    document.head.appendChild(style);\n  }\n\n  // Ajouter la notification au DOM\n  document.body.appendChild(notification);\n  return notification;\n};\n\n/**\r\n * Masque l\'indicateur de chargement\r\n */\nconst hideLoadingNotification = () => {\n  const loadingNotification = document.getElementById("loading-notification");\n  if (loadingNotification) {\n    loadingNotification.style.animation = "slideOut 0.5s ease-in";\n    setTimeout(() => {\n      if (loadingNotification.parentNode) {\n        loadingNotification.parentNode.removeChild(loadingNotification);\n      }\n    }, 500);\n  }\n};\n\n/**\r\n * Affiche une notification de succès avec bouton de redirection\r\n */\nconst showSuccessNotification = (message, driveUrl) => {\n  // Masquer d\'abord l\'indicateur de chargement\n  hideLoadingNotification();\n\n  // Créer une notification personnalisée\n  const notification = document.createElement("div");\n  notification.style.cssText = `\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background: linear-gradient(135deg, #4CAF50, #45a049);\n    color: white;\n    padding: 20px;\n    border-radius: 12px;\n    box-shadow: 0 8px 25px rgba(0,0,0,0.3);\n    z-index: 10000;\n    font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif;\n    max-width: 400px;\n    animation: slideIn 0.5s ease-out;\n  `;\n  notification.innerHTML = `\n    <div style="display: flex; align-items: center; margin-bottom: 15px;">\n      <span style="font-size: 24px; margin-right: 12px;">✅</span>\n      <h3 style="margin: 0; font-size: 18px; font-weight: 600;">PDF Généré avec Succès !</h3>\n    </div>\n    <p style="margin: 0 0 15px 0; line-height: 1.5; opacity: 0.9;">${message}</p>\n    <div style="display: flex; gap: 10px;">\n      <button id="view-in-drive" style="\n        background: rgba(255,255,255,0.2);\n        border: 2px solid rgba(255,255,255,0.3);\n        color: white;\n        padding: 10px 20px;\n        border-radius: 8px;\n        cursor: pointer;\n        font-weight: 600;\n        transition: all 0.3s ease;\n        flex: 1;\n      " onmouseover="this.style.background=\'rgba(255,255,255,0.3)\'" onmouseout="this.style.background=\'rgba(255,255,255,0.2)\'">\n        📁 Voir dans le Drive\n      </button>\n      <button id="close-notification" style="\n        background: rgba(255,255,255,0.1);\n        border: 2px solid rgba(255,255,255,0.2);\n        color: white;\n        padding: 10px 15px;\n        border-radius: 8px;\n        cursor: pointer;\n        font-weight: 600;\n        transition: all 0.3s ease;\n      " onmouseover="this.style.background=\'rgba(255,255,255,0.2)\'" onmouseout="this.style.background=\'rgba(255,255,255,0.1)\'">\n        ✕\n      </button>\n    </div>\n  `;\n\n  // Ajouter la notification au DOM\n  document.body.appendChild(notification);\n\n  // DÉSACTIVER le bouton pendant 3 secondes pour forcer l\'attente\n  const viewButton = document.getElementById("view-in-drive");\n  viewButton.disabled = true;\n  viewButton.style.opacity = "0.6";\n  viewButton.innerHTML = "⏳ Synchronisation... (3s)";\n\n  // Compte à rebours visuel\n  let countdown = 3;\n  const countdownInterval = setInterval(() => {\n    countdown--;\n    if (countdown > 0) {\n      viewButton.innerHTML = `⏳ Synchronisation... (${countdown}s)`;\n    } else {\n      // Réactiver le bouton\n      clearInterval(countdownInterval);\n      viewButton.disabled = false;\n      viewButton.style.opacity = "1";\n      viewButton.innerHTML = "📁 Voir dans le Drive";\n      console.log("✅ Bouton réactivé après 3 secondes de synchronisation");\n    }\n  }, 1000);\n\n  // Gérer le clic sur "Voir dans le Drive"\n  viewButton.addEventListener("click", async () => {\n    if (driveUrl) {\n      // Extraire le chemin du fichier depuis l\'URL\n      const urlParams = new URLSearchParams(driveUrl.split("?")[1]);\n      const filePath = urlParams.get("path");\n      if (filePath) {\n        console.log("🔍 Début de la vérification du fichier...");\n        try {\n          // Vérifier que le fichier existe dans S3\n          const fileExists = await waitForFileToExist(filePath, 10, 1000);\n          if (fileExists) {\n            console.log("✅ Fichier confirmé dans S3");\n          } else {\n            console.log("⚠️ Fichier non trouvé, attente supplémentaire...");\n            await new Promise(resolve => setTimeout(resolve, 2000));\n          }\n\n          // Vérification finale\n          const finalCheck = await waitForFileToExist(filePath, 5, 500);\n          if (!finalCheck) {\n            console.log("⚠️ Fichier non trouvé, vérification du dossier parent...");\n            const parentPath = filePath.substring(0, filePath.lastIndexOf("/"));\n            try {\n              const parentResponse = await axios__WEBPACK_IMPORTED_MODULE_0__["default"].head(`${API_BASE_URL}/download-pdf-from-s3/`, {\n                params: {\n                  path: parentPath\n                },\n                withCredentials: true,\n                timeout: 5000\n              });\n              if (parentResponse.status === 200) {\n                console.log("✅ Dossier parent confirmé");\n                driveUrl = driveUrl.replace(`path=${filePath}`, `path=${parentPath}`);\n              } else {\n                console.log("⚠️ Redirection vers le dossier racine");\n                const rootPath = "Appels_Offres";\n                driveUrl = driveUrl.replace(`path=${filePath}`, `path=${rootPath}`);\n              }\n            } catch (error) {\n              console.log("❌ Erreur, redirection vers le dossier racine");\n              const rootPath = "Appels_Offres";\n              driveUrl = driveUrl.replace(`path=${filePath}`, `path=${rootPath}`);\n            }\n          }\n        } catch (error) {\n          console.log("⚠️ Erreur lors de la vérification, redirection intelligente...");\n          try {\n            const parentPath = filePath.substring(0, filePath.lastIndexOf("/"));\n            driveUrl = driveUrl.replace(`path=${filePath}`, `path=${parentPath}`);\n          } catch (fallbackError) {\n            const rootPath = "Appels_Offres";\n            driveUrl = driveUrl.replace(`path=${filePath}`, `path=${rootPath}`);\n          }\n        }\n      }\n\n      // Améliorer l\'URL pour pointer exactement vers le fichier\n      let enhancedDriveUrl = driveUrl;\n      if (driveUrl.includes("path=")) {\n        if (!driveUrl.includes("sidebar=closed")) {\n          enhancedDriveUrl = driveUrl + "&sidebar=closed&focus=file";\n        }\n      }\n\n      // Créer une nouvelle fenêtre pour éviter les problèmes de cache\n      console.log("🆕 Création d\'une nouvelle fenêtre Drive");\n      try {\n        const existingWindow = window.open("", "drive_window");\n        if (existingWindow && !existingWindow.closed) {\n          console.log("🗑️ Fermeture de la fenêtre Drive existante");\n          existingWindow.close();\n        }\n      } catch (error) {\n        console.log("⚠️ Impossible de fermer la fenêtre existante:", error);\n      }\n      await new Promise(resolve => setTimeout(resolve, 100));\n      const uniqueWindowName = `drive_window_${Date.now()}`;\n      console.log(`🆕 Création de la fenêtre Drive: ${uniqueWindowName}`);\n\n      // Nettoyer le cache local\n      try {\n        const keysToRemove = [];\n        for (let i = 0; i < sessionStorage.length; i++) {\n          const key = sessionStorage.key(i);\n          if (key && (key.includes("drive") || key.includes("cache"))) {\n            keysToRemove.push(key);\n          }\n        }\n        keysToRemove.forEach(key => sessionStorage.removeItem(key));\n        console.log("🧹 Cache local nettoyé:", keysToRemove.length, "éléments supprimés");\n      } catch (error) {\n        console.log("⚠️ Impossible de nettoyer le cache local:", error);\n      }\n\n      // Créer la fenêtre et naviguer\n      const driveWindow = window.open("about:blank", uniqueWindowName, "width=1400,height=900,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,location=no,status=no");\n      if (driveWindow) {\n        console.log("✅ Fenêtre Drive créée avec succès");\n        setTimeout(() => {\n          try {\n            console.log("🔄 Navigation vers l\'URL du Drive...");\n            driveWindow.location.replace(enhancedDriveUrl);\n            console.log("✅ Navigation forcée vers:", enhancedDriveUrl);\n            driveWindow.focus();\n          } catch (error) {\n            console.log("❌ Erreur lors de la navigation:", error);\n            try {\n              driveWindow.location.href = enhancedDriveUrl;\n              driveWindow.focus();\n            } catch (fallbackError) {\n              console.log("❌ Échec du fallback:", fallbackError);\n            }\n          }\n        }, 300);\n      } else {\n        console.log("❌ Échec de la création de la fenêtre Drive");\n        console.log("🔄 Fallback: Redirection dans la fenêtre actuelle...");\n        try {\n          window.location.href = enhancedDriveUrl;\n        } catch (error) {\n          console.log("❌ Échec de la redirection dans la fenêtre actuelle:", error);\n        }\n      }\n    }\n  });\n\n  // Gérer le clic sur "Fermer"\n  document.getElementById("close-notification").addEventListener("click", () => {\n    notification.style.animation = "slideOut 0.5s ease-in";\n    setTimeout(() => {\n      if (notification.parentNode) {\n        notification.parentNode.removeChild(notification);\n      }\n    }, 500);\n  });\n\n  // Auto-fermeture après 8 secondes\n  setTimeout(() => {\n    if (notification.parentNode) {\n      notification.style.animation = "slideOut 0.5s ease-in";\n      setTimeout(() => {\n        if (notification.parentNode) {\n          notification.parentNode.removeChild(notification);\n        }\n      }, 500);\n    }\n  }, 8000);\n};\n\n/**\r\n * Affiche une notification d\'erreur\r\n */\nconst showErrorNotification = message => {\n  // Masquer d\'abord l\'indicateur de chargement\n  hideLoadingNotification();\n\n  // Créer une notification d\'erreur personnalisée\n  const notification = document.createElement("div");\n  notification.style.cssText = `\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background: linear-gradient(135deg, #f44336, #d32f2f);\n    color: white;\n    padding: 20px;\n    border-radius: 12px;\n    box-shadow: 0 8px 25px rgba(0,0,0,0.3);\n    z-index: 10000;\n    font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif;\n    max-width: 400px;\n    animation: slideIn 0.5s ease-out;\n  `;\n  notification.innerHTML = `\n    <div style="display: flex; align-items: center; margin-bottom: 15px;">\n      <span style="font-size: 24px; margin-right: 12px;">❌</span>\n      <h3 style="margin: 0; font-size: 18px; font-weight: 600;">Erreur de Génération</h3>\n    </div>\n    <p style="margin: 0 0 15px 0; line-height: 1.5; opacity: 0.9;">${message}</p>\n    <button id="close-error-notification" style="\n      background: rgba(255,255,255,0.2);\n      border: 2px solid rgba(255,255,255,0.3);\n      color: white;\n      padding: 10px 20px;\n      border-radius: 8px;\n      cursor: pointer;\n      font-weight: 600;\n      transition: all 0.3s ease;\n      width: 100%;\n    " onmouseover="this.style.background=\'rgba(255,255,255,0.3)\'" onmouseout="this.style.background=\'rgba(255,255,255,0.2)\'">\n      Fermer\n    </button>\n  `;\n\n  // Ajouter la notification au DOM\n  document.body.appendChild(notification);\n\n  // Gérer le clic sur "Fermer"\n  document.getElementById("close-error-notification").addEventListener("click", () => {\n    notification.style.animation = "slideOut 0.5s ease-in";\n    setTimeout(() => {\n      if (notification.parentNode) {\n        notification.parentNode.removeChild(notification);\n      }\n    }, 500);\n  });\n\n  // Auto-fermeture après 6 secondes\n  setTimeout(() => {\n    if (notification.parentNode) {\n      notification.style.animation = "slideOut 0.5s ease-in";\n      setTimeout(() => {\n        if (notification.parentNode) {\n          notification.parentNode.removeChild(notification);\n        }\n      }, 500);\n    }\n  }, 6000);\n};\n\n/**\r\n * Vérifie si un fichier existe dans S3 avant de rediriger\r\n */\nconst waitForFileToExist = async (filePath, maxAttempts = 10, delay = 1000) => {\n  console.log(`🔍 Vérification de l\'existence du fichier: ${filePath}`);\n  for (let attempt = 1; attempt <= maxAttempts; attempt++) {\n    try {\n      console.log(`🔄 Tentative ${attempt}/${maxAttempts}`);\n      const response = await axios__WEBPACK_IMPORTED_MODULE_0__["default"].head(`${API_BASE_URL}/download-pdf-from-s3/`, {\n        params: {\n          path: filePath\n        },\n        withCredentials: true,\n        timeout: 5000\n      });\n      if (response.status === 200) {\n        console.log(`✅ Fichier trouvé après ${attempt} tentative(s)`);\n        return true;\n      }\n    } catch (error) {\n      console.log(`⏳ Tentative ${attempt}/${maxAttempts} - Fichier pas encore disponible`);\n    }\n    if (attempt < maxAttempts) {\n      await new Promise(resolve => setTimeout(resolve, delay));\n    }\n  }\n  console.log(`⚠️ Fichier non trouvé après ${maxAttempts} tentatives`);\n  return false;\n};\n\n// ============================================================================\n// FONCTIONS UTILITAIRES POUR L\'EXTENSIBILITÉ\n// ============================================================================\n\n/**\r\n * Ajoute un nouveau type de document au système\r\n * @param {string} typeName - Nom du type de document\r\n * @param {Object} config - Configuration du type de document\r\n */\nconst addDocumentType = (typeName, config) => {\n  DOCUMENT_TYPES[typeName] = config;\n  console.log(`✅ Type de document ajouté: ${typeName}`);\n};\n\n/**\r\n * Retourne la liste des types de documents supportés\r\n */\nconst getSupportedDocumentTypes = () => {\n  return Object.keys(DOCUMENT_TYPES);\n};\n\n/**\r\n * Vérifie si un type de document est supporté\r\n */\nconst isDocumentTypeSupported = typeName => {\n  return typeName in DOCUMENT_TYPES;\n};\n\n// Export par défaut\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  generatePDFDrive,\n  addDocumentType,\n  getSupportedDocumentTypes,\n  isDocumentTypeSupported,\n  customSlugify\n});\n\n//# sourceURL=webpack://frontend/./src/utils/universalDriveGenerator.js?')},"./node_modules/css-loader/dist/cjs.js!./static/css/agentCard.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ "./node_modules/css-loader/dist/runtime/noSourceMaps.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.agent-card {\r\n  min-width: 400px;\r\n  max-width: 600px;\r\n  margin: 20px auto;\r\n  padding: 24px;\r\n  border-radius: 16px;\r\n  background: white;\r\n  box-shadow: 0 8px 24px rgba(27, 120, 188, 0.12);\r\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\r\n}\r\n\r\n.agent-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 24px;\r\n  padding-bottom: 16px;\r\n  border-bottom: 2px solid rgba(27, 120, 188, 0.1);\r\n}\r\n\r\n.agent-name {\r\n  color: rgba(27, 120, 188, 1);\r\n  font-size: 24px;\r\n  font-weight: 600;\r\n  margin: 0;\r\n}\r\n\r\n.month-selector {\r\n  margin: 16px 0 !important;\r\n}\r\n\r\n.month-selector .MuiSelect-select {\r\n  padding: 12px !important;\r\n  border: 2px solid rgba(27, 120, 188, 0.2) !important;\r\n  border-radius: 8px !important;\r\n  text-transform: uppercase !important;\r\n}\r\n\r\n.month-selector .MuiSelect-select:hover {\r\n  border-color: rgba(27, 120, 188, 0.5) !important;\r\n}\r\n\r\n.month-selector .MuiSelect-select:focus {\r\n  border-color: rgba(27, 120, 188, 1) !important;\r\n  box-shadow: 0 0 0 3px rgba(27, 120, 188, 0.1) !important;\r\n}\r\n\r\n.monthly-hours {\r\n  font-size: 18px;\r\n  color: rgba(27, 120, 188, 1);\r\n  font-weight: 500;\r\n  margin: 16px 0;\r\n  padding: 12px;\r\n  background-color: rgba(27, 120, 188, 0.05);\r\n  border-radius: 8px;\r\n}\r\n\r\n.monthly-cost {\r\n  font-size: 16px;\r\n  color: #666;\r\n  margin: 16px 0;\r\n  padding: 12px;\r\n  background-color: #f8f9fa;\r\n  border-radius: 8px;\r\n  border-left: 4px solid rgba(27, 120, 188, 1);\r\n}\r\n\r\n.events-container {\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n  margin-top: 20px;\r\n  padding-right: 16px;\r\n}\r\n\r\n.events-container::-webkit-scrollbar {\r\n  width: 8px;\r\n}\r\n\r\n.events-container::-webkit-scrollbar-track {\r\n  background: #f1f1f1;\r\n  border-radius: 4px;\r\n}\r\n\r\n.events-container::-webkit-scrollbar-thumb {\r\n  background: rgba(27, 120, 188, 0.5);\r\n  border-radius: 4px;\r\n}\r\n\r\n.events-container::-webkit-scrollbar-thumb:hover {\r\n  background: rgba(27, 120, 188, 0.7);\r\n}\r\n\r\n.event-item {\r\n  padding: 8px 12px;\r\n  margin: 8px 0;\r\n  border-radius: 6px;\r\n  font-weight: 500;\r\n  transition: transform 0.2s ease;\r\n}\r\n\r\n.event-item:hover {\r\n  transform: translateX(5px);\r\n}\r\n\r\n.event-item.present {\r\n  background-color: rgba(76, 175, 80, 0.1);\r\n  color: #2e7d32;\r\n}\r\n\r\n.event-item.absent {\r\n  background-color: rgba(244, 67, 54, 0.1);\r\n  color: #d32f2f;\r\n}\r\n\r\n.event-item.conge {\r\n  background-color: rgba(156, 39, 176, 0.1);\r\n  color: #7b1fa2;\r\n}\r\n\r\n.event-item.modified {\r\n  background-color: rgba(255, 152, 0, 0.1);\r\n  color: #ef6c00;\r\n}\r\n\r\n.no-events {\r\n  color: #666;\r\n  text-align: center;\r\n  padding: 20px;\r\n  font-style: italic;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .agent-card {\r\n    min-width: 300px;\r\n    margin: 16px;\r\n    padding: 16px;\r\n  }\r\n\r\n  .agent-name {\r\n    font-size: 20px;\r\n  }\r\n\r\n  .monthly-hours {\r\n    font-size: 16px;\r\n  }\r\n}\r\n\r\n/* Styles pour la section des primes */\r\n.primes-section {\r\n  margin-top: 20px;\r\n  padding: 16px;\r\n  background-color: rgba(27, 120, 188, 0.05);\r\n  border-radius: 8px;\r\n}\r\n\r\n.primes-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 16px;\r\n  h3 {\r\n    background-color: transparent;\r\n  }\r\n}\r\n\r\n.primes-header h3 {\r\n  margin: 0;\r\n  color: rgba(27, 120, 188, 1);\r\n  font-size: 18px;\r\n}\r\n\r\n.add-prime-button {\r\n  color: rgba(27, 120, 188, 1);\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.add-prime-button:hover {\r\n  background-color: rgba(27, 120, 188, 0.1);\r\n  transform: scale(1.1);\r\n}\r\n\r\n.delete-prime-button {\r\n  color: #d32f2f;\r\n  font-size: 1rem;\r\n}\r\n\r\n.delete-prime-button:hover {\r\n  background-color: rgba(211, 47, 47, 0.1);\r\n  transform: scale(1.1);\r\n}\r\n\r\n.primes-list {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.prime-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 8px 12px;\r\n  margin: 4px 0;\r\n  background-color: white;\r\n  border-radius: 4px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.prime-item:hover {\r\n  background-color: rgba(27, 120, 188, 0.05);\r\n}\r\n\r\n.prime-item span {\r\n  flex-grow: 1;\r\n  margin-right: 12px;\r\n}\r\n\r\n.no-primes {\r\n  text-align: center;\r\n  color: #666;\r\n  font-style: italic;\r\n  padding: 12px;\r\n}\r\n\r\n.primes-total {\r\n  margin-top: 16px;\r\n  padding-top: 16px;\r\n  border-top: 1px solid rgba(27, 120, 188, 0.2);\r\n  font-size: 16px;\r\n  color: rgba(27, 120, 188, 1);\r\n}\r\n\r\n/* Style pour les boutons avec icônes */\r\n.icon-button {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border: none;\r\n  background: none;\r\n  cursor: pointer;\r\n  padding: 8px;\r\n  border-radius: 50%;\r\n  transition: all 0.3s ease;\r\n}\r\n`, ""]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://frontend/./static/css/agentCard.css?./node_modules/css-loader/dist/cjs.js')},"./node_modules/css-loader/dist/cjs.js!./static/css/app.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ "./node_modules/css-loader/dist/runtime/noSourceMaps.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n___CSS_LOADER_EXPORT___.push([module.id, "@import url(https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Roboto+Slab:wght@400;700&display=swap);"]);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `a {\r\n  text-decoration: none;\r\n  color: inherit;\r\n}\r\n\r\na:hover {\r\n  text-decoration: none;\r\n  color: inherit;\r\n}\r\n\r\na:visited {\r\n  color: inherit;\r\n}\r\n\r\na:active {\r\n  color: inherit;\r\n}\r\n\r\nli {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\nul {\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n`, ""]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://frontend/./static/css/app.css?./node_modules/css-loader/dist/cjs.js')},"./node_modules/css-loader/dist/cjs.js!./static/css/breadcrumb.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ "./node_modules/css-loader/dist/runtime/noSourceMaps.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.breadcrumb-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  gap: 10px;\r\n  padding: 10px 16px;\r\n  background: transparent; /* pas de fond, le layout est déjà bleu */\r\n  border-bottom: none;\r\n  width: 100%; /* Prend toute la largeur disponible */\r\n}\r\n\r\n.breadcrumb-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  flex: 1;\r\n}\r\n\r\n.breadcrumb-right {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.breadcrumb-icon svg {\r\n  width: 22px;\r\n  height: 22px;\r\n  color: #ffffff; /* icône blanche sur fond bleu du layout */\r\n}\r\n\r\n.breadcrumb-line {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  font-family: "Roboto", Arial, sans-serif;\r\n  font-size: 14px;\r\n  color: #ffffff; /* texte lisible sur fond bleu */\r\n}\r\n\r\n.breadcrumb-section {\r\n  font-weight: 700;\r\n  color: #ffffff;\r\n}\r\n.breadcrumb-page {\r\n  font-weight: 500;\r\n  color: #f3f4f6;\r\n}\r\n.breadcrumb-context {\r\n  font-weight: 500;\r\n  color: #e5e7eb;\r\n}\r\n.breadcrumb-sep {\r\n  color: #d1d5db;\r\n}\r\n\r\n/* Styles pour la section utilisateur et le bouton de déconnexion */\r\n.user-section {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 15px;\r\n  background-color: rgba(255, 255, 255, 0.1);\r\n  padding: 8px 15px;\r\n  border-radius: 25px;\r\n  backdrop-filter: blur(10px);\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.user-name {\r\n  color: white;\r\n  font-weight: 500;\r\n  font-size: 14px;\r\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.logout-button {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  background-color: rgba(220, 53, 69, 0.9);\r\n  color: white;\r\n  border: none;\r\n  padding: 8px 12px;\r\n  border-radius: 20px;\r\n  font-size: 13px;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  text-decoration: none;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.logout-button:hover {\r\n  background-color: rgba(220, 53, 69, 1);\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.logout-button:active {\r\n  transform: translateY(0);\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.logout-button svg {\r\n  transition: transform 0.2s ease;\r\n}\r\n\r\n.logout-button:hover svg {\r\n  transform: translateX(2px);\r\n}\r\n\r\n/* Responsive design pour le breadcrumb */\r\n@media (max-width: 768px) {\r\n  .breadcrumb-header {\r\n    padding: 8px 12px;\r\n  }\r\n\r\n  .breadcrumb-line {\r\n    font-size: 12px;\r\n    gap: 6px;\r\n  }\r\n\r\n  .breadcrumb-icon svg {\r\n    width: 18px;\r\n    height: 18px;\r\n  }\r\n\r\n  .user-section {\r\n    padding: 6px 12px;\r\n    gap: 10px;\r\n  }\r\n\r\n  .user-name {\r\n    font-size: 13px;\r\n  }\r\n\r\n  .logout-button {\r\n    padding: 6px 10px;\r\n    font-size: 12px;\r\n  }\r\n\r\n  .logout-button span {\r\n    display: none; /* Cache le texte sur mobile, garde juste l\'icône */\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .breadcrumb-header {\r\n    padding: 6px 8px;\r\n  }\r\n\r\n  .breadcrumb-line {\r\n    font-size: 11px;\r\n    gap: 4px;\r\n  }\r\n\r\n  .breadcrumb-icon svg {\r\n    width: 16px;\r\n    height: 16px;\r\n  }\r\n\r\n  .user-name {\r\n    display: none; /* Cache le nom d\'utilisateur sur très petit écran */\r\n  }\r\n\r\n  .user-section {\r\n    padding: 8px;\r\n  }\r\n}\r\n`, ""]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://frontend/./static/css/breadcrumb.css?./node_modules/css-loader/dist/cjs.js')},"./node_modules/css-loader/dist/cjs.js!./static/css/calendrierAgent.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ "./node_modules/css-loader/dist/runtime/noSourceMaps.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/* ===== STYLE CALENDRIER AGENT MODERNE ===== */\r\n\r\n/* Container principal */\r\n.fc-media-screen {\r\n  padding: 20px;\r\n  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\r\n  border-radius: 15px;\r\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n/* En-tête du calendrier */\r\n.fc-toolbar {\r\n  background: white;\r\n  padding: 15px 20px;\r\n  border-radius: 10px;\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.fc-toolbar-title {\r\n  font-size: 24px !important;\r\n  font-weight: 700 !important;\r\n  color: #2c3e50 !important;\r\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n/* Boutons de navigation */\r\n.fc-button {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;\r\n  border: none !important;\r\n  border-radius: 8px !important;\r\n  padding: 8px 16px !important;\r\n  font-weight: 600 !important;\r\n  transition: all 0.3s ease !important;\r\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3) !important;\r\n}\r\n\r\n.fc-button:hover {\r\n  transform: translateY(-2px) !important;\r\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4) !important;\r\n}\r\n\r\n/* Zone des ressources (noms des agents) */\r\n.fc-datagrid {\r\n  background: white;\r\n  border-radius: 10px 0 0 10px;\r\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.fc-datagrid-cell-frame {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;\r\n  color: white !important;\r\n  font-weight: 600 !important;\r\n  font-size: 14px !important;\r\n  padding: 12px 15px !important;\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2) !important;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.fc-datagrid-cell-frame:hover {\r\n  background: linear-gradient(135deg, #764ba2 0%, #667eea 100%) !important;\r\n  cursor: pointer;\r\n  transform: scale(1.02);\r\n}\r\n\r\n/* En-tête des colonnes de dates */\r\n.fc-timeline-slot {\r\n  background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%) !important;\r\n  border-right: 1px solid rgba(255, 255, 255, 0.3) !important;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.fc-timeline-slot:hover {\r\n  background: linear-gradient(135deg, #0984e3 0%, #74b9ff 100%) !important;\r\n}\r\n\r\n.fc-timeline-slot-cushion {\r\n  color: white !important;\r\n  font-weight: 600 !important;\r\n  font-size: 12px !important;\r\n  padding: 8px 4px !important;\r\n}\r\n\r\n.fc-timeline-slot-inner {\r\n  color: white !important;\r\n}\r\n\r\n/* Événements - Style moderne avec badges */\r\n.fc-timeline-event {\r\n  font-size: 12px !important;\r\n  font-weight: 700 !important;\r\n  height: 85% !important;\r\n  margin: 2px 1px !important;\r\n  border-radius: 8px !important;\r\n  border: none !important;\r\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2) !important;\r\n  transition: all 0.3s ease !important;\r\n  text-transform: uppercase !important;\r\n  letter-spacing: 0.5px !important;\r\n  display: flex !important;\r\n  align-items: center !important;\r\n  justify-content: center !important;\r\n}\r\n\r\n.fc-timeline-event:hover {\r\n  transform: scale(1.05) !important;\r\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3) !important;\r\n  z-index: 10 !important;\r\n}\r\n\r\n/* Couleurs personnalisées pour les événements */\r\n.fc-event[style*="green"] {\r\n  background: linear-gradient(135deg, #00b894 0%, #00cec9 100%) !important;\r\n}\r\n\r\n.fc-event[style*="red"] {\r\n  background: linear-gradient(135deg, #e17055 0%, #d63031 100%) !important;\r\n}\r\n\r\n.fc-event[style*="orange"] {\r\n  background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%) !important;\r\n}\r\n\r\n.fc-event[style*="purple"] {\r\n  background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%) !important;\r\n}\r\n\r\n.fc-event[style*="blue"] {\r\n  background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%) !important;\r\n}\r\n\r\n.fc-event[style*="yellow"] {\r\n  background: linear-gradient(135deg, #fdcb6e 0%, #f39c12 100%) !important;\r\n  color: #2c3e50 !important;\r\n}\r\n\r\n.fc-event[style*="grey"] {\r\n  background: linear-gradient(135deg, #b2bec3 0%, #636e72 100%) !important;\r\n}\r\n\r\n/* Ligne de grille plus subtile */\r\n.fc-timeline-lane {\r\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05) !important;\r\n}\r\n\r\n.fc-timeline-lane:nth-child(even) {\r\n  background: rgba(255, 255, 255, 0.5) !important;\r\n}\r\n\r\n.fc-timeline-lane:nth-child(odd) {\r\n  background: rgba(248, 249, 250, 0.8) !important;\r\n}\r\n\r\n/* Scrollbar personnalisée */\r\n.fc-scroller::-webkit-scrollbar {\r\n  width: 8px;\r\n  height: 8px;\r\n}\r\n\r\n.fc-scroller::-webkit-scrollbar-track {\r\n  background: #f1f2f6;\r\n  border-radius: 10px;\r\n}\r\n\r\n.fc-scroller::-webkit-scrollbar-thumb {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  border-radius: 10px;\r\n}\r\n\r\n.fc-scroller::-webkit-scrollbar-thumb:hover {\r\n  background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);\r\n}\r\n\r\n/* Animation d\'apparition */\r\n.fc-timeline-event {\r\n  animation: slideInEvent 0.3s ease-out;\r\n}\r\n\r\n@keyframes slideInEvent {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(-10px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n/* Responsive */\r\n@media (max-width: 768px) {\r\n  .fc-toolbar-title {\r\n    font-size: 18px !important;\r\n  }\r\n\r\n  .fc-timeline-event {\r\n    font-size: 10px !important;\r\n  }\r\n\r\n  .fc-datagrid-cell-frame {\r\n    font-size: 12px !important;\r\n    padding: 8px 10px !important;\r\n  }\r\n}\r\n`, ""]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://frontend/./static/css/calendrierAgent.css?./node_modules/css-loader/dist/cjs.js')},"./node_modules/css-loader/dist/cjs.js!./static/css/creationPartie.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ "./node_modules/css-loader/dist/runtime/noSourceMaps.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `body {\r\n  padding-left: 5%;\r\n  max-width: 1920px;\r\n}\r\n\r\n.add-button {\r\n  background-color: transparent;\r\n  color: rgba(27, 120, 188, 1);\r\n}\r\n\r\n.add-button:hover {\r\n  color: white;\r\n  background-color: transparent;\r\n}\r\n\r\nspan {\r\n  font-size: large;\r\n}\r\n\r\n.creation-form {\r\n  background-color: white;\r\n  padding: 1rem;\r\n  border-radius: 10px;\r\n}\r\n\r\n.creation-form h2 {\r\n  color: rgba(27, 120, 188, 1);\r\n}\r\n\r\n.valider {\r\n  background-color: rgba(27, 120, 188, 1);\r\n  margin-right: 1rem;\r\n  width: auto;\r\n  min-width: 150px;\r\n}\r\n\r\n.supprimer {\r\n  background-color: rgb(255, 54, 54);\r\n  width: auto;\r\n  min-width: 150px;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  body {\r\n    padding-left: 10%;\r\n  }\r\n\r\n  .creation-form {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .valider,\r\n  .supprimer {\r\n    width: 100%;\r\n    margin-right: 0;\r\n  }\r\n}\r\n`, ""]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://frontend/./static/css/creationPartie.css?./node_modules/css-loader/dist/cjs.js')},"./node_modules/css-loader/dist/cjs.js!./static/css/header.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ "./node_modules/css-loader/dist/runtime/noSourceMaps.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.header {\r\n  position: absolute;\r\n  left: 0px;\r\n  top: 0px;\r\n  height: 350px;\r\n  width: 100%;\r\n  background-color: rgba(27, 120, 188, 1);\r\n  box-shadow: 6px 7px 20px -6px rgba(33, 33, 33, 1);\r\n  -webkit-box-shadow: 6px 7px 20px -6px rgba(33, 33, 33, 1);\r\n  -moz-box-shadow: 6px 7px 20px -6px rgba(33, 33, 33, 1);\r\n  z-index: -10;\r\n}\r\n`, ""]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://frontend/./static/css/header.css?./node_modules/css-loader/dist/cjs.js')},"./node_modules/css-loader/dist/cjs.js!./static/css/laborCostSummary.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ "./node_modules/css-loader/dist/runtime/noSourceMaps.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal-content {\r\n  background-color: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  min-width: 400px;\r\n  max-width: 600px;\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.close-button {\r\n  background: none;\r\n  border: none;\r\n  font-size: 24px;\r\n  cursor: pointer;\r\n  padding: 5px;\r\n}\r\n\r\n.summary-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-top: 10px;\r\n}\r\n\r\n.summary-table th,\r\n.summary-table td {\r\n  padding: 10px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.summary-table th {\r\n  background-color: rgba(27, 120, 188, 1);\r\n  color: white;\r\n}\r\n`, ""]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://frontend/./static/css/laborCostSummary.css?./node_modules/css-loader/dist/cjs.js')},"./node_modules/css-loader/dist/cjs.js!./static/css/layout.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ "./node_modules/css-loader/dist/runtime/noSourceMaps.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.layout {\r\n  display: flex; /* Utiliser flexbox pour aligner les éléments */\r\n}\r\n\r\n.main-content {\r\n  transition: margin-left 0.5s ease; /* Transition fluide */\r\n  margin-left: 0; /* Valeur par défaut */\r\n  width: 100%; /* Prendre toute la largeur disponible */\r\n}\r\n\r\n.sidebar-visible .main-content {\r\n  margin-left: 250px; /* Décalage lorsque la barre latérale est visible */\r\n}\r\n\r\n.sidebar-hidden .main-content {\r\n  margin-left: 0; /* Pas de décalage lorsque la barre latérale est cachée */\r\n}\r\n`, ""]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://frontend/./static/css/layout.css?./node_modules/css-loader/dist/cjs.js')},"./node_modules/css-loader/dist/cjs.js!./static/css/planningHebdo.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ "./node_modules/css-loader/dist/runtime/noSourceMaps.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/* Style pour le conteneur principal */\r\n.planning-table-container {\r\n  margin: 20px;\r\n  overflow-x: auto;\r\n  padding-right: 50px;\r\n}\r\n\r\n/* Style du tableau principal */\r\n.planning-table {\r\n  width: 90%;\r\n  border-collapse: collapse;\r\n  border-spacing: 0;\r\n  margin: 20px;\r\n  font-size: 14px;\r\n  background-color: white;\r\n  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n/* En-têtes */\r\n.planning-table th {\r\n  background-color: rgba(27, 120, 188, 1);\r\n  color: white;\r\n  font-weight: bold;\r\n  padding: 12px;\r\n  text-align: center;\r\n  border: 1px solid #ddd;\r\n}\r\n\r\n.planning-table .date-header {\r\n  min-width: 120px;\r\n}\r\n\r\n.planning-table .hours-header {\r\n  width: 80px;\r\n  background-color: rgba(27, 120, 188, 0.9);\r\n}\r\n\r\n/* Cellules */\r\n.planning-table td {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n  text-align: center;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n/* Colonne des heures */\r\n.planning-table .hour-cell {\r\n  background-color: rgba(27, 120, 188, 0.1);\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n/* Cellules du planning */\r\n.planning-table .schedule-cell {\r\n  cursor: pointer;\r\n  height: 40px;\r\n  position: relative;\r\n  font-weight: 500;\r\n  user-select: none;\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.planning-table .schedule-cell:hover {\r\n  transform: scale(1.02);\r\n  box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);\r\n  z-index: 1;\r\n}\r\n\r\n/* Style pour les cellules sélectionnées */\r\n.planning-table .schedule-cell.selected {\r\n  border: 3px solid #1976d2 !important;\r\n  box-shadow: 0 0 8px rgba(25, 118, 210, 0.5) !important;\r\n  transform: scale(1.02);\r\n  z-index: 2;\r\n}\r\n\r\n/* Animation pour la sélection */\r\n.planning-table .schedule-cell.selected::before {\r\n  content: "";\r\n  position: absolute;\r\n  top: -2px;\r\n  left: -2px;\r\n  right: -2px;\r\n  bottom: -2px;\r\n  background: linear-gradient(45deg, #1976d2, #42a5f5);\r\n  border-radius: 4px;\r\n  z-index: -1;\r\n  opacity: 0.1;\r\n}\r\n\r\n/* Style pour les informations de sélection */\r\n.selection-info {\r\n  font-weight: 600;\r\n  color: #1976d2;\r\n  font-size: 16px;\r\n}\r\n\r\n/* Styles pour les boutons d\'action avec icônes */\r\n.MuiIconButton-root {\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.MuiIconButton-root:hover {\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n/* Style pour l\'icône d\'information */\r\n.info-icon-tooltip {\r\n  color: #1976d2;\r\n  cursor: help;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.info-icon-tooltip:hover {\r\n  color: #1565c0;\r\n  transform: scale(1.1);\r\n}\r\n\r\n/* Style pour les cellules assignées */\r\n.planning-table .schedule-cell[style*="background-color: lightgreen"] {\r\n  color: #1b5e20;\r\n  font-weight: bold;\r\n}\r\n\r\n/* Style pour les cellules avec événements */\r\n.planning-table .schedule-cell[style*="background-color: red"],\r\n.planning-table .schedule-cell[style*="background-color: purple"] {\r\n  color: white;\r\n  font-weight: bold;\r\n}\r\n\r\n/* État de chargement */\r\n.planning-table.loading {\r\n  opacity: 0.6;\r\n  pointer-events: none;\r\n}\r\n\r\n/* Responsive design */\r\n@media screen and (max-width: 1024px) {\r\n  .planning-table {\r\n    font-size: 12px;\r\n  }\r\n\r\n  .planning-table td,\r\n  .planning-table th {\r\n    padding: 6px;\r\n  }\r\n\r\n  .planning-table .date-header {\r\n    min-width: 100px;\r\n  }\r\n}\r\n\r\n/* Style pour les boutons de contrôle */\r\n.controls-container {\r\n  margin: 20px 0;\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.btn-calculate,\r\n.btn-toggle-summary {\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.btn-calculate {\r\n  background-color: rgba(27, 120, 188, 1);\r\n  color: white;\r\n}\r\n\r\n.btn-toggle-summary {\r\n  background-color: #4caf50;\r\n  color: white;\r\n}\r\n\r\n/* Style pour les messages d\'erreur */\r\n.error-message {\r\n  color: #d32f2f;\r\n  margin: 10px 0;\r\n  padding: 8px;\r\n  background-color: #ffebee;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* Style amélioré pour la modal */\r\n.modal {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.7);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n  backdrop-filter: blur(5px);\r\n}\r\n\r\n.modal-content {\r\n  background-color: white;\r\n  padding: 30px;\r\n  border-radius: 12px;\r\n  width: 450px;\r\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);\r\n  transform: translateY(0);\r\n  animation: modalAppear 0.3s ease-out;\r\n}\r\n\r\n@keyframes modalAppear {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(-20px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n.modal-content h2 {\r\n  color: rgba(27, 120, 188, 1);\r\n  margin: 0 0 20px 0;\r\n  font-size: 24px;\r\n  text-align: center;\r\n  font-weight: 600;\r\n}\r\n\r\n.modal-content select {\r\n  width: 100%;\r\n  padding: 12px;\r\n  margin: 10px 0 20px 0;\r\n  border: 2px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  font-size: 16px;\r\n  color: #333;\r\n  transition: border-color 0.3s ease;\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.modal-content select:focus {\r\n  border-color: rgba(27, 120, 188, 0.8);\r\n  outline: none;\r\n  box-shadow: 0 0 0 3px rgba(27, 120, 188, 0.1);\r\n}\r\n\r\n.modal-content select:hover {\r\n  border-color: rgba(27, 120, 188, 0.5);\r\n}\r\n\r\n.modal-content option {\r\n  padding: 12px;\r\n}\r\n\r\n.modal-content .button-group {\r\n  display: flex;\r\n  gap: 12px;\r\n  margin-top: 20px;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.modal-content button {\r\n  padding: 10px 20px;\r\n  border-radius: 8px;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  border: none;\r\n  min-width: 120px;\r\n}\r\n\r\n.modal-content button:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.modal-content button:hover:not(:disabled) {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n`, ""]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://frontend/./static/css/planningHebdo.css?./node_modules/css-loader/dist/cjs.js')},"./node_modules/css-loader/dist/cjs.js!./static/css/slideBar.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ "./node_modules/css-loader/dist/runtime/noSourceMaps.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/* Palette et variables utiles */\r\n:root {\r\n  --sidebar-bg: #ffffff;\r\n  --sidebar-text: #1f2937; /* gray-800 */\r\n  --sidebar-muted: #6b7280; /* gray-500 */\r\n  --sidebar-border: #e5e7eb; /* gray-200 */\r\n  --sidebar-hover: #f3f4f6; /* gray-100 */\r\n  --sidebar-active-bg: #eaf2ff; /* primary tint */\r\n  --primary: #1976d2; /* MUI primary */\r\n}\r\n\r\n/* Reset minimal pour éviter les styles globaux parasites */\r\nbody {\r\n  margin: 0;\r\n}\r\nhtml {\r\n  margin: 0;\r\n}\r\n\r\n.slide-bar {\r\n  position: fixed;\r\n  left: 0;\r\n  top: 0;\r\n  height: 100vh;\r\n  width: 280px;\r\n  padding: 16px 14px;\r\n  background: var(--sidebar-bg);\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);\r\n  border-right: 1px solid var(--sidebar-border);\r\n  border-top-right-radius: 16px;\r\n  border-bottom-right-radius: 16px;\r\n  transform: translateX(0);\r\n  transition: transform 0.35s ease;\r\n  z-index: 900;\r\n  overflow-y: auto;\r\n}\r\n\r\n.slide-bar.hidden {\r\n  transform: translateX(-100%);\r\n}\r\n\r\n.slide-bar .logo-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 8px 0 20px 0;\r\n  margin-bottom: 8px;\r\n  border-bottom: 1px solid var(--sidebar-border);\r\n}\r\n\r\n.slide-bar .logo {\r\n  width: 140px;\r\n  height: auto;\r\n  object-fit: contain;\r\n}\r\n\r\n.slide-bar .link-container {\r\n  padding-top: 12px;\r\n  min-height: 400px;\r\n}\r\n\r\n.slide-bar ul {\r\n  list-style: none;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n/* S\'assure que chaque item occupe toute la largeur disponible */\r\n.slide-bar .link-container > ul > li {\r\n  display: block;\r\n  width: 100%;\r\n}\r\n/* Séparateur horizontal entre sections (items de premier niveau) */\r\n.slide-bar .link-container > ul > li:not(:last-child)::after {\r\n  content: "";\r\n  display: block;\r\n  height: 1px;\r\n  background: var(--sidebar-border);\r\n  margin: 8px 0 10px 0;\r\n}\r\n/* S\'assure que le li n\'impose pas une largeur intrinsèque à son premier enfant */\r\n.slide-bar .link-container > ul > li > * {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n\r\n/* Lien simple (Accueil, Drive) */\r\n.slide-bar .link-container > ul > li > a {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 14px;\r\n  padding: 14px 16px; /* aligné sur les catégories */\r\n  min-height: 44px;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  color: var(--sidebar-text);\r\n  text-decoration: none;\r\n  border-radius: 10px;\r\n  font-family: "Roboto", Arial, sans-serif;\r\n  font-weight: 500;\r\n  transition: background 0.2s ease, color 0.2s ease;\r\n}\r\n\r\n.slide-bar .link-container > ul > li > a:hover {\r\n  background: var(--sidebar-hover);\r\n}\r\n\r\n.slide-bar .link-container > ul > li > a.active {\r\n  background: var(--sidebar-active-bg);\r\n  color: var(--primary);\r\n}\r\n\r\n/* Icônes */\r\n.slide-bar .link-container svg {\r\n  width: 24px;\r\n  height: 24px;\r\n  color: var(--primary);\r\n  flex-shrink: 0;\r\n}\r\n\r\n/* Boutons catégorie (accordéon) */\r\n.slide-bar .category-button {\r\n  min-width: 251px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  gap: 12px;\r\n  padding: 14px 16px;\r\n  min-height: 44px;\r\n  margin: 4px 0;\r\n  background: transparent;\r\n  border: none;\r\n  border-radius: 10px;\r\n  color: var(--sidebar-text);\r\n  font-family: "Roboto", Arial, sans-serif;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: background 0.2s ease;\r\n  box-sizing: border-box;\r\n}\r\n\r\n/* Spécificité accrue: garantit 100% de largeur sur le bouton catégorie */\r\n.slide-bar .link-container > ul > li > .category-button {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n\r\n.slide-bar .category-button:hover {\r\n  background: var(--sidebar-hover);\r\n}\r\n\r\n.slide-bar .category-button.active {\r\n  background: var(--sidebar-active-bg);\r\n  color: var(--primary);\r\n}\r\n\r\n.slide-bar .category-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 14px;\r\n  flex: 1; /* Laisse le texte prendre plus de place */\r\n  min-width: 0; /* permet l\'ellipse */\r\n}\r\n\r\n.slide-bar .category-right {\r\n  color: var(--sidebar-muted);\r\n  display: flex;\r\n  align-items: center;\r\n  display: none; /* icône accordéon supprimée */\r\n}\r\n\r\n/* Forcer le libellé sur une seule ligne avec ellipse si trop long */\r\n.slide-bar .category-left {\r\n  white-space: nowrap;\r\n}\r\n.slide-bar .category-left span,\r\n.slide-bar .category-left .label {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n/* Sous-menu */\r\n.slide-bar .submenu {\r\n  margin: 4px 0 8px 0;\r\n  padding-left: 0;\r\n  border-left: none; /* pleine largeur sans recul visuel */\r\n}\r\n\r\n/* Sous-groupes dans Document */\r\n.slide-bar .submenu-group {\r\n  margin: 8px 0 10px 0;\r\n}\r\n.slide-bar .submenu-group-label {\r\n  color: var(--sidebar-muted);\r\n  font-size: 12px;\r\n  font-weight: 700;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.04em;\r\n  margin: 8px 0 4px 0;\r\n}\r\n.slide-bar .submenu-group-links {\r\n  margin: 0;\r\n  padding: 0; /* aligné avec pleine largeur */\r\n  list-style: none;\r\n}\r\n\r\n.slide-bar .submenu li a {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  padding: 12px 16px;\r\n  min-height: 40px;\r\n  margin: 2px 0;\r\n  color: #374151; /* gray-700 */\r\n  text-decoration: none;\r\n  border-radius: 8px;\r\n  font-weight: 500;\r\n  transition: background 0.2s ease, color 0.2s ease;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n/* Indicateur gauche (petit rectangle horizontal arrondi) */\r\n.slide-bar .submenu li a::before {\r\n  content: "";\r\n  width: 4px; /* vertical */\r\n  height: 18px; /* barre plus haute */\r\n  background: var(--sidebar-border);\r\n  border-radius: 9999px;\r\n  flex-shrink: 0;\r\n  transition: background 0.2s ease, height 0.2s ease;\r\n}\r\n\r\n.slide-bar .submenu li a.active::before {\r\n  background: var(--primary);\r\n}\r\n\r\n.slide-bar .submenu li a:hover {\r\n  background: var(--sidebar-hover);\r\n  color: var(--primary);\r\n}\r\n\r\n.slide-bar .submenu li a.active {\r\n  background: var(--sidebar-active-bg);\r\n  color: var(--primary);\r\n}\r\n\r\n/* Animation (optionnelle si on supprime display:none en JS) */\r\n.slide-bar .submenu.collapsed {\r\n  max-height: 0;\r\n  overflow: hidden;\r\n  transition: max-height 0.25s ease;\r\n}\r\n\r\n.slide-bar .submenu.expanded {\r\n  max-height: 600px; /* suffisamment grand pour contenir les items */\r\n  transition: max-height 0.3s ease;\r\n}\r\n\r\n/* Boutons d’ouverture/fermeture */\r\n.burger-button,\r\n.close-button {\r\n  background: rgba(255, 255, 255, 0.9);\r\n  border: 1px solid var(--sidebar-border);\r\n  width: 36px;\r\n  height: 36px;\r\n  border-radius: 8px;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  position: fixed;\r\n  top: 14px;\r\n  left: 14px;\r\n  z-index: 1000;\r\n  color: var(--sidebar-text);\r\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n/* S\'assure que le bouton burger reste visible quand la sidebar est masquée */\r\n.slide-bar.hidden + .burger-button,\r\nbody .burger-button {\r\n  display: inline-flex;\r\n}\r\n\r\n/* Agrandir l\'icône des catégories aussi */\r\n.slide-bar .category-button svg {\r\n  width: 24px;\r\n  height: 24px;\r\n}\r\n\r\n.burger-button:focus,\r\n.close-button:focus {\r\n  outline: 2px solid var(--primary);\r\n  outline-offset: 2px;\r\n}\r\n\r\n/* Responsive */\r\n@media (max-width: 1024px) {\r\n  .slide-bar {\r\n    width: 260px;\r\n  }\r\n}\r\n\r\n@media (max-width: 640px) {\r\n  .slide-bar {\r\n    width: 88vw;\r\n  }\r\n}\r\n`, ""]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://frontend/./static/css/slideBar.css?./node_modules/css-loader/dist/cjs.js')},"./src/img/logo.png":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__webpack_require__.p + "src/img/logo.png");\n\n//# sourceURL=webpack://frontend/./src/img/logo.png?')},"./static/css/agentCard.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_agentCard_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../node_modules/css-loader/dist/cjs.js!./agentCard.css */ "./node_modules/css-loader/dist/cjs.js!./static/css/agentCard.css");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\noptions.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");\noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_agentCard_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_agentCard_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_agentCard_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_agentCard_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);\n\n\n//# sourceURL=webpack://frontend/./static/css/agentCard.css?')},"./static/css/app.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_app_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../node_modules/css-loader/dist/cjs.js!./app.css */ "./node_modules/css-loader/dist/cjs.js!./static/css/app.css");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\noptions.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");\noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_app_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_app_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_app_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_app_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);\n\n\n//# sourceURL=webpack://frontend/./static/css/app.css?')},"./static/css/breadcrumb.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_breadcrumb_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../node_modules/css-loader/dist/cjs.js!./breadcrumb.css */ "./node_modules/css-loader/dist/cjs.js!./static/css/breadcrumb.css");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\noptions.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");\noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_breadcrumb_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_breadcrumb_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_breadcrumb_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_breadcrumb_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);\n\n\n//# sourceURL=webpack://frontend/./static/css/breadcrumb.css?')},"./static/css/calendrierAgent.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_calendrierAgent_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../node_modules/css-loader/dist/cjs.js!./calendrierAgent.css */ "./node_modules/css-loader/dist/cjs.js!./static/css/calendrierAgent.css");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\noptions.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");\noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_calendrierAgent_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_calendrierAgent_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_calendrierAgent_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_calendrierAgent_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);\n\n\n//# sourceURL=webpack://frontend/./static/css/calendrierAgent.css?')},"./static/css/creationPartie.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_creationPartie_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../node_modules/css-loader/dist/cjs.js!./creationPartie.css */ "./node_modules/css-loader/dist/cjs.js!./static/css/creationPartie.css");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\noptions.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");\noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_creationPartie_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_creationPartie_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_creationPartie_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_creationPartie_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);\n\n\n//# sourceURL=webpack://frontend/./static/css/creationPartie.css?')},"./static/css/header.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_header_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../node_modules/css-loader/dist/cjs.js!./header.css */ "./node_modules/css-loader/dist/cjs.js!./static/css/header.css");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\noptions.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");\noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_header_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_header_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_header_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_header_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);\n\n\n//# sourceURL=webpack://frontend/./static/css/header.css?')},"./static/css/laborCostSummary.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_laborCostSummary_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../node_modules/css-loader/dist/cjs.js!./laborCostSummary.css */ "./node_modules/css-loader/dist/cjs.js!./static/css/laborCostSummary.css");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\noptions.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");\noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_laborCostSummary_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_laborCostSummary_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_laborCostSummary_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_laborCostSummary_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);\n\n\n//# sourceURL=webpack://frontend/./static/css/laborCostSummary.css?')},"./static/css/layout.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_layout_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../node_modules/css-loader/dist/cjs.js!./layout.css */ "./node_modules/css-loader/dist/cjs.js!./static/css/layout.css");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\noptions.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");\noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_layout_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_layout_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_layout_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_layout_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);\n\n\n//# sourceURL=webpack://frontend/./static/css/layout.css?')},"./static/css/planningHebdo.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_planningHebdo_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../node_modules/css-loader/dist/cjs.js!./planningHebdo.css */ "./node_modules/css-loader/dist/cjs.js!./static/css/planningHebdo.css");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\noptions.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");\noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_planningHebdo_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_planningHebdo_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_planningHebdo_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_planningHebdo_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);\n\n\n//# sourceURL=webpack://frontend/./static/css/planningHebdo.css?')},"./static/css/slideBar.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_slideBar_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../node_modules/css-loader/dist/cjs.js!./slideBar.css */ "./node_modules/css-loader/dist/cjs.js!./static/css/slideBar.css");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\noptions.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");\noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_slideBar_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_slideBar_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_slideBar_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_slideBar_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);\n\n\n//# sourceURL=webpack://frontend/./static/css/slideBar.css?')}},__webpack_module_cache__={},deferred,leafPrototypes,getProto;function __webpack_require__(e){var _=__webpack_module_cache__[e];if(void 0!==_)return _.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(e,_,n,t)=>{if(!_){var a=1/0;for(l=0;l<deferred.length;l++){for(var[_,n,t]=deferred[l],r=!0,i=0;i<_.length;i++)(!1&t||a>=t)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](_[i])))?_.splice(i--,1):(r=!1,t<a&&(a=t));if(r){deferred.splice(l--,1);var o=n();void 0!==o&&(e=o)}}return e}t=t||0;for(var l=deferred.length;l>0&&deferred[l-1][2]>t;l--)deferred[l]=deferred[l-1];deferred[l]=[_,n,t]},__webpack_require__.n=e=>{var _=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(_,{a:_}),_},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,_){if(1&_&&(e=this(e)),8&_)return e;if("object"==typeof e&&e){if(4&_&&e.__esModule)return e;if(16&_&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var t={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var a=2&_&&e;"object"==typeof a&&!~leafPrototypes.indexOf(a);a=getProto(a))Object.getOwnPropertyNames(a).forEach((_=>t[_]=()=>e[_]));return t.default=()=>e,__webpack_require__.d(n,t),n},__webpack_require__.d=(e,_)=>{for(var n in _)__webpack_require__.o(_,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:_[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,_)=>Object.prototype.hasOwnProperty.call(e,_),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var _=__webpack_require__.g.document;if(!e&&_&&(_.currentScript&&"SCRIPT"===_.currentScript.tagName.toUpperCase()&&(e=_.currentScript.src),!e)){var n=_.getElementsByTagName("script");if(n.length)for(var t=n.length-1;t>-1&&(!e||!/^http(s?):/.test(e));)e=n[t--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),(()=>{var e={main:0};__webpack_require__.O.j=_=>0===e[_];var _=(_,n)=>{var t,a,[r,i,o]=n,l=0;if(r.some((_=>0!==e[_]))){for(t in i)__webpack_require__.o(i,t)&&(__webpack_require__.m[t]=i[t]);if(o)var s=o(__webpack_require__)}for(_&&_(n);l<r.length;l++)a=r[l],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return __webpack_require__.O(s)},n=self.webpackChunkfrontend=self.webpackChunkfrontend||[];n.forEach(_.bind(null,0)),n.push=_.bind(null,n.push.bind(n))})(),__webpack_require__.nc=void 0;var __webpack_exports__=__webpack_require__.O(void 0,["vendors"],(()=>__webpack_require__("./src/index.js")));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();